(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const p of c)if(p.type==="childList")for(const j of p.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&s(j)}).observe(document,{childList:!0,subtree:!0});function r(c){const p={};return c.integrity&&(p.integrity=c.integrity),c.referrerPolicy&&(p.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?p.credentials="include":c.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function s(c){if(c.ep)return;c.ep=!0;const p=r(c);fetch(c.href,p)}})();const style="",proj4Defs=[["EPSG:4301","+proj=longlat +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +no_defs +type=crs"],["EPSG:4612","+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs"],["EPSG:6668","+proj=longlat +ellps=GRS80 +no_defs +type=crs"],["EPSG:30161","+proj=tmerc +lat_0=33 +lon_0=129.5 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:30162","+proj=tmerc +lat_0=33 +lon_0=131 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:30163","+proj=tmerc +lat_0=36 +lon_0=132.166666666667 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:30164","+proj=tmerc +lat_0=33 +lon_0=133.5 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:30165","+proj=tmerc +lat_0=36 +lon_0=134.333333333333 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:30166","+proj=tmerc +lat_0=36 +lon_0=136 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:30167","+proj=tmerc +lat_0=36 +lon_0=137.166666666667 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:30168","+proj=tmerc +lat_0=36 +lon_0=138.5 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:30169","+proj=tmerc +lat_0=36 +lon_0=139.833333333333 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:30170","+proj=tmerc +lat_0=40 +lon_0=140.833333333333 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:30171","+proj=tmerc +lat_0=44 +lon_0=140.25 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:30172","+proj=tmerc +lat_0=44 +lon_0=142.25 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:30173","+proj=tmerc +lat_0=44 +lon_0=144.25 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:30174","+proj=tmerc +lat_0=26 +lon_0=142 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:30175","+proj=tmerc +lat_0=26 +lon_0=127.5 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:30176","+proj=tmerc +lat_0=26 +lon_0=124 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:30177","+proj=tmerc +lat_0=26 +lon_0=131 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:30178","+proj=tmerc +lat_0=20 +lon_0=136 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:30179","+proj=tmerc +lat_0=26 +lon_0=154 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +towgs84=-146.414,507.337,680.507,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:2443","+proj=tmerc +lat_0=33 +lon_0=129.5 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:2444","+proj=tmerc +lat_0=33 +lon_0=131 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:2445","+proj=tmerc +lat_0=36 +lon_0=132.1666666666667 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:2446","+proj=tmerc +lat_0=33 +lon_0=133.5 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:2447","+proj=tmerc +lat_0=36 +lon_0=134.3333333333333 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:2448","+proj=tmerc +lat_0=36 +lon_0=136 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:2449","+proj=tmerc +lat_0=36 +lon_0=137.1666666666667 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:2450","+proj=tmerc +lat_0=36 +lon_0=138.5 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:2451","+proj=tmerc +lat_0=36 +lon_0=139.8333333333333 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:2452","+proj=tmerc +lat_0=40 +lon_0=140.8333333333333 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:2453","+proj=tmerc +lat_0=44 +lon_0=140.25 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:2454","+proj=tmerc +lat_0=44 +lon_0=142.25 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:2455","+proj=tmerc +lat_0=44 +lon_0=144.25 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:2456","+proj=tmerc +lat_0=26 +lon_0=142 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:2457","+proj=tmerc +lat_0=26 +lon_0=127.5 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:2458","+proj=tmerc +lat_0=26 +lon_0=124 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:2459","+proj=tmerc +lat_0=26 +lon_0=131 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:2460","+proj=tmerc +lat_0=20 +lon_0=136 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:2461","+proj=tmerc +lat_0=26 +lon_0=154 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:6669","+proj=tmerc +lat_0=33 +lon_0=129.5 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:6670","+proj=tmerc +lat_0=33 +lon_0=131 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:6671","+proj=tmerc +lat_0=36 +lon_0=132.166666666667 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:6672","+proj=tmerc +lat_0=33 +lon_0=133.5 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:6673","+proj=tmerc +lat_0=36 +lon_0=134.333333333333 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:6674","+proj=tmerc +lat_0=36 +lon_0=136 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:6675","+proj=tmerc +lat_0=36 +lon_0=137.166666666667 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:6676","+proj=tmerc +lat_0=36 +lon_0=138.5 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:6677","+proj=tmerc +lat_0=36 +lon_0=139.833333333333 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:6678","+proj=tmerc +lat_0=40 +lon_0=140.833333333333 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:6679","+proj=tmerc +lat_0=44 +lon_0=140.25 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:6680","+proj=tmerc +lat_0=44 +lon_0=142.25 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:6681","+proj=tmerc +lat_0=44 +lon_0=144.25 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:6682","+proj=tmerc +lat_0=26 +lon_0=142 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:6683","+proj=tmerc +lat_0=26 +lon_0=127.5 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:6684","+proj=tmerc +lat_0=26 +lon_0=124 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:6685","+proj=tmerc +lat_0=26 +lon_0=131 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:6686","+proj=tmerc +lat_0=20 +lon_0=136 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"],["EPSG:6687","+proj=tmerc +lat_0=26 +lon_0=154 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs"]],geodeticSystems={TOKYO:["EPSG:4301","EPSG:30161","EPSG:30162","EPSG:30163","EPSG:30164","EPSG:30165","EPSG:30166","EPSG:30167","EPSG:30168","EPSG:30169","EPSG:30170","EPSG:30171","EPSG:30172","EPSG:30173","EPSG:30174","EPSG:30175","EPSG:30176","EPSG:30177","EPSG:30178","EPSG:30179"],JGD2000:["EPSG:4612","EPSG:2443","EPSG:2444","EPSG:2445","EPSG:2446","EPSG:2447","EPSG:2448","EPSG:2449","EPSG:2450","EPSG:2451","EPSG:2452","EPSG:2453","EPSG:2454","EPSG:2455","EPSG:2456","EPSG:2457","EPSG:2458","EPSG:2459","EPSG:2460","EPSG:2461"],JGD2011:["EPSG:6668","EPSG:6669","EPSG:6670","EPSG:6671","EPSG:6672","EPSG:6673","EPSG:6674","EPSG:6675","EPSG:6676","EPSG:6677","EPSG:6678","EPSG:6679","EPSG:6680","EPSG:6681","EPSG:6682","EPSG:6683","EPSG:6684","EPSG:6685","EPSG:6686","EPSG:6687"]},__vite_glob_0_0=""+new URL("GitHub_Logo-8fe8e40d.png",import.meta.url).href,__vite_glob_0_1=""+new URL("bluePinMarker-6f73d850.png",import.meta.url).href,__vite_glob_0_2=""+new URL("greenPinMarker-1029f695.png",import.meta.url).href,__vite_glob_0_3=""+new URL("redPinMarker-54449ece.png",import.meta.url).href,__vite_glob_0_4=""+new URL("yellowPinMarker-b4a4c361.png",import.meta.url).href;var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var leafletSrc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(r,s){s(e)})(commonjsGlobal,function(r){var s="1.9.4";function c(n){var l,m,T,G;for(m=1,T=arguments.length;m<T;m++){G=arguments[m];for(l in G)n[l]=G[l]}return n}var p=Object.create||function(){function n(){}return function(l){return n.prototype=l,new n}}();function j(n,l){var m=Array.prototype.slice;if(n.bind)return n.bind.apply(n,m.call(arguments,1));var T=m.call(arguments,2);return function(){return n.apply(l,T.length?T.concat(m.call(arguments)):arguments)}}var h=0;function u(n){return"_leaflet_id"in n||(n._leaflet_id=++h),n._leaflet_id}function g(n,l,m){var T,G,it,ft;return ft=function(){T=!1,G&&(it.apply(m,G),G=!1)},it=function(){T?G=arguments:(n.apply(m,arguments),setTimeout(ft,l),T=!0)},it}function N(n,l,m){var T=l[1],G=l[0],it=T-G;return n===T&&m?n:((n-G)%it+it)%it+G}function P(){return!1}function _(n,l){if(l===!1)return n;var m=Math.pow(10,l===void 0?6:l);return Math.round(n*m)/m}function f(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function w(n){return f(n).split(/\s+/)}function C(n,l){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?p(n.options):{});for(var m in l)n.options[m]=l[m];return n.options}function E(n,l,m){var T=[];for(var G in n)T.push(encodeURIComponent(m?G.toUpperCase():G)+"="+encodeURIComponent(n[G]));return(!l||l.indexOf("?")===-1?"?":"&")+T.join("&")}var S=/\{ *([\w_ -]+) *\}/g;function k(n,l){return n.replace(S,function(m,T){var G=l[T];if(G===void 0)throw new Error("No value provided for variable "+m);return typeof G=="function"&&(G=G(l)),G})}var B=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function q(n,l){for(var m=0;m<n.length;m++)if(n[m]===l)return m;return-1}var U="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function F(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var Y=0;function rt(n){var l=+new Date,m=Math.max(0,16-(l-Y));return Y=l+m,window.setTimeout(n,m)}var tt=window.requestAnimationFrame||F("RequestAnimationFrame")||rt,yt=window.cancelAnimationFrame||F("CancelAnimationFrame")||F("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function Et(n,l,m){if(m&&tt===rt)n.call(l);else return tt.call(window,j(n,l))}function pt(n){n&&yt.call(window,n)}var Pt={__proto__:null,extend:c,create:p,bind:j,get lastId(){return h},stamp:u,throttle:g,wrapNum:N,falseFn:P,formatNum:_,trim:f,splitWords:w,setOptions:C,getParamString:E,template:k,isArray:B,indexOf:q,emptyImageUrl:U,requestFn:tt,cancelFn:yt,requestAnimFrame:Et,cancelAnimFrame:pt};function Vt(){}Vt.extend=function(n){var l=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=l.__super__=this.prototype,T=p(m);T.constructor=l,l.prototype=T;for(var G in this)Object.prototype.hasOwnProperty.call(this,G)&&G!=="prototype"&&G!=="__super__"&&(l[G]=this[G]);return n.statics&&c(l,n.statics),n.includes&&(Ot(n.includes),c.apply(null,[T].concat(n.includes))),c(T,n),delete T.statics,delete T.includes,T.options&&(T.options=m.options?p(m.options):{},c(T.options,n.options)),T._initHooks=[],T.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var it=0,ft=T._initHooks.length;it<ft;it++)T._initHooks[it].call(this)}},l},Vt.include=function(n){var l=this.prototype.options;return c(this.prototype,n),n.options&&(this.prototype.options=l,this.mergeOptions(n.options)),this},Vt.mergeOptions=function(n){return c(this.prototype.options,n),this},Vt.addInitHook=function(n){var l=Array.prototype.slice.call(arguments,1),m=typeof n=="function"?n:function(){this[n].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function Ot(n){if(!(typeof L>"u"||!L||!L.Mixin)){n=B(n)?n:[n];for(var l=0;l<n.length;l++)n[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var _t={on:function(n,l,m){if(typeof n=="object")for(var T in n)this._on(T,n[T],l);else{n=w(n);for(var G=0,it=n.length;G<it;G++)this._on(n[G],l,m)}return this},off:function(n,l,m){if(!arguments.length)delete this._events;else if(typeof n=="object")for(var T in n)this._off(T,n[T],l);else{n=w(n);for(var G=arguments.length===1,it=0,ft=n.length;it<ft;it++)G?this._off(n[it]):this._off(n[it],l,m)}return this},_on:function(n,l,m,T){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(n,l,m)===!1){m===this&&(m=void 0);var G={fn:l,ctx:m};T&&(G.once=!0),this._events=this._events||{},this._events[n]=this._events[n]||[],this._events[n].push(G)}},_off:function(n,l,m){var T,G,it;if(this._events&&(T=this._events[n],!!T)){if(arguments.length===1){if(this._firingCount)for(G=0,it=T.length;G<it;G++)T[G].fn=P;delete this._events[n];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var ft=this._listens(n,l,m);if(ft!==!1){var At=T[ft];this._firingCount&&(At.fn=P,this._events[n]=T=T.slice()),T.splice(ft,1)}}},fire:function(n,l,m){if(!this.listens(n,m))return this;var T=c({},l,{type:n,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var G=this._events[n];if(G){this._firingCount=this._firingCount+1||1;for(var it=0,ft=G.length;it<ft;it++){var At=G[it],Nt=At.fn;At.once&&this.off(n,Nt,At.ctx),Nt.call(At.ctx||this,T)}this._firingCount--}}return m&&this._propagateEvent(T),this},listens:function(n,l,m,T){typeof n!="string"&&console.warn('"string" type argument expected');var G=l;typeof l!="function"&&(T=!!l,G=void 0,m=void 0);var it=this._events&&this._events[n];if(it&&it.length&&this._listens(n,G,m)!==!1)return!0;if(T){for(var ft in this._eventParents)if(this._eventParents[ft].listens(n,l,m,T))return!0}return!1},_listens:function(n,l,m){if(!this._events)return!1;var T=this._events[n]||[];if(!l)return!!T.length;m===this&&(m=void 0);for(var G=0,it=T.length;G<it;G++)if(T[G].fn===l&&T[G].ctx===m)return G;return!1},once:function(n,l,m){if(typeof n=="object")for(var T in n)this._on(T,n[T],l,!0);else{n=w(n);for(var G=0,it=n.length;G<it;G++)this._on(n[G],l,m,!0)}return this},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[u(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[u(n)],this},_propagateEvent:function(n){for(var l in this._eventParents)this._eventParents[l].fire(n.type,c({layer:n.target,propagatedFrom:n.target},n),!0)}};_t.addEventListener=_t.on,_t.removeEventListener=_t.clearAllEventListeners=_t.off,_t.addOneTimeEventListener=_t.once,_t.fireEvent=_t.fire,_t.hasEventListeners=_t.listens;var Xt=Vt.extend(_t);function qt(n,l,m){this.x=m?Math.round(n):n,this.y=m?Math.round(l):l}var oe=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};qt.prototype={clone:function(){return new qt(this.x,this.y)},add:function(n){return this.clone()._add($t(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract($t(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new qt(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new qt(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=oe(this.x),this.y=oe(this.y),this},distanceTo:function(n){n=$t(n);var l=n.x-this.x,m=n.y-this.y;return Math.sqrt(l*l+m*m)},equals:function(n){return n=$t(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=$t(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+_(this.x)+", "+_(this.y)+")"}};function $t(n,l,m){return n instanceof qt?n:B(n)?new qt(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new qt(n.x,n.y):new qt(n,l,m)}function fe(n,l){if(n)for(var m=l?[n,l]:n,T=0,G=m.length;T<G;T++)this.extend(m[T])}fe.prototype={extend:function(n){var l,m;if(!n)return this;if(n instanceof qt||typeof n[0]=="number"||"x"in n)l=m=$t(n);else if(n=et(n),l=n.min,m=n.max,!l||!m)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=m.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(n){return $t((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return $t(this.min.x,this.max.y)},getTopRight:function(){return $t(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var l,m;return typeof n[0]=="number"||n instanceof qt?n=$t(n):n=et(n),n instanceof fe?(l=n.min,m=n.max):l=m=n,l.x>=this.min.x&&m.x<=this.max.x&&l.y>=this.min.y&&m.y<=this.max.y},intersects:function(n){n=et(n);var l=this.min,m=this.max,T=n.min,G=n.max,it=G.x>=l.x&&T.x<=m.x,ft=G.y>=l.y&&T.y<=m.y;return it&&ft},overlaps:function(n){n=et(n);var l=this.min,m=this.max,T=n.min,G=n.max,it=G.x>l.x&&T.x<m.x,ft=G.y>l.y&&T.y<m.y;return it&&ft},isValid:function(){return!!(this.min&&this.max)},pad:function(n){var l=this.min,m=this.max,T=Math.abs(l.x-m.x)*n,G=Math.abs(l.y-m.y)*n;return et($t(l.x-T,l.y-G),$t(m.x+T,m.y+G))},equals:function(n){return n?(n=et(n),this.min.equals(n.getTopLeft())&&this.max.equals(n.getBottomRight())):!1}};function et(n,l){return!n||n instanceof fe?n:new fe(n,l)}function Ht(n,l){if(n)for(var m=l?[n,l]:n,T=0,G=m.length;T<G;T++)this.extend(m[T])}Ht.prototype={extend:function(n){var l=this._southWest,m=this._northEast,T,G;if(n instanceof he)T=n,G=n;else if(n instanceof Ht){if(T=n._southWest,G=n._northEast,!T||!G)return this}else return n?this.extend(Dt(n)||Jt(n)):this;return!l&&!m?(this._southWest=new he(T.lat,T.lng),this._northEast=new he(G.lat,G.lng)):(l.lat=Math.min(T.lat,l.lat),l.lng=Math.min(T.lng,l.lng),m.lat=Math.max(G.lat,m.lat),m.lng=Math.max(G.lng,m.lng)),this},pad:function(n){var l=this._southWest,m=this._northEast,T=Math.abs(l.lat-m.lat)*n,G=Math.abs(l.lng-m.lng)*n;return new Ht(new he(l.lat-T,l.lng-G),new he(m.lat+T,m.lng+G))},getCenter:function(){return new he((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new he(this.getNorth(),this.getWest())},getSouthEast:function(){return new he(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof he||"lat"in n?n=Dt(n):n=Jt(n);var l=this._southWest,m=this._northEast,T,G;return n instanceof Ht?(T=n.getSouthWest(),G=n.getNorthEast()):T=G=n,T.lat>=l.lat&&G.lat<=m.lat&&T.lng>=l.lng&&G.lng<=m.lng},intersects:function(n){n=Jt(n);var l=this._southWest,m=this._northEast,T=n.getSouthWest(),G=n.getNorthEast(),it=G.lat>=l.lat&&T.lat<=m.lat,ft=G.lng>=l.lng&&T.lng<=m.lng;return it&&ft},overlaps:function(n){n=Jt(n);var l=this._southWest,m=this._northEast,T=n.getSouthWest(),G=n.getNorthEast(),it=G.lat>l.lat&&T.lat<m.lat,ft=G.lng>l.lng&&T.lng<m.lng;return it&&ft},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,l){return n?(n=Jt(n),this._southWest.equals(n.getSouthWest(),l)&&this._northEast.equals(n.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Jt(n,l){return n instanceof Ht?n:new Ht(n,l)}function he(n,l,m){if(isNaN(n)||isNaN(l))throw new Error("Invalid LatLng object: ("+n+", "+l+")");this.lat=+n,this.lng=+l,m!==void 0&&(this.alt=+m)}he.prototype={equals:function(n,l){if(!n)return!1;n=Dt(n);var m=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return m<=(l===void 0?1e-9:l)},toString:function(n){return"LatLng("+_(this.lat,n)+", "+_(this.lng,n)+")"},distanceTo:function(n){return Kt.distance(this,Dt(n))},wrap:function(){return Kt.wrapLatLng(this)},toBounds:function(n){var l=180*n/40075017,m=l/Math.cos(Math.PI/180*this.lat);return Jt([this.lat-l,this.lng-m],[this.lat+l,this.lng+m])},clone:function(){return new he(this.lat,this.lng,this.alt)}};function Dt(n,l,m){return n instanceof he?n:B(n)&&typeof n[0]!="object"?n.length===3?new he(n[0],n[1],n[2]):n.length===2?new he(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new he(n.lat,"lng"in n?n.lng:n.lon,n.alt):l===void 0?null:new he(n,l,m)}var Wt={latLngToPoint:function(n,l){var m=this.projection.project(n),T=this.scale(l);return this.transformation._transform(m,T)},pointToLatLng:function(n,l){var m=this.scale(l),T=this.transformation.untransform(n,m);return this.projection.unproject(T)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var l=this.projection.bounds,m=this.scale(n),T=this.transformation.transform(l.min,m),G=this.transformation.transform(l.max,m);return new fe(T,G)},infinite:!1,wrapLatLng:function(n){var l=this.wrapLng?N(n.lng,this.wrapLng,!0):n.lng,m=this.wrapLat?N(n.lat,this.wrapLat,!0):n.lat,T=n.alt;return new he(m,l,T)},wrapLatLngBounds:function(n){var l=n.getCenter(),m=this.wrapLatLng(l),T=l.lat-m.lat,G=l.lng-m.lng;if(T===0&&G===0)return n;var it=n.getSouthWest(),ft=n.getNorthEast(),At=new he(it.lat-T,it.lng-G),Nt=new he(ft.lat-T,ft.lng-G);return new Ht(At,Nt)}},Kt=c({},Wt,{wrapLng:[-180,180],R:6371e3,distance:function(n,l){var m=Math.PI/180,T=n.lat*m,G=l.lat*m,it=Math.sin((l.lat-n.lat)*m/2),ft=Math.sin((l.lng-n.lng)*m/2),At=it*it+Math.cos(T)*Math.cos(G)*ft*ft,Nt=2*Math.atan2(Math.sqrt(At),Math.sqrt(1-At));return this.R*Nt}}),ae=6378137,de={R:ae,MAX_LATITUDE:85.0511287798,project:function(n){var l=Math.PI/180,m=this.MAX_LATITUDE,T=Math.max(Math.min(m,n.lat),-m),G=Math.sin(T*l);return new qt(this.R*n.lng*l,this.R*Math.log((1+G)/(1-G))/2)},unproject:function(n){var l=180/Math.PI;return new he((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*l,n.x*l/this.R)},bounds:function(){var n=ae*Math.PI;return new fe([-n,-n],[n,n])}()};function ye(n,l,m,T){if(B(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=l,this._c=m,this._d=T}ye.prototype={transform:function(n,l){return this._transform(n.clone(),l)},_transform:function(n,l){return l=l||1,n.x=l*(this._a*n.x+this._b),n.y=l*(this._c*n.y+this._d),n},untransform:function(n,l){return l=l||1,new qt((n.x/l-this._b)/this._a,(n.y/l-this._d)/this._c)}};function Oe(n,l,m,T){return new ye(n,l,m,T)}var Te=c({},Kt,{code:"EPSG:3857",projection:de,transformation:function(){var n=.5/(Math.PI*de.R);return Oe(n,.5,-n,.5)}()}),He=c({},Te,{code:"EPSG:900913"});function Ze(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Be(n,l){var m="",T,G,it,ft,At,Nt;for(T=0,it=n.length;T<it;T++){for(At=n[T],G=0,ft=At.length;G<ft;G++)Nt=At[G],m+=(G?"L":"M")+Nt.x+" "+Nt.y;m+=l?wt.svg?"z":"x":""}return m||"M0 0"}var dn=document.documentElement.style,fn="ActiveXObject"in window,Ve=fn&&!document.addEventListener,Ke="msLaunchUri"in navigator&&!("documentMode"in document),Xe=Yt("webkit"),D=Yt("android"),H=Yt("android 2")||Yt("android 3"),b=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),d=D&&Yt("Google")&&b<537&&!("AudioNode"in window),X=!!window.opera,ht=!Ke&&Yt("chrome"),dt=Yt("gecko")&&!Xe&&!X&&!fn,K=!ht&&Yt("safari"),W=Yt("phantom"),nt="OTransition"in dn,lt=navigator.platform.indexOf("Win")===0,bt=fn&&"transition"in dn,Rt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!H,Mt="MozPerspective"in dn,Tt=!window.L_DISABLE_3D&&(bt||Rt||Mt)&&!nt&&!W,jt=typeof orientation<"u"||Yt("mobile"),It=jt&&Xe,Zt=jt&&Rt,ce=!window.PointerEvent&&window.MSPointerEvent,ve=!!(window.PointerEvent||ce),Ct="ontouchstart"in window||!!window.TouchEvent,Ut=!window.L_NO_TOUCH&&(Ct||ve),at=jt&&X,st=jt&&dt,vt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,R=function(){var n=!1;try{var l=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",P,l),window.removeEventListener("testPassiveEventSupport",P,l)}catch{}return n}(),Q=function(){return!!document.createElement("canvas").getContext}(),ut=!!(document.createElementNS&&Ze("svg").createSVGRect),St=!!ut&&function(){var n=document.createElement("div");return n.innerHTML="<svg/>",(n.firstChild&&n.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ct=!ut&&function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var l=n.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),xt=navigator.platform.indexOf("Mac")===0,Ft=navigator.platform.indexOf("Linux")===0;function Yt(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var wt={ie:fn,ielt9:Ve,edge:Ke,webkit:Xe,android:D,android23:H,androidStock:d,opera:X,chrome:ht,gecko:dt,safari:K,phantom:W,opera12:nt,win:lt,ie3d:bt,webkit3d:Rt,gecko3d:Mt,any3d:Tt,mobile:jt,mobileWebkit:It,mobileWebkit3d:Zt,msPointer:ce,pointer:ve,touch:Ut,touchNative:Ct,mobileOpera:at,mobileGecko:st,retina:vt,passiveEvents:R,canvas:Q,svg:ut,vml:ct,inlineSvg:St,mac:xt,linux:Ft},te=wt.msPointer?"MSPointerDown":"pointerdown",le=wt.msPointer?"MSPointerMove":"pointermove",Ee=wt.msPointer?"MSPointerUp":"pointerup",mt=wt.msPointer?"MSPointerCancel":"pointercancel",kt={touchstart:te,touchmove:le,touchend:Ee,touchcancel:mt},zt={touchstart:gi,touchmove:qn,touchend:qn,touchcancel:qn},ne={},Me=!1;function _e(n,l,m){return l==="touchstart"&&yn(),zt[l]?(m=zt[l].bind(this,m),n.addEventListener(kt[l],m,!1),m):(console.warn("wrong event specified:",l),P)}function Se(n,l,m){if(!kt[l]){console.warn("wrong event specified:",l);return}n.removeEventListener(kt[l],m,!1)}function Pe(n){ne[n.pointerId]=n}function se(n){ne[n.pointerId]&&(ne[n.pointerId]=n)}function ue(n){delete ne[n.pointerId]}function yn(){Me||(document.addEventListener(te,Pe,!0),document.addEventListener(le,se,!0),document.addEventListener(Ee,ue,!0),document.addEventListener(mt,ue,!0),Me=!0)}function qn(n,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var m in ne)l.touches.push(ne[m]);l.changedTouches=[l],n(l)}}function gi(n,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&We(l),qn(n,l)}function Xn(n){var l={},m,T;for(T in n)m=n[T],l[T]=m&&m.bind?m.bind(n):m;return n=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var un=200;function En(n,l){n.addEventListener("dblclick",l);var m=0,T;function G(it){if(it.detail!==1){T=it.detail;return}if(!(it.pointerType==="mouse"||it.sourceCapabilities&&!it.sourceCapabilities.firesTouchEvents)){var ft=yi(it);if(!(ft.some(function(Nt){return Nt instanceof HTMLLabelElement&&Nt.attributes.for})&&!ft.some(function(Nt){return Nt instanceof HTMLInputElement||Nt instanceof HTMLSelectElement}))){var At=Date.now();At-m<=un?(T++,T===2&&l(Xn(it))):T=1,m=At}}}return n.addEventListener("click",G),{dblclick:l,simDblclick:G}}function zi(n,l){n.removeEventListener("dblclick",l.dblclick),n.removeEventListener("click",l.simDblclick)}var Jn=kn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),On=kn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),vi=On==="webkitTransition"||On==="OTransition"?On+"End":"transitionend";function Pn(n){return typeof n=="string"?document.getElementById(n):n}function pn(n,l){var m=n.style[l]||n.currentStyle&&n.currentStyle[l];if((!m||m==="auto")&&document.defaultView){var T=document.defaultView.getComputedStyle(n,null);m=T?T[l]:null}return m==="auto"?null:m}function we(n,l,m){var T=document.createElement(n);return T.className=l||"",m&&m.appendChild(T),T}function Ne(n){var l=n.parentNode;l&&l.removeChild(n)}function on(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function jn(n){var l=n.parentNode;l&&l.lastChild!==n&&l.appendChild(n)}function mn(n){var l=n.parentNode;l&&l.firstChild!==n&&l.insertBefore(n,l.firstChild)}function Nn(n,l){if(n.classList!==void 0)return n.classList.contains(l);var m=Rn(n);return m.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(m)}function be(n,l){if(n.classList!==void 0)for(var m=w(l),T=0,G=m.length;T<G;T++)n.classList.add(m[T]);else if(!Nn(n,l)){var it=Rn(n);Dn(n,(it?it+" ":"")+l)}}function ke(n,l){n.classList!==void 0?n.classList.remove(l):Dn(n,f((" "+Rn(n)+" ").replace(" "+l+" "," ")))}function Dn(n,l){n.className.baseVal===void 0?n.className=l:n.className.baseVal=l}function Rn(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function Je(n,l){"opacity"in n.style?n.style.opacity=l:"filter"in n.style&&_i(n,l)}function _i(n,l){var m=!1,T="DXImageTransform.Microsoft.Alpha";try{m=n.filters.item(T)}catch{if(l===1)return}l=Math.round(l*100),m?(m.Enabled=l!==100,m.Opacity=l):n.style.filter+=" progid:"+T+"(opacity="+l+")"}function kn(n){for(var l=document.documentElement.style,m=0;m<n.length;m++)if(n[m]in l)return n[m];return!1}function xn(n,l,m){var T=l||new qt(0,0);n.style[Jn]=(wt.ie3d?"translate("+T.x+"px,"+T.y+"px)":"translate3d("+T.x+"px,"+T.y+"px,0)")+(m?" scale("+m+")":"")}function Fe(n,l){n._leaflet_pos=l,wt.any3d?xn(n,l):(n.style.left=l.x+"px",n.style.top=l.y+"px")}function ze(n){return n._leaflet_pos||new qt(0,0)}var Fn,Hn,$n;if("onselectstart"in document)Fn=function(){ge(window,"selectstart",We)},Hn=function(){De(window,"selectstart",We)};else{var $e=kn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Fn=function(){if($e){var n=document.documentElement.style;$n=n[$e],n[$e]="none"}},Hn=function(){$e&&(document.documentElement.style[$e]=$n,$n=void 0)}}function Bn(){ge(window,"dragstart",We)}function Vn(){De(window,"dragstart",We)}var In,Le;function zn(n){for(;n.tabIndex===-1;)n=n.parentNode;n.style&&(wn(),In=n,Le=n.style.outlineStyle,n.style.outlineStyle="none",ge(window,"keydown",wn))}function wn(){In&&(In.style.outlineStyle=Le,In=void 0,Le=void 0,De(window,"keydown",wn))}function Qn(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function gn(n){var l=n.getBoundingClientRect();return{x:l.width/n.offsetWidth||1,y:l.height/n.offsetHeight||1,boundingClientRect:l}}var Ie={__proto__:null,TRANSFORM:Jn,TRANSITION:On,TRANSITION_END:vi,get:Pn,getStyle:pn,create:we,remove:Ne,empty:on,toFront:jn,toBack:mn,hasClass:Nn,addClass:be,removeClass:ke,setClass:Dn,getClass:Rn,setOpacity:Je,testProp:kn,setTransform:xn,setPosition:Fe,getPosition:ze,get disableTextSelection(){return Fn},get enableTextSelection(){return Hn},disableImageDrag:Bn,enableImageDrag:Vn,preventOutline:zn,restoreOutline:wn,getSizedParentNode:Qn,getScale:gn};function ge(n,l,m,T){if(l&&typeof l=="object")for(var G in l)ei(n,G,l[G],m);else{l=w(l);for(var it=0,ft=l.length;it<ft;it++)ei(n,l[it],m,T)}return this}var sn="_leaflet_events";function De(n,l,m,T){if(arguments.length===1)bi(n),delete n[sn];else if(l&&typeof l=="object")for(var G in l)ni(n,G,l[G],m);else if(l=w(l),arguments.length===2)bi(n,function(At){return q(l,At)!==-1});else for(var it=0,ft=l.length;it<ft;it++)ni(n,l[it],m,T);return this}function bi(n,l){for(var m in n[sn]){var T=m.split(/\d/)[0];(!l||l(T))&&ni(n,T,null,null,m)}}var ti={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ei(n,l,m,T){var G=l+u(m)+(T?"_"+u(T):"");if(n[sn]&&n[sn][G])return this;var it=function(At){return m.call(T||n,At||window.event)},ft=it;!wt.touchNative&&wt.pointer&&l.indexOf("touch")===0?it=_e(n,l,it):wt.touch&&l==="dblclick"?it=En(n,it):"addEventListener"in n?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?n.addEventListener(ti[l]||l,it,wt.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(it=function(At){At=At||window.event,ri(n,At)&&ft(At)},n.addEventListener(ti[l],it,!1)):n.addEventListener(l,ft,!1):n.attachEvent("on"+l,it),n[sn]=n[sn]||{},n[sn][G]=it}function ni(n,l,m,T,G){G=G||l+u(m)+(T?"_"+u(T):"");var it=n[sn]&&n[sn][G];if(!it)return this;!wt.touchNative&&wt.pointer&&l.indexOf("touch")===0?Se(n,l,it):wt.touch&&l==="dblclick"?zi(n,it):"removeEventListener"in n?n.removeEventListener(ti[l]||l,it,!1):n.detachEvent("on"+l,it),n[sn][G]=null}function Cn(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,this}function ii(n){return ei(n,"wheel",Cn),this}function Gn(n){return ge(n,"mousedown touchstart dblclick contextmenu",Cn),n._leaflet_disable_click=!0,this}function We(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function An(n){return We(n),Cn(n),this}function yi(n){if(n.composedPath)return n.composedPath();for(var l=[],m=n.target;m;)l.push(m),m=m.parentNode;return l}function Ei(n,l){if(!l)return new qt(n.clientX,n.clientY);var m=gn(l),T=m.boundingClientRect;return new qt((n.clientX-T.left)/m.x-l.clientLeft,(n.clientY-T.top)/m.y-l.clientTop)}var Gi=wt.linux&&wt.chrome?window.devicePixelRatio:wt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ji(n){return wt.edge?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/Gi:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}function ri(n,l){var m=l.relatedTarget;if(!m)return!0;try{for(;m&&m!==n;)m=m.parentNode}catch{return!1}return m!==n}var Wi={__proto__:null,on:ge,off:De,stopPropagation:Cn,disableScrollPropagation:ii,disableClickPropagation:Gn,preventDefault:We,stop:An,getPropagationPath:yi,getMousePosition:Ei,getWheelDelta:ji,isExternalTarget:ri,addListener:ge,removeListener:De},xi=Xt.extend({run:function(n,l,m,T){this.stop(),this._el=n,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(T||.5,.2),this._startPos=ze(n),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Et(this._animate,this),this._step()},_step:function(n){var l=+new Date-this._startTime,m=this._duration*1e3;l<m?this._runFrame(this._easeOut(l/m),n):(this._runFrame(1),this._complete())},_runFrame:function(n,l){var m=this._startPos.add(this._offset.multiplyBy(n));l&&m._round(),Fe(this._el,m),this.fire("step")},_complete:function(){pt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),Ce=Xt.extend({options:{crs:Te,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,l){l=C(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=j(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(Dt(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=On&&wt.any3d&&!wt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ge(this._proxy,vi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,l,m){if(l=l===void 0?this._zoom:this._limitZoom(l),n=this._limitCenter(Dt(n),l,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=c({animate:m.animate},m.zoom),m.pan=c({animate:m.animate,duration:m.duration},m.pan));var T=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,l,m.zoom):this._tryAnimatedPan(n,m.pan);if(T)return clearTimeout(this._sizeTimer),this}return this._resetView(n,l,m.pan&&m.pan.noMoveStart),this},setZoom:function(n,l){return this._loaded?this.setView(this.getCenter(),n,{zoom:l}):(this._zoom=n,this)},zoomIn:function(n,l){return n=n||(wt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+n,l)},zoomOut:function(n,l){return n=n||(wt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-n,l)},setZoomAround:function(n,l,m){var T=this.getZoomScale(l),G=this.getSize().divideBy(2),it=n instanceof qt?n:this.latLngToContainerPoint(n),ft=it.subtract(G).multiplyBy(1-1/T),At=this.containerPointToLatLng(G.add(ft));return this.setView(At,l,{zoom:m})},_getBoundsCenterZoom:function(n,l){l=l||{},n=n.getBounds?n.getBounds():Jt(n);var m=$t(l.paddingTopLeft||l.padding||[0,0]),T=$t(l.paddingBottomRight||l.padding||[0,0]),G=this.getBoundsZoom(n,!1,m.add(T));if(G=typeof l.maxZoom=="number"?Math.min(l.maxZoom,G):G,G===1/0)return{center:n.getCenter(),zoom:G};var it=T.subtract(m).divideBy(2),ft=this.project(n.getSouthWest(),G),At=this.project(n.getNorthEast(),G),Nt=this.unproject(ft.add(At).divideBy(2).add(it),G);return{center:Nt,zoom:G}},fitBounds:function(n,l){if(n=Jt(n),!n.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(n,l);return this.setView(m.center,m.zoom,l)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,l){return this.setView(n,this._zoom,{pan:l})},panBy:function(n,l){if(n=$t(n).round(),l=l||{},!n.x&&!n.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new xi,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){be(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,m,l.duration||.25,l.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,l,m){if(m=m||{},m.animate===!1||!wt.any3d)return this.setView(n,l,m);this._stop();var T=this.project(this.getCenter()),G=this.project(n),it=this.getSize(),ft=this._zoom;n=Dt(n),l=l===void 0?ft:l;var At=Math.max(it.x,it.y),Nt=At*this.getZoomScale(ft,l),Gt=G.distanceTo(T)||1,ee=1.42,me=ee*ee;function xe(Ge){var Vi=Ge?-1:1,qr=Ge?Nt:At,Yr=Nt*Nt-At*At+Vi*me*me*Gt*Gt,Zr=2*qr*me*Gt,ur=Yr/Zr,Lr=Math.sqrt(ur*ur+1)-ur,Kr=Lr<1e-9?-18:Math.log(Lr);return Kr}function en(Ge){return(Math.exp(Ge)-Math.exp(-Ge))/2}function Ye(Ge){return(Math.exp(Ge)+Math.exp(-Ge))/2}function hn(Ge){return en(Ge)/Ye(Ge)}var rn=xe(0);function Kn(Ge){return At*(Ye(rn)/Ye(rn+ee*Ge))}function zr(Ge){return At*(Ye(rn)*hn(rn+ee*Ge)-en(rn))/me}function Gr(Ge){return 1-Math.pow(1-Ge,1.5)}var Wr=Date.now(),Mr=(xe(1)-rn)/ee,Ur=m.duration?1e3*m.duration:1e3*Mr*.8;function Tr(){var Ge=(Date.now()-Wr)/Ur,Vi=Gr(Ge)*Mr;Ge<=1?(this._flyToFrame=Et(Tr,this),this._move(this.unproject(T.add(G.subtract(T).multiplyBy(zr(Vi)/Gt)),ft),this.getScaleZoom(At/Kn(Vi),ft),{flyTo:!0})):this._move(n,l)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),Tr.call(this),this},flyToBounds:function(n,l){var m=this._getBoundsCenterZoom(n,l);return this.flyTo(m.center,m.zoom,l)},setMaxBounds:function(n){return n=Jt(n),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),n.isValid()?(this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(n){var l=this.options.minZoom;return this.options.minZoom=n,this._loaded&&l!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var l=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&l!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,l){this._enforcingBounds=!0;var m=this.getCenter(),T=this._limitCenter(m,this._zoom,Jt(n));return m.equals(T)||this.panTo(T,l),this._enforcingBounds=!1,this},panInside:function(n,l){l=l||{};var m=$t(l.paddingTopLeft||l.padding||[0,0]),T=$t(l.paddingBottomRight||l.padding||[0,0]),G=this.project(this.getCenter()),it=this.project(n),ft=this.getPixelBounds(),At=et([ft.min.add(m),ft.max.subtract(T)]),Nt=At.getSize();if(!At.contains(it)){this._enforcingBounds=!0;var Gt=it.subtract(At.getCenter()),ee=At.extend(it).getSize().subtract(Nt);G.x+=Gt.x<0?-ee.x:ee.x,G.y+=Gt.y<0?-ee.y:ee.y,this.panTo(this.unproject(G),l),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=c({animate:!1,pan:!0},n===!0?{animate:!0}:n);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),T=l.divideBy(2).round(),G=m.divideBy(2).round(),it=T.subtract(G);return!it.x&&!it.y?this:(n.animate&&n.pan?this.panBy(it):(n.pan&&this._rawPanBy(it),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(j(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=c({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=j(this._handleGeolocationResponse,this),m=j(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,m,n):navigator.geolocation.getCurrentPosition(l,m,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){if(this._container._leaflet_id){var l=n.code,m=n.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(n){if(this._container._leaflet_id){var l=n.coords.latitude,m=n.coords.longitude,T=new he(l,m),G=T.toBounds(n.coords.accuracy*2),it=this._locateOptions;if(it.setView){var ft=this.getBoundsZoom(G);this.setView(T,it.maxZoom?Math.min(ft,it.maxZoom):ft)}var At={latlng:T,bounds:G,timestamp:n.timestamp};for(var Nt in n.coords)typeof n.coords[Nt]=="number"&&(At[Nt]=n.coords[Nt]);this.fire("locationfound",At)}},addHandler:function(n,l){if(!l)return this;var m=this[n]=new l(this);return this._handlers.push(m),this.options[n]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ne(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(pt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)Ne(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,l){var m="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),T=we("div",m,l||this._mapPane);return n&&(this._panes[n]=T),T},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),l=this.unproject(n.getBottomLeft()),m=this.unproject(n.getTopRight());return new Ht(l,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,l,m){n=Jt(n),m=$t(m||[0,0]);var T=this.getZoom()||0,G=this.getMinZoom(),it=this.getMaxZoom(),ft=n.getNorthWest(),At=n.getSouthEast(),Nt=this.getSize().subtract(m),Gt=et(this.project(At,T),this.project(ft,T)).getSize(),ee=wt.any3d?this.options.zoomSnap:1,me=Nt.x/Gt.x,xe=Nt.y/Gt.y,en=l?Math.max(me,xe):Math.min(me,xe);return T=this.getScaleZoom(en,T),ee&&(T=Math.round(T/(ee/100))*(ee/100),T=l?Math.ceil(T/ee)*ee:Math.floor(T/ee)*ee),Math.max(G,Math.min(it,T))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new qt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,l){var m=this._getTopLeftPoint(n,l);return new fe(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,l){var m=this.options.crs;return l=l===void 0?this._zoom:l,m.scale(n)/m.scale(l)},getScaleZoom:function(n,l){var m=this.options.crs;l=l===void 0?this._zoom:l;var T=m.zoom(n*m.scale(l));return isNaN(T)?1/0:T},project:function(n,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(Dt(n),l)},unproject:function(n,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng($t(n),l)},layerPointToLatLng:function(n){var l=$t(n).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(n){var l=this.project(Dt(n))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(Dt(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(Jt(n))},distance:function(n,l){return this.options.crs.distance(Dt(n),Dt(l))},containerPointToLayerPoint:function(n){return $t(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return $t(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var l=this.containerPointToLayerPoint($t(n));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Dt(n)))},mouseEventToContainerPoint:function(n){return Ei(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var l=this._container=Pn(n);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ge(l,"scroll",this._onScroll,this),this._containerId=u(l)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&wt.any3d,be(n,"leaflet-container"+(wt.touch?" leaflet-touch":"")+(wt.retina?" leaflet-retina":"")+(wt.ielt9?" leaflet-oldie":"")+(wt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=pn(n,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Fe(this._mapPane,new qt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(be(n.markerPane,"leaflet-zoom-hide"),be(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,l,m){Fe(this._mapPane,new qt(0,0));var T=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var G=this._zoom!==l;this._moveStart(G,m)._move(n,l)._moveEnd(G),this.fire("viewreset"),T&&this.fire("load")},_moveStart:function(n,l){return n&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(n,l,m,T){l===void 0&&(l=this._zoom);var G=this._zoom!==l;return this._zoom=l,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),T?m&&m.pinch&&this.fire("zoom",m):((G||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return pt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){Fe(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[u(this._container)]=this;var l=n?De:ge;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),wt.any3d&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){pt(this._resizeRequest),this._resizeRequest=Et(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,l){for(var m=[],T,G=l==="mouseout"||l==="mouseover",it=n.target||n.srcElement,ft=!1;it;){if(T=this._targets[u(it)],T&&(l==="click"||l==="preclick")&&this._draggableMoved(T)){ft=!0;break}if(T&&T.listens(l,!0)&&(G&&!ri(it,n)||(m.push(T),G))||it===this._container)break;it=it.parentNode}return!m.length&&!ft&&!G&&this.listens(l,!0)&&(m=[this]),m},_isClickDisabled:function(n){for(;n&&n!==this._container;){if(n._leaflet_disable_click)return!0;n=n.parentNode}},_handleDOMEvent:function(n){var l=n.target||n.srcElement;if(!(!this._loaded||l._leaflet_disable_events||n.type==="click"&&this._isClickDisabled(l))){var m=n.type;m==="mousedown"&&zn(l),this._fireDOMEvent(n,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,l,m){if(n.type==="click"){var T=c({},n);T.type="preclick",this._fireDOMEvent(T,T.type,m)}var G=this._findEventTargets(n,l);if(m){for(var it=[],ft=0;ft<m.length;ft++)m[ft].listens(l,!0)&&it.push(m[ft]);G=it.concat(G)}if(G.length){l==="contextmenu"&&We(n);var At=G[0],Nt={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var Gt=At.getLatLng&&(!At._radius||At._radius<=10);Nt.containerPoint=Gt?this.latLngToContainerPoint(At.getLatLng()):this.mouseEventToContainerPoint(n),Nt.layerPoint=this.containerPointToLayerPoint(Nt.containerPoint),Nt.latlng=Gt?At.getLatLng():this.layerPointToLatLng(Nt.layerPoint)}for(ft=0;ft<G.length;ft++)if(G[ft].fire(l,Nt,!0),Nt.originalEvent._stopped||G[ft].options.bubblingMouseEvents===!1&&q(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,l=this._handlers.length;n<l;n++)this._handlers[n].disable()},whenReady:function(n,l){return this._loaded?n.call(l||this,{target:this}):this.on("load",n,l),this},_getMapPanePos:function(){return ze(this._mapPane)||new qt(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,l){var m=n&&l!==void 0?this._getNewPixelOrigin(n,l):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,l){var m=this.getSize()._divideBy(2);return this.project(n,l)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,l,m){var T=this._getNewPixelOrigin(m,l);return this.project(n,l)._subtract(T)},_latLngBoundsToNewLayerBounds:function(n,l,m){var T=this._getNewPixelOrigin(m,l);return et([this.project(n.getSouthWest(),l)._subtract(T),this.project(n.getNorthWest(),l)._subtract(T),this.project(n.getSouthEast(),l)._subtract(T),this.project(n.getNorthEast(),l)._subtract(T)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,l,m){if(!m)return n;var T=this.project(n,l),G=this.getSize().divideBy(2),it=new fe(T.subtract(G),T.add(G)),ft=this._getBoundsOffset(it,m,l);return Math.abs(ft.x)<=1&&Math.abs(ft.y)<=1?n:this.unproject(T.add(ft),l)},_limitOffset:function(n,l){if(!l)return n;var m=this.getPixelBounds(),T=new fe(m.min.add(n),m.max.add(n));return n.add(this._getBoundsOffset(T,l))},_getBoundsOffset:function(n,l,m){var T=et(this.project(l.getNorthEast(),m),this.project(l.getSouthWest(),m)),G=T.min.subtract(n.min),it=T.max.subtract(n.max),ft=this._rebound(G.x,-it.x),At=this._rebound(G.y,-it.y);return new qt(ft,At)},_rebound:function(n,l){return n+l>0?Math.round(n-l)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(l))},_limitZoom:function(n){var l=this.getMinZoom(),m=this.getMaxZoom(),T=wt.any3d?this.options.zoomSnap:1;return T&&(n=Math.round(n/T)*T),Math.max(l,Math.min(m,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ke(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,l){var m=this._getCenterOffset(n)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,l),!0)},_createAnimProxy:function(){var n=this._proxy=we("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(l){var m=Jn,T=this._proxy.style[m];xn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),T===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ne(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),l=this.getZoom();xn(this._proxy,this.project(n,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,l,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var T=this.getZoomScale(l),G=this._getCenterOffset(n)._divideBy(1-1/T);return m.animate!==!0&&!this.getSize().contains(G)?!1:(Et(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(n,l,!0)},this),!0)},_animateZoom:function(n,l,m,T){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=l,be(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:l,noUpdate:T}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(j(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ke(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ui(n,l){return new Ce(n,l)}var an=Vt.extend({options:{position:"topright"},initialize:function(n){C(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var l=this._map;return l&&l.removeControl(this),this.options.position=n,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var l=this._container=this.onAdd(n),m=this.getPosition(),T=n._controlCorners[m];return be(l,"leaflet-control"),m.indexOf("bottom")!==-1?T.insertBefore(l,T.firstChild):T.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ne(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),Wn=function(n){return new an(n)};Ce.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},l="leaflet-",m=this._controlContainer=we("div",l+"control-container",this._container);function T(G,it){var ft=l+G+" "+l+it;n[G+it]=we("div",ft,m)}T("top","left"),T("top","right"),T("bottom","left"),T("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)Ne(this._controlCorners[n]);Ne(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var wi=an.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,l,m,T){return m<T?-1:T<m?1:0}},initialize:function(n,l,m){C(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var T in n)this._addLayer(n[T],T);for(T in l)this._addLayer(l[T],T,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return an.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,l){return this._addLayer(n,l),this._map?this._update():this},addOverlay:function(n,l){return this._addLayer(n,l,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var l=this._getLayer(u(n));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){be(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(be(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):ke(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ke(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",l=this._container=we("div",n),m=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Gn(l),ii(l);var T=this._section=we("section",n+"-list");m&&(this._map.on("click",this.collapse,this),ge(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var G=this._layersLink=we("a",n+"-toggle",l);G.href="#",G.title="Layers",G.setAttribute("role","button"),ge(G,{keydown:function(it){it.keyCode===13&&this._expandSafely()},click:function(it){We(it),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=we("div",n+"-base",T),this._separator=we("div",n+"-separator",T),this._overlaysList=we("div",n+"-overlays",T),l.appendChild(T)},_getLayer:function(n){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&u(this._layers[l].layer)===n)return this._layers[l]},_addLayer:function(n,l,m){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:l,overlay:m}),this.options.sortLayers&&this._layers.sort(j(function(T,G){return this.options.sortFunction(T.layer,G.layer,T.name,G.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;on(this._baseLayersList),on(this._overlaysList),this._layerControlInputs=[];var n,l,m,T,G=0;for(m=0;m<this._layers.length;m++)T=this._layers[m],this._addItem(T),l=l||T.overlay,n=n||!T.overlay,G+=T.overlay?0:1;return this.options.hideSingleBase&&(n=n&&G>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=l&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var l=this._getLayer(u(n.target)),m=l.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;m&&this._map.fire(m,l)},_createRadioElement:function(n,l){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(l?' checked="checked"':"")+"/>",T=document.createElement("div");return T.innerHTML=m,T.firstChild},_addItem:function(n){var l=document.createElement("label"),m=this._map.hasLayer(n.layer),T;n.overlay?(T=document.createElement("input"),T.type="checkbox",T.className="leaflet-control-layers-selector",T.defaultChecked=m):T=this._createRadioElement("leaflet-base-layers_"+u(this),m),this._layerControlInputs.push(T),T.layerId=u(n.layer),ge(T,"click",this._onInputClick,this);var G=document.createElement("span");G.innerHTML=" "+n.name;var it=document.createElement("span");l.appendChild(it),it.appendChild(T),it.appendChild(G);var ft=n.overlay?this._overlaysList:this._baseLayersList;return ft.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var n=this._layerControlInputs,l,m,T=[],G=[];this._handlingClick=!0;for(var it=n.length-1;it>=0;it--)l=n[it],m=this._getLayer(l.layerId).layer,l.checked?T.push(m):l.checked||G.push(m);for(it=0;it<G.length;it++)this._map.hasLayer(G[it])&&this._map.removeLayer(G[it]);for(it=0;it<T.length;it++)this._map.hasLayer(T[it])||this._map.addLayer(T[it]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,l,m,T=this._map.getZoom(),G=n.length-1;G>=0;G--)l=n[G],m=this._getLayer(l.layerId).layer,l.disabled=m.options.minZoom!==void 0&&T<m.options.minZoom||m.options.maxZoom!==void 0&&T>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var n=this._section;this._preventClick=!0,ge(n,"click",We),this.expand();var l=this;setTimeout(function(){De(n,"click",We),l._preventClick=!1})}}),qi=function(n,l,m){return new wi(n,l,m)},oi=an.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(n){var l="leaflet-control-zoom",m=we("div",l+" leaflet-bar"),T=this.options;return this._zoomInButton=this._createButton(T.zoomInText,T.zoomInTitle,l+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(T.zoomOutText,T.zoomOutTitle,l+"-out",m,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,l,m,T,G){var it=we("a",m,T);return it.innerHTML=n,it.href="#",it.title=l,it.setAttribute("role","button"),it.setAttribute("aria-label",l),Gn(it),ge(it,"click",An),ge(it,"click",G,this),ge(it,"click",this._refocusOnMap,this),it},_updateDisabled:function(){var n=this._map,l="leaflet-disabled";ke(this._zoomInButton,l),ke(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||n._zoom===n.getMinZoom())&&(be(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||n._zoom===n.getMaxZoom())&&(be(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ce.mergeOptions({zoomControl:!0}),Ce.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new oi,this.addControl(this.zoomControl))});var Yi=function(n){return new oi(n)},Ci=an.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var l="leaflet-control-scale",m=we("div",l),T=this.options;return this._addScales(T,l+"-line",m),n.on(T.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),m},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,l,m){n.metric&&(this._mScale=we("div",l,m)),n.imperial&&(this._iScale=we("div",l,m))},_update:function(){var n=this._map,l=n.getSize().y/2,m=n.distance(n.containerPointToLatLng([0,l]),n.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(m)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var l=this._getRoundNum(n),m=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,m,l/n)},_updateImperial:function(n){var l=n*3.2808399,m,T,G;l>5280?(m=l/5280,T=this._getRoundNum(m),this._updateScale(this._iScale,T+" mi",T/m)):(G=this._getRoundNum(l),this._updateScale(this._iScale,G+" ft",G/l))},_updateScale:function(n,l,m){n.style.width=Math.round(this.options.maxWidth*m)+"px",n.innerHTML=l},_getRoundNum:function(n){var l=Math.pow(10,(Math.floor(n)+"").length-1),m=n/l;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,l*m}}),Zi=function(n){return new Ci(n)},Ki='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',si=an.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(wt.inlineSvg?Ki+" ":"")+"Leaflet</a>"},initialize:function(n){C(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=we("div","leaflet-control-attribution"),Gn(this._container);for(var l in n._layers)n._layers[l].getAttribution&&this.addAttribution(n._layers[l].getAttribution());return this._update(),n.on("layeradd",this._addAttribution,this),this._container},onRemove:function(n){n.off("layeradd",this._addAttribution,this)},_addAttribution:function(n){n.layer.getAttribution&&(this.addAttribution(n.layer.getAttribution()),n.layer.once("remove",function(){this.removeAttribution(n.layer.getAttribution())},this))},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(this._map){var n=[];for(var l in this._attributions)this._attributions[l]&&n.push(l);var m=[];this.options.prefix&&m.push(this.options.prefix),n.length&&m.push(n.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});Ce.mergeOptions({attributionControl:!0}),Ce.addInitHook(function(){this.options.attributionControl&&new si().addTo(this)});var Xi=function(n){return new si(n)};an.Layers=wi,an.Zoom=oi,an.Scale=Ci,an.Attribution=si,Wn.layers=qi,Wn.zoom=Yi,Wn.scale=Zi,Wn.attribution=Xi;var cn=Vt.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});cn.addTo=function(n,l){return n.addHandler(l,this),this};var Ji={Events:_t},Ai=wt.touch?"touchstart mousedown":"mousedown",_n=Xt.extend({options:{clickTolerance:3},initialize:function(n,l,m,T){C(this,T),this._element=n,this._dragStartTarget=l||n,this._preventOutline=m},enable:function(){this._enabled||(ge(this._dragStartTarget,Ai,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_n._dragging===this&&this.finishDrag(!0),De(this._dragStartTarget,Ai,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(this._enabled&&(this._moved=!1,!Nn(this._element,"leaflet-zoom-anim"))){if(n.touches&&n.touches.length!==1){_n._dragging===this&&this.finishDrag();return}if(!(_n._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(_n._dragging=this,this._preventOutline&&zn(this._element),Bn(),Fn(),!this._moving)){this.fire("down");var l=n.touches?n.touches[0]:n,m=Qn(this._element);this._startPoint=new qt(l.clientX,l.clientY),this._startPos=ze(this._element),this._parentScale=gn(m);var T=n.type==="mousedown";ge(document,T?"mousemove":"touchmove",this._onMove,this),ge(document,T?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(n){if(this._enabled){if(n.touches&&n.touches.length>1){this._moved=!0;return}var l=n.touches&&n.touches.length===1?n.touches[0]:n,m=new qt(l.clientX,l.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,We(n),this._moved||(this.fire("dragstart"),this._moved=!0,be(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),be(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=n,this._updatePosition())}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),Fe(this._element,this._newPos),this.fire("drag",n)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(n){ke(document.body,"leaflet-dragging"),this._lastTarget&&(ke(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),De(document,"mousemove touchmove",this._onMove,this),De(document,"mouseup touchend touchcancel",this._onUp,this),Vn(),Hn();var l=this._moved&&this._moving;this._moving=!1,_n._dragging=!1,l&&this.fire("dragend",{noInertia:n,distance:this._newPos.distanceTo(this._startPos)})}});function Mi(n,l,m){var T,G=[1,4,2,8],it,ft,At,Nt,Gt,ee,me,xe;for(it=0,ee=n.length;it<ee;it++)n[it]._code=Mn(n[it],l);for(At=0;At<4;At++){for(me=G[At],T=[],it=0,ee=n.length,ft=ee-1;it<ee;ft=it++)Nt=n[it],Gt=n[ft],Nt._code&me?Gt._code&me||(xe=Yn(Gt,Nt,me,l,m),xe._code=Mn(xe,l),T.push(xe)):(Gt._code&me&&(xe=Yn(Gt,Nt,me,l,m),xe._code=Mn(xe,l),T.push(xe)),T.push(Nt));n=T}return n}function Ti(n,l){var m,T,G,it,ft,At,Nt,Gt,ee;if(!n||n.length===0)throw new Error("latlngs not passed");nn(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var me=Dt([0,0]),xe=Jt(n),en=xe.getNorthWest().distanceTo(xe.getSouthWest())*xe.getNorthEast().distanceTo(xe.getNorthWest());en<1700&&(me=ai(n));var Ye=n.length,hn=[];for(m=0;m<Ye;m++){var rn=Dt(n[m]);hn.push(l.project(Dt([rn.lat-me.lat,rn.lng-me.lng])))}for(At=Nt=Gt=0,m=0,T=Ye-1;m<Ye;T=m++)G=hn[m],it=hn[T],ft=G.y*it.x-it.y*G.x,Nt+=(G.x+it.x)*ft,Gt+=(G.y+it.y)*ft,At+=ft*3;At===0?ee=hn[0]:ee=[Nt/At,Gt/At];var Kn=l.unproject($t(ee));return Dt([Kn.lat+me.lat,Kn.lng+me.lng])}function ai(n){for(var l=0,m=0,T=0,G=0;G<n.length;G++){var it=Dt(n[G]);l+=it.lat,m+=it.lng,T++}return Dt([l/T,m/T])}var Qi={__proto__:null,clipPolygon:Mi,polygonCenter:Ti,centroid:ai};function Li(n,l){if(!l||!n.length)return n.slice();var m=l*l;return n=nr(n,m),n=er(n,m),n}function Si(n,l,m){return Math.sqrt(Un(n,l,m,!0))}function tr(n,l,m){return Un(n,l,m)}function er(n,l){var m=n.length,T=typeof Uint8Array!=void 0+""?Uint8Array:Array,G=new T(m);G[0]=G[m-1]=1,li(n,G,l,0,m-1);var it,ft=[];for(it=0;it<m;it++)G[it]&&ft.push(n[it]);return ft}function li(n,l,m,T,G){var it=0,ft,At,Nt;for(At=T+1;At<=G-1;At++)Nt=Un(n[At],n[T],n[G],!0),Nt>it&&(ft=At,it=Nt);it>m&&(l[ft]=1,li(n,l,m,T,ft),li(n,l,m,ft,G))}function nr(n,l){for(var m=[n[0]],T=1,G=0,it=n.length;T<it;T++)ir(n[T],n[G])>l&&(m.push(n[T]),G=T);return G<it-1&&m.push(n[it-1]),m}var Ni;function Ii(n,l,m,T,G){var it=T?Ni:Mn(n,m),ft=Mn(l,m),At,Nt,Gt;for(Ni=ft;;){if(!(it|ft))return[n,l];if(it&ft)return!1;At=it||ft,Nt=Yn(n,l,At,m,G),Gt=Mn(Nt,m),At===it?(n=Nt,it=Gt):(l=Nt,ft=Gt)}}function Yn(n,l,m,T,G){var it=l.x-n.x,ft=l.y-n.y,At=T.min,Nt=T.max,Gt,ee;return m&8?(Gt=n.x+it*(Nt.y-n.y)/ft,ee=Nt.y):m&4?(Gt=n.x+it*(At.y-n.y)/ft,ee=At.y):m&2?(Gt=Nt.x,ee=n.y+ft*(Nt.x-n.x)/it):m&1&&(Gt=At.x,ee=n.y+ft*(At.x-n.x)/it),new qt(Gt,ee,G)}function Mn(n,l){var m=0;return n.x<l.min.x?m|=1:n.x>l.max.x&&(m|=2),n.y<l.min.y?m|=4:n.y>l.max.y&&(m|=8),m}function ir(n,l){var m=l.x-n.x,T=l.y-n.y;return m*m+T*T}function Un(n,l,m,T){var G=l.x,it=l.y,ft=m.x-G,At=m.y-it,Nt=ft*ft+At*At,Gt;return Nt>0&&(Gt=((n.x-G)*ft+(n.y-it)*At)/Nt,Gt>1?(G=m.x,it=m.y):Gt>0&&(G+=ft*Gt,it+=At*Gt)),ft=n.x-G,At=n.y-it,T?ft*ft+At*At:new qt(G,it)}function nn(n){return!B(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"}function Oi(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),nn(n)}function Pi(n,l){var m,T,G,it,ft,At,Nt,Gt;if(!n||n.length===0)throw new Error("latlngs not passed");nn(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var ee=Dt([0,0]),me=Jt(n),xe=me.getNorthWest().distanceTo(me.getSouthWest())*me.getNorthEast().distanceTo(me.getNorthWest());xe<1700&&(ee=ai(n));var en=n.length,Ye=[];for(m=0;m<en;m++){var hn=Dt(n[m]);Ye.push(l.project(Dt([hn.lat-ee.lat,hn.lng-ee.lng])))}for(m=0,T=0;m<en-1;m++)T+=Ye[m].distanceTo(Ye[m+1])/2;if(T===0)Gt=Ye[0];else for(m=0,it=0;m<en-1;m++)if(ft=Ye[m],At=Ye[m+1],G=ft.distanceTo(At),it+=G,it>T){Nt=(it-T)/G,Gt=[At.x-Nt*(At.x-ft.x),At.y-Nt*(At.y-ft.y)];break}var rn=l.unproject($t(Gt));return Dt([rn.lat+ee.lat,rn.lng+ee.lng])}var rr={__proto__:null,simplify:Li,pointToSegmentDistance:Si,closestPointOnSegment:tr,clipSegment:Ii,_getEdgeIntersection:Yn,_getBitCode:Mn,_sqClosestPointOnSegment:Un,isFlat:nn,_flat:Oi,polylineCenter:Pi},ui={project:function(n){return new qt(n.lng,n.lat)},unproject:function(n){return new he(n.y,n.x)},bounds:new fe([-180,-90],[180,90])},ci={R:6378137,R_MINOR:6356752314245179e-9,bounds:new fe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var l=Math.PI/180,m=this.R,T=n.lat*l,G=this.R_MINOR/m,it=Math.sqrt(1-G*G),ft=it*Math.sin(T),At=Math.tan(Math.PI/4-T/2)/Math.pow((1-ft)/(1+ft),it/2);return T=-m*Math.log(Math.max(At,1e-10)),new qt(n.lng*l*m,T)},unproject:function(n){for(var l=180/Math.PI,m=this.R,T=this.R_MINOR/m,G=Math.sqrt(1-T*T),it=Math.exp(-n.y/m),ft=Math.PI/2-2*Math.atan(it),At=0,Nt=.1,Gt;At<15&&Math.abs(Nt)>1e-7;At++)Gt=G*Math.sin(ft),Gt=Math.pow((1-Gt)/(1+Gt),G/2),Nt=Math.PI/2-2*Math.atan(it*Gt)-ft,ft+=Nt;return new he(ft*l,n.x*l/m)}},or={__proto__:null,LonLat:ui,Mercator:ci,SphericalMercator:de},sr=c({},Kt,{code:"EPSG:3395",projection:ci,transformation:function(){var n=.5/(Math.PI*ci.R);return Oe(n,.5,-n,.5)}()}),Di=c({},Kt,{code:"EPSG:4326",projection:ui,transformation:Oe(1/180,1,-1/180,.5)}),ar=c({},Wt,{projection:ui,transformation:Oe(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,l){var m=l.lng-n.lng,T=l.lat-n.lat;return Math.sqrt(m*m+T*T)},infinite:!0});Wt.Earth=Kt,Wt.EPSG3395=sr,Wt.EPSG3857=Te,Wt.EPSG900913=He,Wt.EPSG4326=Di,Wt.Simple=ar;var Qe=Xt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[u(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[u(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var l=n.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var m=this.getEvents();l.on(m,this),this.once("remove",function(){l.off(m,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Ce.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var l=u(n);return this._layers[l]?this:(this._layers[l]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var l=u(n);return this._layers[l]?(this._loaded&&n.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return u(n)in this._layers},eachLayer:function(n,l){for(var m in this._layers)n.call(l,this._layers[m]);return this},_addLayers:function(n){n=n?B(n)?n:[n]:[];for(var l=0,m=n.length;l<m;l++)this.addLayer(n[l])},_addZoomLimit:function(n){(!isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[u(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var l=u(n);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,l=-1/0,m=this._getZoomSpan();for(var T in this._zoomBoundLayers){var G=this._zoomBoundLayers[T].options;n=G.minZoom===void 0?n:Math.min(n,G.minZoom),l=G.maxZoom===void 0?l:Math.max(l,G.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=n===1/0?void 0:n,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ue=Qe.extend({initialize:function(n,l){C(this,l),this._layers={};var m,T;if(n)for(m=0,T=n.length;m<T;m++)this.addLayer(n[m])},addLayer:function(n){var l=this.getLayerId(n);return this._layers[l]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var l=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(n){var l=typeof n=="number"?n:this.getLayerId(n);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var l=Array.prototype.slice.call(arguments,1),m,T;for(m in this._layers)T=this._layers[m],T[n]&&T[n].apply(T,l);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,l){for(var m in this._layers)n.call(l,this._layers[m]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return u(n)}}),hi=function(n,l){return new Ue(n,l)},ln=Ue.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),Ue.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),Ue.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new Ht;for(var l in this._layers){var m=this._layers[l];n.extend(m.getBounds?m.getBounds():m.getLatLng())}return n}}),Tn=function(n,l){return new ln(n,l)},Ln=Vt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(n){C(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,l){var m=this._getIconUrl(n);if(!m){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var T=this._createImg(m,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(T,n),(this.options.crossOrigin||this.options.crossOrigin==="")&&(T.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),T},_setIconStyles:function(n,l){var m=this.options,T=m[l+"Size"];typeof T=="number"&&(T=[T,T]);var G=$t(T),it=$t(l==="shadow"&&m.shadowAnchor||m.iconAnchor||G&&G.divideBy(2,!0));n.className="leaflet-marker-"+l+" "+(m.className||""),it&&(n.style.marginLeft=-it.x+"px",n.style.marginTop=-it.y+"px"),G&&(n.style.width=G.x+"px",n.style.height=G.y+"px")},_createImg:function(n,l){return l=l||document.createElement("img"),l.src=n,l},_getIconUrl:function(n){return wt.retina&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function di(n){return new Ln(n)}var vn=Ln.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return typeof vn.imagePath!="string"&&(vn.imagePath=this._detectIconPath()),(this.options.imagePath||vn.imagePath)+Ln.prototype._getIconUrl.call(this,n)},_stripUrl:function(n){var l=function(m,T,G){var it=T.exec(m);return it&&it[G]};return n=l(n,/^url\((['"])?(.+)\1\)$/,2),n&&l(n,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var n=we("div","leaflet-default-icon-path",document.body),l=pn(n,"background-image")||pn(n,"backgroundImage");if(document.body.removeChild(n),l=this._stripUrl(l),l)return l;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),Ri=cn.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new _n(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),be(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ke(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var l=this._marker,m=l._map,T=this._marker.options.autoPanSpeed,G=this._marker.options.autoPanPadding,it=ze(l._icon),ft=m.getPixelBounds(),At=m.getPixelOrigin(),Nt=et(ft.min._subtract(At).add(G),ft.max._subtract(At).subtract(G));if(!Nt.contains(it)){var Gt=$t((Math.max(Nt.max.x,it.x)-Nt.max.x)/(ft.max.x-Nt.max.x)-(Math.min(Nt.min.x,it.x)-Nt.min.x)/(ft.min.x-Nt.min.x),(Math.max(Nt.max.y,it.y)-Nt.max.y)/(ft.max.y-Nt.max.y)-(Math.min(Nt.min.y,it.y)-Nt.min.y)/(ft.min.y-Nt.min.y)).multiplyBy(T);m.panBy(Gt,{animate:!1}),this._draggable._newPos._add(Gt),this._draggable._startPos._add(Gt),Fe(l._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=Et(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(pt(this._panRequest),this._panRequest=Et(this._adjustPan.bind(this,n)))},_onDrag:function(n){var l=this._marker,m=l._shadow,T=ze(l._icon),G=l._map.layerPointToLatLng(T);m&&Fe(m,T),l._latlng=G,n.latlng=G,n.oldLatLng=this._oldLatLng,l.fire("move",n).fire("drag",n)},_onDragEnd:function(n){pt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),o=Qe.extend({options:{icon:new vn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,l){C(this,l),this._latlng=Dt(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var l=this._latlng;return this._latlng=Dt(n),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=n.icon.createIcon(this._icon),T=!1;m!==this._icon&&(this._icon&&this._removeIcon(),T=!0,n.title&&(m.title=n.title),m.tagName==="IMG"&&(m.alt=n.alt||"")),be(m,l),n.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ge(m,"focus",this._panOnFocus,this);var G=n.icon.createShadow(this._shadow),it=!1;G!==this._shadow&&(this._removeShadow(),it=!0),G&&(be(G,l),G.alt=""),this._shadow=G,n.opacity<1&&this._updateOpacity(),T&&this.getPane().appendChild(this._icon),this._initInteraction(),G&&it&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&De(this._icon,"focus",this._panOnFocus,this),Ne(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ne(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&Fe(this._icon,n),this._shadow&&Fe(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var l=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(be(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ri)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ri(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&Je(this._icon,n),this._shadow&&Je(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var n=this._map;if(n){var l=this.options.icon.options,m=l.iconSize?$t(l.iconSize):$t(0,0),T=l.iconAnchor?$t(l.iconAnchor):$t(0,0);n.panInside(this._latlng,{paddingTopLeft:T,paddingBottomRight:m.subtract(T)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function a(n,l){return new o(n,l)}var v=Qe.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return C(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),M=v.extend({options:{fill:!0,radius:10},initialize:function(n,l){C(this,l),this._latlng=Dt(n),this._radius=this.options.radius},setLatLng:function(n){var l=this._latlng;return this._latlng=Dt(n),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var l=n&&n.radius||this._radius;return v.prototype.setStyle.call(this,n),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,l=this._radiusY||n,m=this._clickTolerance(),T=[n+m,l+m];this._pxBounds=new fe(this._point.subtract(T),this._point.add(T))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function z(n,l){return new M(n,l)}var J=M.extend({initialize:function(n,l,m){if(typeof l=="number"&&(l=c({},m,{radius:l})),C(this,l),this._latlng=Dt(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new Ht(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:v.prototype.setStyle,_project:function(){var n=this._latlng.lng,l=this._latlng.lat,m=this._map,T=m.options.crs;if(T.distance===Kt.distance){var G=Math.PI/180,it=this._mRadius/Kt.R/G,ft=m.project([l+it,n]),At=m.project([l-it,n]),Nt=ft.add(At).divideBy(2),Gt=m.unproject(Nt).lat,ee=Math.acos((Math.cos(it*G)-Math.sin(l*G)*Math.sin(Gt*G))/(Math.cos(l*G)*Math.cos(Gt*G)))/G;(isNaN(ee)||ee===0)&&(ee=it/Math.cos(Math.PI/180*l)),this._point=Nt.subtract(m.getPixelOrigin()),this._radius=isNaN(ee)?0:Nt.x-m.project([Gt,n-ee]).x,this._radiusY=Nt.y-ft.y}else{var me=T.unproject(T.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(me).x}this._updateBounds()}});function ot(n,l,m){return new J(n,l,m)}var gt=v.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,l){C(this,l),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var l=1/0,m=null,T=Un,G,it,ft=0,At=this._parts.length;ft<At;ft++)for(var Nt=this._parts[ft],Gt=1,ee=Nt.length;Gt<ee;Gt++){G=Nt[Gt-1],it=Nt[Gt];var me=T(n,G,it,!0);me<l&&(l=me,m=T(n,G,it))}return m&&(m.distance=Math.sqrt(l)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Pi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(n,l){return l=l||this._defaultShape(),n=Dt(n),l.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new Ht,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return nn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var l=[],m=nn(n),T=0,G=n.length;T<G;T++)m?(l[T]=Dt(n[T]),this._bounds.extend(l[T])):l[T]=this._convertLatLngs(n[T]);return l},_project:function(){var n=new fe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),l=new qt(n,n);this._rawPxBounds&&(this._pxBounds=new fe([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(n,l,m){var T=n[0]instanceof he,G=n.length,it,ft;if(T){for(ft=[],it=0;it<G;it++)ft[it]=this._map.latLngToLayerPoint(n[it]),m.extend(ft[it]);l.push(ft)}else for(it=0;it<G;it++)this._projectLatlngs(n[it],l,m)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,m,T,G,it,ft,At,Nt;for(m=0,G=0,it=this._rings.length;m<it;m++)for(Nt=this._rings[m],T=0,ft=Nt.length;T<ft-1;T++)At=Ii(Nt[T],Nt[T+1],n,T,!0),At&&(l[G]=l[G]||[],l[G].push(At[0]),(At[1]!==Nt[T+1]||T===ft-2)&&(l[G].push(At[1]),G++))}},_simplifyPoints:function(){for(var n=this._parts,l=this.options.smoothFactor,m=0,T=n.length;m<T;m++)n[m]=Li(n[m],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,l){var m,T,G,it,ft,At,Nt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(m=0,it=this._parts.length;m<it;m++)for(At=this._parts[m],T=0,ft=At.length,G=ft-1;T<ft;G=T++)if(!(!l&&T===0)&&Si(n,At[G],At[T])<=Nt)return!0;return!1}});function Lt(n,l){return new gt(n,l)}gt._flat=Oi;var Bt=gt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ti(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(n){var l=gt.prototype._convertLatLngs.call(this,n),m=l.length;return m>=2&&l[0]instanceof he&&l[0].equals(l[m-1])&&l.pop(),l},_setLatLngs:function(n){gt.prototype._setLatLngs.call(this,n),nn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return nn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,l=this.options.weight,m=new qt(l,l);if(n=new fe(n.min.subtract(m),n.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var T=0,G=this._rings.length,it;T<G;T++)it=Mi(this._rings[T],n,!0),it.length&&this._parts.push(it)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var l=!1,m,T,G,it,ft,At,Nt,Gt;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(it=0,Nt=this._parts.length;it<Nt;it++)for(m=this._parts[it],ft=0,Gt=m.length,At=Gt-1;ft<Gt;At=ft++)T=m[ft],G=m[At],T.y>n.y!=G.y>n.y&&n.x<(G.x-T.x)*(n.y-T.y)/(G.y-T.y)+T.x&&(l=!l);return l||gt.prototype._containsPoint.call(this,n,!0)}});function Qt(n,l){return new Bt(n,l)}var re=ln.extend({initialize:function(n,l){C(this,l),this._layers={},n&&this.addData(n)},addData:function(n){var l=B(n)?n:n.features,m,T,G;if(l){for(m=0,T=l.length;m<T;m++)G=l[m],(G.geometries||G.geometry||G.features||G.coordinates)&&this.addData(G);return this}var it=this.options;if(it.filter&&!it.filter(n))return this;var ft=ie(n,it);return ft?(ft.feature=ki(n),ft.defaultOptions=ft.options,this.resetStyle(ft),it.onEachFeature&&it.onEachFeature(n,ft),this.addLayer(ft)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=c({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(l){this._setLayerStyle(l,n)},this)},_setLayerStyle:function(n,l){n.setStyle&&(typeof l=="function"&&(l=l(n.feature)),n.setStyle(l))}});function ie(n,l){var m=n.type==="Feature"?n.geometry:n,T=m?m.coordinates:null,G=[],it=l&&l.pointToLayer,ft=l&&l.coordsToLatLng||je,At,Nt,Gt,ee;if(!T&&!m)return null;switch(m.type){case"Point":return At=ft(T),pe(it,n,At,l);case"MultiPoint":for(Gt=0,ee=T.length;Gt<ee;Gt++)At=ft(T[Gt]),G.push(pe(it,n,At,l));return new ln(G);case"LineString":case"MultiLineString":return Nt=Ae(T,m.type==="LineString"?0:1,ft),new gt(Nt,l);case"Polygon":case"MultiPolygon":return Nt=Ae(T,m.type==="Polygon"?1:2,ft),new Bt(Nt,l);case"GeometryCollection":for(Gt=0,ee=m.geometries.length;Gt<ee;Gt++){var me=ie({geometry:m.geometries[Gt],type:"Feature",properties:n.properties},l);me&&G.push(me)}return new ln(G);case"FeatureCollection":for(Gt=0,ee=m.features.length;Gt<ee;Gt++){var xe=ie(m.features[Gt],l);xe&&G.push(xe)}return new ln(G);default:throw new Error("Invalid GeoJSON object.")}}function pe(n,l,m,T){return n?n(l,m):new o(m,T&&T.markersInheritOptions&&T)}function je(n){return new he(n[1],n[0],n[2])}function Ae(n,l,m){for(var T=[],G=0,it=n.length,ft;G<it;G++)ft=l?Ae(n[G],l-1,m):(m||je)(n[G]),T.push(ft);return T}function qe(n,l){return n=Dt(n),n.alt!==void 0?[_(n.lng,l),_(n.lat,l),_(n.alt,l)]:[_(n.lng,l),_(n.lat,l)]}function Re(n,l,m,T){for(var G=[],it=0,ft=n.length;it<ft;it++)G.push(l?Re(n[it],nn(n[it])?0:l-1,m,T):qe(n[it],T));return!l&&m&&G.length>0&&G.push(G[0].slice()),G}function tn(n,l){return n.feature?c({},n.feature,{geometry:l}):ki(l)}function ki(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var lr={toGeoJSON:function(n){return tn(this,{type:"Point",coordinates:qe(this.getLatLng(),n)})}};o.include(lr),J.include(lr),M.include(lr),gt.include({toGeoJSON:function(n){var l=!nn(this._latlngs),m=Re(this._latlngs,l?1:0,!1,n);return tn(this,{type:(l?"Multi":"")+"LineString",coordinates:m})}}),Bt.include({toGeoJSON:function(n){var l=!nn(this._latlngs),m=l&&!nn(this._latlngs[0]),T=Re(this._latlngs,m?2:l?1:0,!0,n);return l||(T=[T]),tn(this,{type:(m?"Multi":"")+"Polygon",coordinates:T})}}),Ue.include({toMultiPoint:function(n){var l=[];return this.eachLayer(function(m){l.push(m.toGeoJSON(n).geometry.coordinates)}),tn(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(n){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(n);var m=l==="GeometryCollection",T=[];return this.eachLayer(function(G){if(G.toGeoJSON){var it=G.toGeoJSON(n);if(m)T.push(it.geometry);else{var ft=ki(it);ft.type==="FeatureCollection"?T.push.apply(T,ft.features):T.push(ft)}}}),m?tn(this,{geometries:T,type:"GeometryCollection"}):{type:"FeatureCollection",features:T}}});function cr(n,l){return new re(n,l)}var Sr=cr,Fi=Qe.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,l,m){this._url=n,this._bounds=Jt(l),C(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(be(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ne(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&jn(this._image),this},bringToBack:function(){return this._map&&mn(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=Jt(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",l=this._image=n?this._url:we("img");if(be(l,"leaflet-image-layer"),this._zoomAnimated&&be(l,"leaflet-zoom-animated"),this.options.className&&be(l,this.options.className),l.onselectstart=P,l.onmousemove=P,l.onload=j(this.fire,this,"load"),l.onerror=j(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(n){var l=this._map.getZoomScale(n.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;xn(this._image,m,l)},_reset:function(){var n=this._image,l=new fe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=l.getSize();Fe(n,l.min),n.style.width=m.x+"px",n.style.height=m.y+"px"},_updateOpacity:function(){Je(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)},getCenter:function(){return this._bounds.getCenter()}}),Nr=function(n,l,m){return new Fi(n,l,m)},hr=Fi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var n=this._url.tagName==="VIDEO",l=this._image=n?this._url:we("video");if(be(l,"leaflet-image-layer"),this._zoomAnimated&&be(l,"leaflet-zoom-animated"),this.options.className&&be(l,this.options.className),l.onselectstart=P,l.onmousemove=P,l.onloadeddata=j(this.fire,this,"load"),n){for(var m=l.getElementsByTagName("source"),T=[],G=0;G<m.length;G++)T.push(m[G].src);this._url=m.length>0?T:[l.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var it=0;it<this._url.length;it++){var ft=we("source");ft.src=this._url[it],l.appendChild(ft)}}});function Ir(n,l,m){return new hr(n,l,m)}var dr=Fi.extend({_initImage:function(){var n=this._image=this._url;be(n,"leaflet-image-layer"),this._zoomAnimated&&be(n,"leaflet-zoom-animated"),this.options.className&&be(n,this.options.className),n.onselectstart=P,n.onmousemove=P}});function Or(n,l,m){return new dr(n,l,m)}var bn=Qe.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(n,l){n&&(n instanceof he||B(n))?(this._latlng=Dt(n),C(this,l)):(C(this,n),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(n){return n=arguments.length?n:this._source._map,n.hasLayer(this)||n.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(n){return this._map?this.close():(arguments.length?this._source=n:n=this._source,this._prepareOpen(),this.openOn(n._map)),this},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&Je(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&Je(this._container,1),this.bringToFront(),this.options.interactive&&(be(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(n){n._fadeAnimated?(Je(this._container,0),this._removeTimeout=setTimeout(j(Ne,void 0,this._container),200)):Ne(this._container),this.options.interactive&&(ke(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=Dt(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&jn(this._container),this},bringToBack:function(){return this._map&&mn(this._container),this},_prepareOpen:function(n){var l=this._source;if(!l._map)return!1;if(l instanceof ln){l=null;var m=this._source._layers;for(var T in m)if(m[T]._map){l=m[T];break}if(!l)return!1;this._source=l}if(!n)if(l.getCenter)n=l.getCenter();else if(l.getLatLng)n=l.getLatLng();else if(l.getBounds)n=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(n),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var n=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")n.innerHTML=l;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var n=this._map.latLngToLayerPoint(this._latlng),l=$t(this.options.offset),m=this._getAnchor();this._zoomAnimated?Fe(this._container,n.add(m)):l=l.add(n).add(m);var T=this._containerBottom=-l.y,G=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=T+"px",this._container.style.left=G+"px"}},_getAnchor:function(){return[0,0]}});Ce.include({_initOverlay:function(n,l,m,T){var G=l;return G instanceof n||(G=new n(T).setContent(l)),m&&G.setLatLng(m),G}}),Qe.include({_initOverlay:function(n,l,m,T){var G=m;return G instanceof n?(C(G,T),G._source=this):(G=l&&!T?l:new n(T,this),G.setContent(m)),G}});var Hi=bn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n=arguments.length?n:this._source._map,!n.hasLayer(this)&&n._popup&&n._popup.options.autoClose&&n.removeLayer(n._popup),n._popup=this,bn.prototype.openOn.call(this,n)},onAdd:function(n){bn.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof v||this._source.on("preclick",Cn))},onRemove:function(n){bn.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof v||this._source.off("preclick",Cn))},getEvents:function(){var n=bn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this.close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_initLayout:function(){var n="leaflet-popup",l=this._container=we("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=we("div",n+"-content-wrapper",l);if(this._contentNode=we("div",n+"-content",m),Gn(l),ii(this._contentNode),ge(l,"contextmenu",Cn),this._tipContainer=we("div",n+"-tip-container",l),this._tip=we("div",n+"-tip",this._tipContainer),this.options.closeButton){var T=this._closeButton=we("a",n+"-close-button",l);T.setAttribute("role","button"),T.setAttribute("aria-label","Close popup"),T.href="#close",T.innerHTML='<span aria-hidden="true">&#215;</span>',ge(T,"click",function(G){We(G),this.close()},this)}},_updateLayout:function(){var n=this._contentNode,l=n.style;l.width="",l.whiteSpace="nowrap";var m=n.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),l.width=m+1+"px",l.whiteSpace="",l.height="";var T=n.offsetHeight,G=this.options.maxHeight,it="leaflet-popup-scrolled";G&&T>G?(l.height=G+"px",be(n,it)):ke(n,it),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var l=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),m=this._getAnchor();Fe(this._container,l.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var n=this._map,l=parseInt(pn(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+l,T=this._containerWidth,G=new qt(this._containerLeft,-m-this._containerBottom);G._add(ze(this._container));var it=n.layerPointToContainerPoint(G),ft=$t(this.options.autoPanPadding),At=$t(this.options.autoPanPaddingTopLeft||ft),Nt=$t(this.options.autoPanPaddingBottomRight||ft),Gt=n.getSize(),ee=0,me=0;it.x+T+Nt.x>Gt.x&&(ee=it.x+T-Gt.x+Nt.x),it.x-ee-At.x<0&&(ee=it.x-At.x),it.y+m+Nt.y>Gt.y&&(me=it.y+m-Gt.y+Nt.y),it.y-me-At.y<0&&(me=it.y-At.y),(ee||me)&&(this.options.keepInView&&(this._autopanning=!0),n.fire("autopanstart").panBy([ee,me]))}},_getAnchor:function(){return $t(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Pr=function(n,l){return new Hi(n,l)};Ce.mergeOptions({closePopupOnClick:!0}),Ce.include({openPopup:function(n,l,m){return this._initOverlay(Hi,n,l,m).openOn(this),this},closePopup:function(n){return n=arguments.length?n:this._popup,n&&n.close(),this}}),Qe.include({bindPopup:function(n,l){return this._popup=this._initOverlay(Hi,this._popup,n,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n){return this._popup&&(this instanceof ln||(this._popup._source=this),this._popup._prepareOpen(n||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){if(!(!this._popup||!this._map)){An(n);var l=n.layer||n.target;if(this._popup._source===l&&!(l instanceof v)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(n.latlng);return}this._popup._source=l,this.openPopup(n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var $i=bn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(n){bn.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(n){bn.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var n=bn.prototype.getEvents.call(this);return this.options.permanent||(n.preclick=this.close),n},_initLayout:function(){var n="leaflet-tooltip",l=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=we("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var l,m,T=this._map,G=this._container,it=T.latLngToContainerPoint(T.getCenter()),ft=T.layerPointToContainerPoint(n),At=this.options.direction,Nt=G.offsetWidth,Gt=G.offsetHeight,ee=$t(this.options.offset),me=this._getAnchor();At==="top"?(l=Nt/2,m=Gt):At==="bottom"?(l=Nt/2,m=0):At==="center"?(l=Nt/2,m=Gt/2):At==="right"?(l=0,m=Gt/2):At==="left"?(l=Nt,m=Gt/2):ft.x<it.x?(At="right",l=0,m=Gt/2):(At="left",l=Nt+(ee.x+me.x)*2,m=Gt/2),n=n.subtract($t(l,m,!0)).add(ee).add(me),ke(G,"leaflet-tooltip-right"),ke(G,"leaflet-tooltip-left"),ke(G,"leaflet-tooltip-top"),ke(G,"leaflet-tooltip-bottom"),be(G,"leaflet-tooltip-"+At),Fe(G,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&Je(this._container,n)},_animateZoom:function(n){var l=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(l)},_getAnchor:function(){return $t(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Dr=function(n,l){return new $i(n,l)};Ce.include({openTooltip:function(n,l,m){return this._initOverlay($i,n,l,m).openOn(this),this},closeTooltip:function(n){return n.close(),this}}),Qe.include({bindTooltip:function(n,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay($i,this._tooltip,n,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var l=n?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[l](m),this._tooltipHandlersAdded=!n}},openTooltip:function(n){return this._tooltip&&(this instanceof ln||(this._tooltip._source=this),this._tooltip._prepareOpen(n)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(n){var l=typeof n.getElement=="function"&&n.getElement();l&&(ge(l,"focus",function(){this._tooltip._source=n,this.openTooltip()},this),ge(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(n){var l=typeof n.getElement=="function"&&n.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(n){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(n)});return}this._tooltip._source=n.layer||n.target,this.openTooltip(this._tooltip.options.sticky?n.latlng:void 0)}},_moveTooltip:function(n){var l=n.latlng,m,T;this._tooltip.options.sticky&&n.originalEvent&&(m=this._map.mouseEventToContainerPoint(n.originalEvent),T=this._map.containerPointToLayerPoint(m),l=this._map.layerPointToLatLng(T)),this._tooltip.setLatLng(l)}});var fr=Ln.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var l=n&&n.tagName==="DIV"?n:document.createElement("div"),m=this.options;if(m.html instanceof Element?(on(l),l.appendChild(m.html)):l.innerHTML=m.html!==!1?m.html:"",m.bgPos){var T=$t(m.bgPos);l.style.backgroundPosition=-T.x+"px "+-T.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function Rr(n){return new fr(n)}Ln.Default=vn;var fi=Qe.extend({options:{tileSize:256,opacity:1,updateWhenIdle:wt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){C(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),Ne(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(jn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(mn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var n=this._clampZoom(this._map.getZoom());n!==this._tileZoom&&(this._tileZoom=n,this._updateLevels()),this._update()}return this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof qt?n:new qt(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var l=this.getPane().children,m=-n(-1/0,1/0),T=0,G=l.length,it;T<G;T++)it=l[T].style.zIndex,l[T]!==this._container&&it&&(m=n(m,+it));isFinite(m)&&(this.options.zIndex=m+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!wt.ielt9){Je(this._container,this.options.opacity);var n=+new Date,l=!1,m=!1;for(var T in this._tiles){var G=this._tiles[T];if(!(!G.current||!G.loaded)){var it=Math.min(1,(n-G.loaded)/200);Je(G.el,it),it<1?l=!0:(G.active?m=!0:this._onOpaqueTile(G),G.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),l&&(pt(this._fadeFrame),this._fadeFrame=Et(this._updateOpacity,this))}},_onOpaqueTile:P,_initContainer:function(){this._container||(this._container=we("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,l=this.options.maxZoom;if(n!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===n?(this._levels[m].el.style.zIndex=l-Math.abs(n-m),this._onUpdateLevel(m)):(Ne(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var T=this._levels[n],G=this._map;return T||(T=this._levels[n]={},T.el=we("div","leaflet-tile-container leaflet-zoom-animated",this._container),T.el.style.zIndex=l,T.origin=G.project(G.unproject(G.getPixelOrigin()),n).round(),T.zoom=n,this._setZoomTransform(T,G.getCenter(),G.getZoom()),P(T.el.offsetWidth),this._onCreateLevel(T)),this._level=T,T}},_onUpdateLevel:P,_onRemoveLevel:P,_onCreateLevel:P,_pruneTiles:function(){if(this._map){var n,l,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)l=this._tiles[n],l.retain=l.current;for(n in this._tiles)if(l=this._tiles[n],l.current&&!l.active){var T=l.coords;this._retainParent(T.x,T.y,T.z,T.z-5)||this._retainChildren(T.x,T.y,T.z,T.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var l in this._tiles)this._tiles[l].coords.z===n&&this._removeTile(l)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)Ne(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,l,m,T){var G=Math.floor(n/2),it=Math.floor(l/2),ft=m-1,At=new qt(+G,+it);At.z=+ft;var Nt=this._tileCoordsToKey(At),Gt=this._tiles[Nt];return Gt&&Gt.active?(Gt.retain=!0,!0):(Gt&&Gt.loaded&&(Gt.retain=!0),ft>T?this._retainParent(G,it,ft,T):!1)},_retainChildren:function(n,l,m,T){for(var G=2*n;G<2*n+2;G++)for(var it=2*l;it<2*l+2;it++){var ft=new qt(G,it);ft.z=m+1;var At=this._tileCoordsToKey(ft),Nt=this._tiles[At];if(Nt&&Nt.active){Nt.retain=!0;continue}else Nt&&Nt.loaded&&(Nt.retain=!0);m+1<T&&this._retainChildren(G,it,m+1,T)}},_resetView:function(n){var l=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var l=this.options;return l.minNativeZoom!==void 0&&n<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<n?l.maxNativeZoom:n},_setView:function(n,l,m,T){var G=Math.round(l);this.options.maxZoom!==void 0&&G>this.options.maxZoom||this.options.minZoom!==void 0&&G<this.options.minZoom?G=void 0:G=this._clampZoom(G);var it=this.options.updateWhenZooming&&G!==this._tileZoom;(!T||it)&&(this._tileZoom=G,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),G!==void 0&&this._update(n),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(n,l)},_setZoomTransforms:function(n,l){for(var m in this._levels)this._setZoomTransform(this._levels[m],n,l)},_setZoomTransform:function(n,l,m){var T=this._map.getZoomScale(m,n.zoom),G=n.origin.multiplyBy(T).subtract(this._map._getNewPixelOrigin(l,m)).round();wt.any3d?xn(n.el,G,T):Fe(n.el,G)},_resetGrid:function(){var n=this._map,l=n.options.crs,m=this._tileSize=this.getTileSize(),T=this._tileZoom,G=this._map.getPixelWorldBounds(this._tileZoom);G&&(this._globalTileRange=this._pxBoundsToTileRange(G)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,l.wrapLng[0]],T).x/m.x),Math.ceil(n.project([0,l.wrapLng[1]],T).x/m.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([l.wrapLat[0],0],T).y/m.x),Math.ceil(n.project([l.wrapLat[1],0],T).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var l=this._map,m=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),T=l.getZoomScale(m,this._tileZoom),G=l.project(n,this._tileZoom).floor(),it=l.getSize().divideBy(T*2);return new fe(G.subtract(it),G.add(it))},_update:function(n){var l=this._map;if(l){var m=this._clampZoom(l.getZoom());if(n===void 0&&(n=l.getCenter()),this._tileZoom!==void 0){var T=this._getTiledPixelBounds(n),G=this._pxBoundsToTileRange(T),it=G.getCenter(),ft=[],At=this.options.keepBuffer,Nt=new fe(G.getBottomLeft().subtract([At,-At]),G.getTopRight().add([At,-At]));if(!(isFinite(G.min.x)&&isFinite(G.min.y)&&isFinite(G.max.x)&&isFinite(G.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Gt in this._tiles){var ee=this._tiles[Gt].coords;(ee.z!==this._tileZoom||!Nt.contains(new qt(ee.x,ee.y)))&&(this._tiles[Gt].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(n,m);return}for(var me=G.min.y;me<=G.max.y;me++)for(var xe=G.min.x;xe<=G.max.x;xe++){var en=new qt(xe,me);if(en.z=this._tileZoom,!!this._isValidTile(en)){var Ye=this._tiles[this._tileCoordsToKey(en)];Ye?Ye.current=!0:ft.push(en)}}if(ft.sort(function(rn,Kn){return rn.distanceTo(it)-Kn.distanceTo(it)}),ft.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var hn=document.createDocumentFragment();for(xe=0;xe<ft.length;xe++)this._addTile(ft[xe],hn);this._level.el.appendChild(hn)}}}},_isValidTile:function(n){var l=this._map.options.crs;if(!l.infinite){var m=this._globalTileRange;if(!l.wrapLng&&(n.x<m.min.x||n.x>m.max.x)||!l.wrapLat&&(n.y<m.min.y||n.y>m.max.y))return!1}if(!this.options.bounds)return!0;var T=this._tileCoordsToBounds(n);return Jt(this.options.bounds).overlaps(T)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var l=this._map,m=this.getTileSize(),T=n.scaleBy(m),G=T.add(m),it=l.unproject(T,n.z),ft=l.unproject(G,n.z);return[it,ft]},_tileCoordsToBounds:function(n){var l=this._tileCoordsToNwSe(n),m=new Ht(l[0],l[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var l=n.split(":"),m=new qt(+l[0],+l[1]);return m.z=+l[2],m},_removeTile:function(n){var l=this._tiles[n];l&&(Ne(l.el),delete this._tiles[n],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){be(n,"leaflet-tile");var l=this.getTileSize();n.style.width=l.x+"px",n.style.height=l.y+"px",n.onselectstart=P,n.onmousemove=P,wt.ielt9&&this.options.opacity<1&&Je(n,this.options.opacity)},_addTile:function(n,l){var m=this._getTilePos(n),T=this._tileCoordsToKey(n),G=this.createTile(this._wrapCoords(n),j(this._tileReady,this,n));this._initTile(G),this.createTile.length<2&&Et(j(this._tileReady,this,n,null,G)),Fe(G,m),this._tiles[T]={el:G,coords:n,current:!0},l.appendChild(G),this.fire("tileloadstart",{tile:G,coords:n})},_tileReady:function(n,l,m){l&&this.fire("tileerror",{error:l,tile:m,coords:n});var T=this._tileCoordsToKey(n);m=this._tiles[T],m&&(m.loaded=+new Date,this._map._fadeAnimated?(Je(m.el,0),pt(this._fadeFrame),this._fadeFrame=Et(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),l||(be(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),wt.ielt9||!this._map._fadeAnimated?Et(this._pruneTiles,this):setTimeout(j(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var l=new qt(this._wrapX?N(n.x,this._wrapX):n.x,this._wrapY?N(n.y,this._wrapY):n.y);return l.z=n.z,l},_pxBoundsToTileRange:function(n){var l=this.getTileSize();return new fe(n.min.unscaleBy(l).floor(),n.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function kr(n){return new fi(n)}var Zn=fi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(n,l){this._url=n,l=C(this,l),l.detectRetina&&wt.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(n,l){return this._url===n&&l===void 0&&(l=!0),this._url=n,l||this.redraw(),this},createTile:function(n,l){var m=document.createElement("img");return ge(m,"load",j(this._tileOnLoad,this,l,m)),ge(m,"error",j(this._tileOnError,this,l,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(n),m},getTileUrl:function(n){var l={r:wt.retina?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-n.y;this.options.tms&&(l.y=m),l["-y"]=m}return k(this._url,c(l,this.options))},_tileOnLoad:function(n,l){wt.ielt9?setTimeout(j(n,this,null,l),0):n(null,l)},_tileOnError:function(n,l,m){var T=this.options.errorTileUrl;T&&l.getAttribute("src")!==T&&(l.src=T),n(m,l)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,l=this.options.maxZoom,m=this.options.zoomReverse,T=this.options.zoomOffset;return m&&(n=l-n),n+T},_getSubdomain:function(n){var l=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var n,l;for(n in this._tiles)if(this._tiles[n].coords.z!==this._tileZoom&&(l=this._tiles[n].el,l.onload=P,l.onerror=P,!l.complete)){l.src=U;var m=this._tiles[n].coords;Ne(l),delete this._tiles[n],this.fire("tileabort",{tile:l,coords:m})}},_removeTile:function(n){var l=this._tiles[n];if(l)return l.el.setAttribute("src",U),fi.prototype._removeTile.call(this,n)},_tileReady:function(n,l,m){if(!(!this._map||m&&m.getAttribute("src")===U))return fi.prototype._tileReady.call(this,n,l,m)}});function pr(n,l){return new Zn(n,l)}var mr=Zn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,l){this._url=n;var m=c({},this.defaultWmsParams);for(var T in l)T in this.options||(m[T]=l[T]);l=C(this,l);var G=l.detectRetina&&wt.retina?2:1,it=this.getTileSize();m.width=it.x*G,m.height=it.y*G,this.wmsParams=m},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Zn.prototype.onAdd.call(this,n)},getTileUrl:function(n){var l=this._tileCoordsToNwSe(n),m=this._crs,T=et(m.project(l[0]),m.project(l[1])),G=T.min,it=T.max,ft=(this._wmsVersion>=1.3&&this._crs===Di?[G.y,G.x,it.y,it.x]:[G.x,G.y,it.x,it.y]).join(","),At=Zn.prototype.getTileUrl.call(this,n);return At+E(this.wmsParams,At,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ft},setParams:function(n,l){return c(this.wmsParams,n),l||this.redraw(),this}});function Fr(n,l){return new mr(n,l)}Zn.WMS=mr,pr.wms=Fr;var Sn=Qe.extend({options:{padding:.1},initialize:function(n){C(this,n),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),be(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,l){var m=this._map.getZoomScale(l,this._zoom),T=this._map.getSize().multiplyBy(.5+this.options.padding),G=this._map.project(this._center,l),it=T.multiplyBy(-m).add(G).subtract(this._map._getNewPixelOrigin(n,l));wt.any3d?xn(this._container,it,m):Fe(this._container,it)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,l=this._map.getSize(),m=this._map.containerPointToLayerPoint(l.multiplyBy(-n)).round();this._bounds=new fe(m,m.add(l.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),gr=Sn.extend({options:{tolerance:0},getEvents:function(){var n=Sn.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Sn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");ge(n,"mousemove",this._onMouseMove,this),ge(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ge(n,"mouseout",this._handleMouseOut,this),n._leaflet_disable_events=!0,this._ctx=n.getContext("2d")},_destroyContainer:function(){pt(this._redrawRequest),delete this._ctx,Ne(this._container),De(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var l in this._layers)n=this._layers[l],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Sn.prototype._update.call(this);var n=this._bounds,l=this._container,m=n.getSize(),T=wt.retina?2:1;Fe(l,n.min),l.width=T*m.x,l.height=T*m.y,l.style.width=m.x+"px",l.style.height=m.y+"px",wt.retina&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){Sn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[u(n)]=n;var l=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var l=n._order,m=l.next,T=l.prev;m?m.prev=T:this._drawLast=T,T?T.next=m:this._drawFirst=m,delete n._order,delete this._layers[u(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var l=n.options.dashArray.split(/[, ]+/),m=[],T,G;for(G=0;G<l.length;G++){if(T=Number(l[G]),isNaN(T))return;m.push(T)}n.options._dashArray=m}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){this._map&&(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||Et(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var l=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new fe,this._redrawBounds.extend(n._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(n._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var l=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,l=this._redrawBounds;if(this._ctx.save(),l){var m=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var T=this._drawFirst;T;T=T.next)n=T.layer,(!l||n._pxBounds&&n._pxBounds.intersects(l))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,l){if(this._drawing){var m,T,G,it,ft=n._parts,At=ft.length,Nt=this._ctx;if(At){for(Nt.beginPath(),m=0;m<At;m++){for(T=0,G=ft[m].length;T<G;T++)it=ft[m][T],Nt[T?"lineTo":"moveTo"](it.x,it.y);l&&Nt.closePath()}this._fillStroke(Nt,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var l=n._point,m=this._ctx,T=Math.max(Math.round(n._radius),1),G=(Math.max(Math.round(n._radiusY),1)||T)/T;G!==1&&(m.save(),m.scale(1,G)),m.beginPath(),m.arc(l.x,l.y/G,T,0,Math.PI*2,!1),G!==1&&m.restore(),this._fillStroke(m,n)}},_fillStroke:function(n,l){var m=l.options;m.fill&&(n.globalAlpha=m.fillOpacity,n.fillStyle=m.fillColor||m.color,n.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(n.setLineDash&&n.setLineDash(l.options&&l.options._dashArray||[]),n.globalAlpha=m.opacity,n.lineWidth=m.weight,n.strokeStyle=m.color,n.lineCap=m.lineCap,n.lineJoin=m.lineJoin,n.stroke())},_onClick:function(n){for(var l=this._map.mouseEventToLayerPoint(n),m,T,G=this._drawFirst;G;G=G.next)m=G.layer,m.options.interactive&&m._containsPoint(l)&&(!(n.type==="click"||n.type==="preclick")||!this._map._draggableMoved(m))&&(T=m);this._fireEvent(T?[T]:!1,n)},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,l)}},_handleMouseOut:function(n){var l=this._hoveredLayer;l&&(ke(this._container,"leaflet-interactive"),this._fireEvent([l],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,l){if(!this._mouseHoverThrottled){for(var m,T,G=this._drawFirst;G;G=G.next)m=G.layer,m.options.interactive&&m._containsPoint(l)&&(T=m);T!==this._hoveredLayer&&(this._handleMouseOut(n),T&&(be(this._container,"leaflet-interactive"),this._fireEvent([T],n,"mouseover"),this._hoveredLayer=T)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,n),this._mouseHoverThrottled=!0,setTimeout(j(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,l,m){this._map._fireDOMEvent(l,m||l.type,n)},_bringToFront:function(n){var l=n._order;if(l){var m=l.next,T=l.prev;if(m)m.prev=T;else return;T?T.next=m:m&&(this._drawFirst=m),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(n)}},_bringToBack:function(n){var l=n._order;if(l){var m=l.next,T=l.prev;if(T)T.next=m;else return;m?m.prev=T:T&&(this._drawLast=T),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(n)}}});function vr(n){return wt.canvas?new gr(n):null}var pi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{}return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Hr={_initContainer:function(){this._container=we("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Sn.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var l=n._container=pi("shape");be(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",n._path=pi("path"),l.appendChild(n._path),this._updateStyle(n),this._layers[u(n)]=n},_addPath:function(n){var l=n._container;this._container.appendChild(l),n.options.interactive&&n.addInteractiveTarget(l)},_removePath:function(n){var l=n._container;Ne(l),n.removeInteractiveTarget(l),delete this._layers[u(n)]},_updateStyle:function(n){var l=n._stroke,m=n._fill,T=n.options,G=n._container;G.stroked=!!T.stroke,G.filled=!!T.fill,T.stroke?(l||(l=n._stroke=pi("stroke")),G.appendChild(l),l.weight=T.weight+"px",l.color=T.color,l.opacity=T.opacity,T.dashArray?l.dashStyle=B(T.dashArray)?T.dashArray.join(" "):T.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=T.lineCap.replace("butt","flat"),l.joinstyle=T.lineJoin):l&&(G.removeChild(l),n._stroke=null),T.fill?(m||(m=n._fill=pi("fill")),G.appendChild(m),m.color=T.fillColor||T.color,m.opacity=T.fillOpacity):m&&(G.removeChild(m),n._fill=null)},_updateCircle:function(n){var l=n._point.round(),m=Math.round(n._radius),T=Math.round(n._radiusY||m);this._setPath(n,n._empty()?"M0 0":"AL "+l.x+","+l.y+" "+m+","+T+" 0,"+65535*360)},_setPath:function(n,l){n._path.v=l},_bringToFront:function(n){jn(n._container)},_bringToBack:function(n){mn(n._container)}},Bi=wt.vml?pi:Ze,mi=Sn.extend({_initContainer:function(){this._container=Bi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Bi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ne(this._container),De(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Sn.prototype._update.call(this);var n=this._bounds,l=n.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,m.setAttribute("width",l.x),m.setAttribute("height",l.y)),Fe(m,n.min),m.setAttribute("viewBox",[n.min.x,n.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(n){var l=n._path=Bi("path");n.options.className&&be(l,n.options.className),n.options.interactive&&be(l,"leaflet-interactive"),this._updateStyle(n),this._layers[u(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){Ne(n._path),n.removeInteractiveTarget(n._path),delete this._layers[u(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var l=n._path,m=n.options;l&&(m.stroke?(l.setAttribute("stroke",m.color),l.setAttribute("stroke-opacity",m.opacity),l.setAttribute("stroke-width",m.weight),l.setAttribute("stroke-linecap",m.lineCap),l.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?l.setAttribute("stroke-dasharray",m.dashArray):l.removeAttribute("stroke-dasharray"),m.dashOffset?l.setAttribute("stroke-dashoffset",m.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),m.fill?(l.setAttribute("fill",m.fillColor||m.color),l.setAttribute("fill-opacity",m.fillOpacity),l.setAttribute("fill-rule",m.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(n,l){this._setPath(n,Be(n._parts,l))},_updateCircle:function(n){var l=n._point,m=Math.max(Math.round(n._radius),1),T=Math.max(Math.round(n._radiusY),1)||m,G="a"+m+","+T+" 0 1,0 ",it=n._empty()?"M0 0":"M"+(l.x-m)+","+l.y+G+m*2+",0 "+G+-m*2+",0 ";this._setPath(n,it)},_setPath:function(n,l){n._path.setAttribute("d",l)},_bringToFront:function(n){jn(n._path)},_bringToBack:function(n){mn(n._path)}});wt.vml&&mi.include(Hr);function _r(n){return wt.svg||wt.vml?new mi(n):null}Ce.include({getRenderer:function(n){var l=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var l=this._paneRenderers[n];return l===void 0&&(l=this._createRenderer({pane:n}),this._paneRenderers[n]=l),l},_createRenderer:function(n){return this.options.preferCanvas&&vr(n)||_r(n)}});var br=Bt.extend({initialize:function(n,l){Bt.prototype.initialize.call(this,this._boundsToLatLngs(n),l)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=Jt(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function $r(n,l){return new br(n,l)}mi.create=Bi,mi.pointsToPath=Be,re.geometryToLayer=ie,re.coordsToLatLng=je,re.coordsToLatLngs=Ae,re.latLngToCoords=qe,re.latLngsToCoords=Re,re.getFeature=tn,re.asFeature=ki,Ce.mergeOptions({boxZoom:!0});var yr=cn.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){ge(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ne(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Fn(),Bn(),this._startPoint=this._map.mouseEventToContainerPoint(n),ge(document,{contextmenu:An,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=we("div","leaflet-zoom-box",this._container),be(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var l=new fe(this._point,this._startPoint),m=l.getSize();Fe(this._box,l.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(Ne(this._box),ke(this._container,"leaflet-crosshair")),Hn(),Vn(),De(document,{contextmenu:An,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(j(this._resetState,this),0);var l=new Ht(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(n){n.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ce.addInitHook("addHandler","boxZoom",yr),Ce.mergeOptions({doubleClickZoom:!0});var Er=cn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var l=this._map,m=l.getZoom(),T=l.options.zoomDelta,G=n.originalEvent.shiftKey?m-T:m+T;l.options.doubleClickZoom==="center"?l.setZoom(G):l.setZoomAround(n.containerPoint,G)}});Ce.addInitHook("addHandler","doubleClickZoom",Er),Ce.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var jr=cn.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new _n(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}be(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ke(this._map._container,"leaflet-grab"),ke(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Jt(this._map.options.maxBounds);this._offsetLimit=et(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var l=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(l),this._prunePositions(l)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,l){return n-(n-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;n.x<l.min.x&&(n.x=this._viscousLimit(n.x,l.min.x)),n.y<l.min.y&&(n.y=this._viscousLimit(n.y,l.min.y)),n.x>l.max.x&&(n.x=this._viscousLimit(n.x,l.max.x)),n.y>l.max.y&&(n.y=this._viscousLimit(n.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,l=Math.round(n/2),m=this._initialWorldOffset,T=this._draggable._newPos.x,G=(T-l+m)%n+l-m,it=(T+l+m)%n-l-m,ft=Math.abs(G+m)<Math.abs(it+m)?G:it;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ft},_onDragEnd:function(n){var l=this._map,m=l.options,T=!m.inertia||n.noInertia||this._times.length<2;if(l.fire("dragend",n),T)l.fire("moveend");else{this._prunePositions(+new Date);var G=this._lastPos.subtract(this._positions[0]),it=(this._lastTime-this._times[0])/1e3,ft=m.easeLinearity,At=G.multiplyBy(ft/it),Nt=At.distanceTo([0,0]),Gt=Math.min(m.inertiaMaxSpeed,Nt),ee=At.multiplyBy(Gt/Nt),me=Gt/(m.inertiaDeceleration*ft),xe=ee.multiplyBy(-me/2).round();!xe.x&&!xe.y?l.fire("moveend"):(xe=l._limitOffset(xe,l.options.maxBounds),Et(function(){l.panBy(xe,{duration:me,easeLinearity:ft,noMoveStart:!0,animate:!0})}))}}});Ce.addInitHook("addHandler","dragging",jr),Ce.mergeOptions({keyboard:!0,keyboardPanDelta:80});var xr=cn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),ge(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),De(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,l=document.documentElement,m=n.scrollTop||l.scrollTop,T=n.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(T,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var l=this._panKeys={},m=this.keyCodes,T,G;for(T=0,G=m.left.length;T<G;T++)l[m.left[T]]=[-1*n,0];for(T=0,G=m.right.length;T<G;T++)l[m.right[T]]=[n,0];for(T=0,G=m.down.length;T<G;T++)l[m.down[T]]=[0,n];for(T=0,G=m.up.length;T<G;T++)l[m.up[T]]=[0,-1*n]},_setZoomDelta:function(n){var l=this._zoomKeys={},m=this.keyCodes,T,G;for(T=0,G=m.zoomIn.length;T<G;T++)l[m.zoomIn[T]]=n;for(T=0,G=m.zoomOut.length;T<G;T++)l[m.zoomOut[T]]=-n},_addHooks:function(){ge(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){De(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var l=n.keyCode,m=this._map,T;if(l in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(T=this._panKeys[l],n.shiftKey&&(T=$t(T).multiplyBy(3)),m.options.maxBounds&&(T=m._limitOffset($t(T),m.options.maxBounds)),m.options.worldCopyJump){var G=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(T)));m.panTo(G)}else m.panBy(T)}else if(l in this._zoomKeys)m.setZoom(m.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;An(n)}}});Ce.addInitHook("addHandler","keyboard",xr),Ce.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var wr=cn.extend({addHooks:function(){ge(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var l=ji(n),m=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var T=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(j(this._performZoom,this),T),An(n)},_performZoom:function(){var n=this._map,l=n.getZoom(),m=this._map.options.zoomSnap||0;n._stop();var T=this._delta/(this._map.options.wheelPxPerZoomLevel*4),G=4*Math.log(2/(1+Math.exp(-Math.abs(T))))/Math.LN2,it=m?Math.ceil(G/m)*m:G,ft=n._limitZoom(l+(this._delta>0?it:-it))-l;this._delta=0,this._startTime=null,ft&&(n.options.scrollWheelZoom==="center"?n.setZoom(l+ft):n.setZoomAround(this._lastMousePos,l+ft))}});Ce.addInitHook("addHandler","scrollWheelZoom",wr);var Br=600;Ce.mergeOptions({tapHold:wt.touchNative&&wt.safari&&wt.mobile,tapTolerance:15});var Cr=cn.extend({addHooks:function(){ge(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(clearTimeout(this._holdTimeout),n.touches.length===1){var l=n.touches[0];this._startPos=this._newPos=new qt(l.clientX,l.clientY),this._holdTimeout=setTimeout(j(function(){this._cancel(),this._isTapValid()&&(ge(document,"touchend",We),ge(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),Br),ge(document,"touchend touchcancel contextmenu",this._cancel,this),ge(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function n(){De(document,"touchend",We),De(document,"touchend touchcancel",n)},_cancel:function(){clearTimeout(this._holdTimeout),De(document,"touchend touchcancel contextmenu",this._cancel,this),De(document,"touchmove",this._onMove,this)},_onMove:function(n){var l=n.touches[0];this._newPos=new qt(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(n,l){var m=new MouseEvent(n,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});m._simulated=!0,l.target.dispatchEvent(m)}});Ce.addInitHook("addHandler","tapHold",Cr),Ce.mergeOptions({touchZoom:wt.touch,bounceAtZoomLimits:!0});var Ar=cn.extend({addHooks:function(){be(this._map._container,"leaflet-touch-zoom"),ge(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ke(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var l=this._map;if(!(!n.touches||n.touches.length!==2||l._animatingZoom||this._zooming)){var m=l.mouseEventToContainerPoint(n.touches[0]),T=l.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(m.add(T)._divideBy(2))),this._startDist=m.distanceTo(T),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ge(document,"touchmove",this._onTouchMove,this),ge(document,"touchend touchcancel",this._onTouchEnd,this),We(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var l=this._map,m=l.mouseEventToContainerPoint(n.touches[0]),T=l.mouseEventToContainerPoint(n.touches[1]),G=m.distanceTo(T)/this._startDist;if(this._zoom=l.getScaleZoom(G,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&G<1||this._zoom>l.getMaxZoom()&&G>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,G===1)return}else{var it=m._add(T)._divideBy(2)._subtract(this._centerPoint);if(G===1&&it.x===0&&it.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(it),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),pt(this._animRequest);var ft=j(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Et(ft,this,!0),We(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,pt(this._animRequest),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ce.addInitHook("addHandler","touchZoom",Ar),Ce.BoxZoom=yr,Ce.DoubleClickZoom=Er,Ce.Drag=jr,Ce.Keyboard=xr,Ce.ScrollWheelZoom=wr,Ce.TapHold=Cr,Ce.TouchZoom=Ar,r.Bounds=fe,r.Browser=wt,r.CRS=Wt,r.Canvas=gr,r.Circle=J,r.CircleMarker=M,r.Class=Vt,r.Control=an,r.DivIcon=fr,r.DivOverlay=bn,r.DomEvent=Wi,r.DomUtil=Ie,r.Draggable=_n,r.Evented=Xt,r.FeatureGroup=ln,r.GeoJSON=re,r.GridLayer=fi,r.Handler=cn,r.Icon=Ln,r.ImageOverlay=Fi,r.LatLng=he,r.LatLngBounds=Ht,r.Layer=Qe,r.LayerGroup=Ue,r.LineUtil=rr,r.Map=Ce,r.Marker=o,r.Mixin=Ji,r.Path=v,r.Point=qt,r.PolyUtil=Qi,r.Polygon=Bt,r.Polyline=gt,r.Popup=Hi,r.PosAnimation=xi,r.Projection=or,r.Rectangle=br,r.Renderer=Sn,r.SVG=mi,r.SVGOverlay=dr,r.TileLayer=Zn,r.Tooltip=$i,r.Transformation=ye,r.Util=Pt,r.VideoOverlay=hr,r.bind=j,r.bounds=et,r.canvas=vr,r.circle=ot,r.circleMarker=z,r.control=Wn,r.divIcon=Rr,r.extend=c,r.featureGroup=Tn,r.geoJSON=cr,r.geoJson=Sr,r.gridLayer=kr,r.icon=di,r.imageOverlay=Nr,r.latLng=Dt,r.latLngBounds=Jt,r.layerGroup=hi,r.map=Ui,r.marker=a,r.point=$t,r.polygon=Qt,r.polyline=Lt,r.popup=Pr,r.rectangle=$r,r.setOptions=C,r.stamp=u,r.svg=_r,r.svgOverlay=Or,r.tileLayer=pr,r.tooltip=Dr,r.transformation=Oe,r.version=s,r.videoOverlay=Ir;var Vr=window.L;r.noConflict=function(){return window.L=Vr,this},window.L=r})})(leafletSrc,leafletSrc.exports);var leafletSrcExports=leafletSrc.exports;const L$1=getDefaultExportFromCjs(leafletSrcExports),getImage=t=>new URL(Object.assign({"../assets/GitHub_Logo.png":__vite_glob_0_0,"../assets/bluePinMarker.png":__vite_glob_0_1,"../assets/greenPinMarker.png":__vite_glob_0_2,"../assets/redPinMarker.png":__vite_glob_0_3,"../assets/yellowPinMarker.png":__vite_glob_0_4})[`../assets/${t}.png`],self.location).href,gsiStandard=L.tileLayer("https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png",{minZoom:5,maxZoom:18,attribution:"<a href='https://maps.gsi.go.jp/development/ichiran.html' target='_blank'></a>"}),gsiPale=L.tileLayer("https://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png",{minZoom:5,maxZoom:18,attribution:"<a href='https://maps.gsi.go.jp/development/ichiran.html' target='_blank'></a>"}),gsiSatellite=L.tileLayer("https://cyberjapandata.gsi.go.jp/xyz/seamlessphoto/{z}/{x}/{y}.jpg",{minZoom:14,maxZoom:18,attribution:"<a href='http://portal.cyberjapan.jp/help/termsofuse.html' target='_blank'></a>"}),gsiSatellite1974_1978=L.tileLayer("https://cyberjapandata.gsi.go.jp/xyz/gazo1/{z}/{x}/{y}.jpg",{minZoom:10,maxZoom:18,attribution:"<a href='http://portal.cyberjapan.jp/help/termsofuse.html' target='_blank'></a>"}),gsiSatellite1961_1969=L.tileLayer("https://cyberjapandata.gsi.go.jp/xyz/ort_old10/{z}/{x}/{y}.png",{minZoom:10,maxZoom:18,attribution:"<a href='http://portal.cyberjapan.jp/help/termsofuse.html' target='_blank'></a>"}),baseMaps={" ()":gsiStandard," ()":gsiPale," ()":gsiSatellite," (1974-78)":gsiSatellite1974_1978," (1961-69)":gsiSatellite1961_1969},redPinMarker=L.icon({iconUrl:getImage("redPinMarker"),iconSize:[30,30],iconAnchor:[15,30]}),bluePinMarker=L.icon({iconUrl:getImage("bluePinMarker"),iconSize:[30,30],iconAnchor:[15,30]}),yellowPinMarker=L.icon({iconUrl:getImage("yellowPinMarker"),iconSize:[30,30],iconAnchor:[15,30]}),greenPinMarker=L.icon({iconUrl:getImage("greenPinMarker"),iconSize:[30,30],iconAnchor:[15,30]}),pinMarkers={red:redPinMarker,blue:bluePinMarker,yellow:yellowPinMarker,green:greenPinMarker};function isValidNumber(t){return t==""||isNaN(Number(t))?!1:Number(t)!=0}function zen2han(t){return t=t.replace("","-"),t=t.replace("","-"),t=t.replace("","-"),t=t.replace("","-"),t=t.replace("","'"),t=t.replace("","'"),t=t.replace("",'"'),t=t.replace("",'"'),t=t.replace(""," "),String(t).replace(/[-]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)})}var jsuites$1={exports:{}},hasRequiredJsuites;function requireJsuites(){return hasRequiredJsuites||(hasRequiredJsuites=1,function(t,e){(function(s,c){t.exports=c()})(commonjsGlobal,function(){return function(){var r={195:function(j){(function(h,u){j.exports=u()})(this,function(){return function(Ht){function u(Dt,Wt){this.highOrder=Dt,this.lowOrder=Wt}var g=[new u(1779033703,4089235720),new u(3144134277,2227873595),new u(1013904242,4271175723),new u(2773480762,1595750129),new u(1359893119,2917565137),new u(2600822924,725511199),new u(528734635,4215389547),new u(1541459225,327033209)],N=[new u(1116352408,3609767458),new u(1899447441,602891725),new u(3049323471,3964484399),new u(3921009573,2173295548),new u(961987163,4081628472),new u(1508970993,3053834265),new u(2453635748,2937671579),new u(2870763221,3664609560),new u(3624381080,2734883394),new u(310598401,1164996542),new u(607225278,1323610764),new u(1426881987,3590304994),new u(1925078388,4068182383),new u(2162078206,991336113),new u(2614888103,633803317),new u(3248222580,3479774868),new u(3835390401,2666613458),new u(4022224774,944711139),new u(264347078,2341262773),new u(604807628,2007800933),new u(770255983,1495990901),new u(1249150122,1856431235),new u(1555081692,3175218132),new u(1996064986,2198950837),new u(2554220882,3999719339),new u(2821834349,766784016),new u(2952996808,2566594879),new u(3210313671,3203337956),new u(3336571891,1034457026),new u(3584528711,2466948901),new u(113926993,3758326383),new u(338241895,168717936),new u(666307205,1188179964),new u(773529912,1546045734),new u(1294757372,1522805485),new u(1396182291,2643833823),new u(1695183700,2343527390),new u(1986661051,1014477480),new u(2177026350,1206759142),new u(2456956037,344077627),new u(2730485921,1290863460),new u(2820302411,3158454273),new u(3259730800,3505952657),new u(3345764771,106217008),new u(3516065817,3606008344),new u(3600352804,1432725776),new u(4094571909,1467031594),new u(275423344,851169720),new u(430227734,3100823752),new u(506948616,1363258195),new u(659060556,3750685593),new u(883997877,3785050280),new u(958139571,3318307427),new u(1322822218,3812723403),new u(1537002063,2003034995),new u(1747873779,3602036899),new u(1955562222,1575990012),new u(2024104815,1125592928),new u(2227730452,2716904306),new u(2361852424,442776044),new u(2428436474,593698344),new u(2756734187,3733110249),new u(3204031479,2999351573),new u(3329325298,3815920427),new u(3391569614,3928383900),new u(3515267271,566280711),new u(3940187606,3454069534),new u(4118630271,4000239992),new u(116418474,1914138554),new u(174292421,2731055270),new u(289380356,3203993006),new u(460393269,320620315),new u(685471733,587496836),new u(852142971,1086792851),new u(1017036298,365543100),new u(1126000580,2618297676),new u(1288033470,3409855158),new u(1501505948,4234509866),new u(1607167915,987167468),new u(1816402316,1246189591)],P=new Array(64),_,f,w,C,E,S,k,B,q,U,F,Y,rt=8;function tt(Dt){return unescape(encodeURIComponent(Dt))}function yt(Dt){for(var Wt=[],Kt=(1<<rt)-1,ae=Dt.length*rt,de=0;de<ae;de+=rt)Wt[de>>5]|=(Dt.charCodeAt(de/rt)&Kt)<<32-rt-de%32;return Wt}function Et(Dt){for(var Wt="0123456789abcdef",Kt="",ae=Dt.length*4,de,ye=0;ye<ae;ye+=1)de=Dt[ye>>2]>>(3-ye%4)*8,Kt+=Wt.charAt(de>>4&15)+Wt.charAt(de&15);return Kt}function pt(Dt,Wt){var Kt,ae,de,ye;return Kt=(Dt.lowOrder&65535)+(Wt.lowOrder&65535),ae=(Dt.lowOrder>>>16)+(Wt.lowOrder>>>16)+(Kt>>>16),de=(ae&65535)<<16|Kt&65535,Kt=(Dt.highOrder&65535)+(Wt.highOrder&65535)+(ae>>>16),ae=(Dt.highOrder>>>16)+(Wt.highOrder>>>16)+(Kt>>>16),ye=(ae&65535)<<16|Kt&65535,new u(ye,de)}function Pt(Dt,Wt,Kt,ae){var de,ye,Oe,Te;return de=(Dt.lowOrder&65535)+(Wt.lowOrder&65535)+(Kt.lowOrder&65535)+(ae.lowOrder&65535),ye=(Dt.lowOrder>>>16)+(Wt.lowOrder>>>16)+(Kt.lowOrder>>>16)+(ae.lowOrder>>>16)+(de>>>16),Oe=(ye&65535)<<16|de&65535,de=(Dt.highOrder&65535)+(Wt.highOrder&65535)+(Kt.highOrder&65535)+(ae.highOrder&65535)+(ye>>>16),ye=(Dt.highOrder>>>16)+(Wt.highOrder>>>16)+(Kt.highOrder>>>16)+(ae.highOrder>>>16)+(de>>>16),Te=(ye&65535)<<16|de&65535,new u(Te,Oe)}function Vt(Dt,Wt,Kt,ae,de){var ye,Oe,Te,He;return ye=(Dt.lowOrder&65535)+(Wt.lowOrder&65535)+(Kt.lowOrder&65535)+(ae.lowOrder&65535)+(de.lowOrder&65535),Oe=(Dt.lowOrder>>>16)+(Wt.lowOrder>>>16)+(Kt.lowOrder>>>16)+(ae.lowOrder>>>16)+(de.lowOrder>>>16)+(ye>>>16),Te=(Oe&65535)<<16|ye&65535,ye=(Dt.highOrder&65535)+(Wt.highOrder&65535)+(Kt.highOrder&65535)+(ae.highOrder&65535)+(de.highOrder&65535)+(Oe>>>16),Oe=(Dt.highOrder>>>16)+(Wt.highOrder>>>16)+(Kt.highOrder>>>16)+(ae.highOrder>>>16)+(de.highOrder>>>16)+(ye>>>16),He=(Oe&65535)<<16|ye&65535,new u(He,Te)}function Ot(Dt,Wt,Kt){return new u(Dt.highOrder&Wt.highOrder^Dt.highOrder&Kt.highOrder^Wt.highOrder&Kt.highOrder,Dt.lowOrder&Wt.lowOrder^Dt.lowOrder&Kt.lowOrder^Wt.lowOrder&Kt.lowOrder)}function _t(Dt,Wt,Kt){return new u(Dt.highOrder&Wt.highOrder^~Dt.highOrder&Kt.highOrder,Dt.lowOrder&Wt.lowOrder^~Dt.lowOrder&Kt.lowOrder)}function Xt(Dt,Wt){return Wt<=32?new u(Dt.highOrder>>>Wt|Dt.lowOrder<<32-Wt,Dt.lowOrder>>>Wt|Dt.highOrder<<32-Wt):new u(Dt.lowOrder>>>Wt|Dt.highOrder<<32-Wt,Dt.highOrder>>>Wt|Dt.lowOrder<<32-Wt)}function qt(Dt){var Wt=Xt(Dt,28),Kt=Xt(Dt,34),ae=Xt(Dt,39);return new u(Wt.highOrder^Kt.highOrder^ae.highOrder,Wt.lowOrder^Kt.lowOrder^ae.lowOrder)}function oe(Dt){var Wt=Xt(Dt,14),Kt=Xt(Dt,18),ae=Xt(Dt,41);return new u(Wt.highOrder^Kt.highOrder^ae.highOrder,Wt.lowOrder^Kt.lowOrder^ae.lowOrder)}function $t(Dt){var Wt=Xt(Dt,1),Kt=Xt(Dt,8),ae=et(Dt,7);return new u(Wt.highOrder^Kt.highOrder^ae.highOrder,Wt.lowOrder^Kt.lowOrder^ae.lowOrder)}function fe(Dt){var Wt=Xt(Dt,19),Kt=Xt(Dt,61),ae=et(Dt,6);return new u(Wt.highOrder^Kt.highOrder^ae.highOrder,Wt.lowOrder^Kt.lowOrder^ae.lowOrder)}function et(Dt,Wt){return Wt<=32?new u(Dt.highOrder>>>Wt,Dt.lowOrder>>>Wt|Dt.highOrder<<32-Wt):new u(0,Dt.highOrder<<32-Wt)}var Ht=tt(Ht),Jt=Ht.length*rt;Ht=yt(Ht),Ht[Jt>>5]|=128<<24-Jt%32,Ht[(Jt+128>>10<<5)+31]=Jt;for(var q=0;q<Ht.length;q+=32){_=g[0],f=g[1],w=g[2],C=g[3],E=g[4],S=g[5],k=g[6],B=g[7];for(var U=0;U<80;U++)U<16?P[U]=new u(Ht[U*2+q],Ht[U*2+q+1]):P[U]=Pt(fe(P[U-2]),P[U-7],$t(P[U-15]),P[U-16]),F=Vt(B,oe(E),_t(E,S,k),N[U],P[U]),Y=pt(qt(_),Ot(_,f,w)),B=k,k=S,S=E,E=pt(C,F),C=w,w=f,f=_,_=pt(F,Y);g[0]=pt(_,g[0]),g[1]=pt(f,g[1]),g[2]=pt(w,g[2]),g[3]=pt(C,g[3]),g[4]=pt(E,g[4]),g[5]=pt(S,g[5]),g[6]=pt(k,g[6]),g[7]=pt(B,g[7])}for(var he=[],q=0;q<g.length;q++)he.push(g[q].highOrder),he.push(g[q].lowOrder);return Et(he)}})}},s={};function c(j){var h=s[j];if(h!==void 0)return h.exports;var u=s[j]={exports:{}};return r[j].call(u.exports,u,u.exports,c),u.exports}(function(){c.n=function(j){var h=j&&j.__esModule?function(){return j.default}:function(){return j};return c.d(h,{a:h}),h}})(),function(){c.d=function(j,h){for(var u in h)c.o(h,u)&&!c.o(j,u)&&Object.defineProperty(j,u,{enumerable:!0,get:h[u]})}}(),function(){c.o=function(j,h){return Object.prototype.hasOwnProperty.call(j,h)}}();var p={};return function(){c.d(p,{default:function(){return Xe}});var j={};j.two=function(D){return D=""+D,D.length==1&&(D="0"+D),D},j.focus=function(D){if(D.innerText.length){var H=document.createRange(),b=window.getSelection(),d=D.childNodes[D.childNodes.length-1];H.setStart(d,d.length),H.collapse(!0),b.removeAllRanges(),b.addRange(H),D.scrollLeft=D.scrollWidth}},j.isNumeric=function(D){return typeof D=="string"&&(D=D.trim()),!isNaN(D)&&D!==null&&D!==""},j.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(D){var H=Math.random()*16|0,b=D=="x"?H:H&3|8;return b.toString(16)})},j.getNode=function(){var D=document.getSelection().anchorNode;return D?D.nodeType==3?D.parentNode:D:null},j.hash=function(D){var H=0,b,d;if(D.length===0)return H;for(b=0;b<D.length;b++)d=D.charCodeAt(b),d>32&&(H=(H<<5)-H+d,H|=0);return H},j.randomColor=function(D){var H=-.25,b=("#"+Math.random().toString(16).slice(2,8).toUpperCase()).replace(/[^0-9a-f]/gi,"");b.length<6&&(b=b[0]+b[0]+b[1]+b[1]+b[2]+b[2]);var d=[],X,ht;for(ht=0;ht<3;ht++)X=parseInt(b.substr(ht*2,2),16),X=Math.round(Math.min(Math.max(0,X+X*H),255)).toString(16),d.push(("00"+X).substr(X.length));return D==!0?"#"+j.two(d[0].toString(16))+j.two(d[1].toString(16))+j.two(d[2].toString(16)):d},j.getWindowWidth=function(){var D=window,H=document,b=H.documentElement,d=H.getElementsByTagName("body")[0],X=D.innerWidth||b.clientWidth||d.clientWidth;return X},j.getWindowHeight=function(){var D=window,H=document,b=H.documentElement,d=H.getElementsByTagName("body")[0],X=D.innerHeight||b.clientHeight||d.clientHeight;return X},j.getPosition=function(D){if(D.changedTouches&&D.changedTouches[0])var H=D.changedTouches[0].pageX,b=D.changedTouches[0].pageY;else var H=window.Event?D.pageX:D.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),b=window.Event?D.pageY:D.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);return[H,b]},j.click=function(D){if(D.click)D.click();else{var H=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});D.dispatchEvent(H)}},j.findElement=function(D,H){var b=!1;function d(X){X&&!b&&(typeof H=="function"?b=H(X):typeof H=="string"&&X.classList&&X.classList.contains(H)&&(b=X)),X.parentNode&&!b&&d(X.parentNode)}return d(D),b};var h=j;function u(){var D={};D.now=function(X,ht){var dt=null,K=null,W=null,nt=null,lt=null,bt=null;return Array.isArray(X)?(dt=X[0],K=X[1],W=X[2],nt=X[3],lt=X[4],bt=X[5]):(X||(X=new Date),dt=X.getFullYear(),K=X.getMonth()+1,W=X.getDate(),nt=X.getHours(),lt=X.getMinutes(),bt=X.getSeconds()),ht==!0?h.two(dt)+"-"+h.two(K)+"-"+h.two(W):h.two(dt)+"-"+h.two(K)+"-"+h.two(W)+" "+h.two(nt)+":"+h.two(lt)+":"+h.two(bt)},D.toArray=function(X){var dt=X.split(X.indexOf("T")!==-1?"T":" "),ht=dt[1],dt=dt[0].split("-"),K=parseInt(dt[0]),W=parseInt(dt[1]),nt=parseInt(dt[2]),lt=0,bt=0;return ht&&(ht=ht.split(":"),lt=parseInt(ht[0]),bt=parseInt(ht[1])),[K,W,nt,lt,bt,0]};var H=Date.UTC(1900,0,0),b=Date.UTC(1900,1,29),d=864e5;return D.dateToNum=function(X){typeof X=="string"&&(X=new Date(X+"  GMT+0"));var ht=X.getTime();return ht>=b&&(ht+=d),ht-=H,ht/d},D.numToDate=function(X){var ht=H+X*d;ht>=b&&(ht-=d);const dt=new Date(ht);var K=[dt.getUTCFullYear(),dt.getUTCMonth()+1,dt.getUTCDate(),dt.getUTCHours(),dt.getUTCMinutes(),dt.getUTCSeconds()];return D.now(K)},D.weekdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],D.months=["January","February","March","April","May","June","July","August","September","October","November","December"],D.weekdaysShort=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],D.monthsShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],D}var g=u(),N=function(D){document.dictionary||(document.dictionary={});var H=null,b=null,d=Object.keys(D);for(b=0;b<d.length;b++)document.dictionary[d[b]]=D[d[b]];for(b=0;b<g.weekdays.length;b++)H=P(g.weekdays[b]),g.weekdays[b]&&(g.weekdays[b]=H,g.weekdaysShort[b]=H.substr(0,3));for(b=0;b<g.months.length;b++)H=P(g.months[b]),H&&(g.months[b]=H,g.monthsShort[b]=H.substr(0,3))},P=function(D){return typeof document<"u"&&document.dictionary&&document.dictionary[D]||D},_={setDictionary:N,translate:P};function f(D,H){if(H==!0)document.jsuitesComponents=document.jsuitesComponents.filter(function(d){return d!==null}),setTimeout(function(){document.jsuitesComponents.push(D)},0);else{var b=document.jsuitesComponents.indexOf(D);b>=0&&document.jsuitesComponents.splice(b,1)}}function w(D,H,b){if(D=D.split("."),D.length){let d=this,X=null;for(;D.length>1;)if(X=D.shift(),d.hasOwnProperty(X))d=d[X];else{if(typeof H>"u")return;d[X]={},d=d[X]}if(X=D.shift(),typeof H<"u")return b===!0?delete d[X]:d[X]=H,!0;if(d)return d[X]}return!1}function C(D,H){var b={};b.options={};var d={pointer:null,direction:null,ondragstart:null,ondragend:null,ondrop:null},X=null;for(var ht in d)H&&H.hasOwnProperty(ht)?b.options[ht]=H[ht]:b.options[ht]=d[ht];D.classList.add("jsorting"),D.addEventListener("dragstart",function(W){var nt=Array.prototype.indexOf.call(W.target.parentNode.children,W.target);X={element:W.target,o:nt,d:nt},W.target.style.opacity="0.25",typeof b.options.ondragstart=="function"&&b.options.ondragstart(D,W.target,W)}),D.addEventListener("dragover",function(W){if(W.preventDefault(),dt(W.target)&&X&&W.target.getAttribute("draggable")=="true"&&X.element!=W.target){if(b.options.direction)var nt=W.target.clientWidth/2>W.offsetX;else var nt=W.target.clientHeight/2>W.offsetY;nt?W.target.parentNode.insertBefore(X.element,W.target):W.target.parentNode.insertBefore(X.element,W.target.nextSibling),X.d=Array.prototype.indexOf.call(W.target.parentNode.children,X.element)}}),D.addEventListener("dragleave",function(W){W.preventDefault()}),D.addEventListener("dragend",function(W){W.preventDefault(),X&&(typeof b.options.ondragend=="function"&&b.options.ondragend(D,X.element,W),X.o<X.d?W.target.parentNode.insertBefore(X.element,W.target.parentNode.children[X.o]):W.target.parentNode.insertBefore(X.element,W.target.parentNode.children[X.o].nextSibling),X.element.style.opacity="",X=null)}),D.addEventListener("drop",function(W){W.preventDefault(),X&&X.o!=X.d&&typeof b.options.ondrop=="function"&&b.options.ondrop(D,X.o,X.d,X.element,W.target,W),X.element.style.opacity="",X=null});for(var dt=function(W){var nt=!1;function lt(bt){bt.className&&bt.classList.contains("jsorting")&&(nt=!0),nt||lt(bt.parentNode)}return lt(W),nt},K=0;K<D.children.length;K++)D.children[K].hasAttribute("draggable")||D.children[K].setAttribute("draggable","true");return D.val=function(){for(var W=null,nt=[],lt=0;lt<D.children.length;lt++)(W=D.children[lt].getAttribute("data-id"))&&nt.push(W);return nt},D}function E(D,H){var b={};(!H.loadUp||typeof H.loadUp!="function")&&(H.loadUp=function(){return!1}),(!H.loadDown||typeof H.loadDown!="function")&&(H.loadDown=function(){return!1}),H.timer||(H.timer=100);var d=null,X=function(ht){if(d==null){var dt=!1,K=D.scrollTop;D.scrollTop+D.clientHeight*2>=D.scrollHeight?H.loadDown()&&(K==D.scrollTop&&(D.scrollTop=D.scrollTop-D.clientHeight),dt=!0):D.scrollTop<=D.clientHeight&&H.loadUp()&&(K==D.scrollTop&&(D.scrollTop=D.scrollTop+D.clientHeight),dt=!0),d=setTimeout(function(){d=null},H.timer),dt&&typeof H.onupdate=="function"&&H.onupdate()}};return D.onscroll=function(ht){X()},D.onwheel=function(ht){X()},b}function S(){var D=function(H,b){if(Array.isArray(H)){var d={instance:[],complete:b};if(H.length>0)for(var X=0;X<H.length;X++)H[X].multiple=d,d.instance.push(D(H[X]));return d}if(H.data||(H.data={}),H.type&&(H.method=H.type),H.method||(H.method="GET"),H.dataType||(H.dataType="json"),H.data){var ht=function(bt,Rt){var Mt=[];if(bt){var Tt=Object.keys(bt);if(Tt.length)for(var jt=0;jt<Tt.length;jt++){if(Rt)var It=Rt+"["+Tt[jt]+"]";else var It=Tt[jt];if(bt[It]instanceof FileList)Mt[It]=bt[Tt[jt]];else if(bt[Tt[jt]]===null||bt[Tt[jt]]===void 0)Mt[It]="";else if(typeof bt[Tt[jt]]=="object")for(var Zt=ht(bt[Tt[jt]],It),ce=Object.keys(Zt),ve=0;ve<ce.length;ve++)Mt[ce[ve]]=Zt[ce[ve]];else Mt[It]=bt[Tt[jt]]}}return Mt},dt=ht(H.data),K=Object.keys(dt);if(H.method=="GET"){if(K.length){for(var W=[],X=0;X<K.length;X++)W.push(K[X]+"="+encodeURIComponent(dt[K[X]]));H.url.indexOf("?")<0&&(H.url+="?"),H.url+=W.join("&")}}else for(var W=new FormData,X=0;X<K.length;X++)if(dt[K[X]]instanceof FileList){if(dt[K[X]].length)for(var nt=0;nt<dt[K[X]].length;nt++)W.append(K[X],dt[K[X]][nt],dt[K[X]][nt].name)}else W.append(K[X],dt[K[X]])}var lt=new XMLHttpRequest;return lt.open(H.method,H.url,!0),lt.setRequestHeader("X-Requested-With","XMLHttpRequest"),H.contentType&&lt.setRequestHeader("Content-Type",H.contentType),H.method==="POST"?lt.setRequestHeader("Accept","application/json"):H.dataType==="blob"?lt.responseType="blob":H.contentType||(H.dataType==="json"?lt.setRequestHeader("Content-Type","text/json"):H.dataType==="html"&&lt.setRequestHeader("Content-Type","text/html")),H.cache!==!0&&(lt.setRequestHeader("pragma","no-cache"),lt.setRequestHeader("cache-control","no-cache")),H.withCredentials===!0&&(lt.withCredentials=!0),typeof H.beforeSend=="function"&&H.beforeSend(lt),typeof D.beforeSend=="function"&&D.beforeSend(lt),document.ajax&&typeof document.ajax.beforeSend=="function"&&document.ajax.beforeSend(lt),lt.onload=function(){if(lt.status>=200&&lt.status<300)if(H.dataType==="json")try{var bt=JSON.parse(lt.responseText);H.success&&typeof H.success=="function"&&H.success(bt)}catch(Mt){H.error&&typeof H.error=="function"&&H.error(Mt,bt)}else{if(H.dataType==="blob")var bt=lt.response;else var bt=lt.responseText;H.success&&typeof H.success=="function"&&H.success(bt)}else H.error&&typeof H.error=="function"&&H.error(lt.responseText,lt.status);if(D.queue&&D.queue.length>0&&D.send(D.queue.shift()),D.requests&&D.requests.length){var Rt=D.requests.indexOf(lt);if(D.requests.splice(Rt,1),D.requests.length||H.complete&&typeof H.complete=="function"&&H.complete(bt),H.group&&D.oncomplete&&typeof D.oncomplete[H.group]=="function"&&(D.pending(H.group)||(D.oncomplete[H.group](),D.oncomplete[H.group]=null)),H.multiple&&H.multiple.instance){var Rt=H.multiple.instance.indexOf(lt);H.multiple.instance.splice(Rt,1),H.multiple.instance.length||H.multiple.complete&&typeof H.multiple.complete=="function"&&H.multiple.complete(bt)}}},lt.options=H,lt.data=W,H.queue===!0&&D.requests.length>0?D.queue.push(lt):D.send(lt),lt};return D.send=function(H){H.data?Array.isArray(H.data)?H.send(H.data.join("&")):H.send(H.data):H.send(),D.requests.push(H)},D.exists=function(H,b){var d=new XMLHttpRequest;d.open("HEAD",H,!1),d.send(),d.status&&b(d.status)},D.pending=function(H){var b=0,d=D.requests;if(d&&d.length)for(var X=0;X<d.length;X++)(!H||H==d[X].options.group)&&b++;return b},D.oncomplete={},D.requests=[],D.queue=[],D}var k=S();function B(){const D={loading:{}};return D.loading.show=function(H){D.loading.element||(D.loading.element=document.createElement("div"),D.loading.element.className="jloading"),document.body.appendChild(D.loading.element),H>0&&setTimeout(function(){D.loading.hide()},H*1e3)},D.loading.hide=function(){D.loading.element&&D.loading.element.parentNode&&document.body.removeChild(D.loading.element)},D.slideLeft=function(H,b,d){b==!0?(H.classList.add("slide-left-in"),setTimeout(function(){H.classList.remove("slide-left-in"),typeof d=="function"&&d()},400)):(H.classList.add("slide-left-out"),setTimeout(function(){H.classList.remove("slide-left-out"),typeof d=="function"&&d()},400))},D.slideRight=function(H,b,d){b===!0?(H.classList.add("slide-right-in"),setTimeout(function(){H.classList.remove("slide-right-in"),typeof d=="function"&&d()},400)):(H.classList.add("slide-right-out"),setTimeout(function(){H.classList.remove("slide-right-out"),typeof d=="function"&&d()},400))},D.slideTop=function(H,b,d){b===!0?(H.classList.add("slide-top-in"),setTimeout(function(){H.classList.remove("slide-top-in"),typeof d=="function"&&d()},400)):(H.classList.add("slide-top-out"),setTimeout(function(){H.classList.remove("slide-top-out"),typeof d=="function"&&d()},400))},D.slideBottom=function(H,b,d){b===!0?(H.classList.add("slide-bottom-in"),setTimeout(function(){H.classList.remove("slide-bottom-in"),typeof d=="function"&&d()},400)):(H.classList.add("slide-bottom-out"),setTimeout(function(){H.classList.remove("slide-bottom-out"),typeof d=="function"&&d()},100))},D.fadeIn=function(H,b){H.style.display="",H.classList.add("fade-in"),setTimeout(function(){H.classList.remove("fade-in"),typeof b=="function"&&b()},2e3)},D.fadeOut=function(H,b){H.classList.add("fade-out"),setTimeout(function(){H.style.display="none",H.classList.remove("fade-out"),typeof b=="function"&&b()},1e3)},D}var q=B();function U(){var D={text:["@"],currency:["#(.{1})##0?(.{1}0+)?( ?;(.*)?)?","#"],percentage:["0{1}(.{1}0+)?%"],numeric:["0{1}(.{1}0+)?"],datetime:["YYYY","YYY","YY","MMMMM","MMMM","MMM","MM","DDDDD","DDDD","DDD","DD","DY","DAY","WD","D","Q","MONTH","MON","HH24","HH12","HH","\\[H\\]","H","AM/PM","MI","SS","MS","Y","M"],general:["A","0","[0-9a-zA-Z$]+","."]},H=function(){if(this.mask.toLowerCase().indexOf("[h]")!==-1){var R=0;this.date[4]&&(R=parseFloat(this.date[4]/60));var Q=parseInt(this.date[3])+R;Q/=24}else!(this.date[0]&&this.date[1]&&this.date[2])&&(this.date[3]||this.date[4])?Q=h.two(this.date[3])+":"+h.two(this.date[4])+":"+h.two(this.date[5]):(this.date[0]&&this.date[1]&&!this.date[2]&&(this.date[2]=1),Q=h.two(this.date[0])+"-"+h.two(this.date[1])+"-"+h.two(this.date[2]),(this.date[3]||this.date[4]||this.date[5])&&(Q+=" "+h.two(this.date[3])+":"+h.two(this.date[4])+":"+h.two(this.date[5])));return Q},b=function(){var R="";if(!(this.date[0]&&this.date[1]&&this.date[2])&&(this.date[3]||this.date[4])){if(this.mask.toLowerCase().indexOf("[h]")!==-1)R=parseInt(this.date[3]);else{let ut=parseInt(this.date[3]);ut<13&&this.values.indexOf("PM")!==-1?R=(ut+12)%24:R=ut%24}this.date[4]&&(R+=parseFloat(this.date[4]/60)),this.date[5]&&(R+=parseFloat(this.date[5]/3600)),R/=24}else if(this.date[0]||this.date[1]||this.date[2]||this.date[3]||this.date[4]||this.date[5]){this.date[0]&&this.date[1]&&!this.date[2]&&(this.date[2]=1);var Q=g.now(this.date);R=g.dateToNum(Q),this.date[4]&&(R+=parseFloat(this.date[4]/60))}return isNaN(R)&&(R=""),R},d=function(R){return R===null||R===""||R===void 0},X=function(R){var Q=(""+R)[0];return Q=="="},ht=function(R){return R==="currency"||R==="percentage"||R==="numeric"},dt=function(R){if(R&&Number(R)==R)return".";if(this.options.decimal)return this.options.decimal;if(this.locale){var Q=Intl.NumberFormat(this.locale).format(1.1);return this.options.decimal=Q[1]}else{R||(R=this.mask);var ut=new RegExp("0{1}(.{1})0+","ig"),Q=ut.exec(R);if(Q&&Q[1]&&Q[1].length==1)return this.options.decimal=Q[1],Q[1];var ut=new RegExp("#{1}(.{1})#+","ig"),Q=ut.exec(R);Q&&Q[1]&&Q[1].length==1?Q[1]===","?this.options.decimal=".":this.options.decimal=",":this.options.decimal="1.1".toLocaleString().substring(1,2)}return this.options.decimal?this.options.decimal:null},K=function(R,Q){if(R=="")return"";Q||(Q=dt.call(this)),R=(""+R).split(Q);var ut=R[0].match(/[-]+/g);if(ut&&ut.length?ut=!0:ut=!1,R[0]=R[0].match(/[0-9]+/g),R[0]?(ut&&R[0].unshift("-"),R[0]=R[0].join("")):ut&&(R[0]="-"),R[0]||R[1])R[1]!==void 0&&(R[1]=R[1].match(/[0-9]+/g),R[1]?R[1]=R[1].join(""):R[1]="");else return"";return R},W=function(R,Q){if(R==="")return"";var ut=dt.call(this),St=this.options;if(R=K.call(this,R),R==="")return"";var ct=null;if(R[0]&&(St.style==="percent"?ct=parseFloat(R[0])/100:ct=parseFloat(R[0]+".1")),(R[0]==="-"||R[0]==="-00")&&!R[1]&&Q&&Q.inputType=="deleteContentBackward")return"";var xt=new Intl.NumberFormat(this.locale,St).format(ct);if(xt=xt.split(ut),St.style==="percent"&&xt[0].indexOf("%")!==-1&&(xt[0]=xt[0].replace("%",""),xt[2]="%"),typeof xt[1]<"u"){var Ft=xt[1].replace(/[0-9]*/g,"");Ft&&(xt[2]=Ft)}return R[1]!==void 0?xt[1]=ut+R[1]:xt[1]="",xt.join("")},nt=function(R,Q){var ut=Rt.call(R);if(ut){var St=W.call(this,ut,Q),ct=St.length-ut.length,xt=bt.call(R)+ct;Rt.call(R,St,xt,!0)}},lt=function(R){var Q=K.call(this,R);return Q?(Q[0]==="-"&&(Q[0]="-0"),parseFloat(Q.join("."))):null},bt=function(R,Q){if(R===void 0)if(this.tagName=="DIV"){var ut=0,St=window.getSelection();if(St&&St.rangeCount!==0){var ct=St.getRangeAt(0),xt=ct.cloneRange();xt.selectNodeContents(this),xt.setEnd(ct.endContainer,ct.endOffset),ut=xt.toString().length}return ut}else return this.selectionStart;else{var Ft=Rt.call(this);if(Q){for(var xt=null,Yt=0;Yt<Ft.length;Yt++)(Ft[Yt].match(/[\-0-9]/g)||Ft[Yt]==="."||Ft[Yt]===",")&&(xt=Yt);xt===null&&(xt=Ft.indexOf(" ")),R>=xt&&(R=xt+1)}if(R>Ft.length&&(R=Ft.length),R)if(this.tagName=="DIV"){var St=window.getSelection(),ct=document.createRange();this.childNodes[0]&&(ct.setStart(this.childNodes[0],R),St.removeAllRanges(),St.addRange(ct))}else this.selectionStart=R,this.selectionEnd=R}},Rt=function(R,Q,ut){if(this.tagName=="DIV")if(R===void 0){var R=this.innerText;return this.value&&this.value.length>R.length&&(R=this.value),R}else this.innerText!==R&&(this.innerText=R,Q&&bt.call(this,Q,ut));else{if(R===void 0)return this.value;this.value!==R&&(this.value=R,Q&&bt.call(this,Q,ut))}},Mt=g.weekdays,Tt=g.weekdaysShort,jt=g.months,It=g.monthsShort,Zt={YEAR:function(R,Q){var ut=""+new Date().getFullYear();if(typeof this.values[this.index]>"u"&&(this.values[this.index]=""),parseInt(R)>=0&&parseInt(R)<=10&&this.values[this.index].length<Q&&(this.values[this.index]+=R),this.values[this.index].length==Q){if(Q==2)var ut=ut.substr(0,2)+this.values[this.index];else if(Q==3)var ut=ut.substr(0,1)+this.values[this.index];else if(Q==4)var ut=this.values[this.index];this.date[0]=ut,this.index++}},YYYY:function(R){Zt.YEAR.call(this,R,4)},YYY:function(R){Zt.YEAR.call(this,R,3)},YY:function(R){Zt.YEAR.call(this,R,2)},FIND:function(R,Q){if(d(this.values[this.index])&&(this.values[this.index]=""),this.event&&this.event.inputType&&this.event.inputType.indexOf("delete")>-1){this.values[this.index]+=R;return}for(var ut=0,St=0,ct=(this.values[this.index]+R).toLowerCase(),xt=0;xt<Q.length;xt++)Q[xt].toLowerCase().indexOf(ct)==0&&(ut=xt,St++);if(St>1)this.values[this.index]+=R;else if(St==1){var Ft=Q[ut].length-this.values[this.index].length-1;return this.position+=Ft,this.values[this.index]=Q[ut],this.index++,ut}},MMM:function(R){var Q=Zt.FIND.call(this,R,It);Q!==void 0&&(this.date[1]=Q+1)},MON:function(R){Zt.MMM.call(this,R)},MMMM:function(R){var Q=Zt.FIND.call(this,R,jt);Q!==void 0&&(this.date[1]=Q+1)},MONTH:function(R){Zt.MMMM.call(this,R)},MMMMM:function(R){d(this.values[this.index])&&(this.values[this.index]="");for(var Q=(this.values[this.index]+R).toLowerCase(),ut=0;ut<jt.length;ut++)if(jt[ut][0].toLowerCase().indexOf(Q)==0){this.values[this.index]=jt[ut][0],this.date[1]=ut+1,this.index++;break}},MM:function(R){d(this.values[this.index])?parseInt(R)>1&&parseInt(R)<10?(this.date[1]=this.values[this.index]="0"+R,this.index++):parseInt(R)<2&&(this.values[this.index]=R):this.values[this.index]==1&&parseInt(R)<3?(this.date[1]=this.values[this.index]+=R,this.index++):this.values[this.index]==0&&parseInt(R)>0&&parseInt(R)<10&&(this.date[1]=this.values[this.index]+=R,this.index++)},M:function(R){var Q=!1;if(parseInt(R)>=0&&parseInt(R)<10)if(d(this.values[this.index]))this.values[this.index]=R,R>1&&(this.date[1]=this.values[this.index],this.index++);else if(this.values[this.index]==1&&parseInt(R)<3)this.date[1]=this.values[this.index]+=R,this.index++;else if(this.values[this.index]==0&&parseInt(R)>0)this.date[1]=this.values[this.index]+=R,this.index++;else var Q=!0;else var Q=!0;if(Q==!0){var ut=parseInt(this.values[this.index]);ut>0&&ut<12&&(this.date[1]=this.values[this.index],this.index++,this.position--)}},D:function(R){var Q=!1;if(parseInt(R)>=0&&parseInt(R)<10)if(d(this.values[this.index]))this.values[this.index]=R,parseInt(R)>3&&(this.date[2]=this.values[this.index],this.index++);else if(this.values[this.index]==3&&parseInt(R)<2)this.date[2]=this.values[this.index]+=R,this.index++;else if(this.values[this.index]==1||this.values[this.index]==2)this.date[2]=this.values[this.index]+=R,this.index++;else if(this.values[this.index]==0&&parseInt(R)>0)this.date[2]=this.values[this.index]+=R,this.index++;else var Q=!0;else var Q=!0;if(Q==!0){var ut=parseInt(this.values[this.index]);ut>0&&ut<32&&(this.date[2]=this.values[this.index],this.index++,this.position--)}},DD:function(R){d(this.values[this.index])?parseInt(R)>3&&parseInt(R)<10?(this.date[2]=this.values[this.index]="0"+R,this.index++):parseInt(R)<10&&(this.values[this.index]=R):this.values[this.index]==3&&parseInt(R)<2?(this.date[2]=this.values[this.index]+=R,this.index++):(this.values[this.index]==1||this.values[this.index]==2)&&parseInt(R)<10?(this.date[2]=this.values[this.index]+=R,this.index++):this.values[this.index]==0&&parseInt(R)>0&&parseInt(R)<10&&(this.date[2]=this.values[this.index]+=R,this.index++)},DDD:function(R){Zt.FIND.call(this,R,Tt)},DY:function(R){Zt.DDD.call(this,R)},DDDD:function(R){Zt.FIND.call(this,R,Mt)},DAY:function(R){Zt.DDDD.call(this,R)},HH12:function(R,Q){d(this.values[this.index])?parseInt(R)>1&&parseInt(R)<10?(Q&&(R=0+R),this.date[3]=this.values[this.index]=R,this.index++):parseInt(R)<10&&(this.values[this.index]=R):this.values[this.index]==1&&parseInt(R)<3?(this.date[3]=this.values[this.index]+=R,this.index++):this.values[this.index]<1&&parseInt(R)<10&&(this.date[3]=this.values[this.index]+=R,this.index++)},HH24:function(R,Q){parseInt(R)>=0&&parseInt(R)<10&&(this.values[this.index]==null||this.values[this.index]==""?parseInt(R)>2&&parseInt(R)<10?(Q&&(R=0+R),this.date[3]=this.values[this.index]=R,this.index++):parseInt(R)<10&&(this.values[this.index]=R):this.values[this.index]==2&&parseInt(R)<4?(!Q&&this.values[this.index]==="0"&&(this.values[this.index]=""),this.date[3]=this.values[this.index]+=R,this.index++):this.values[this.index]<2&&parseInt(R)<10&&(!Q&&this.values[this.index]==="0"&&(this.values[this.index]=""),this.date[3]=this.values[this.index]+=R,this.index++))},HH:function(R){Zt.HH24.call(this,R,1)},H:function(R){Zt.HH24.call(this,R,0)},"\\[H\\]":function(R){this.values[this.index]==null&&(this.values[this.index]=""),R.match(/[0-9]/g)?this.date[3]=this.values[this.index]+=R:this.values[this.index].match(/[0-9]/g)&&(this.date[3]=this.values[this.index],this.index++,this.position--)},N60:function(R,Q){this.values[this.index]==null||this.values[this.index]==""?parseInt(R)>5&&parseInt(R)<10?(this.date[Q]=this.values[this.index]="0"+R,this.index++):parseInt(R)<10&&(this.values[this.index]=R):parseInt(R)<10&&(this.date[Q]=this.values[this.index]+=R,this.index++)},MI:function(R){Zt.N60.call(this,R,4)},SS:function(R){Zt.N60.call(this,R,5)},"AM/PM":function(R){typeof this.values[this.index]>"u"&&(this.values[this.index]=""),this.values[this.index]===""?R.match(/a/i)&&this.date[3]<13?this.values[this.index]+="A":R.match(/p/i)&&(this.values[this.index]+="P"):(this.values[this.index]==="A"||this.values[this.index]==="P")&&(this.values[this.index]+="M",this.index++)},WD:function(R){typeof this.values[this.index]>"u"&&(this.values[this.index]=""),parseInt(R)>=0&&parseInt(R)<7&&(this.values[this.index]=R),this.values[this.index].length==1&&this.index++},"0{1}(.{1}0+)?":function(R){var Q=dt.call(this),ut=!1;d(this.values[this.index])?this.values[this.index]="":this.values[this.index]=="-"&&(ut=!0);var St=K.call(this,this.values[this.index],Q);St&&(this.values[this.index]=St.join(Q)),parseInt(R)>=0&&parseInt(R)<10?(this.values[this.index]=="0"&&R>0?this.values[this.index]="":this.values[this.index]=="-0"&&R>0&&(this.values[this.index]="-"),(this.values[this.index]!="0"&&this.values[this.index]!="-0"||R==Q)&&(this.values[this.index]+=R)):Q&&R==Q?this.values[this.index].indexOf(Q)==-1&&(this.values[this.index]||(this.values[this.index]="0"),this.values[this.index]+=R):R=="-"&&(ut=!0),ut===!0&&this.values[this.index][0]!=="-"&&(this.values[this.index]="-"+this.values[this.index])},"0{1}(.{1}0+)?%":function(R){Zt["0{1}(.{1}0+)?"].call(this,R),this.values[this.index].match(/[\-0-9]/g)?this.values[this.index]&&this.values[this.index].indexOf("%")==-1&&(this.values[this.index]+="%"):this.values[this.index]=""},"#(.{1})##0?(.{1}0+)?( ?;(.*)?)?":function(R){Zt["0{1}(.{1}0+)?"].call(this,R);var Q=dt.call(this),ut=this.tokens[this.index].substr(1,1),St=this.values[this.index][0]==="-",ct=K.call(this,this.values[this.index],Q);if(ct!==""){var xt=ct[0].match(/[0-9]/g);if(xt){xt=xt.join("");for(var Ft=[],Yt=0,wt=xt.length-1;wt>=0;wt--)Ft.push(xt[wt]),Yt++,Yt%3||Ft.push(ut);Ft=Ft.reverse(),ct[0]=Ft.join(""),ct[0].substr(0,1)==ut&&(ct[0]=ct[0].substr(1))}else ct[0]="";this.values[this.index]=ct.join(Q),St&&(this.values[this.index]="-"+this.values[this.index])}},0:function(R){R.match(/[0-9]/g)&&(this.values[this.index]=R,this.index++)},"[0-9a-zA-Z$]+":function(R){d(this.values[this.index])&&(this.values[this.index]="");var Q=this.tokens[this.index],ut=this.values[this.index],St=ut.length;Q[St]==R?(this.values[this.index]+=R,this.values[this.index]==Q&&this.index++):(this.values[this.index]=Q,this.index++,R.match(/[\-0-9]/g)&&this.position--)},A:function(R){R.match(/[a-zA-Z]/gi)&&(this.values[this.index]=R,this.index++)},".":function(R){Zt["[0-9a-zA-Z$]+"].call(this,R)},"@":function(R){d(this.values[this.index])&&(this.values[this.index]=""),this.values[this.index]+=R}},ce=function(R){if(this.type=="general")var Q=[].concat(D.general);else var Q=[].concat(D.currency,D.datetime,D.percentage,D.numeric,D.text,D.general);var ut=new RegExp(Q.join("|"),"gi");return R.match(ut)},ve=function(R){if(this.type)if(this.type=="text")var Q=["text"];else if(this.type=="general")var Q=["general"];else if(this.type=="datetime")var Q=["numeric","datetime","general"];else var Q=["currency","percentage","numeric","general"];else var Q=Object.keys(D);for(var ut=0;ut<Q.length;ut++)for(var St=Q[ut],ct=0;ct<D[St].length;ct++){var xt=new RegExp(D[St][ct],"gi"),Ft=R.match(xt);if(Ft)return{type:St,method:D[St][ct]}}},Ct=function(R){for(var Q=[],ut=0;ut<R.length;ut++){var St=ve.call(this,R[ut]);St?Q.push(St.method):Q.push(null)}for(var ut=0;ut<Q.length;ut++)Q[ut]=="MM"&&(Q[ut-1]&&Q[ut-1].indexOf("H")>=0||Q[ut-2]&&Q[ut-2].indexOf("H")>=0||Q[ut+1]&&Q[ut+1].indexOf("S")>=0||Q[ut+2]&&Q[ut+2].indexOf("S")>=0)&&(Q[ut]="MI");return Q},Ut=function(R){var Q=ve.call(this,R);if(Q)var ut=Q.type;if(ut){for(var St=0,ct=ce.call(this,R),xt=0;xt<ct.length;xt++)Q=ve.call(this,ct[xt]),Q&&ht(Q.type)&&St++;St>1&&(ut="general")}return ut},at=function(){typeof Zt[this.methods[this.index]]=="function"?(Zt[this.methods[this.index]].call(this,this.value[this.position]),this.position++):(this.values[this.index]=this.tokens[this.index],this.index++)},st=function(R){return(""+ +R).replace(/(-?)(\d*)\.?(\d*)e([+-]\d+)/,function(Q,ut,St,ct,xt){return xt<0?ut+"0."+Array(1-xt-St.length).join(0)+St+ct:ut+St+ct+Array(xt-ct.length+1).join(0)})},vt=function(R,Q,ut){var St=null,ct={input:null,value:null,options:{},values:[],index:0,position:0,date:[0,0,0,0,0,0],number:0};if(typeof R=="object"){if(ct.input=R.target,ct.value=Rt.call(R.target),ct.caret=bt.call(R.target),(St=R.target.getAttribute("data-mask"))&&(ct.mask=St),(St=R.target.getAttribute("data-type"))&&(ct.type=St),R.target.mask?(R.target.mask.options&&(ct.options=R.target.mask.options),R.target.mask.locale&&(ct.locale=R.target.mask.locale)):(St=R.target.getAttribute("data-locale"))&&(ct.locale=St,ct.mask&&(ct.options.style=ct.mask)),R.target.attributes&&R.target.attributes.length)for(var xt=0;xt<R.target.attributes.length;xt++){var Ft=R.target.attributes[xt].name,Yt=R.target.attributes[xt].value;Ft.substr(0,4)=="data"&&(ct.options[Ft.substr(5)]=Yt)}}else{if(typeof Q=="string")ct.mask=Q;else for(var Ft=Object.keys(Q),xt=0;xt<Ft.length;xt++)ct[Ft[xt]]=Q[Ft[xt]];typeof R=="number"&&(dt.call(ct,ct.mask),R=(""+R).replace(".",ct.options.decimal)),ct.value=R,ct.input&&(Rt.call(ct.input,R),h.focus(ct.input),ct.caret=bt.call(ct.input))}if(!X(ct.value)&&(ct.mask||ct.locale)){if(ct.mask){if(ct.mask=ct.mask.replace(new RegExp(/\[h]/),"|h|"),ct.mask=ct.mask.replace(new RegExp(/\[.*?\]/),""),ct.mask=ct.mask.replace(new RegExp(/\|h\|/),"[h]"),ct.mask.indexOf(";")!==-1){var St=ct.mask.split(";");ct.mask=St[0]}if(ct.mask.indexOf("##")!==-1){var wt=ct.mask.split(";");wt[0]&&(typeof R=="object"&&(wt[0]=wt[0].replace(new RegExp(/_\)/g),""),wt[0]=wt[0].replace(new RegExp(/_\(/g),"")),wt[0]=wt[0].replace("*","	"),wt[0]=wt[0].replace(new RegExp(/_-/g),""),wt[0]=wt[0].replace(new RegExp(/_/g),""),wt[0]=wt[0].replace("##0.###","##0.000"),wt[0]=wt[0].replace("##0.##","##0.00"),wt[0]=wt[0].replace("##0.#","##0.0"),wt[0]=wt[0].replace("##0,###","##0,000"),wt[0]=wt[0].replace("##0,##","##0,00"),wt[0]=wt[0].replace("##0,#","##0,0")),ct.mask=wt[0]}if(ct.mask.indexOf("\\")!==-1){var wt=ct.mask.split(";");wt[0]=wt[0].replace(new RegExp(/\\/g),""),ct.mask=wt[0]}ct.type||(ct.type=Ut.call(ct,ct.mask)),ct.tokens=ce.call(ct,ct.mask)}if(typeof R!="object"||!R.inputType||!R.inputType.indexOf("insert")||!R.inputType.indexOf("delete"))if(ct.locale)if(ct.input)nt.call(ct,ct.input,R);else var te=W.call(ct,ct.value);else{for(ct.methods=Ct.call(ct,ct.tokens),ct.event=R;ct.position<ct.value.length&&typeof ct.tokens[ct.index]<"u";)at.call(ct);var te=ct.values.join("");if(ht(ct.type)&&te!==""){for(;typeof ct.tokens[ct.index]<"u";){var St=ve.call(ct,ct.tokens[ct.index]);St&&St.type=="general"&&(ct.values[ct.index]=ct.tokens[ct.index]),ct.index++}var le=!0}else var le=!1;if(te=ct.values.join(""),ct.input){if(St=te.length-ct.value.length,St>0)var Ee=ct.caret+St;else var Ee=ct.caret;Rt.call(ct.input,te,Ee,le)}}if(ct.input){var mt=null;if(ht(ct.type)){let kt=Rt.call(ct.input);ct.number=lt.call(ct,kt),ct.type=="percentage"&&kt.indexOf("%")!==-1?mt=vt.adjustPrecision(ct.number/100):mt=ct.number}else ct.type=="datetime"&&(mt=H.call(ct),ct.date[0]&&ct.date[1]&&ct.date[2]&&ct.input.setAttribute("data-completed",!0));mt&&ct.input.setAttribute("data-value",mt)}if(te!==void 0)return ut?ct:te}};return vt.adjustPrecision=function(R){if(typeof R=="number"&&!Number.isInteger(R)){const Q=R.toString().split(".");if(Q[1]&&Q[1].length>10){let ut=0;const St=Q[1][Q[1].length-2];if(St==0||St==9){for(let ct=Q[1].length-2;ct>0;ct--)if(ut>=0&&Q[1][ct]==St){if(ut++,ut>6)break}else{ut=0;break}if(ut)return parseFloat(parseFloat(R).toFixed(Q[1].length-1))}}}return R},vt.getType=Ut,vt.prepare=function(R,Q){return Q||(Q={}),ce.call(Q,R)},vt.apply=function(R){var Q=Rt.call(R.target);R.key.length==1&&(Q+=R.key),Rt.call(R.target,vt(Q,R.target.getAttribute("data-mask")))},vt.run=function(R,Q,ut){return vt(R,{mask:Q,decimal:ut})},vt.extract=function(R,Q,ut){if(d(R)||typeof Q!="object")return R;if(Q=Object.assign({},Q),Q.options||(Q.options={}),!Q.mask&&Q.format&&(Q.mask=Q.format),Q.mask){if(Q.mask.indexOf(";")!==-1){var St=Q.mask.split(";");Q.mask=St[0]}Q.mask=Q.mask.replace(new RegExp(/\[h]/),"|h|"),Q.mask=Q.mask.replace(new RegExp(/\[.*?\]/),""),Q.mask=Q.mask.replace(new RegExp(/\|h\|/),"[h]")}dt.call(Q,Q.mask);var ct=null,xt=null;if(Q.type=="percent"||Q.options.style=="percent"?ct="percentage":Q.mask&&(ct=Ut.call(Q,Q.mask)),ct==="general"){var Ft=vt(R,Q,!0);xt=R}else if(ct==="datetime"){R instanceof Date&&(R=vt.getDateString(R,Q.mask));var Ft=vt(R,Q,!0);h.isNumeric(R)?xt=R:xt=b.call(Ft)}else{xt=lt.call(Q,R),ct==="percentage"&&R.indexOf("%")!==-1&&(xt/=100);var Ft=Q}return Ft.value=xt,!Ft.type&&ct&&(Ft.type=ct),ut?Ft:xt},vt.render=function(R,Q,ut){if(d(R)||typeof Q!="object")return R;if(Q=Object.assign({},Q),Q.options||(Q.options={}),!Q.mask&&Q.format&&(Q.mask=Q.format),Q.mask){if(Q.mask.indexOf(";")!==-1){var St=Q.mask.split(";");ut||(St[0]=St[0].replace(new RegExp(/_\)/g),""),St[0]=St[0].replace(new RegExp(/_\(/g),"")),Q.mask=St[0]}Q.mask=Q.mask.replace(new RegExp(/\[h]/),"|h|"),Q.mask=Q.mask.replace(new RegExp(/\[.*?\]/),""),Q.mask=Q.mask.replace(new RegExp(/\|h\|/),"[h]")}var ct=null;Q.type=="percent"||Q.options.style=="percent"?ct="percentage":Q.mask?ct=Ut.call(Q,Q.mask):R instanceof Date&&(ct="datetime");var xt=!1;if(ct=="datetime"||Q.type=="calendar"){var St=vt.getDateString(R,Q.mask);St&&(R=St),Q.mask&&ut&&(xt=!0)}else if(ct==="percentage"&&(R=vt.adjustPrecision(R*100)),typeof R=="number"){var St=null;if(Q.mask&&ut&&(""+R).indexOf("e")===-1){var Ft=dt.call(Q,Q.mask);Q.mask.indexOf(Ft)!==-1?(Ft=Q.mask.split(Ft),Ft=""+Ft[1].match(/[0-9]+/g),Ft=Ft.length,St=R.toFixed(Ft)):St=R.toFixed(0)}else if(Q.locale&&ut){var Ft=(""+R).split(".");if(Q.options){typeof Ft[1]>"u"&&(Ft[1]="");var wt=Ft[1].length;if(Q.options.minimumFractionDigits>wt)for(var Yt=0;Yt<Q.options.minimumFractionDigits-wt;Yt++)Ft[1]+="0"}Ft[1].length?St=Ft.join("."):St=Ft[0];var wt=Ft[1].length;Q.options&&Q.options.maximumFractionDigits<wt&&(St=parseFloat(St).toFixed(Q.options.maximumFractionDigits))}else St=st(R);St!==null&&(R=St,dt.call(Q,Q.mask),Q.options.decimal&&(R=R.replace(".",Q.options.decimal)))}else Q.mask&&ut&&(xt=!0);if(xt){var te=Q.mask.length-R.length;if(te>0)for(var Yt=0;Yt<te;Yt++)R+=" "}if(R=vt(R,Q),ut&&ct==="numeric"){var le=Q.mask.match(new RegExp(/^[0]+$/gm));if(le&&le.length===1){var Ee=le[0].length;if(Ee>3)for(R=""+R;R.length<Ee;)R="0"+R}}return R},vt.set=function(R,Q){if(Q){R.setAttribute("data-mask",Q);var ut=new Event("input",{bubbles:!0,cancelable:!0});R.dispatchEvent(ut)}},vt.extractDateFromString=function(R,Q){var ut=vt(R,{mask:Q},!0);if(R>0&&Number(R)==R&&(ut.values.join("")!==ut.value||ut.type=="numeric")){var St=new Date(Math.round((R-25569)*86400*1e3));return St.getFullYear()+"-"+h.two(St.getMonth())+"-"+h.two(St.getDate())+" 00:00:00"}var ct=!1;return ut.values.length===ut.tokens.length&&ut.values[ut.values.length-1].length>=ut.tokens[ut.tokens.length-1].length&&(ct=!0),ut.date[0]&&ut.date[1]&&(ut.date[2]||ct)?(ut.date[2]||(ut.date[2]=1),ut.date[0]+"-"+h.two(ut.date[1])+"-"+h.two(ut.date[2])+" "+h.two(ut.date[3])+":"+h.two(ut.date[4])+":"+h.two(ut.date[5])):""},vt.getDateString=function(R,Q){if(!Q)var Q={};if(Q&&typeof Q=="object")var ut=Q.format;else var ut=Q;if(ut||(ut="YYYY-MM-DD"),ut.indexOf("[h]")>=0){var St=0;if(R&&h.isNumeric(R)&&(St=parseFloat(24*Number(R)),ut.indexOf("mm")>=0)){var ct=(""+St).split(".");if(ct[1]){var xt=60*parseFloat("0."+ct[1]);xt=parseFloat(xt.toFixed(2))}else var xt=0;St=parseInt(ct[0])+":"+h.two(xt)}return St}R instanceof Date?R=g.now(R):R&&h.isNumeric(R)&&(R=g.numToDate(R));for(var Ft=["DAY","WD","DDDD","DDD","DD","D","Q","HH24","HH12","HH","H","AM/PM","MI","SS","MS","YYYY","YYY","YY","Y","MONTH","MON","MMMMM","MMMM","MMM","MM","M","."],Yt=new RegExp(Ft.join("|"),"gi"),wt=ut.match(Yt),te=0;te<wt.length;te++)wt[te].toUpperCase()=="MM"&&(wt[te-1]&&wt[te-1].toUpperCase().indexOf("H")>=0||wt[te-2]&&wt[te-2].toUpperCase().indexOf("H")>=0||wt[te+1]&&wt[te+1].toUpperCase().indexOf("S")>=0||wt[te+2]&&wt[te+2].toUpperCase().indexOf("S")>=0)&&(wt[te]="mi");var le={tokens:wt};if(R){var xt=""+R,Ee=xt.indexOf("T")!==-1?"T":" ";xt=xt.split(Ee);var ct=0,mt=0,kt=0;if(xt[1]&&(ct=xt[1].split(":"),mt=ct[1]?ct[1]:0,kt=ct[2]?ct[2]:0,ct=ct[0]?ct[0]:0),xt=xt[0].split("-"),xt[0]&&xt[1]&&xt[2]&&xt[0]>0&&xt[1]>0&&xt[1]<13&&xt[2]>0&&xt[2]<32){le.data=[xt[0],xt[1],xt[2],ct,mt,kt],le.value=[];for(var zt=new Date(le.data[0],le.data[1]-1,le.data[2],le.data[3],le.data[4],le.data[5]),ne=function(Se){var Pe=this.tokens[Se],se=Pe.toUpperCase(),ue=null;se==="YYYY"?ue=this.data[0]:se==="YYY"?ue=this.data[0].substring(1,4):se==="YY"?ue=this.data[0].substring(2,4):se==="Y"?ue=this.data[0].substring(3,4):Pe==="MON"?ue=g.months[zt.getMonth()].substr(0,3).toUpperCase():Pe==="mon"?ue=g.months[zt.getMonth()].substr(0,3).toLowerCase():Pe==="MONTH"?ue=g.months[zt.getMonth()].toUpperCase():Pe==="month"?ue=g.months[zt.getMonth()].toLowerCase():se==="MMMMM"?ue=g.months[zt.getMonth()].substr(0,1):se==="MMMM"||Pe==="Month"?ue=g.months[zt.getMonth()]:se==="MMM"||Pe=="Mon"?ue=g.months[zt.getMonth()].substr(0,3):se==="MM"?ue=h.two(this.data[1]):se==="M"?ue=zt.getMonth()+1:Pe==="DAY"?ue=g.weekdays[zt.getDay()].toUpperCase():Pe==="day"?ue=g.weekdays[zt.getDay()].toLowerCase():se==="DDDD"||Pe=="Day"?ue=g.weekdays[zt.getDay()]:se==="DDD"?ue=g.weekdays[zt.getDay()].substr(0,3):se==="DD"?ue=h.two(this.data[2]):se==="D"?ue=parseInt(this.data[2]):se==="Q"?ue=Math.floor((zt.getMonth()+3)/3):se==="HH24"||se==="HH"?(ue=this.data[3],ue>12&&this.tokens.indexOf("am/pm")!==-1&&(ue-=12),ue=h.two(ue)):se==="HH12"?this.data[3]>12?ue=h.two(this.data[3]-12):ue=h.two(this.data[3]):se==="H"?(ue=this.data[3],ue>12&&this.tokens.indexOf("am/pm")!==-1&&(ue-=12,ue=h.two(ue))):se==="MI"?ue=h.two(this.data[4]):se==="SS"?ue=h.two(this.data[5]):se==="MS"?ue=zt.getMilliseconds():se==="AM/PM"?this.data[3]>=12?ue="PM":ue="AM":se==="WD"&&(ue=g.weekdays[zt.getDay()]),ue===null?this.value[Se]=this.tokens[Se]:this.value[Se]=ue},te=0;te<le.tokens.length;te++)ne.call(le,te);R=le.value.join("")}else R=""}return R},vt}var F=U();function Y(){var D=function(H,b){if(H.calendar)return H.calendar.setOptions(b,!0);var d={type:"calendar"};d.options={},d.date=null,d.setOptions=function(st,vt){var R={type:"default",validRange:null,startingDay:null,format:"DD/MM/YYYY",readonly:!0,today:!1,time:!1,resetButton:!0,placeholder:"",months:g.monthsShort,monthsFull:g.months,weekdays:g.weekdays,textDone:_.translate("Done"),textReset:_.translate("Reset"),textUpdate:_.translate("Update"),value:null,fullscreen:!1,opened:!1,onopen:null,onclose:null,onchange:null,onupdate:null,mode:null,position:null,dataType:null,controls:!0,autoSelect:!0};for(var Q in R)st&&st.hasOwnProperty(Q)?d.options[Q]=st[Q]:(typeof d.options[Q]>"u"||vt===!0)&&(d.options[Q]=R[Q]);if(d.options.resetButton==!1?W.style.display="none":W.style.display="",d.options.readonly?H.setAttribute("readonly","readonly"):H.removeAttribute("readonly"),d.options.placeholder?H.setAttribute("placeholder",d.options.placeholder):H.removeAttribute("placeholder"),h.isNumeric(d.options.value)&&d.options.value>0&&(d.options.value=D.numToDate(d.options.value),d.options.dataType="numeric"),W.innerHTML=d.options.textReset,nt.innerHTML=d.options.textDone,ve.innerHTML=d.options.textUpdate,H.setAttribute("data-mask",d.options.format.toLowerCase()),!d.options.value&&d.options.today)var ut=D.now();else var ut=d.options.value;return ut&&(d.options.value=null,d.setValue(ut)),d},d.open=function(st){if(!K.classList.contains("jcalendar-focus")&&!K.classList.contains("jcalendar-inline")){if(D.current=d,f(d,!0),d.getDays(),d.options.type=="year-month-picker"&&d.getMonths(),d.options.time&&(Ct.value=d.date[3],Ut.value=d.date[4]),K.classList.add("jcalendar-focus"),h.getWindowWidth()<800||d.options.fullscreen)K.classList.add("jcalendar-fullsize"),q.slideBottom(bt,1);else{K.classList.remove("jcalendar-fullsize");var vt=H.getBoundingClientRect(),R=bt.getBoundingClientRect();if(d.options.position)lt.style.position="fixed",window.innerHeight<vt.bottom+R.height?lt.style.top=vt.top-(R.height+2)+"px":lt.style.top=vt.top+vt.height+2+"px",lt.style.left=vt.left+"px";else{if(window.innerHeight<vt.bottom+R.height){var Q=-1*(vt.height+R.height+2);Q+vt.top<0&&(Q=-1*(vt.top+vt.height)),lt.style.top=Q+"px"}else lt.style.top="2px";if(window.innerWidth<vt.left+R.width){var Q=window.innerWidth-(vt.left+R.width+20);lt.style.left=Q+"px"}else lt.style.left="0px"}}typeof d.options.onopen=="function"&&d.options.onopen(H)}},d.close=function(st,vt){if(d.options.autoSelect!==!0&&typeof vt>"u"&&(vt=!1),K.classList.contains("jcalendar-focus")){if(vt!==!1){var R=K.querySelector(".jcalendar-selected");if(typeof vt=="string")var Q=vt;else if(!R||R.classList.contains("jcalendar-disabled"))var Q=d.options.value;else var Q=d.getValue();d.setValue(Q)}else if(d.options.value){let ut=d.options.value;d.options.value="",d.setValue(ut)}!st&&typeof d.options.onclose=="function"&&d.options.onclose(H),K.classList.remove("jcalendar-focus"),f(d,!1),D.current=null}return d.options.value},d.prev=function(){d.options.mode=="years"?(d.date[0]=d.date[0]-12,d.getYears()):d.options.mode=="months"?(d.date[0]=parseInt(d.date[0])-1,d.getMonths()):(d.date[1]<2?(d.date[0]=d.date[0]-1,d.date[1]=12):d.date[1]=d.date[1]-1,d.getDays())},d.next=function(){d.options.mode=="years"?(d.date[0]=parseInt(d.date[0])+12,d.getYears()):d.options.mode=="months"?(d.date[0]=parseInt(d.date[0])+1,d.getMonths()):(d.date[1]>11?(d.date[0]=parseInt(d.date[0])+1,d.date[1]=1):d.date[1]=parseInt(d.date[1])+1,d.getDays())},d.setToday=function(){var st=new Date().toISOString().substr(0,10);return d.setValue(st),st},d.setValue=function(st){st||(st=""+st);var vt=st,R=d.options.value;if(R!=vt){if(vt){d.setLabel(vt,d.options);var ut=vt.split(" ");ut[1]||(ut[1]="00:00:00");var Q=ut[1].split(":"),ut=ut[0].split("-"),St=parseInt(ut[0]),ct=parseInt(ut[1]),xt=parseInt(ut[2]),Ft=parseInt(Q[0]),Yt=parseInt(Q[1]);d.date=[St,ct,xt,Ft,Yt,0];var st=d.setLabel(vt,d.options),wt=D.now(new Date(St,ct-1,xt),!0);if(d.options.validRange){if(!d.options.validRange[0]||wt>=d.options.validRange[0])var te=!0;else var te=!1;if(!d.options.validRange[1]||wt<=d.options.validRange[1])var le=!0;else var le=!1;te&&le?(H.classList.remove("jcalendar_warning"),H.title=""):(H.classList.add("jcalendar_warning"),H.title=_.translate("Date outside the valid range"))}else H.classList.remove("jcalendar_warning"),H.title=""}else{d.date=null;var st="";H.classList.remove("jcalendar_warning"),H.title=""}d.options.value=vt,typeof d.options.onchange=="function"&&d.options.onchange(H,vt,R),H.value!=st&&(H.value=st,typeof H.oninput=="function"&&H.oninput({type:"input",target:H,value:H.value}))}d.getDays(),d.options.type=="year-month-picker"&&d.getMonths()},d.getValue=function(){return d.date?d.options.time?h.two(d.date[0])+"-"+h.two(d.date[1])+"-"+h.two(d.date[2])+" "+h.two(d.date[3])+":"+h.two(d.date[4])+":"+h.two(0):h.two(d.date[0])+"-"+h.two(d.date[1])+"-"+h.two(d.date[2])+" "+h.two(0)+":"+h.two(0)+":"+h.two(0):""},d.update=function(st,vt){if(!st.classList.contains("jcalendar-disabled")){var R=K.querySelector(".jcalendar-selected");R&&R.classList.remove("jcalendar-selected"),st.classList.add("jcalendar-selected"),st.classList.contains("jcalendar-set-month")?(d.date[1]=vt,d.date[2]=1):d.date[2]=st.innerText,d.options.time?(d.date[3]=Ct.value,d.date[4]=Ut.value):d.close(null,!0)}dt()},d.reset=function(){d.setValue(""),d.date=null,d.close(!1,!1)},d.getDays=function(){d.options.mode="days";var Ft=new Date,st=d.date&&h.isNumeric(d.date[0])?d.date[0]:parseInt(Ft.getFullYear()),vt=d.date&&h.isNumeric(d.date[1])?d.date[1]:parseInt(Ft.getMonth())+1,R=d.date&&h.isNumeric(d.date[2])?d.date[2]:parseInt(Ft.getDate()),Q=d.date&&h.isNumeric(d.date[3])?d.date[3]:parseInt(Ft.getHours()),ut=d.date&&h.isNumeric(d.date[4])?d.date[4]:parseInt(Ft.getMinutes());d.date=[st,vt,R,Q,ut,0],Rt.innerHTML=st,Mt.innerHTML=d.options.months[vt-1];var St=Ft.getMonth()==vt-1&&Ft.getFullYear()==st,ct=Ft.getDate(),Ft=new Date(st,vt,0,0,0),xt=Ft.getDate(),Ft=new Date(st,vt-1,0,0,0),Yt=Ft.getDay()+1,Ee=d.options.startingDay||0;Yt=Yt-Ee,jt.innerHTML="";var wt=document.createElement("tr");wt.setAttribute("align","center"),jt.appendChild(wt);for(var te=0;te<7;te++){var le=document.createElement("td");le.classList.add("jcalendar-weekday"),le.innerHTML=d.options.weekdays[Ee].substr(0,1),wt.appendChild(le),Ee++,Ee>6&&(Ee=0)}for(var Ee=0,mt=0,kt=0;kt<6;kt++){var wt=document.createElement("tr");wt.setAttribute("align","center"),wt.style.height="34px";for(var te=0;te<7;te++){var le=document.createElement("td");if(le.classList.add("jcalendar-set-day"),Ee>=Yt&&Ee<Yt+xt){mt++,le.innerHTML=mt,mt==R&&le.classList.add("jcalendar-selected"),St&&ct==mt&&(le.style.fontWeight="bold");var zt=D.now(new Date(st,vt-1,mt),!0);if(d.options.validRange){if(!d.options.validRange[0]||zt>=d.options.validRange[0])var ne=!0;else var ne=!1;if(!d.options.validRange[1]||zt<=d.options.validRange[1])var Me=!0;else var Me=!1;ne&&Me||le.classList.add("jcalendar-disabled")}}wt.appendChild(le),Ee++}jt.appendChild(wt)}d.options.time?Zt.style.display="":Zt.style.display="none",dt()},d.getMonths=function(){d.options.mode="months";var st=d.options.months;d.options.value;var vt=new Date,R=parseInt(vt.getFullYear()),Q=parseInt(vt.getMonth())+1,ut=d.date&&h.isNumeric(d.date[0])?d.date[0]:R,St=d.date&&h.isNumeric(d.date[1])?d.date[1]:Q;Rt.innerHTML=d.date[0],Mt.innerHTML=st[St-1];var ct=document.createElement("table");ct.setAttribute("width","100%");for(var xt=null,Ft=0;Ft<12;Ft++){if(!(Ft%4)){var xt=document.createElement("tr");xt.setAttribute("align","center"),ct.appendChild(xt)}var Yt=document.createElement("td");if(Yt.classList.add("jcalendar-set-month"),Yt.setAttribute("data-value",Ft+1),Yt.innerText=st[Ft],d.options.validRange){var wt=ut+"-"+h.two(Ft+1);if(!d.options.validRange[0]||wt>=d.options.validRange[0].substr(0,7))var te=!0;else var te=!1;if(!d.options.validRange[1]||wt<=d.options.validRange[1].substr(0,7))var le=!0;else var le=!1;te&&le||Yt.classList.add("jcalendar-disabled")}Ft+1==St&&Yt.classList.add("jcalendar-selected"),R==ut&&Ft+1==Q&&(Yt.style.fontWeight="bold"),xt.appendChild(Yt)}jt.innerHTML='<tr><td colspan="7"></td></tr>',jt.children[0].children[0].appendChild(ct),dt()},d.getYears=function(){d.options.mode="years";for(var st=new Date,vt=st.getFullYear(),R=d.date&&h.isNumeric(d.date[0])?d.date[0]:parseInt(st.getFullYear()),Q=[],ut=0;ut<25;ut++)Q[ut]=parseInt(d.date[0])+(ut-12);var St=document.createElement("table");St.setAttribute("width","100%");for(var ut=0;ut<25;ut++){if(!(ut%5)){var ct=document.createElement("tr");ct.setAttribute("align","center"),St.appendChild(ct)}var xt=document.createElement("td");xt.classList.add("jcalendar-set-year"),xt.innerText=Q[ut],R==Q[ut]&&xt.classList.add("jcalendar-selected"),vt==Q[ut]&&(xt.style.fontWeight="bold"),ct.appendChild(xt)}jt.innerHTML='<tr><td colspan="7"></td></tr>',jt.firstChild.firstChild.appendChild(St),dt()},d.setLabel=function(st,vt){return D.getDateString(st,vt)},d.fromFormatted=function(st,vt){return D.extractDateFromString(st,vt)};var X=function(st){var vt=h.findElement(st.target,"jcalendar-container");if(vt){var R=st.target.className;if(R=="jcalendar-prev")d.prev();else if(R=="jcalendar-next")d.next();else if(R=="jcalendar-month")d.getMonths();else if(R=="jcalendar-year")d.getYears();else if(R=="jcalendar-set-year")d.date[0]=st.target.innerText,d.options.type=="year-month-picker"?d.getMonths():d.getDays();else if(st.target.classList.contains("jcalendar-set-month")){var Q=parseInt(st.target.getAttribute("data-value"));d.options.type=="year-month-picker"?d.update(st.target,Q):(d.date[1]=Q,d.getDays())}else R=="jcalendar-confirm"||R=="jcalendar-update"||R=="jcalendar-close"?d.close(null,!0):R=="jcalendar-backdrop"?d.close(!1,!1):R=="jcalendar-reset"?d.reset():st.target.classList.contains("jcalendar-set-day")&&st.target.innerText&&d.update(st.target)}else d.close(!1,!1)},ht=function(st){if(st.target.value&&st.target.value.length>3){var vt=D.extractDateFromString(st.target.value,d.options.format);vt&&d.setValue(vt)}},dt=function(){var st=K.querySelector(".jcalendar-selected");st&&st.classList.contains("jcalendar-disabled")?(ve.setAttribute("disabled","disabled"),Ct.setAttribute("disabled","disabled"),Ut.setAttribute("disabled","disabled")):(ve.removeAttribute("disabled"),Ct.removeAttribute("disabled"),Ut.removeAttribute("disabled")),typeof d.options.onupdate=="function"&&d.options.onupdate(H,d.getValue())},K=null,W=null,nt=null,lt=null,bt=null,Rt=null,Mt=null,Tt=null,jt=null,It=null,Zt=null,ce=null,ve=null,Ct=null,Ut=null,at=function(){H.tagName=="INPUT"&&H.value&&(b.value=H.value),W=document.createElement("div"),W.className="jcalendar-reset",nt=document.createElement("div"),nt.className="jcalendar-confirm",It=document.createElement("div"),It.className="jcalendar-controls",It.style.borderBottom="1px solid #ddd",It.appendChild(W),It.appendChild(nt),lt=document.createElement("div"),lt.className="jcalendar-container",bt=document.createElement("div"),bt.className="jcalendar-content",lt.appendChild(bt),H.tagName=="DIV"?(K=H,K.classList.add("jcalendar-inline")):(bt.appendChild(It),K=document.createElement("div"),K.className="jcalendar"),K.classList.add("jcalendar-container"),K.appendChild(lt);var st=document.createElement("div");st.className="jcalendar-table",bt.appendChild(st);var vt=document.createElement("td");vt.setAttribute("colspan","2"),vt.className="jcalendar-prev",Rt=document.createElement("span"),Rt.className="jcalendar-year",Mt=document.createElement("span"),Mt.className="jcalendar-month";var R=document.createElement("td");R.className="jcalendar-header",R.setAttribute("colspan","3"),R.appendChild(Mt),R.appendChild(Rt);var Q=document.createElement("td");Q.setAttribute("colspan","2"),Q.className="jcalendar-next";var ut=document.createElement("thead"),St=document.createElement("tr");St.appendChild(vt),St.appendChild(R),St.appendChild(Q),ut.appendChild(St),Tt=document.createElement("table"),jt=document.createElement("tbody"),Tt.setAttribute("cellpadding","0"),Tt.setAttribute("cellspacing","0"),Tt.appendChild(ut),Tt.appendChild(jt),st.appendChild(Tt),Ct=document.createElement("select"),Ct.className="jcalendar-select",Ct.onchange=function(){d.date[3]=this.value,typeof d.options.onupdate=="function"&&d.options.onupdate(H,d.getValue())};for(var ct=0;ct<24;ct++){var xt=document.createElement("option");xt.value=ct,xt.innerHTML=h.two(ct),Ct.appendChild(xt)}Ut=document.createElement("select"),Ut.className="jcalendar-select",Ut.onchange=function(){d.date[4]=this.value,typeof d.options.onupdate=="function"&&d.options.onupdate(H,d.getValue())};for(var ct=0;ct<60;ct++){var xt=document.createElement("option");xt.value=ct,xt.innerHTML=h.two(ct),Ut.appendChild(xt)}var Ft=document.createElement("div");Ft.className="jcalendar-controls",Zt=document.createElement("div"),Zt.className="jcalendar-time",Zt.style.maxWidth="140px",Zt.appendChild(Ct),Zt.appendChild(Ut),ve=document.createElement("button"),ve.setAttribute("type","button"),ve.className="jcalendar-update",ce=document.createElement("div"),ce.style.flexGrow="10",ce.appendChild(ve),Ft.appendChild(Zt),H.tagName=="INPUT"&&Ft.appendChild(ce),bt.appendChild(Ft);var Yt=document.createElement("div");Yt.className="jcalendar-backdrop",K.appendChild(Yt),H.addEventListener("keyup",ht),K.addEventListener("swipeleft",function(wt){q.slideLeft(Tt,0,function(){d.next(),q.slideRight(Tt,1)}),wt.preventDefault(),wt.stopPropagation()}),K.addEventListener("swiperight",function(wt){q.slideRight(Tt,0,function(){d.prev(),q.slideLeft(Tt,1)}),wt.preventDefault(),wt.stopPropagation()}),"ontouchend"in document.documentElement?(K.addEventListener("touchend",X),H.addEventListener("touchend",d.open)):(K.addEventListener("mouseup",X),H.addEventListener("mouseup",d.open)),D.hasEvents||(D.hasEvents=!0,document.addEventListener("keydown",D.keydown)),d.setOptions(b),H.tagName=="INPUT"?(H.parentNode.insertBefore(K,H.nextSibling),H.setAttribute("autocomplete","off"),H.classList.add("jcalendar-input"),H.value=d.setLabel(d.getValue(),d.options)):(d.getDays(),d.options.time&&(Ct.value=d.date[3],Ut.value=d.date[4])),d.options.opened==!0&&d.open(),d.options.controls==!1&&lt.classList.add("jcalendar-hide-controls"),H.change=d.setValue,H.val=function(wt){if(wt===void 0)return d.getValue();d.setValue(wt)},H.calendar=K.calendar=d};return at(),d};return D.keydown=function(H){var b=null;(b=D.current)&&(H.which==13?b.close(!1,!0):H.which==27&&b.close(!1,!1))},D.prettify=function(H,b){if(!b)var b={justNow:"Just now",xMinutesAgo:"{0}m ago",xHoursAgo:"{0}h ago",xDaysAgo:"{0}d ago",xWeeksAgo:"{0}w ago",xMonthsAgo:"{0} mon ago",xYearsAgo:"{0}y ago"};H.indexOf("GMT")===-1&&H.indexOf("Z")===-1&&(H+=" GMT");var d=new Date,X=new Date(H),ht=parseInt((d-X)/1e3/60);if(String.prototype.format=function(K){return this.replace("{0}",K)},ht==0)var dt=b.justNow;else if(ht<90)var dt=b.xMinutesAgo.format(ht);else if(ht<1440)var dt=b.xHoursAgo.format(Math.round(ht/60));else if(ht<20160)var dt=b.xDaysAgo.format(Math.round(ht/1440));else if(ht<43200)var dt=b.xWeeksAgo.format(Math.round(ht/10080));else if(ht<1036800)var dt=b.xMonthsAgo.format(Math.round(ht/43200));else var dt=b.xYearsAgo.format(Math.round(ht/525600));return dt},D.prettifyAll=function(){for(var H=document.querySelectorAll(".prettydate"),b=0;b<H.length;b++)H[b].getAttribute("data-date")?H[b].innerHTML=D.prettify(H[b].getAttribute("data-date")):H[b].innerHTML&&(H[b].setAttribute("title",H[b].innerHTML),H[b].setAttribute("data-date",H[b].innerHTML),H[b].innerHTML=D.prettify(H[b].innerHTML))},D.now=g.now,D.toArray=g.toArray,D.dateToNum=g.dateToNum,D.numToDate=g.numToDate,D.weekdays=g.weekdays,D.months=g.months,D.weekdaysShort=g.weekdaysShort,D.monthsShort=g.monthsShort,D.extractDateFromString=F.extractDateFromString,D.getDateString=F.getDateString,D}var rt=Y();function tt(){var D={material:[["#ffebee","#fce4ec","#f3e5f5","#e8eaf6","#e3f2fd","#e0f7fa","#e0f2f1","#e8f5e9","#f1f8e9","#f9fbe7","#fffde7","#fff8e1","#fff3e0","#fbe9e7","#efebe9","#fafafa","#eceff1"],["#ffcdd2","#f8bbd0","#e1bee7","#c5cae9","#bbdefb","#b2ebf2","#b2dfdb","#c8e6c9","#dcedc8","#f0f4c3","#fff9c4","#ffecb3","#ffe0b2","#ffccbc","#d7ccc8","#f5f5f5","#cfd8dc"],["#ef9a9a","#f48fb1","#ce93d8","#9fa8da","#90caf9","#80deea","#80cbc4","#a5d6a7","#c5e1a5","#e6ee9c","#fff59d","#ffe082","#ffcc80","#ffab91","#bcaaa4","#eeeeee","#b0bec5"],["#e57373","#f06292","#ba68c8","#7986cb","#64b5f6","#4dd0e1","#4db6ac","#81c784","#aed581","#dce775","#fff176","#ffd54f","#ffb74d","#ff8a65","#a1887f","#e0e0e0","#90a4ae"],["#ef5350","#ec407a","#ab47bc","#5c6bc0","#42a5f5","#26c6da","#26a69a","#66bb6a","#9ccc65","#d4e157","#ffee58","#ffca28","#ffa726","#ff7043","#8d6e63","#bdbdbd","#78909c"],["#f44336","#e91e63","#9c27b0","#3f51b5","#2196f3","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#9e9e9e","#607d8b"],["#e53935","#d81b60","#8e24aa","#3949ab","#1e88e5","#00acc1","#00897b","#43a047","#7cb342","#c0ca33","#fdd835","#ffb300","#fb8c00","#f4511e","#6d4c41","#757575","#546e7a"],["#d32f2f","#c2185b","#7b1fa2","#303f9f","#1976d2","#0097a7","#00796b","#388e3c","#689f38","#afb42b","#fbc02d","#ffa000","#f57c00","#e64a19","#5d4037","#616161","#455a64"],["#c62828","#ad1457","#6a1b9a","#283593","#1565c0","#00838f","#00695c","#2e7d32","#558b2f","#9e9d24","#f9a825","#ff8f00","#ef6c00","#d84315","#4e342e","#424242","#37474f"],["#b71c1c","#880e4f","#4a148c","#1a237e","#0d47a1","#006064","#004d40","#1b5e20","#33691e","#827717","#f57f17","#ff6f00","#e65100","#bf360c","#3e2723","#212121","#263238"]],fire:[["0b1a6d","840f38","b60718","de030b","ff0c0c","fd491c","fc7521","faa331","fbb535","ffc73a"],["071147","5f0b28","930513","be0309","ef0000","fa3403","fb670b","f9991b","faad1e","ffc123"],["03071e","370617","6a040f","9d0208","d00000","dc2f02","e85d04","f48c06","faa307","ffba08"],["020619","320615","61040d","8c0207","bc0000","c82a02","d05203","db7f06","e19405","efab00"],["020515","2d0513","58040c","7f0206","aa0000","b62602","b94903","c57205","ca8504","d89b00"]],baby:[["eddcd2","fff1e6","fde2e4","fad2e1","c5dedd","dbe7e4","f0efeb","d6e2e9","bcd4e6","99c1de"],["e1c4b3","ffd5b5","fab6ba","f5a8c4","aacecd","bfd5cf","dbd9d0","baceda","9dc0db","7eb1d5"],["daa990","ffb787","f88e95","f282a9","8fc4c3","a3c8be","cec9b3","9dbcce","82acd2","649dcb"],["d69070","ff9c5e","f66770","f05f8f","74bbb9","87bfae","c5b993","83aac3","699bca","4d89c2"],["c97d5d","f58443","eb4d57","e54a7b","66a9a7","78ae9c","b5a67e","7599b1","5c88b7","4978aa"]],chart:[["#C1D37F","#4C5454","#FFD275","#66586F","#D05D5B","#C96480","#95BF8F","#6EA240","#0F0F0E","#EB8258","#95A3B3","#995D81"]]},H=function(b){return D[b]?D[b]:D.material};return H.get=function(b){return D[b]?D[b]:D},H.set=function(b,d){D[b]=d},H}var yt=tt();function Et(D,H){var b={};b.options={};var d={data:[],position:null,allowCreate:!1,allowChangePosition:!1,onclick:null,onload:null,onchange:null,oncreate:null,ondelete:null,onbeforecreate:null,onchangeposition:null,animation:!1,hideHeaders:!1,padding:null,palette:null,maxWidth:null};for(var X in d)H&&H.hasOwnProperty(X)?b.options[X]=H[X]:b.options[X]=d[X];D.classList.add("jtabs");var ht=null,dt=null,K=null,W=function(Mt){if(b.options.animation){var Tt=b.headers.children[Mt].getBoundingClientRect();b.options.palette==="modern"?(K.style.width=Tt.width-4+"px",K.style.left=b.headers.children[Mt].offsetLeft+2+"px"):(K.style.width=Tt.width+"px",K.style.left=b.headers.children[Mt].offsetLeft+"px"),b.options.position==="bottom"?K.style.top="0px":K.style.bottom="0px"}},nt=function(Mt){typeof b.headers.scrollTo=="function"?b.headers.scrollTo({left:Mt,behavior:"smooth"}):b.headers.scrollLeft=Mt,Mt<=1?ht.classList.add("disabled"):ht.classList.remove("disabled"),Mt>=b.headers.scrollWidth-b.headers.offsetWidth?dt.classList.add("disabled"):dt.classList.remove("disabled"),b.headers.scrollWidth<=b.headers.offsetWidth?(ht.style.display="none",dt.style.display="none"):(ht.style.display="",dt.style.display="")};if(b.setBorder=W,b.open=function(Mt){for(var Tt=null,jt=0;jt<b.headers.children.length;jt++)b.headers.children[jt].classList.contains("jtabs-selected")&&(Tt=jt),b.headers.children[jt].classList.remove("jtabs-selected"),b.content.children[jt]&&b.content.children[jt].classList.remove("jtabs-selected");if(b.headers.children[Mt].classList.add("jtabs-selected"),b.content.children[Mt]&&b.content.children[Mt].classList.add("jtabs-selected"),Tt!=Mt&&typeof b.options.onchange=="function"&&b.content.children[Mt]&&b.options.onchange(D,b,Mt,b.headers.children[Mt],b.content.children[Mt]),b.options.hideHeaders==!0&&b.headers.children.length<3&&b.options.allowCreate==!1)b.headers.parentNode.style.display="none";else{W(Mt),b.headers.parentNode.style.display="";var It=b.headers.children[Mt].offsetLeft,Zt=It+b.headers.children[Mt].offsetWidth,ce=b.headers.scrollLeft,ve=ce+b.headers.offsetWidth;ce<=It&&ve>=Zt||nt(It-1)}},b.selectIndex=function(Mt){var Tt=Array.prototype.indexOf.call(b.headers.children,Mt);return Tt>=0&&b.open(Tt),Tt},b.rename=function(Mt,Tt){Tt||(Tt=prompt("New title",b.headers.children[Mt].innerText)),b.headers.children[Mt].innerText=Tt,b.open(Mt)},b.create=function(Mt,Tt){if(typeof b.options.onbeforecreate=="function"){var jt=b.options.onbeforecreate(D);if(jt===!1)return!1;Mt=jt}var It=b.appendElement(Mt);return typeof b.options.oncreate=="function"&&b.options.oncreate(D,It),W(),It},b.remove=function(Mt){return b.deleteElement(Mt)},b.nextNumber=function(){for(var Mt=0,Tt=0;Tt<b.headers.children.length;Tt++){var jt=b.headers.children[Tt].innerText.match(/[0-9].*/);jt>Mt&&(Mt=parseInt(jt))}return Mt?Mt++:Mt=1,Mt},b.deleteElement=function(Mt){if(b.headers.children[Mt])b.headers.removeChild(b.headers.children[Mt]),b.content.removeChild(b.content.children[Mt]);else return!1;b.open(0),typeof b.options.ondelete=="function"&&b.options.ondelete(D,Mt)},b.appendElement=function(Mt,Tt,jt){if(!Mt)var Mt=prompt("Title?","");if(Mt){var It=document.createElement("div");b.content.appendChild(It);var Zt=document.createElement("div");return Zt.innerHTML=Mt,Zt.content=It,b.headers.insertBefore(Zt,b.headers.lastChild),b.options.allowChangePosition&&Zt.setAttribute("draggable","true"),jt!==!1&&b.selectIndex(Zt),typeof Tt=="function"&&Tt(It,Zt),It}},b.getActive=function(){for(var Mt=0;Mt<b.headers.children.length;Mt++)if(b.headers.children[Mt].classList.contains("jtabs-selected"))return Mt;return 0},b.updateContent=function(Mt,Tt){if(typeof Tt!="string")var jt=Tt;else{var jt=document.createElement("div");jt.innerHTML=Tt}b.content.children[Mt].classList.contains("jtabs-selected")&&Tt.classList.add("jtabs-selected"),b.content.replaceChild(Tt,b.content.children[Mt]),W()},b.updatePosition=function(Mt,Tt,jt){Mt>Tt?b.content.insertBefore(b.content.children[Mt],b.content.children[Tt]):b.content.insertBefore(b.content.children[Mt],b.content.children[Tt].nextSibling),b.open(Tt),!jt&&typeof b.options.onchangeposition=="function"&&b.options.onchangeposition(b.headers,Mt,Tt)},b.move=function(Mt,Tt,jt){Mt>Tt?b.headers.insertBefore(b.headers.children[Mt],b.headers.children[Tt]):b.headers.insertBefore(b.headers.children[Mt],b.headers.children[Tt].nextSibling),b.updatePosition(Mt,Tt,jt)},b.setBorder=W,b.init=function(){D.innerHTML="",b.headers=document.createElement("div"),b.content=document.createElement("div"),b.headers.classList.add("jtabs-headers"),b.content.classList.add("jtabs-content"),b.options.palette?D.classList.add("jtabs-modern"):D.classList.remove("jtabs-modern"),b.options.padding&&(b.content.style.padding=parseInt(b.options.padding)+"px");var Mt=document.createElement("div");Mt.className="jtabs-headers-container",Mt.appendChild(b.headers),b.options.maxWidth&&(Mt.style.maxWidth=parseInt(b.options.maxWidth)+"px");var Tt=document.createElement("div");if(Tt.className="jtabs-controls",Tt.setAttribute("draggable","false"),Mt.appendChild(Tt),b.options.position=="bottom"?(D.appendChild(b.content),D.appendChild(Mt)):(D.appendChild(Mt),D.appendChild(b.content)),b.options.allowCreate==!0){var jt=document.createElement("div");jt.className="jtabs-add",jt.onclick=function(){b.create()},Tt.appendChild(jt)}ht=document.createElement("div"),ht.className="jtabs-prev",ht.onclick=function(){nt(b.headers.scrollLeft-b.headers.offsetWidth)},Tt.appendChild(ht),dt=document.createElement("div"),dt.className="jtabs-next",dt.onclick=function(){nt(b.headers.scrollLeft+b.headers.offsetWidth)},Tt.appendChild(dt);for(var It=0;It<b.options.data.length;It++){if(b.options.data[It].titleElement)var Zt=b.options.data[It].titleElement;else var Zt=document.createElement("div");if(b.options.data[It].icon){var ce=document.createElement("div"),ve=document.createElement("i");ve.classList.add("material-icons"),ve.innerHTML=b.options.data[It].icon,ce.appendChild(ve),Zt.appendChild(ce)}if(b.options.data[It].title){var Ct=document.createTextNode(b.options.data[It].title);Zt.appendChild(Ct)}if(b.options.data[It].width&&(Zt.style.width=b.options.data[It].width),b.options.data[It].contentElement)var Ut=b.options.data[It].contentElement;else{var Ut=document.createElement("div");Ut.innerHTML=b.options.data[It].content}b.headers.appendChild(Zt),b.content.appendChild(Ut)}K=document.createElement("div"),K.className="jtabs-border",b.headers.appendChild(K),b.options.animation&&D.classList.add("jtabs-animation"),b.headers.addEventListener("click",function(at){if(at.target.parentNode.classList.contains("jtabs-headers"))var st=at.target;else if(at.target.tagName=="I")var st=at.target.parentNode.parentNode;else var st=at.target.parentNode;var vt=b.selectIndex(st);typeof b.options.onclick=="function"&&b.options.onclick(D,b,vt,b.headers.children[vt],b.content.children[vt])}),b.headers.addEventListener("contextmenu",function(at){b.selectIndex(at.target)}),b.headers.children.length&&b.open(0),nt(0),b.options.allowChangePosition==!0&&C(b.headers,{direction:1,ondrop:function(at,st,vt){b.updatePosition(st,vt)}}),typeof b.options.onload=="function"&&b.options.onload(D,b)},D.children[0]&&D.children[0].children.length)for(var lt=0;lt<D.children[0].children.length;lt++){var bt=b.options.data&&b.options.data[lt]?b.options.data[lt]:{};D.children[1]&&D.children[1].children[lt]?(bt.titleElement=D.children[0].children[lt],bt.contentElement=D.children[1].children[lt]):bt.contentElement=D.children[0].children[lt],b.options.data[lt]=bt}var Rt=!1;if(b.options.data)for(var lt=0;lt<b.options.data.length;lt++)b.options.data[lt].url&&(k({url:b.options.data[lt].url,type:"GET",dataType:"text/html",index:lt,success:function(Tt){b.options.data[this.index].content=Tt},complete:function(){b.init()}}),Rt=!0);return Rt||b.init(),D.tabs=b,b}function pt(D,H){if(D.color)return D.color.setOptions(H,!0);var b={type:"color"};b.options={};var d=null,X=null,ht=null,dt=null,K=null,W=null,nt=null;b.setOptions=function(R,Q){var ut={placeholder:"",value:null,onopen:null,onclose:null,onchange:null,closeOnChange:!0,palette:null,position:null,doneLabel:"Done",resetLabel:"Reset",fullscreen:!1,opened:!1};R||(R={}),R&&!R.palette&&(R.palette=yt());for(var St in ut)R&&R.hasOwnProperty(St)?b.options[St]=R[St]:(typeof b.options[St]>"u"||Q===!0)&&(b.options[St]=ut[St]);return dt&&(dt.innerHTML=b.options.resetLabel),K&&(K.innerHTML=b.options.doneLabel),b.options.palette&&nt&&nt.updateContent(0,Tt()),typeof b.options.value=="string"&&(D.value=b.options.value,D.tagName==="INPUT"&&(D.style.color=D.value,D.style.backgroundColor=D.value)),b.options.placeholder?D.setAttribute("placeholder",b.options.placeholder):D.getAttribute("placeholder")&&D.removeAttribute("placeholder"),b},b.select=function(R){var Q=d.querySelector(".jcolor-selected");Q&&Q.classList.remove("jcolor-selected"),b.values[R]&&b.values[R].classList.add("jcolor-selected"),b.options.value=R},b.open=function(){if(!d.classList.contains("jcolor-focus")){f(b,!0),d.classList.add("jcolor-focus"),b.options.value&&b.select(b.options.value),ht.style.marginTop="",ht.style.marginLeft="";var R=ht.getBoundingClientRect(),Q=h.getWindowWidth(),ut=h.getWindowHeight();if(Q<800||b.options.fullscreen==!0?(ht.classList.add("jcolor-fullscreen"),q.slideBottom(ht,1),X.style.display="block"):(ht.classList.contains("jcolor-fullscreen")&&(ht.classList.remove("jcolor-fullscreen"),X.style.display=""),b.options.position?ht.style.position="fixed":ht.style.position="",R.left+R.width>Q&&(ht.style.marginLeft=-1*(R.left+R.width-(Q-20))+"px"),R.top+R.height>ut&&(ht.style.marginTop=-1*(R.top+R.height-(ut-20))+"px")),typeof b.options.onopen=="function"&&b.options.onopen(D,b),nt.setBorder(nt.getActive()),b.options.value){var St=Mt(b.options.value);Ut.forEach(function(ct,xt){ct.value=St[xt],ct.dispatchEvent(new Event("input"))})}}},b.close=function(R){return d.classList.contains("jcolor-focus")&&(d.classList.remove("jcolor-focus"),X.style.display="",!R&&typeof b.options.onclose=="function"&&b.options.onclose(D,b),f(b,!1)),b.options.value},b.setValue=function(R){R||(R=""),R!=b.options.value&&(b.options.value=R,Ct=R,b.select(R),typeof b.options.onchange=="function"&&b.options.onchange(D,R,b),D.value!=b.options.value&&(D.value=b.options.value,D.tagName==="INPUT"&&(D.style.color=D.value,D.style.backgroundColor=D.value),typeof D.oninput=="function"&&D.oninput({type:"input",target:D,value:D.value})),b.options.closeOnChange==!0&&b.close())},b.getValue=function(){return b.options.value};var lt=function(R){var Q=R.toString(16);return Q.length===1?"0"+Q:Q},bt=function(R,Q,ut){return"#"+lt(R)+lt(Q)+lt(ut)},Rt=function(R){return parseInt("0x"+R)},Mt=function(R){return[Rt(R.substr(1,2)),Rt(R.substr(3,2)),Rt(R.substr(5,2))]},Tt=function(){var R=document.createElement("div");R.className="jcolor-grid",b.values=[];var Q=document.createElement("table");Q.setAttribute("cellpadding","7"),Q.setAttribute("cellspacing","0");for(var ut=0;ut<b.options.palette.length;ut++){for(var St=document.createElement("tr"),ct=0;ct<b.options.palette[ut].length;ct++){var xt=document.createElement("td"),Ft=b.options.palette[ut][ct];Ft.length<7&&Ft.substr(0,1)!=="#"&&(Ft="#"+Ft),xt.style.backgroundColor=Ft,xt.setAttribute("data-value",Ft),xt.innerHTML="",St.appendChild(xt),b.options.value==Ft&&xt.classList.add("jcolor-selected"),b.values[Ft]=xt}Q.appendChild(St)}return R.appendChild(Q),R},jt=document.createElement("canvas");jt.width=200,jt.height=160;var It=jt.getContext("2d"),Zt=function(){var R=W.firstChild.getBoundingClientRect();jt.width=R.width-14,ce()},ce=function(){var R=It.createLinearGradient(0,0,jt.width,0);R.addColorStop(0,"rgb(255,0,0)"),R.addColorStop(.15,"rgb(255,0,255)"),R.addColorStop(.33,"rgb(0,0,255)"),R.addColorStop(.49,"rgb(0,255,255)"),R.addColorStop(.67,"rgb(0,255,0)"),R.addColorStop(.84,"rgb(255,255,0)"),R.addColorStop(1,"rgb(255,0,0)"),It.fillStyle=R,It.fillRect(0,0,jt.width,jt.height),R=It.createLinearGradient(0,0,0,jt.height),R.addColorStop(0,"rgba(255,255,255,1)"),R.addColorStop(.5,"rgba(255,255,255,0)"),R.addColorStop(.5,"rgba(0,0,0,0)"),R.addColorStop(1,"rgba(0,0,0,1)"),It.fillStyle=R,It.fillRect(0,0,jt.width,jt.height)},ve=function(){var R=document.createElement("div");R.className="jcolor-hsl";var Q=document.createElement("div");Q.className="jcolor-point";var ut=document.createElement("div");ut.appendChild(jt),ut.appendChild(Q),R.appendChild(ut);var St=function(ct,xt,Ft){if(ct===1){var Yt=R.getBoundingClientRect(),wt=xt-Yt.left,te=Ft-Yt.top;wt<0&&(wt=0),te<0&&(te=0),wt>Yt.width&&(wt=Yt.width),te>Yt.height&&(te=Yt.height),Q.style.left=wt+"px",Q.style.top=te+"px";var le=It.getImageData(wt,te,1,1).data;Ct=bt(le[0],le[1],le[2])}};return R.addEventListener("mousedown",function(ct){St(ct.buttons,ct.clientX,ct.clientY)}),R.addEventListener("mousemove",function(ct){St(ct.buttons,ct.clientX,ct.clientY)}),R.addEventListener("touchmove",function(ct){St(1,ct.changedTouches[0].clientX,ct.changedTouches[0].clientY)}),R},Ct="",Ut=[],at=function(){if(Ct!=="")for(var R=0;R<Ut.length;R++){var Q=Mt(Ct);Q[R]=0;var ut="linear-gradient(90deg, rgb(";ut+=Q.join(", "),ut+="), rgb(",Q[R]=255,ut+=Q.join(", "),ut+="))",Ut[R].style.backgroundImage=ut}},st=function(){var R=document.createElement("div");R.className="jcolor-sliders";var Q=document.createElement("div"),ut=function(Ft){var Yt=document.createElement("div");Yt.className="jcolor-sliders-input-container";var wt=document.createElement("label");wt.innerText=Ft;var te=document.createElement("div");te.className="jcolor-sliders-input-subcontainer";var le=document.createElement("input");le.type="range",le.min=0,le.max=255,le.value=0,Yt.appendChild(wt),te.appendChild(le);var Ee=document.createElement("div");return Ee.innerText=le.value,le.addEventListener("input",function(){Ee.innerText=le.value}),te.appendChild(Ee),Yt.appendChild(te),Q.appendChild(Yt),le};Ut=[ut("Red"),ut("Green"),ut("Blue")],R.appendChild(Q);var St=document.createElement("div");St.className="jcolor-sliders-final-color";var ct=document.createElement("div");ct.style.visibility="hidden",ct.innerText="a",St.appendChild(ct);var xt=function(){var Ft=bt(parseInt(Ut[0].value),parseInt(Ut[1].value),parseInt(Ut[2].value));ct.innerText=Ft,ct.style.color=Ft,ct.style.removeProperty("visibility"),Ct=Ft};return Ut.forEach(function(Ft){Ft.addEventListener("input",function(){xt(),at()})}),R.appendChild(St),R},vt=function(){b.setOptions(H),D.tagName=="INPUT"&&(D.classList.add("jcolor-input"),D.readOnly=!0),d=document.createElement("div"),d.className="jcolor",X=document.createElement("div"),X.className="jcolor-backdrop",d.appendChild(X),ht=document.createElement("div"),ht.className="jcolor-content";var R=document.createElement("div");R.className="jcolor-controls",ht.appendChild(R),dt=document.createElement("div"),dt.className="jcolor-reset",dt.innerHTML=b.options.resetLabel,R.appendChild(dt),K=document.createElement("div"),K.className="jcolor-close",K.innerHTML=b.options.doneLabel,R.appendChild(K),W=document.createElement("div"),ht.appendChild(W),nt=Et(W,{animation:!0,data:[{title:"Grid",contentElement:Tt()},{title:"Spectrum",contentElement:ve()},{title:"Sliders",contentElement:st()}],onchange:function(Q,ut,St){if(St===1)Zt();else{var ct=Ct!==""?Ct:b.getValue();if(St===2&&ct){var xt=Mt(ct);Ut.forEach(function(Ft,Yt){Ft.value=xt[Yt],Ft.dispatchEvent(new Event("input"))})}}},palette:"modern"}),d.appendChild(ht),D.tagName=="INPUT"?D.parentNode.insertBefore(d,D.nextSibling):D.appendChild(d),d.addEventListener("click",function(Q){if(Q.target.tagName=="TD"){var ut=Q.target.getAttribute("data-value");ut&&b.setValue(ut)}else Q.target.classList.contains("jcolor-reset")?(b.setValue(""),b.close()):Q.target.classList.contains("jcolor-close")?(nt.getActive()>0&&b.setValue(Ct),b.close()):Q.target.classList.contains("jcolor-backdrop")?b.close():b.open()}),D.addEventListener("mouseup",function(Q){b.open()}),window.addEventListener("resize",function(){d.classList.contains("jcolor-focus")&&nt.getActive()==1&&Zt()}),b.options.opened==!0&&b.open(),D.change=b.setValue,D.val=function(Q){if(Q===void 0)return b.getValue();b.setValue(Q)},D.color=b,d.color=b};return b.toHex=function(R){var Q=function(ut){return("0"+parseInt(ut).toString(16)).slice(-2)};if(R)return/^#[0-9A-F]{6}$/i.test(R)?R:(R=R.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),R&&R.length?"#"+Q(R[1])+Q(R[2])+Q(R[3]):"")},vt(),b}function Pt(){var D=function(H,b){var d={type:"contextmenu"};d.options={};var X={items:null,onclick:null};for(var ht in X)b&&b.hasOwnProperty(ht)?d.options[ht]=b[ht]:d.options[ht]=X[ht];H.classList.add("jcontextmenu"),d.open=function(W,nt){if(nt&&(d.options.items=nt,d.create(nt)),D.current&&D.current.close(),f(d,!0),H.classList.add("jcontextmenu-focus"),D.current=d,d.options.items&&d.options.items.length>0||H.children.length){if(W.target)if(W.changedTouches&&W.changedTouches[0])lt=W.changedTouches[0].clientX,bt=W.changedTouches[0].clientY;else var lt=W.clientX,bt=W.clientY;else var lt=W.x,bt=W.y;var Rt=H.getBoundingClientRect();if(window.innerHeight<bt+Rt.height){var Mt=bt-Rt.height;Mt<0&&(Mt=0),H.style.top=Mt+"px"}else H.style.top=bt+"px";window.innerWidth<lt+Rt.width?lt-Rt.width>0?H.style.left=lt-Rt.width+"px":H.style.left="10px":H.style.left=lt+"px"}},d.isOpened=function(){return!!H.classList.contains("jcontextmenu-focus")},d.close=function(){H.classList.contains("jcontextmenu-focus")&&H.classList.remove("jcontextmenu-focus"),f(d,!1)},d.create=function(W){H.innerHTML="";var nt=dt();H.appendChild(nt);for(var lt=0;lt<W.length;lt++){var bt=K(W[lt]);H.appendChild(bt)}};function dt(){var W=document.createElement("div");W.classList.add("header"),W.addEventListener("click",function(bt){bt.preventDefault(),bt.stopPropagation()});var nt=document.createElement("a");nt.classList.add("title"),nt.innerHTML=_.translate("Menu"),W.appendChild(nt);var lt=document.createElement("a");return lt.classList.add("close"),lt.innerHTML=_.translate("close"),lt.addEventListener("click",function(bt){d.close()}),W.appendChild(lt),W}function K(W){if(W.type&&(W.type=="line"||W.type=="divisor"))var nt=document.createElement("hr");else{var nt=document.createElement("div"),lt=document.createElement("a");if(lt.innerHTML=W.title,W.tooltip&&nt.setAttribute("title",W.tooltip),W.icon&&nt.setAttribute("data-icon",W.icon),W.id&&(nt.id=W.id),W.disabled?nt.className="jcontextmenu-disabled":W.onclick&&(nt.method=W.onclick,nt.addEventListener("mousedown",function(ce){ce.preventDefault()}),nt.addEventListener("mouseup",function(ce){this.method(this,ce)})),nt.appendChild(lt),W.submenu){var bt=document.createElement("span");bt.innerHTML="&#9658;",nt.appendChild(bt),nt.classList.add("jcontexthassubmenu");var Rt=document.createElement("div");Rt.classList.add("jcontextmenu"),Rt.setAttribute("tabindex","900");for(var Mt=W.submenu,Tt=0;Tt<Mt.length;Tt++){var jt=K(Mt[Tt]);Rt.appendChild(jt)}nt.appendChild(Rt)}else if(W.shortcut){var It=document.createElement("span");It.innerHTML=W.shortcut,nt.appendChild(It)}}return nt}return typeof d.options.onclick=="function"&&H.addEventListener("click",function(W){d.options.onclick(d,W)}),d.options.items&&d.create(d.options.items),window.addEventListener("mousewheel",function(){d.close()}),H.contextmenu=d,d};return D}var Vt=Pt();function Ot(){var D=function(H,b){if(H.dropdown)return H.dropdown.setOptions(b,!0);var d={type:"dropdown"};d.options={};var X=function(at,st){at&&at.length&&(d.options.sortResults!==!1&&(typeof d.options.sortResults=="function"?at.sort(d.options.sortResults):at.sort(ht)),d.setData(at)),typeof d.options.onload=="function"&&d.options.onload(H,d,at,st),st&&K(st),st==null&&(d.options.value=""),H.value=d.options.value,d.options.opened==!0&&d.open()},ht=function(at,st){var vt,R;return typeof at=="string"?vt=at:at.text?vt=at.text:at.name&&(vt=at.name),typeof st=="string"?R=st:st.text?R=st.text:st.name&&(R=st.name),typeof vt=="string"||typeof R=="string"?(typeof vt!="string"&&(vt=""+vt),typeof R!="string"&&(R=""+R),vt.localeCompare(R)):vt-R},dt=function(){d.value={};for(var at=0;at<d.items.length;at++)d.items[at].selected==!0&&(d.items[at].element&&d.items[at].element.classList.remove("jdropdown-selected"),d.items[at].selected=null);d.options.value="",H.value=""},K=function(at){if(dt(),at!==null)if(!at)typeof d.value[""]<"u"&&(d.value[""]="");else{Array.isArray(at)||(at=(""+at).split(";"));for(var st=0;st<at.length;st++)d.value[at[st]]=""}for(var st=0;st<d.items.length;st++)typeof d.value[W(st)]<"u"&&(d.items[st].element&&d.items[st].element.classList.add("jdropdown-selected"),d.items[st].selected=!0,d.value[W(st)]=nt(st));d.options.value=Object.keys(d.value).join(";"),d.header.value=d.getText()},W=function(at,st){if(d.options.format)var vt="id";else var vt="value";return d.items[at]?st!==void 0?d.items[at].data[vt]=st:d.items[at].data[vt]:""},nt=function(at,st){if(d.options.format)var vt="name";else var vt="text";return d.items[at]?st!==void 0?d.items[at].data[vt]=st:d.items[at].data[vt]:""},lt=function(){return Object.keys(d.value)},bt=function(){for(var at=[],st=Object.keys(d.value),vt=0;vt<st.length;vt++)at.push(d.value[st[vt]]);return at};d.setOptions=function(at,st){at||(at={});var vt={url:null,data:[],format:0,multiple:!1,autocomplete:!1,remoteSearch:!1,lazyLoading:!1,type:null,width:null,maxWidth:null,opened:!1,value:null,placeholder:"",newOptions:!1,position:!1,onchange:null,onload:null,onopen:null,onclose:null,onfocus:null,onblur:null,oninsert:null,onbeforeinsert:null,onsearch:null,onbeforesearch:null,sortResults:!1,autofocus:!1};for(var R in vt)at&&at.hasOwnProperty(R)?d.options[R]=at[R]:(typeof d.options[R]>"u"||st===!0)&&(d.options[R]=vt[R]);return(d.options.remoteSearch==!0||d.options.type==="searchbar")&&(d.options.autocomplete=!0),d.options.newOptions==!0?d.header.classList.add("jdropdown-add"):d.header.classList.remove("jdropdown-add"),d.options.autocomplete==!0?d.header.removeAttribute("readonly"):d.header.setAttribute("readonly","readonly"),d.options.placeholder?d.header.setAttribute("placeholder",d.options.placeholder):d.header.removeAttribute("placeholder"),H.classList.remove("jdropdown-searchbar"),H.classList.remove("jdropdown-picker"),H.classList.remove("jdropdown-list"),d.options.type=="searchbar"?H.classList.add("jdropdown-searchbar"):d.options.type=="list"?H.classList.add("jdropdown-list"):d.options.type=="picker"?H.classList.add("jdropdown-picker"):h.getWindowWidth()<800?d.options.autocomplete?(H.classList.add("jdropdown-searchbar"),d.options.type="searchbar"):(H.classList.add("jdropdown-picker"),d.options.type="picker"):(d.options.width?(H.style.width=d.options.width,H.style.minWidth=d.options.width):(H.style.removeProperty("width"),H.style.removeProperty("min-width")),H.classList.add("jdropdown-default"),d.options.type="default"),d.options.type=="searchbar"?Rt.appendChild(jt):Mt.insertBefore(jt,Mt.firstChild),d.options.url&&!at.data?k({url:d.options.url,method:"GET",dataType:"json",success:function(Q){Q&&X(Q,d.options.value)}}):X(d.options.data,d.options.value),d};var Rt=null,Mt=null,Tt=null,jt=null,It=null,Zt=null,ce=null,ve=function(){if(b||(b={}),H.tagName=="SELECT"){var at=D.extractFromDom(H,b);H=at.el,b=at.options}!b.placeholder&&H.getAttribute("placeholder")&&(b.placeholder=H.getAttribute("placeholder")),d.value={},d.items=[],d.groups=[],d.search="",d.results=null,H.classList.add("jdropdown"),Rt=document.createElement("div"),Rt.className="jdropdown-container-header",d.header=document.createElement("input"),d.header.className="jdropdown-header jss_object",d.header.type="text",d.header.setAttribute("autocomplete","off"),d.header.onfocus=function(){typeof d.options.onfocus=="function"&&d.options.onfocus(H)},d.header.onblur=function(){typeof d.options.onblur=="function"&&d.options.onblur(H)},d.header.onkeyup=function(st){d.options.autocomplete==!0&&!ce?(d.search!=d.header.value.trim()&&(ce=setTimeout(function(){d.find(d.header.value.trim()),ce=null},400)),H.classList.contains("jdropdown-focus")||d.open()):d.options.autocomplete||d.next(st.key)},D.hasEvents||(D.hasEvents=!0,document.addEventListener("keydown",D.keydown)),Mt=document.createElement("div"),Mt.className="jdropdown-container",Tt=document.createElement("div"),Tt.className="jdropdown-content",jt=document.createElement("div"),jt.className="jdropdown-close",jt.textContent="Done",It=document.createElement("div"),It.className="jdropdown-reset",It.textContent="x",It.onclick=function(){d.reset(),d.close()},Zt=document.createElement("div"),Zt.className="jdropdown-backdrop",Rt.appendChild(d.header),Mt.appendChild(Tt),H.appendChild(Rt),H.appendChild(Mt),H.appendChild(Zt),d.setOptions(b),"ontouchsend"in document.documentElement?H.addEventListener("touchsend",D.mouseup):H.addEventListener("mouseup",D.mouseup),d.options.lazyLoading==!0&&E(Tt,{loadUp:d.loadUp,loadDown:d.loadDown}),Tt.onwheel=function(st){st.stopPropagation()},H.change=d.setValue,H.val=function(st){if(st===void 0)return d.getValue(!!d.options.multiple);d.setValue(st)},H.dropdown=d};d.getUrl=function(){return d.options.url},d.setUrl=function(at,st){d.options.url=at,k({url:d.options.url,method:"GET",dataType:"json",success:function(vt){d.setData(vt),typeof st=="function"&&st(d)}})},d.setId=function(at,st){if(d.options.format)var vt="id";else var vt="value";typeof at=="object"?at[vt]=st:d.items[at].data[vt]=st},d.add=function(at,st){if(!at){var vt=d.options.autocomplete==!0?d.header.value:"",at=prompt(_.translate("Add A New Option"),vt);if(!at)return!1}if(st||(st=h.guid()),d.options.format)var R={id:st,name:at};else var R={value:st,text:at};if(typeof d.options.onbeforeinsert=="function"){var Q=d.options.onbeforeinsert(d,R);if(Q===!1)return!1;Q&&(R=Q)}d.options.data.push(R);var ut=d.createItem(R);return Tt.appendChild(ut.element),typeof d.options.oninsert=="function"&&d.options.oninsert(d,R,ut),Tt.style.display=="none"&&(Tt.style.display=""),d.results&&d.results.push(ut),R},d.createItem=function(at,st,vt){d.options.format?(!at.id&&at.value!==void 0&&(at.id=at.value),!at.name&&at.text!==void 0&&(at.name=at.text)):(!at.value&&at.id!==void 0&&(at.value=at.id),!at.text&&at.name!==void 0&&(at.text=at.name));var R={};if(R.element=document.createElement("div"),R.element.className="jdropdown-item",R.element.indexValue=d.items.length,R.data=at,st&&(R.group=st),at.id&&R.element.setAttribute("id",at.id),at.disabled==!0&&R.element.setAttribute("data-disabled",!0),at.tooltip&&R.element.setAttribute("title",at.tooltip),at.image){var Q=document.createElement("img");Q.className="jdropdown-image",Q.src=at.image,at.title||Q.classList.add("jdropdown-image-small"),R.element.appendChild(Q)}else if(at.icon){var ut=document.createElement("span");ut.className="jdropdown-icon material-icons",ut.innerText=at.icon,at.title||ut.classList.add("jdropdown-icon-small"),at.color&&(ut.style.color=at.color),R.element.appendChild(ut)}else if(at.color){var St=document.createElement("div");St.className="jdropdown-color",St.style.backgroundColor=at.color,R.element.appendChild(St)}if(d.options.format)var ct=at.name;else var ct=at.text;var xt=document.createElement("div");if(xt.className="jdropdown-description",xt.textContent=ct||"&nbsp;",at.title){var Ft=document.createElement("div");Ft.className="jdropdown-title",Ft.innerText=at.title,xt.appendChild(Ft)}if(d.options.format)var Yt=at.id;else var Yt=at.value;return d.value[Yt]&&(R.element.classList.add("jdropdown-selected"),R.selected=!0),d.items.push(R),R.element.appendChild(xt),R},d.appendData=function(at){if(at.length){for(var st=[],vt=[],R=0;R<at.length;R++)at[R].group?(vt[at[R].group]||(vt[at[R].group]=[]),vt[at[R].group].push(R)):st.push(R);var Q=0,ut=Object.keys(vt);if(ut.length>0)for(var R=0;R<ut.length;R++){var St=document.createElement("div");St.className="jdropdown-group";var ct=document.createElement("div");ct.className="jdropdown-group-name",ct.textContent=ut[R];var xt=document.createElement("i");xt.className="jdropdown-group-arrow jdropdown-group-arrow-down",ct.appendChild(xt);var Ft=document.createElement("div");Ft.className="jdropdown-group-items";for(var Yt=0;Yt<vt[ut[R]].length;Yt++){var wt=d.createItem(at[vt[ut[R]][Yt]],St,ut[R]);(d.options.lazyLoading==!1||Q<200)&&(Ft.appendChild(wt.element),Q++)}St.appendChild(ct),St.appendChild(Ft),d.groups.push(St),Ft.children.length>0&&Tt.appendChild(St)}if(st.length)for(var R=0;R<st.length;R++){var wt=d.createItem(at[st[R]]);(d.options.lazyLoading==!1||Q<200)&&(Tt.appendChild(wt.element),Q++)}}},d.setData=function(at){if(dt(),Tt.textContent="",d.header.value="",d.items=[],at&&at.length){for(var st=0;st<at.length;st++)typeof at[st]!="object"&&(d.options.format?at[st]={id:at[st],name:at[st]}:at[st]={value:at[st],text:at[st]});d.appendData(at),d.options.data=at}else d.options.data=[];d.close()},d.getData=function(){return d.options.data},d.getPosition=function(at){for(var st=0;st<d.items.length;st++)if(W(st)==at)return st;return!1},d.getText=function(at){var st=bt();return at?st:st.join("; ")},d.getValue=function(at){var st=lt();return at?st:st.join(";")};var Ct=function(at){H.value!=d.options.value&&(H.value=d.options.value,typeof H.oninput=="function"&&H.oninput({type:"input",target:H,value:H.value})),typeof d.options.onchange=="function"&&d.options.onchange(H,d,at,d.options.value)};d.setValue=function(at){var st=d.getValue();Array.isArray(at)&&(at=at.join(";")),st!==at&&(K(at),Ct(st))},d.resetSelected=function(){d.setValue(null)},d.selectIndex=function(vt,st){var vt=parseInt(vt);if(d.items&&d.items[vt]&&(st===!0||d.items[vt].data.disabled!==!0))if(d.setCursor(vt,!1),!d.options.multiple)d.items[vt].selected?d.setValue(null):d.setValue(W(vt)),d.close();else{var R=d.options.value;d.items[vt].selected?(d.items[vt].element.classList.remove("jdropdown-selected"),d.items[vt].selected=!1,delete d.value[W(vt)]):(d.items[vt].element.classList.add("jdropdown-selected"),d.items[vt].selected=!0,d.value[W(vt)]=nt(vt)),d.options.value=Object.keys(d.value).join(";"),d.options.autocomplete==!1&&(d.header.value=bt().join("; ")),Ct(R)}},d.selectItem=function(at){d.selectIndex(at.indexValue)};var Ut=function(at,st){for(var vt=0;vt<st.length;vt++)if(d.options.format){if(st[vt].id==at)return!0}else if(st[vt].value==at)return!0;return!1};return d.find=function(at){if(d.search==at.trim())return!1;if(d.search=at,d.setCursor(),d.groups.length)for(var st=0;st<d.groups.length;st++)d.groups[st].lastChild.textContent="";if(Tt.textContent="",d.options.remoteSearch==!0){d.results=null;var vt=d.options.url;let Ft={url:vt,method:"GET",data:{q:at},dataType:"json",success:function(Yt){d.items=[];var wt=Object.keys(d.value);if(wt.length)for(var te=0;te<wt.length;te++)Ut(wt[te],Yt)||(d.options.format?Yt.unshift({id:wt[te],name:d.value[wt[te]]}):Yt.unshift({value:wt[te],text:d.value[wt[te]]}));d.appendData(Yt),Yt.length?Tt.style.display="":Tt.style.display="none",typeof d.options.onsearch=="function"&&d.options.onsearch(d,Yt)}};if(typeof d.options.onbeforesearch=="function"){let Yt=d.options.onbeforesearch(d,Ft);if(Yt===!1)return;typeof Yt=="object"&&(Ft=Yt)}k(Ft)}else{at=new RegExp(at,"gi");for(var R=[],st=0;st<d.items.length;st++){var Q=nt(st),ut=d.items[st].data.title||"",St=d.items[st].data.group||"",ct=d.items[st].data.synonym||"";ct&&(ct=ct.join(" ")),(at==null||d.items[st].selected==!0||Q.match(at)||ut.match(at)||St.match(at)||ct.match(at))&&R.push(d.items[st])}if(!R.length)Tt.style.display="none",d.results=null;else{Tt.style.display="",d.results=R;var xt=R.length||0;d.options.lazyLoading==!0&&xt>200&&(xt=200);for(var st=0;st<xt;st++)d.results[st].group?(d.results[st].group.parentNode||Tt.appendChild(d.results[st].group),d.results[st].group.lastChild.appendChild(d.results[st].element)):Tt.appendChild(d.results[st].element)}}d.options.autofocus==!0&&d.first()},d.open=function(){if(!H.classList.contains("jdropdown-focus")){D.current=d,f(d,!0),H.classList.add("jdropdown-focus"),h.getWindowWidth()<800&&(d.options.type==null||d.options.type=="picker")&&q.slideBottom(Mt,1),d.options.autocomplete==!0&&(d.header.value=d.search,d.header.focus());var at=lt();if(at[0]){var st=d.getPosition(at[0]);st!==!1&&d.setCursor(st)}if(!d.options.type||d.options.type=="default"){var vt=H.getBoundingClientRect(),R=Mt.getBoundingClientRect();d.options.position?(Mt.style.position="fixed",window.innerHeight<vt.bottom+R.height?(Mt.style.top="",Mt.style.bottom=window.innerHeight-vt.top+1+"px"):(Mt.style.top=vt.bottom+"px",Mt.style.bottom=""),Mt.style.left=vt.left+"px"):window.innerHeight<vt.bottom+R.height?(Mt.style.top="",Mt.style.bottom=vt.height+1+"px"):(Mt.style.top="",Mt.style.bottom=""),Mt.style.minWidth=vt.width+"px",d.options.maxWidth&&(Mt.style.maxWidth=d.options.maxWidth),!d.items.length&&d.options.autocomplete==!0?Tt.style.display="none":Tt.style.display=""}}typeof d.options.onopen=="function"&&d.options.onopen(H)},d.close=function(at){return H.classList.contains("jdropdown-focus")&&(d.header.value=d.getText(),d.setCursor(),!at&&typeof d.options.onclose=="function"&&d.options.onclose(H),d.header.blur&&d.header.blur(),H.classList.remove("jdropdown-focus"),f(d,!1),D.current=null),d.getValue()},d.setCursor=function(at,st){if(d.currentIndex!=null&&d.items&&d.items[d.currentIndex]&&d.items[d.currentIndex].element.classList.remove("jdropdown-cursor"),at==null)d.currentIndex=null;else if(at=parseInt(at),d.items[at].element.parentNode&&(d.items[at].element.classList.add("jdropdown-cursor"),d.currentIndex=at,st!==!1&&d.items[d.currentIndex].element)){Tt.scrollTop;var vt=d.items[d.currentIndex].element;Tt.scrollTop=vt.offsetTop-vt.scrollTop+vt.clientTop-95}},d.resetCursor=d.setCursor,d.updateCursor=d.setCursor,d.reset=function(){d.setCursor(),d.setValue(null)},d.first=function(){d.options.lazyLoading===!0&&d.loadFirst();var at=Tt.querySelectorAll(".jdropdown-item");if(at.length){var st=at[0].indexValue;d.setCursor(st)}},d.last=function(){d.options.lazyLoading===!0&&d.loadLast();var at=Tt.querySelectorAll(".jdropdown-item");if(at.length){var st=at[at.length-1].indexValue;d.setCursor(st)}},d.next=function(at){var st=null;if(at){if(at.length==1){var vt=d.currentIndex||-1;at=at.toLowerCase();var R=null,Q=null,ut=Tt.querySelectorAll(".jdropdown-item");if(ut.length){for(var St=0;St<ut.length;St++)if(ut[St].indexValue>vt&&(R=d.items[ut[St].indexValue])&&(Q=R.element.innerText[0])&&(Q=Q.toLowerCase(),at==Q)){st=ut[St].indexValue;break}d.setCursor(st)}}}else if(d.currentIndex==null||d.currentIndex==null)d.first();else{var ct=d.items[d.currentIndex].element,xt=ct.nextElementSibling;xt?(xt.classList.contains("jdropdown-group")&&(xt=xt.lastChild.firstChild),st=xt.indexValue):ct.parentNode.classList.contains("jdropdown-group-items")&&((xt=ct.parentNode.parentNode.nextElementSibling)&&(xt.classList.contains("jdropdown-group")?xt=xt.lastChild.firstChild:xt.classList.contains("jdropdown-item")?st=xt.indexValue:xt=null),xt&&(st=xt.indexValue)),st!==null&&d.setCursor(st)}},d.prev=function(){var at=null;if(d.currentIndex===null)d.first();else{var st=d.items[d.currentIndex].element,vt=st.previousElementSibling;vt?(vt.classList.contains("jdropdown-group")&&(vt=vt.lastChild.lastChild),at=vt.indexValue):st.parentNode.classList.contains("jdropdown-group-items")&&((vt=st.parentNode.parentNode.previousElementSibling)&&(vt.classList.contains("jdropdown-group")?vt=vt.lastChild.lastChild:vt.classList.contains("jdropdown-item")?at=vt.indexValue:vt=null),vt&&(at=vt.indexValue))}at!==null&&d.setCursor(at)},d.loadFirst=function(){if(d.results)var at=d.results;else var at=d.items;var st=at.length||0;d.options.lazyLoading==!0&&st>200&&(st=200),Tt.textContent="";for(var vt=0;vt<st;vt++)at[vt].group?(at[vt].group.parentNode||Tt.appendChild(at[vt].group),at[vt].group.lastChild.appendChild(at[vt].element)):Tt.appendChild(at[vt].element);Tt.scrollTop=0},d.loadLast=function(){if(d.results)var at=d.results;else var at=d.items;var st=at.length;if(st>200){st=st-200,Tt.textContent="";for(var vt=st;vt<at.length;vt++)at[vt].group?(at[vt].group.parentNode||Tt.appendChild(at[vt].group),at[vt].group.lastChild.appendChild(at[vt].element)):Tt.appendChild(at[vt].element);Tt.scrollTop=Tt.scrollHeight}},d.loadUp=function(){var at=!1;if(d.results)var st=d.results;else var st=d.items;var vt=Tt.querySelectorAll(".jdropdown-item"),R=vt[0].indexValue;R=d.items[R];var Q=st.indexOf(R)-1;if(Q>0){for(var ut=0;Q>0&&st[Q]&&ut<200;)st[Q].group?(st[Q].group.parentNode||Tt.insertBefore(st[Q].group,Tt.firstChild),st[Q].group.lastChild.insertBefore(st[Q].element,st[Q].group.lastChild.firstChild)):Tt.insertBefore(st[Q].element,Tt.firstChild),Q--,ut++;at=!0}return at},d.loadDown=function(){var at=!1;if(d.results)var st=d.results;else var st=d.items;var vt=Tt.querySelectorAll(".jdropdown-item"),R=vt[vt.length-1].indexValue;R=d.items[R];var Q=st.indexOf(R)+1;if(Q<st.length){for(var ut=0;Q<st.length&&st[Q]&&ut<200;)st[Q].group?(st[Q].group.parentNode||Tt.appendChild(st[Q].group),st[Q].group.lastChild.appendChild(st[Q].element)):Tt.appendChild(st[Q].element),Q++,ut++;at=!0}return at},ve(),d};return D.keydown=function(H){var b=null;if(b=D.current){if(H.which==13||H.which==9)b.header.value&&b.currentIndex==null&&b.options.newOptions?b.add():(b.currentIndex==null&&b.options.autocomplete==!0&&b.header.value!=""&&b.find(b.header.value),b.selectIndex(b.currentIndex));else if(H.which==38)b.currentIndex==null?b.first():b.currentIndex>0&&b.prev(),H.preventDefault();else if(H.which==40)b.currentIndex==null?b.first():b.currentIndex+1<b.items.length&&b.next(),H.preventDefault();else if(H.which==36)b.first(),H.target.classList.contains("jdropdown-header")||H.preventDefault();else if(H.which==35)b.last(),H.target.classList.contains("jdropdown-header")||H.preventDefault();else if(H.which==27)b.close();else if(H.which==33){if(b.currentIndex==null)b.first();else if(b.currentIndex>0)for(var d=0;d<7;d++)b.prev();H.preventDefault()}else if(H.which==34){if(b.currentIndex==null)b.first();else if(b.currentIndex+1<b.items.length)for(var d=0;d<7;d++)b.next();H.preventDefault()}}},D.mouseup=function(H){var b=h.findElement(H.target,"jdropdown");if(b){var d=b.dropdown;if(H.target.classList.contains("jdropdown-header"))if(b.classList.contains("jdropdown-focus")&&b.classList.contains("jdropdown-default")){var X=b.getBoundingClientRect();if(H.changedTouches&&H.changedTouches[0]){var ht=H.changedTouches[0].clientX;H.changedTouches[0].clientY}else{var ht=H.clientX;H.clientY}X.width-(ht-X.left)<30?H.target.classList.contains("jdropdown-add")?d.add():d.close():d.options.autocomplete==!1&&d.close()}else d.open();else if(H.target.classList.contains("jdropdown-group-name")){var dt=H.target.nextSibling.children;if(H.target.nextSibling.style.display!="none")for(var K=0;K<dt.length;K++)dt[K].style.display!="none"&&d.selectItem(dt[K])}else H.target.classList.contains("jdropdown-group-arrow")?H.target.classList.contains("jdropdown-group-arrow-down")?(H.target.classList.remove("jdropdown-group-arrow-down"),H.target.classList.add("jdropdown-group-arrow-up"),H.target.parentNode.nextSibling.style.display="none"):(H.target.classList.remove("jdropdown-group-arrow-up"),H.target.classList.add("jdropdown-group-arrow-down"),H.target.parentNode.nextSibling.style.display=""):H.target.classList.contains("jdropdown-item")?d.selectItem(H.target):H.target.classList.contains("jdropdown-image")||H.target.classList.contains("jdropdown-description")?d.selectItem(H.target.parentNode):H.target.classList.contains("jdropdown-title")?d.selectItem(H.target.parentNode.parentNode):(H.target.classList.contains("jdropdown-close")||H.target.classList.contains("jdropdown-backdrop"))&&d.close()}},D.extractFromDom=function(H,b){var d=H;if(b||(b={}),H.getAttribute("multiple")&&(!b||b.multiple==null)&&(b.multiple=!0),H.getAttribute("placeholder")&&(!b||b.placeholder==null)&&(b.placeholder=H.getAttribute("placeholder")),H.getAttribute("data-autocomplete")&&(!b||b.autocomplete==null)&&(b.autocomplete=!0),(!b||b.width==null)&&(b.width=H.offsetWidth),H.value&&(!b||b.value==null)&&(b.value=H.value),!b||b.data==null){b.data=[];for(var X=0;X<H.children.length;X++)if(H.children[X].tagName=="OPTGROUP")for(var ht=0;ht<H.children[X].children.length;ht++)b.data.push({value:H.children[X].children[ht].value,text:H.children[X].children[ht].textContent,group:H.children[X].getAttribute("label")});else b.data.push({value:H.children[X].value,text:H.children[X].textContent})}(!b||b.onchange==null)&&(b.onchange=function(K,W,nt,lt){b.multiple==!0?obj.items[W].classList.contains("jdropdown-selected")?d.options[W].setAttribute("selected","selected"):d.options[W].removeAttribute("selected"):d.value=lt});var dt=document.createElement("div");return H.parentNode.insertBefore(dt,H),H.style.display="none",H=dt,{el:H,options:b}},D}var _t=Ot();function Xt(D,H){if(D.picker)return D.picker.setOptions(H,!0);var b={type:"picker"};b.options={};var d=null,X=null,ht=function(W){return W instanceof Element||W instanceof HTMLDocument},dt=function(){X.innerHTML="";for(var W=Object.keys(b.options.data),nt=0;nt<W.length;nt++){var lt=document.createElement("div");lt.classList.add("jpicker-item"),lt.k=W[nt],lt.v=b.options.data[W[nt]];var bt=b.getLabel(W[nt],lt);ht(bt)?lt.appendChild(bt):lt.innerHTML=bt,X.appendChild(lt)}};b.setOptions=function(W,nt){var lt={value:0,data:null,render:null,onchange:null,onmouseover:null,onselect:null,onopen:null,onclose:null,onload:null,width:null,header:!0,right:!1,bottom:!1,content:!1,columns:null,grid:null,height:null};W&&W.options&&(W.data=W.options);for(var bt in lt)W&&W.hasOwnProperty(bt)?b.options[bt]=W[bt]:(typeof b.options[bt]>"u"||nt===!0)&&(b.options[bt]=lt[bt]);return b.options.header===!1?d.style.display="none":d.style.display="",b.options.width?d.style.width=parseInt(b.options.width)+"px":d.style.width="",b.options.height?(X.style.maxHeight=b.options.height+"px",X.style.overflow="scroll"):X.style.overflow="",b.options.columns>0&&(b.options.grid?(X.classList.add("jpicker-grid"),X.style.gridTemplateColumns="repeat("+b.options.grid+", 1fr)"):(X.classList.add("jpicker-columns"),X.style.width=b.options.width?b.options.width:36*b.options.columns+"px")),isNaN(parseInt(b.options.value))&&(b.options.value=0),dt(),b.setValue(b.options.value),b},b.getValue=function(){return b.options.value},b.setValue=function(W,nt){if(b.setLabel(W),b.options.value=String(W),D.value!=b.options.value&&(D.value=b.options.value,typeof D.oninput=="function"&&D.oninput({type:"input",target:D,value:D.value})),X.children[W]&&X.children[W].getAttribute("type")!=="generic"&&b.close(),nt&&typeof b.options.onchange=="function"){var lt=b.options.data[W];b.options.onchange(D,b,lt,lt,W,nt)}},b.getLabel=function(W,nt){var lt=b.options.data[W]||null;return typeof b.options.render=="function"&&(lt=b.options.render(lt,nt)),lt},b.setLabel=function(W){var nt;b.options.content?nt='<i class="material-icons">'+b.options.content+"</i>":nt=b.getLabel(W,null),ht(nt)?(d.innerHTML="",d.appendChild(nt)):d.innerHTML=nt},b.open=function(){if(!D.classList.contains("jpicker-focus")){f(b,!0),D.classList.add("jpicker-focus"),D.focus();var W=0,nt=0;X.style.marginLeft="";var lt=d.getBoundingClientRect(),bt=X.getBoundingClientRect();window.innerHeight<lt.bottom+bt.height||b.options.bottom?W=-1*(bt.height+4):W=lt.height+4,b.options.right===!0&&(nt=-1*bt.width+lt.width),bt.left+nt<0&&(nt=nt+bt.left+10),bt.left+bt.width>window.innerWidth&&(nt=-1*(10+bt.left+bt.width-window.innerWidth)),X.style.marginTop=parseInt(W)+"px",X.style.marginLeft=parseInt(nt)+"px",typeof b.options.onopen=="function"&&b.options.onopen(D,b)}},b.close=function(){D.classList.contains("jpicker-focus")&&(D.classList.remove("jpicker-focus"),f(b,!1),typeof b.options.onclose=="function"&&b.options.onclose(D,b))};var K=function(){D.classList.add("jpicker"),D.setAttribute("tabindex","900"),D.onmousedown=function(W){D.classList.contains("jpicker-focus")||b.open()},d=document.createElement("div"),d.classList.add("jpicker-header"),X=document.createElement("div"),X.classList.add("jpicker-content"),X.onclick=function(W){var nt=h.findElement(W.target,"jpicker-item");nt&&nt.parentNode===X&&b.setValue(nt.k,W)},D.appendChild(d),D.appendChild(X),D.value=H.value||0,b.setOptions(H),typeof b.options.onload=="function"&&b.options.onload(D,b),D.change=b.setValue,D.val=function(W){if(W===void 0)return b.getValue();b.setValue(W)},D.picker=b};return K(),b}function qt(D,H){var b={type:"toolbar"};b.options={};var d={app:null,container:!1,badge:!1,title:!1,responsive:!1,maxWidth:null,bottom:!0,items:[]};for(var X in d)H&&H.hasOwnProperty(X)?b.options[X]=H[X]:b.options[X]=d[X];!D&&H.app&&H.app.el&&(D=document.createElement("div"),H.app.el.appendChild(D));var ht=document.createElement("div");ht.classList.add("jtoolbar-item"),ht.classList.add("jtoolbar-arrow");var dt=document.createElement("div");dt.classList.add("jtoolbar-floating"),ht.appendChild(dt),b.selectItem=function(W){for(var nt=K.children,lt=0;lt<nt.length;lt++)W!=nt[lt]&&nt[lt].classList.remove("jtoolbar-selected");W.classList.add("jtoolbar-selected")},b.hide=function(){q.slideBottom(D,0,function(){D.style.display="none"})},b.show=function(){D.style.display="",q.slideBottom(D,1)},b.get=function(){return D},b.setBadge=function(W,nt){K.children[W].children[1].firstChild.innerHTML=nt},b.destroy=function(){toolbar.remove(),D.innerHTML=""},b.update=function(W,nt){for(var lt=0;lt<K.children.length;lt++){var bt=K.children[lt];typeof bt.updateState=="function"&&bt.updateState(D,b,bt,W,nt)}for(var lt=0;lt<dt.children.length;lt++){var bt=dt.children[lt];typeof bt.updateState=="function"&&bt.updateState(D,b,bt,W,nt)}},b.create=function(W){K.innerHTML="";for(var nt=0;nt<W.length;nt++){var lt=document.createElement("div");if(lt.classList.add("jtoolbar-item"),W[nt].width&&(lt.style.width=parseInt(W[nt].width)+"px"),W[nt].k&&(lt.k=W[nt].k),W[nt].tooltip&&lt.setAttribute("title",W[nt].tooltip),W[nt].id&&lt.setAttribute("id",W[nt].id),W[nt].updateState&&(lt.updateState=W[nt].updateState),W[nt].active&&lt.classList.add("jtoolbar-active"),W[nt].disabled&&lt.classList.add("jtoolbar-disabled"),W[nt].type=="select"||W[nt].type=="dropdown")Xt(lt,W[nt]);else if(W[nt].type=="divisor")lt.classList.add("jtoolbar-divisor");else if(W[nt].type=="label")lt.classList.add("jtoolbar-label"),lt.innerHTML=W[nt].content;else{var bt=document.createElement("i");if(typeof W[nt].class>"u")bt.classList.add("material-icons");else for(var Rt=W[nt].class.split(" "),Mt=0;Mt<Rt.length;Mt++)bt.classList.add(Rt[Mt]);if(bt.innerHTML=W[nt].content?W[nt].content:"",lt.appendChild(bt),b.options.badge==!0){var Tt=document.createElement("div");Tt.classList.add("jbadge");var jt=document.createElement("div");jt.innerHTML=W[nt].badge?W[nt].badge:"",Tt.appendChild(jt),lt.appendChild(Tt)}if(W[nt].title)if(b.options.title==!0){var It=document.createElement("span");It.innerHTML=W[nt].title,lt.appendChild(It)}else lt.setAttribute("title",W[nt].title);b.options.app&&W[nt].route&&(lt.route=W[nt].route,lt.onclick=function(){b.options.app.pages(this.route)},b.options.app.pages(W[nt].route,{toolbarItem:lt,closed:!0})),typeof W[nt].render=="function"&&W[nt].render(lt,W[nt])}W[nt].onclick&&(lt.onclick=W[nt].onclick.bind(W[nt],D,b,lt)),K.appendChild(lt)}setTimeout(function(){b.refresh()},0)},b.open=function(){ht.classList.add("jtoolbar-arrow-selected"),D.getBoundingClientRect();var W=dt.getBoundingClientRect();W.bottom>window.innerHeight||b.options.bottom?dt.style.bottom="0":dt.style.removeProperty("bottom"),dt.style.right="0",ht.children[0].focus(),f(b,!0)},b.close=function(){ht.classList.remove("jtoolbar-arrow-selected"),f(b,!1)},b.refresh=function(){if(b.options.responsive==!0){var W=D.parentNode.getBoundingClientRect();b.options.maxWidth||(b.options.maxWidth=W.width);var nt=parseInt(b.options.maxWidth);for(ht.parentNode&&ht.parentNode.removeChild(ht);dt.firstChild;)K.appendChild(dt.firstChild);if(nt<K.offsetWidth)for(nt-=50;K.lastChild&&nt<K.offsetWidth;)dt.insertBefore(K.lastChild,dt.firstChild);dt.children.length>0&&K.appendChild(ht)}},b.setReadonly=function(W){W=W?"add":"remove",D.classList[W]("jtoolbar-disabled")},D.onclick=function(W){var nt=h.findElement(W.target,"jtoolbar-item");nt&&b.selectItem(nt),W.target.classList.contains("jtoolbar-arrow")&&b.open()},window.addEventListener("resize",function(){b.refresh()}),D.classList.add("jtoolbar"),D.innerHTML="",b.options.container==!0&&D.classList.add("jtoolbar-container");var K=document.createElement("div");return D.appendChild(K),b.options.app&&D.classList.add("jtoolbar-mobile"),b.create(b.options.items),D.toolbar=b,b}function oe(){var D=function(H,b){var d={type:"editor"};d.options={};var X={url:null,value:"",snippet:null,toolbar:!0,toolbarOnTop:!1,remoteParser:null,placeholder:null,filterPaste:!0,dropZone:!0,dropAsSnippet:!1,acceptImages:!0,acceptFiles:!1,maxFileSize:5e6,allowImageResize:!0,maxHeight:null,height:null,focus:!1,onclick:null,onfocus:null,onblur:null,onload:null,onkeyup:null,onkeydown:null,onchange:null,extensions:null,type:null};for(var ht in X)b&&b.hasOwnProperty(ht)?d.options[ht]=b[ht]:d.options[ht]=X[ht];var dt=null,K=null,W=[];d.el=H,typeof d.options.onclick=="function"&&(H.onclick=function(mt){d.options.onclick(H,d,mt)}),H.classList.add("jeditor-container");var nt=document.createElement("div");nt.className="jsnippet",nt.setAttribute("contenteditable",!1);var lt=document.createElement("div");if(lt.className="jeditor-toolbar",d.editor=document.createElement("div"),d.editor.setAttribute("contenteditable",!0),d.editor.setAttribute("spellcheck",!1),d.editor.classList.add("jeditor"),d.options.placeholder&&d.editor.setAttribute("data-placeholder",d.options.placeholder),(d.options.maxHeight||d.options.height)&&(d.editor.style.overflowY="auto",d.options.maxHeight&&(d.editor.style.maxHeight=d.options.maxHeight),d.options.height&&(d.editor.style.height=d.options.height)),d.options.url)k({url:d.options.url,dataType:"html",success:function(mt){d.editor.innerHTML=mt,D.setCursor(d.editor,d.options.focus=="initial")}});else if(d.options.value)d.editor.innerHTML=d.options.value;else for(var bt=0;bt<H.children.length;bt++)d.editor.appendChild(H.children[bt]);H.innerHTML="";var Rt=function(mt){typeof d.options.onchange=="function"&&d.options.onchange(H,d,mt),d.options.value=d.getData(),H.value!=d.options.value&&(H.value=d.options.value,typeof H.oninput=="function"&&H.oninput({type:"input",target:H,value:H.value}))},Mt=function(mt){var kt=document.createElement("div");kt.innerHTML=mt;var zt=kt.querySelectorAll("img");if(zt.length)for(var ne=0;ne<zt.length;ne++)d.addImage(zt[ne].src)},Tt=function(){var mt=null;if(mt=nt.children[0]){mt.classList.contains("jslider-grid")||mt.classList.add("jslider-grid");var kt=mt.children.length;mt.setAttribute("data-number",kt>4?4:kt),kt>4?mt.setAttribute("data-total",kt-4):mt.removeAttribute("data-total")}},jt=function(mt){nt.innerHTML||d.appendSnippet({}),nt.children[0].appendChild(mt),Tt()};d.appendSnippet=function(mt){nt.innerHTML="";for(var kt=["image","title","description","host","url"],zt=0;zt<kt.length;zt++){var ne=document.createElement("div");if(ne.className="jsnippet-"+kt[zt],ne.setAttribute("data-k",kt[zt]),nt.appendChild(ne),mt[kt[zt]])if(kt[zt]=="image"){Array.isArray(mt.image)||(mt.image=[mt.image]);for(var Me=0;Me<mt.image.length;Me++){var _e=document.createElement("img");_e.src=mt.image[Me],ne.appendChild(_e)}}else ne.innerHTML=mt[kt[zt]]}d.editor.appendChild(document.createElement("br")),d.editor.appendChild(nt)},d.setData=function(mt){typeof mt=="object"?d.editor.innerHTML=mt.content:d.editor.innerHTML=mt,d.options.focus&&D.setCursor(d.editor,!0),W=[]},d.getFiles=function(){for(var mt=d.editor.querySelectorAll(".jfile"),kt=[],zt=0;zt<mt.length;zt++)W[mt[zt].src]&&kt.push(W[mt[zt].src]);return kt},d.getText=function(){return d.editor.innerText},d.getData=function(mt){if(mt){var kt={content:""};if(nt.innerHTML){kt.snippet={};for(var zt=0;zt<nt.children.length;zt++){var ne=nt.children[zt].getAttribute("data-k");if(ne)if(ne=="image"){kt.snippet.image||(kt.snippet.image=[]);for(var Me=0;Me<nt.children[zt].children.length;Me++)kt.snippet.image.push(nt.children[zt].children[Me].getAttribute("src"))}else kt.snippet[ne]=nt.children[zt].innerHTML}}var _e=Object.keys(W);if(_e.length){kt.files=[];for(var zt=0;zt<_e.length;zt++)kt.files.push(W[_e[zt]])}var Se=document.createElement("div");Se.innerHTML=d.editor.innerHTML;var Pe=Se.querySelector(".jsnippet");Pe&&Pe.remove();var se=Se.innerHTML;se=se.replace(/<br>/g,`
`),se=se.replace(/<\/div>/g,`</div>
`),se=se.replace(/<(?:.|\n)*?>/gm,""),kt.content=se.trim(),te("getData",kt)}else var kt=d.editor.innerHTML;return kt},d.reset=function(){d.editor.innerHTML="",nt.innerHTML="",W=[]},d.addPdf=function(mt){if(mt.result.substr(0,4)!="data")console.error("Invalid source");else{var kt=document.createElement("canvas");kt.width=60,kt.height=60;var zt=new Image,ne=kt.getContext("2d");ne.drawImage(zt,0,0,kt.width,kt.height),kt.toBlob(function(Me){var _e=document.createElement("img");_e.src=window.URL.createObjectURL(Me),_e.title=mt.name,_e.className="jfile pdf",W[_e.src]={file:_e.src,extension:"pdf",content:mt.result},document.execCommand("insertHtml",!1,_e.outerHTML)})}},d.addImage=function(mt,kt){if(mt||(mt=""),mt.substr(0,4)!="data"&&!d.options.remoteParser)console.error("remoteParser not defined in your initialization");else{if(mt.substr(0,4)=="data"){var zt=mt.split(";");zt=zt[0].split("/"),zt=zt[1]}else{var zt=mt.substr(mt.lastIndexOf(".")+1);mt=d.options.remoteParser+mt}var ne=new Image;ne.onload=function(){var _e=document.createElement("canvas");_e.width=ne.width,_e.height=ne.height;var Se=_e.getContext("2d");Se.drawImage(ne,0,0,_e.width,_e.height),_e.toBlob(function(Pe){var se=document.createElement("img");se.src=window.URL.createObjectURL(Pe),se.classList.add("jfile"),se.setAttribute("tabindex","900"),se.setAttribute("width",ne.width),se.setAttribute("height",ne.height),W[se.src]={file:se.src,extension:zt,content:_e.toDataURL()},d.options.dropAsSnippet||kt?(jt(se),W[se.src].snippet=!0):document.execCommand("insertHtml",!1,se.outerHTML),Rt()})},ne.src=mt}},d.addFile=function(mt){for(var kt=[],zt=0;zt<mt.length;zt++)if(mt[zt].size>d.options.maxFileSize)alert("The file is too big");else{var ne=mt[zt].type.split("/");ne[0]=="image"?ne=1:ne[1]=="pdf"?ne=2:ne=0,ne?(kt[zt]=new FileReader,kt[zt].index=zt,kt[zt].type=ne,kt[zt].name=mt[zt].name,kt[zt].date=mt[zt].lastModified,kt[zt].size=mt[zt].size,kt[zt].addEventListener("load",function(Me){Me.target.type==2?d.options.acceptFiles==!0&&d.addPdf(Me.target):d.addImage(Me.target.result)},!1),kt[zt].readAsDataURL(mt[zt])):alert("The extension is not allowed")}},d.destroy=function(){d.editor.removeEventListener("mouseup",Ft),d.editor.removeEventListener("mousedown",Yt),d.editor.removeEventListener("mousemove",wt),d.editor.removeEventListener("keyup",ct),d.editor.removeEventListener("keydown",xt),d.editor.removeEventListener("dragstart",st),d.editor.removeEventListener("dragenter",vt),d.editor.removeEventListener("dragover",R),d.editor.removeEventListener("drop",Q),d.editor.removeEventListener("paste",at),d.editor.removeEventListener("blur",ut),d.editor.removeEventListener("focus",St),H.editor=null,H.classList.remove("jeditor-container"),lt.remove(),nt.remove(),d.editor.remove()},d.upload=function(){h.click(d.file)};var It=[HTMLUnknownElement,HTMLAudioElement,HTMLEmbedElement,HTMLIFrameElement,HTMLTextAreaElement,HTMLInputElement,HTMLScriptElement],Zt=["width","height","align","border","src","tabindex"],ce=["color","font-weight","font-size","background","background-color","margin"],ve=function(mt){if(mt.attributes&&mt.attributes.length){var kt=null,zt=mt.getAttribute("style");if(zt){kt=[];for(var ne=zt.split(";"),Me=0;Me<ne.length;Me++){var _e=ne[Me].trim().split(":");if(ce.indexOf(_e[0].trim())>=0){var Se=_e.shift(),_e=_e.join(":");kt.push(Se+":"+_e)}}}mt.tagName.toUpperCase()=="IMG"&&(!d.options.acceptImages||!mt.src?mt.parentNode.removeChild(mt):(mt.setAttribute("tabindex","900"),d.addImage(mt.src)));for(var Pe=[],se=0;se<mt.attributes.length;se++)Pe.push(mt.attributes[se].name);Pe.length&&Pe.forEach(function(ue){Zt.indexOf(ue)==-1?mt.removeAttribute(ue):mt.attributes[se].value.indexOf("<")!==-1&&mt.attributes[se].value.replace("<","&#60;")}),mt.style="",kt&&kt.length&&mt.setAttribute("style",kt.join(";"))}if(mt.children.length)for(var se=0;se<mt.children.length;se++)ve(mt.children[se]);It.indexOf(mt.constructor)>=0&&mt.remove()},Ct=function(mt){var kt=window.getSelection(),zt=document.createRange();zt.selectNode(mt),kt.addRange(zt)},Ut=function(mt){mt&&(mt=mt.replace(new RegExp("<!--(.*?)-->","gsi"),""));var kt=new DOMParser,zt=kt.parseFromString(mt,"text/html");ve(zt);var ne=document.createElement("span");return ne.innerHTML=zt.firstChild.innerHTML,ne},at=function(mt){if(d.options.filterPaste==!0){if(mt.clipboardData||mt.originalEvent.clipboardData)var kt=(mt.originalEvent||mt).clipboardData.getData("text/html"),zt=(mt.originalEvent||mt).clipboardData.getData("text/plain"),ne=(mt.originalEvent||mt).clipboardData.files;else if(window.clipboardData)var kt=window.clipboardData.getData("Html"),zt=window.clipboardData.getData("Text"),ne=window.clipboardData.files;if(ne.length)d.addFile(ne);else if(!kt)kt=zt.split(`\r
`),mt.target.innerText?(kt=kt.map(function(_e){return"<div>"+_e+"</div>"}),document.execCommand("insertHtml",!1,kt.join(""))):kt.map(function(_e){var Se=document.createElement("div");Se.innerText=_e,d.editor.appendChild(Se)});else{var Me=Ut(kt);document.execCommand("insertHtml",!1,Me.innerHTML)}mt.preventDefault()}},st=function(mt){K&&K.e&&mt.preventDefault()},vt=function(mt){K||d.options.dropZone==!1||(H.classList.add("jeditor-dragging"),mt.preventDefault())},R=function(mt){K||d.options.dropZone==!1||(dt&&clearTimeout(dt),dt=setTimeout(function(){H.classList.remove("jeditor-dragging")},100),mt.preventDefault())},Q=function(mt){if(!(K||d.options.dropZone==!1)){var kt=null;document.caretRangeFromPoint?kt=document.caretRangeFromPoint(mt.clientX,mt.clientY):mt.rangeParent&&(kt=document.createRange(),kt.setStart(mt.rangeParent,mt.rangeOffset));var zt=window.getSelection();zt.removeAllRanges(),zt.addRange(kt),zt.anchorNode.parentNode.focus();var ne=(mt.originalEvent||mt).dataTransfer.getData("text/html"),Me=(mt.originalEvent||mt).dataTransfer.getData("text/plain"),_e=(mt.originalEvent||mt).dataTransfer.files;_e.length?d.addFile(_e):Me&&Mt(ne),H.classList.remove("jeditor-dragging"),mt.preventDefault()}},ut=function(mt){te("onevent",mt),Rt(mt),typeof d.options.onblur=="function"&&d.options.onblur(H,d,mt)},St=function(mt){typeof d.options.onfocus=="function"&&d.options.onfocus(H,d,mt)},ct=function(mt){d.editor.innerHTML||(d.editor.innerHTML="<div><br></div>"),typeof d.options.onkeyup=="function"&&d.options.onkeyup(H,d,mt)},xt=function(mt){if(te("onevent",mt),mt.key=="Delete"&&mt.target.tagName=="IMG"){var kt=mt.target.parentNode;Ct(mt.target),kt.classList.contains("jsnippet-image")&&Tt()}typeof d.options.onkeydown=="function"&&d.options.onkeydown(H,d,mt)},Ft=function(mt){if(K&&K.e&&(K.e.classList.remove("resizing"),K.e.changed==!0)){var kt=K.e.cloneNode();kt.width=parseInt(K.e.style.width)||K.e.getAttribute("width"),kt.height=parseInt(K.e.style.height)||K.e.getAttribute("height"),K.e.style.width="",K.e.style.height="",Ct(K.e),document.execCommand("insertHtml",!1,kt.outerHTML)}K=!1},Yt=function(mt){var kt=function(_e){var Se=_e.getBoundingClientRect();Se.width-(mt.clientX-Se.left)<40&&mt.clientY-Se.top<40&&(_e.innerHTML="",_e.remove())};if(mt.target.tagName=="IMG")if(mt.target.style.cursor){var zt=mt.target.getBoundingClientRect();K={e:mt.target,x:mt.clientX,y:mt.clientY,w:zt.width,h:zt.height,d:mt.target.style.cursor},mt.target.getAttribute("width")||mt.target.setAttribute("width",zt.width),mt.target.getAttribute("height")||mt.target.setAttribute("height",zt.height);var ne=window.getSelection();if(ne.rangeCount)for(var Me=0;Me<ne.rangeCount;Me++)ne.removeRange(ne.getRangeAt(Me));mt.target.classList.add("resizing")}else K=!0;else mt.target.classList.contains("jsnippet")?kt(mt.target):mt.target.parentNode.classList.contains("jsnippet")&&kt(mt.target.parentNode),K=!0},wt=function(mt){if(mt.target.tagName=="IMG"&&!mt.target.parentNode.classList.contains("jsnippet-image")&&d.options.allowImageResize==!0&&mt.target.getAttribute("tabindex")){var kt=mt.target.getBoundingClientRect();mt.clientY-kt.top<5?kt.width-(mt.clientX-kt.left)<5?mt.target.style.cursor="ne-resize":mt.clientX-kt.left<5?mt.target.style.cursor="nw-resize":mt.target.style.cursor="n-resize":kt.height-(mt.clientY-kt.top)<5?kt.width-(mt.clientX-kt.left)<5?mt.target.style.cursor="se-resize":mt.clientX-kt.left<5?mt.target.style.cursor="sw-resize":mt.target.style.cursor="s-resize":kt.width-(mt.clientX-kt.left)<5?mt.target.style.cursor="e-resize":mt.clientX-kt.left<5?mt.target.style.cursor="w-resize":mt.target.style.cursor=""}if(mt.which==1&&K&&K.d){if(K.d=="e-resize"||K.d=="ne-resize"||K.d=="se-resize")if(K.e.style.width=K.w+(mt.clientX-K.x),mt.shiftKey){var zt=(mt.clientX-K.x)*(K.h/K.w);K.e.style.height=K.h+zt}else var zt=null;zt||(K.d=="s-resize"||K.d=="se-resize"||K.d=="sw-resize")&&(mt.shiftKey||(K.e.style.height=K.h+(mt.clientY-K.y))),K.e.changed=!0}},te=function(mt,kt){if(d.options.extensions){var zt=Object.keys(d.options.extensions);if(zt.length)for(var ne=0;ne<zt.length;ne++)d.options.extensions[zt[ne]]&&typeof d.options.extensions[zt[ne]][mt]=="function"&&d.options.extensions[zt[ne]][mt].call(d,kt)}},le=function(){if(d.options.extensions){var mt=Object.keys(d.options.extensions);if(mt.length)for(var kt=0;kt<mt.length;kt++)d.options.extensions[mt[kt]]&&typeof d.options.extensions[mt[kt]]=="function"&&(d.options.extensions[mt[kt]]=d.options.extensions[mt[kt]](H,d))}};if(document.addEventListener("mouseup",Ft),document.addEventListener("mousemove",wt),d.editor.addEventListener("mousedown",Yt),d.editor.addEventListener("keyup",ct),d.editor.addEventListener("keydown",xt),d.editor.addEventListener("dragstart",st),d.editor.addEventListener("dragenter",vt),d.editor.addEventListener("dragover",R),d.editor.addEventListener("drop",Q),d.editor.addEventListener("paste",at),d.editor.addEventListener("focus",St),d.editor.addEventListener("blur",ut),H.appendChild(d.editor),d.options.snippet&&d.appendSnippet(d.options.snippet),d.options.toolbar){if(Array.isArray(d.options.toolbar))var Ee={container:!0,responsive:!0,items:d.options.toolbar};else if(d.options.toolbar===!0)var Ee={container:!0,responsive:!0,items:[]};else var Ee=d.options.toolbar;Ee.items&&Ee.items.length||(Ee.items=D.getDefaultToolbar(d)),d.options.toolbarOnTop?(H.classList.add("toolbar-on-top"),H.insertBefore(lt,H.firstChild)):(d.editor.style.padding="15px",H.appendChild(lt)),qt(lt,Ee),lt.addEventListener("click",function(){d.editor.focus()})}return d.file=document.createElement("input"),d.file.style.display="none",d.file.type="file",d.file.setAttribute("accept","image/*"),d.file.onchange=function(){d.addFile(this.files)},H.appendChild(d.file),d.options.focus&&D.setCursor(d.editor,d.options.focus=="initial"),H.change=d.setData,H.val=function(mt){if(mt===void 0){var kt=H.getAttribute("data-html")!=="true";return d.getData(kt)}else d.setData(mt)},le(),H.editor=d,typeof d.options.onload=="function"&&d.options.onload(H,d,d.editor),d};return D.setCursor=function(H,b){H.focus(),document.execCommand("selectAll");var d=window.getSelection(),X=d.getRangeAt(0);if(b==!0)var ht=X.startContainer,dt=0;else var ht=X.endContainer,dt=ht.length;X.setStart(ht,dt),X.setEnd(ht,dt),d.removeAllRanges(),d.addRange(X)},D.getDefaultToolbar=function(H){var b=function(X,ht,dt){dt.color||(pt(dt,{onchange:function(K,W){dt.k==="color"?document.execCommand("foreColor",!1,W):document.execCommand("backColor",!1,W)}}),dt.color.open())},d=[];return d.push({content:"undo",onclick:function(){document.execCommand("undo")}}),d.push({content:"redo",onclick:function(){document.execCommand("redo")}}),d.push({type:"divisor"}),H.options.toolbarOnTop&&(d.push({type:"select",width:"140px",options:["Default","Verdana","Arial","Courier New"],render:function(X){return'<span style="font-family:'+X+'">'+X+"</span>"},onchange:function(X,ht,dt,K,W){document.execCommand("fontName",!1,K)}}),d.push({type:"select",content:"format_size",options:["x-small","small","medium","large","x-large"],render:function(X){return'<span style="font-size:'+X+'">'+X+"</span>"},onchange:function(X,ht,dt,K,W){document.execCommand("fontSize",!1,parseInt(W)+1)}}),d.push({type:"select",options:["format_align_left","format_align_center","format_align_right","format_align_justify"],render:function(X){return'<i class="material-icons">'+X+"</i>"},onchange:function(X,ht,dt,K,W){var nt=["JustifyLeft","justifyCenter","justifyRight","justifyFull"];document.execCommand(nt[W])}}),d.push({type:"divisor"}),d.push({content:"format_color_text",k:"color",onclick:b}),d.push({content:"format_color_fill",k:"background-color",onclick:b})),d.push({content:"format_bold",onclick:function(X,ht,dt){document.execCommand("bold"),document.queryCommandState("bold")?dt.classList.add("selected"):dt.classList.remove("selected")}}),d.push({content:"format_italic",onclick:function(X,ht,dt){document.execCommand("italic"),document.queryCommandState("italic")?dt.classList.add("selected"):dt.classList.remove("selected")}}),d.push({content:"format_underline",onclick:function(X,ht,dt){document.execCommand("underline"),document.queryCommandState("underline")?dt.classList.add("selected"):dt.classList.remove("selected")}}),d.push({type:"divisor"}),d.push({content:"format_list_bulleted",onclick:function(X,ht,dt){document.execCommand("insertUnorderedList"),document.queryCommandState("insertUnorderedList")?dt.classList.add("selected"):dt.classList.remove("selected")}}),d.push({content:"format_list_numbered",onclick:function(X,ht,dt){document.execCommand("insertOrderedList"),document.queryCommandState("insertOrderedList")?dt.classList.add("selected"):dt.classList.remove("selected")}}),d.push({content:"format_indent_increase",onclick:function(X,ht,dt){document.execCommand("indent",!0,null),document.queryCommandState("indent")?dt.classList.add("selected"):dt.classList.remove("selected")}}),d.push({content:"format_indent_decrease",onclick:function(){document.execCommand("outdent"),document.queryCommandState("outdent")?this.classList.add("selected"):this.classList.remove("selected")}}),H.options.toolbarOnTop&&(d.push({type:"divisor"}),d.push({content:"photo",onclick:function(){H.upload()}}),d.push({type:"select",content:"table_view",columns:8,grid:8,right:!0,options:["0x0","1x0","2x0","3x0","4x0","5x0","6x0","7x0","0x1","1x1","2x1","3x1","4x1","5x1","6x1","7x1","0x2","1x2","2x2","3x2","4x2","5x2","6x2","7x2","0x3","1x3","2x3","3x3","4x3","5x3","6x3","7x3","0x4","1x4","2x4","3x4","4x4","5x4","6x4","7x4","0x5","1x5","2x5","3x5","4x5","5x5","6x5","7x5","0x6","1x6","2x6","3x6","4x6","5x6","6x6","7x6","0x7","1x7","2x7","3x7","4x7","5x7","6x7","7x7"],render:function(X,ht){ht&&(ht.onmouseover=this.onmouseover,X=X.split("x"),ht.setAttribute("data-x",X[0]),ht.setAttribute("data-y",X[1]));var dt=document.createElement("div");return ht.style.margin="1px",ht.style.border="1px solid #ddd",dt},onmouseover:function(X){for(var ht=parseInt(X.target.getAttribute("data-x")),dt=parseInt(X.target.getAttribute("data-y")),K=0;K<X.target.parentNode.children.length;K++){var W=X.target.parentNode.children[K],nt=parseInt(W.getAttribute("data-x")),lt=parseInt(W.getAttribute("data-y"));nt<=ht&&lt<=dt?(W.style.backgroundColor="#cae1fc",W.style.borderColor="#2977ff"):(W.style.backgroundColor="",W.style.borderColor="#ddd")}},onchange:function(X,ht,dt){dt=dt.split("x");for(var K=document.createElement("table"),W=document.createElement("tbody"),nt=0;nt<=dt[1];nt++){for(var lt=document.createElement("tr"),bt=0;bt<=dt[0];bt++){var Rt=document.createElement("td");Rt.innerHTML="",lt.appendChild(Rt)}W.appendChild(lt)}K.appendChild(W),K.setAttribute("width","100%"),K.setAttribute("cellpadding","6"),K.setAttribute("cellspacing","0"),document.execCommand("insertHTML",!1,K.outerHTML)}})),d},D}var $t=oe();function fe(){var D=function(H,b){var d={};d.options={};var X={type:"big",title:"Untitled",width:510,height:472};for(var ht in X)b&&b.hasOwnProperty(ht)?d.options[ht]=b[ht]:d.options[ht]=X[ht];var dt=function(){for(var nt=document.createElement("div");H.children[0];)nt.appendChild(H.children[0]);for(d.content=document.createElement("div"),d.content.className="jfloating_content",d.content.innerHTML=H.innerHTML;nt.children[0];)d.content.appendChild(nt.children[0]);d.container=document.createElement("div"),d.container.className="jfloating",d.container.appendChild(d.content),d.options.title?d.container.setAttribute("title",d.options.title):d.container.classList.add("no-title"),d.options.width&&(d.container.style.width=parseInt(d.options.width)+"px"),d.options.height&&(d.container.style.height=parseInt(d.options.height)+"px"),H.innerHTML="",H.appendChild(d.container)},K=function(){d.container&&d.container.addEventListener("click",function(nt){var lt=nt.target.getBoundingClientRect();if(nt.target.classList.contains("jfloating")){if(nt.changedTouches&&nt.changedTouches[0])var bt=nt.changedTouches[0].clientX,Rt=nt.changedTouches[0].clientY;else var bt=nt.clientX,Rt=nt.clientY;lt.width-(bt-lt.left)<50&&Rt-lt.top<50?setTimeout(function(){d.close()},100):d.setState()}})},W=function(){d.container.classList.add("jfloating-"+d.options.type)};return d.state={isMinized:!1},d.setState=function(){d.state.isMinized?d.container.classList.remove("jfloating-minimized"):d.container.classList.add("jfloating-minimized"),d.state.isMinized=!d.state.isMinized},d.close=function(){Components.elements.splice(D.elements.indexOf(d.container),1),d.updatePosition(),H.remove()},d.updatePosition=function(){for(var nt=0;nt<D.elements.length;nt++){var lt=D.elements[nt],bt=D.elements[nt-1];lt.style.right=nt*(bt?bt.offsetWidth:lt.offsetWidth)*1.01+"px"}},d.init=function(){dt(),K(),W(),D.elements.push(d.container),d.updatePosition(),H.floating=d},d.init(),d};return D.elements=[],D}var et=fe();function Ht(){const D=function(K){return!isNaN(K)&&K!==null&&K!==""},H={between:function(K,W){return K>=W[0]&&K<=W[1]},"not between":function(K,W){return K<W[0]||K>W[1]},"<":function(K,W){return K<W[0]},"<=":function(K,W){return K<=W[0]},">":function(K,W){return K>W[0]},">=":function(K,W){return K>=W[0]},"=":function(K,W){return K==W[0]},"!=":function(K,W){return K!=W[0]}},b={"valid date":function(){return!0},"=":function(K,W){return K===W[0]},"!=":function(K,W){return K!==W[0]},"<":function(K,W){return K<W[0]},"<=":function(K,W){return K<=W[0]},">":function(K,W){return K>W[0]},">=":function(K,W){return K>=W[0]},between:function(K,W){return K>=W[0]&&K<=W[1]},"not between":function(K,W){return K<W[0]||K>W[1]}},d={contains:function(K,W){return K.includes(W[0])},"not contains":function(K,W){return!K.includes(W[0])},"begins with":function(K,W){return K.startsWith(W[0])},"ends with":function(K,W){return K.endsWith(W[0])},"=":function(K,W){return K===W[0]},"!=":function(K,W){return K!==W[0]},"valid email":function(K){var W=new RegExp(/^[^\s@]+@[^\s@]+\.[^\s@]+$/);return W.test(K)},"valid url":function(K){var W=new RegExp(/(((https?:\/\/)|(www\.))[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|]+)/ig);return W.test(K)}},X=function(K,W){return typeof X[W.type]=="function"?W.allowBlank&&K===""?!0:X[W.type](K,W):null};X.url=function(){var K=new RegExp(/(((https?:\/\/)|(www\.))[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|]+)/ig);return!!K.test(data)},X.email=function(K){var W=new RegExp(/^[^\s@]+@[^\s@]+\.[^\s@]+$/);return!!(K&&W.test(K))},X.required=function(K){return!!K.trim()},X.exist=function(K,W){return!!K.toString().trim()},X["not exist"]=function(K,W){return!K.toString().trim()},X.empty=function(K){return!K.toString().trim()},X.notEmpty=function(K){return!!K.toString().trim()},X.number=function(K,W){if(!D(K))return!1;if(!W||!W.criteria)return!0;if(!H[W.criteria])return!1;let nt=W.value.map(function(lt){return parseFloat(lt)});return H[W.criteria](K,nt)},X.login=function(K){let W=new RegExp(/^[a-zA-Z0-9._-]+$/);return!!(K&&W.test(K))},X.list=function(K,W){let nt=typeof K;if(nt!=="string"&&nt!=="number")return!1;let lt;return typeof W.value[0]=="string"?lt=W.value[0].split(","):lt=W.value[0],Array.isArray(lt)?lt.findIndex(function(Rt){return Rt==K})>-1:!1};const ht=function(){let K=new Date;return K.setHours(0,0,0,0),K},dt={"one year ago":function(){let K=ht();return K.setFullYear(K.getFullYear()-1),K},"one month ago":function(){let K=ht();return K.setMonth(K.getMonth()-1),K},"one week ago":function(){let K=ht();return K.setDate(K.getDate()-7),K},yesterday:function(){let K=ht();return K.setDate(K.getDate()-1),K},today:ht,tomorrow:function(){let K=ht();return K.setDate(K.getDate()+1),K}};return X.date=function(K,W){if(D(K)&&K>0&&K<1e6&&(K=g.numToDate(K)),new Date(K)=="Invalid Date")return!1;if(!W||!W.criteria)return!0;if(!b[W.criteria])return!1;let nt=W.value.map(function(lt){return typeof lt=="string"&&dt[lt]?dt[lt]().getTime():new Date(lt).getTime()});return b[W.criteria](new Date(K).getTime(),nt)},X.text=function(K,W){return typeof K!="string"?!1:!W||!W.criteria?!0:d[W.criteria]?d[W.criteria](K,W.value):!1},X.textLength=function(K,W){return K=K.toString(),X.number(K.length,W)},X}var Jt=Ht();function he(){var D=function(H,b){var d={};d.options={};var X={url:null,message:"Are you sure? There are unsaved information in your form",ignore:!1,currentHash:null,submitButton:null,validations:null,onbeforeload:null,onload:null,onbeforesave:null,onsave:null,onbeforeremove:null,onremove:null,onerror:function(W,nt){alert(nt)}};for(var ht in X)b&&b.hasOwnProperty(ht)?d.options[ht]=b[ht]:d.options[ht]=X[ht];d.options.validations||(d.options.validations={}),d.options.submitButton||(d.options.submitButton=H.querySelector("input[type=submit]")),d.options.submitButton&&d.options.url&&(d.options.submitButton.onclick=function(){d.save()}),d.options.validations.email||(d.options.validations.email=Jt.email),d.options.validations.length||(d.options.validations.length=Jt.length),d.options.validations.required||(d.options.validations.required=Jt.required),d.setUrl=function(W){d.options.url=W},d.load=function(){k({url:d.options.url,method:"GET",dataType:"json",queue:!0,success:function(W){if(typeof d.options.onbeforeload=="function"){var nt=d.options.onbeforeload(H,W);nt&&(W=nt)}D.setElements(H,W),typeof d.options.onload=="function"&&d.options.onload(H,W)}})},d.save=function(){var W=d.validate();if(W)d.options.onerror(H,W);else{var nt=D.getElements(H,!0);if(typeof d.options.onbeforesave=="function"){var nt=d.options.onbeforesave(H,nt);if(nt===!1)return}k({url:d.options.url,method:"POST",dataType:"json",data:nt,success:function(lt){typeof d.options.onsave=="function"&&d.options.onsave(H,nt,lt)}})}},d.remove=function(){if(typeof d.options.onbeforeremove=="function"){var W=d.options.onbeforeremove(H,d);if(W===!1)return!1}k({url:d.options.url,method:"DELETE",dataType:"json",success:function(nt){typeof d.options.onremove=="function"&&d.options.onremove(H,d,nt),d.reset()}})};var dt=function(W){W.classList.add("error"),d.options.submitButton&&d.options.submitButton.setAttribute("disabled",!0);var nt=W.getAttribute("data-error")||"There is an error in the form";return W.setAttribute("title",nt),nt},K=function(W){var nt=!1;W.classList.remove("error"),W.removeAttribute("title");for(var lt=H.querySelectorAll("input, select, textarea, div[name]"),bt=0;bt<lt.length;bt++)lt[bt].getAttribute("data-validation")&&lt[bt].classList.contains("error")&&(nt=!0);d.options.submitButton&&(nt?d.options.submitButton.setAttribute("disabled",!0):d.options.submitButton.removeAttribute("disabled"))};return d.validateElement=function(W){var nt=!1,lt=D.getValue(W),bt=W.getAttribute("data-validation");return typeof d.options.validations[bt]=="function"&&!d.options.validations[bt](lt,W)?nt=dt(W):W.classList.contains("error")&&K(W),nt},d.reset=function(){for(var W=H.querySelectorAll("input, select, textarea, div[name]"),nt=0;nt<W.length;nt++)W[nt].getAttribute("name")&&(W[nt].type=="checkbox"||W[nt].type=="radio"?W[nt].checked=!1:typeof W[nt].val=="function"?W[nt].val(""):W[nt].value="")},d.validate=function(){for(var W=[],nt=H.querySelectorAll("input, select, textarea, div[name]"),lt=0;lt<nt.length;lt++)if(nt[lt].getAttribute("data-validation")){var bt=d.validateElement(nt[lt]);bt&&W.push(bt)}return W.length>0?W.join("<br>"):!1},d.getError=function(){return!!d.validation()},d.setHash=function(){return d.getHash(D.getElements(H))},d.getHash=function(W){var nt=0,lt,bt;if(W.length===0)return nt;for(lt=0;lt<W.length;lt++)bt=W.charCodeAt(lt),nt=(nt<<5)-nt+bt,nt|=0;return nt},d.isChanged=function(){var W=d.setHash();return d.options.currentHash!=W},d.resetTracker=function(){d.options.currentHash=d.setHash(),d.options.ignore=!1},d.setIgnore=function(W){d.options.ignore=!!W},setTimeout(function(){d.options.currentHash=d.setHash()},1e3),H.addEventListener("keyup",function(W){W.target.getAttribute("data-validation")&&d.validateElement(W.target)}),D.hasEvents||(window.addEventListener("beforeunload",function(W){if(d.isChanged()&&d.options.ignore==!1){var nt=d.options.message?d.options.message:"o/";return nt?(typeof W>"u"&&(W=window.event),W&&(W.returnValue=nt),nt):void 0}}),D.hasEvents=!0),H.form=d,d};return D.getValue=function(H){var b=null;if(H.type=="checkbox")H.checked==!0&&(b=H.value||!0);else if(H.type=="radio")H.checked==!0&&(b=H.value);else if(H.type=="file")b=H.files;else if(H.tagName=="select"&&H.multiple==!0){b=[];for(var d=H.querySelectorAll("options[selected]"),X=0;X<d.length;X++)b.push(d[X].value)}else typeof H.val=="function"?b=H.val():b=H.value||"";return b},D.getElements=function(H,b){for(var d={},X=null,ht=H.querySelectorAll("input, select, textarea, div[name]"),dt=0;dt<ht.length;dt++)(X=ht[dt].getAttribute("name"))&&(d[X]=D.getValue(ht[dt])||"");return b==!0?d:JSON.stringify(d)},D.setElements=function(H,b){for(var d=null,X=null,ht=H.querySelectorAll("input, select, textarea, div[name]"),dt=0;dt<ht.length;dt++){var K=ht[dt].getAttribute("type");if(d=ht[dt].getAttribute("name")){if(d=d.replace(new RegExp(/\[(.*?)\]/ig),".$1"),X=null,d.match(/\./)){var W=w.call(b,d)||"";typeof W<"u"&&(X=W)}else typeof b[d]<"u"&&(X=b[d]);X!==null&&(K=="checkbox"||K=="radio"?ht[dt].checked=!!X:K=="file"||(typeof ht[dt].val=="function"?ht[dt].val(X):ht[dt].value=X))}}},D}var Dt=he();function Wt(){var D=function(){var b=null,d=function(K){if(K.which==27)for(var W=document.querySelectorAll(".jmodal"),nt=0;nt<W.length;nt++)W[nt].parentNode.modal.close()},X=function(K){let W=K.composedPath();var nt=h.findElement(W[0],"jmodal");if(nt){var lt=nt.getBoundingClientRect();if(K.changedTouches&&K.changedTouches[0])var bt=K.changedTouches[0].clientX,Rt=K.changedTouches[0].clientY;else var bt=K.clientX,Rt=K.clientY;lt.width-(bt-lt.left)<50&&Rt-lt.top<50&&nt.parentNode.modal.close()}b&&(b.element.style.cursor="auto",b=null)},ht=function(K){let W=K.composedPath();var nt=h.findElement(W[0],"jmodal");if(nt){var lt=nt.getBoundingClientRect();if(K.changedTouches&&K.changedTouches[0])var bt=K.changedTouches[0].clientX,Rt=K.changedTouches[0].clientY;else var bt=K.clientX,Rt=K.clientY;lt.width-(bt-lt.left)<50&&Rt-lt.top<50||Rt-lt.top<50&&(document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),b={left:lt.left,top:lt.top,x:K.clientX,y:K.clientY,width:lt.width,height:lt.height,element:nt})}},dt=function(K){if(b){if(K=K||window.event,K.buttons)var W=K.buttons;else if(K.button)var W=K.button;else var W=K.which;W?(b.element.style.top=b.top+(K.clientY-b.y)+b.height/2+"px",b.element.style.left=b.left+(K.clientX-b.x)+b.width/2+"px",b.element.style.cursor="move"):b.element.style.cursor="auto"}};document.addEventListener("keydown",d),document.addEventListener("mouseup",X),document.addEventListener("mousedown",ht),document.addEventListener("mousemove",dt)},H=function(b,d){var X={};X.options={};var ht={url:null,onopen:null,onclose:null,onload:null,closed:!1,width:null,height:null,title:null,padding:null,backdrop:!0,icon:null};for(var dt in ht)d&&d.hasOwnProperty(dt)?X.options[dt]=d[dt]:X.options[dt]=ht[dt];!X.options.title&&b.getAttribute("title")&&(X.options.title=b.getAttribute("title"));for(var K=document.createElement("div");b.children[0];)K.appendChild(b.children[0]);for(X.title=document.createElement("div"),X.title.className="jmodal_title",X.options.icon&&X.title.setAttribute("data-icon",X.options.icon),X.content=document.createElement("div"),X.content.className="jmodal_content",X.content.innerHTML=b.innerHTML;K.children[0];)X.content.appendChild(K.children[0]);if(X.container=document.createElement("div"),X.container.className="jmodal",X.container.appendChild(X.title),X.container.appendChild(X.content),X.options.padding&&(X.content.style.padding=X.options.padding),X.options.width&&(X.container.style.width=X.options.width),X.options.height&&(X.container.style.height=X.options.height),X.options.title){var W=document.createElement("h4");W.innerText=X.options.title,X.title.appendChild(W)}if(b.innerHTML="",b.style.display="none",b.appendChild(X.container),X.options.backdrop){var nt=document.createElement("div");nt.className="jmodal_backdrop",nt.onclick=function(){X.close()},b.appendChild(nt)}return X.open=function(){b.style.display="block";var lt=X.container.getBoundingClientRect();h.getWindowWidth()<lt.width?(X.container.style.top="",X.container.style.left="",X.container.classList.add("jmodal_fullscreen"),q.slideBottom(X.container,1)):X.options.backdrop&&(nt.style.display="block"),typeof X.options.onopen=="function"&&X.options.onopen(b,X)},X.resetPosition=function(){X.container.style.top="",X.container.style.left=""},X.isOpen=function(){return b.style.display!="none"},X.close=function(){X.isOpen()&&(b.style.display="none",X.options.backdrop&&(nt.style.display=""),X.container.classList.remove("jmodal_fullscreen"),typeof X.options.onclose=="function"&&X.options.onclose(b,X))},X.options.url?k({url:X.options.url,method:"GET",dataType:"text/html",success:function(lt){X.content.innerHTML=lt,X.options.closed||X.open(),typeof X.options.onload=="function"&&X.options.onload(X)}}):(X.options.closed||X.open(),typeof X.options.onload=="function"&&X.options.onload(X)),b.modal=X,D(),D=function(){},X};return H}var Kt=Wt();function ae(){var D=function(H){var b={};b.options={};var d={icon:null,name:"Notification",date:null,error:null,title:null,message:null,timeout:4e3,autoHide:!0,closeable:!0};for(var X in d)H&&H.hasOwnProperty(X)?b.options[X]=H[X]:b.options[X]=d[X];var ht=document.createElement("div");ht.className="jnotification",b.options.error&&ht.classList.add("jnotification-error");var dt=document.createElement("div");dt.className="jnotification-container",ht.appendChild(dt);var K=document.createElement("div");K.className="jnotification-header",dt.appendChild(K);var W=document.createElement("div");if(W.className="jnotification-image",K.appendChild(W),b.options.icon){var nt=document.createElement("img");nt.src=b.options.icon,W.appendChild(nt)}var lt=document.createElement("div");if(lt.className="jnotification-name",lt.innerHTML=b.options.name,K.appendChild(lt),b.options.closeable==!0){var bt=document.createElement("div");bt.className="jnotification-close",bt.onclick=function(){b.hide()},K.appendChild(bt)}var Rt=document.createElement("div");Rt.className="jnotification-date",K.appendChild(Rt);var Mt=document.createElement("div");if(Mt.className="jnotification-content",dt.appendChild(Mt),b.options.title){var Tt=document.createElement("div");Tt.className="jnotification-title",Tt.innerHTML=b.options.title,Mt.appendChild(Tt)}var jt=document.createElement("div");if(jt.className="jnotification-message",jt.innerHTML=b.options.message,Mt.appendChild(jt),b.show=function(){document.body.appendChild(ht),h.getWindowWidth()>800?q.fadeIn(ht):q.slideTop(ht,1)},b.hide=function(){h.getWindowWidth()>800?q.fadeOut(ht,function(){ht.parentNode&&(ht.parentNode.removeChild(ht),It&&clearTimeout(It))}):q.slideTop(ht,0,function(){ht.parentNode&&(ht.parentNode.removeChild(ht),It&&clearTimeout(It))})},b.show(),b.options.autoHide==!0)var It=setTimeout(function(){b.hide()},b.options.timeout);return h.getWindowWidth()<800&&ht.addEventListener("swipeup",function(Zt){b.hide(),Zt.preventDefault(),Zt.stopPropagation()}),b};return D.isVisible=function(){var H=document.querySelector(".jnotification");return!!(H&&H.parentNode)},D}var de=ae();function ye(D,H){var b={};b.options={};var d={value:0,onchange:null,width:null};for(var X in d)H&&H.hasOwnProperty(X)?b.options[X]=H[X]:b.options[X]=d[X];D.classList.add("jprogressbar"),D.setAttribute("tabindex",1),D.setAttribute("data-value",b.options.value);var ht=document.createElement("div");ht.style.width=b.options.value+"%",ht.style.color="#fff",D.appendChild(ht),b.options.width&&(D.style.width=b.options.width),b.setValue=function(K){K=parseInt(K),b.options.value=K,ht.style.width=K+"%",D.setAttribute("data-value",K+"%"),K<6?D.style.color="#000":D.style.color="#fff",b.options.value=K,typeof b.options.onchange=="function"&&b.options.onchange(D,K),D.value!=b.options.value&&(D.value=b.options.value,typeof D.oninput=="function"&&D.oninput({type:"input",target:D,value:D.value}))},b.getValue=function(){return b.options.value};var dt=function(K){if(K.which){var W=D.getBoundingClientRect();if(K.changedTouches&&K.changedTouches[0]){var nt=K.changedTouches[0].clientX;K.changedTouches[0].clientY}else{var nt=K.clientX;K.clientY}b.setValue(Math.round((nt-W.left)/W.width*100))}};return"touchstart"in document.documentElement?(D.addEventListener("touchstart",dt),D.addEventListener("touchend",dt)):(D.addEventListener("mousedown",dt),D.addEventListener("mousemove",dt)),D.change=b.setValue,D.val=function(K){if(K===void 0)return b.getValue();b.setValue(K)},D.progressbar=b,b}function Oe(D,H){if(D.rating)return D.rating.setOptions(H,!0);var b={};b.options={},b.setOptions=function(X,ht){var dt={number:5,value:0,tooltip:["Very bad","Bad","Average","Good","Very good"],onchange:null};for(var K in dt)X&&X.hasOwnProperty(K)?b.options[K]=X[K]:(typeof b.options[K]>"u"||ht===!0)&&(b.options[K]=dt[K]);D.innerHTML="";for(var W=0;W<b.options.number;W++){var nt=document.createElement("div");nt.setAttribute("data-index",W+1),nt.setAttribute("title",b.options.tooltip[W]),D.appendChild(nt)}if(b.options.value)for(var W=0;W<b.options.number;W++)W<b.options.value&&D.children[W].classList.add("jrating-selected");return b},b.setValue=function(X){for(var ht=0;ht<b.options.number;ht++)ht<X?D.children[ht].classList.add("jrating-selected"):(D.children[ht].classList.remove("jrating-over"),D.children[ht].classList.remove("jrating-selected"));b.options.value=X,typeof b.options.onchange=="function"&&b.options.onchange(D,X),D.value!=b.options.value&&(D.value=b.options.value,typeof D.oninput=="function"&&D.oninput({type:"input",target:D,value:D.value}))},b.getValue=function(){return b.options.value};var d=function(){b.setOptions(H),D.classList.add("jrating"),D.addEventListener("click",function(X){var ht=X.target.getAttribute("data-index");ht!=null&&(ht==b.options.value?b.setValue(0):b.setValue(ht))}),D.addEventListener("mouseover",function(X){for(var ht=X.target.getAttribute("data-index"),dt=0;dt<b.options.number;dt++)dt<ht?D.children[dt].classList.add("jrating-over"):D.children[dt].classList.remove("jrating-over")}),D.addEventListener("mouseout",function(X){for(var ht=0;ht<b.options.number;ht++)D.children[ht].classList.remove("jrating-over")}),D.change=b.setValue,D.val=function(X){if(X===void 0)return b.getValue();b.setValue(X)},D.rating=b};return d(),b}function Te(D,H){if(D.search)return D.search;var b=null,d=function(nt){if(nt.target.classList.contains("jsearch_item"))var lt=nt.target;else var lt=nt.target.parentNode;K.selectIndex(lt),nt.preventDefault()},X=function(nt){if(typeof K.options.onsearch=="function"){var lt=K.options.onsearch(K,nt);lt&&(nt=lt)}if(W.innerHTML="",!nt.length)D.style.display="";else{D.style.display="block";for(var bt=nt.length<11?nt.length:10,Rt=0;Rt<bt;Rt++){if(typeof nt[Rt]=="string")var Mt=nt[Rt],Tt=nt[Rt];else{var Mt=nt[Rt].text;!Mt&&nt[Rt].name&&(Mt=nt[Rt].name);var Tt=nt[Rt].value;!Tt&&nt[Rt].id&&(Tt=nt[Rt].id)}var jt=document.createElement("div");jt.setAttribute("data-value",Tt),jt.setAttribute("data-text",Mt),jt.className="jsearch_item",nt[Rt].id&&jt.setAttribute("id",nt[Rt].id),K.options.forceSelect&&Rt==0&&jt.classList.add("selected");var It=document.createElement("img");nt[Rt].image?It.src=nt[Rt].image:It.style.display="none",jt.appendChild(It);var Zt=document.createElement("div");Zt.innerHTML=Mt,jt.appendChild(Zt),W.appendChild(jt)}}},ht=function(nt){if(nt!=K.terms)if(K.terms=nt,K.options.forceSelect?b=0:b=null,Array.isArray(K.options.data)){var lt=function(Rt){if(typeof Rt=="string"){if((""+Rt).toLowerCase().search(nt.toLowerCase())>=0)return!0}else for(var Mt in Rt){var Tt=Rt[Mt];if((""+Tt).toLowerCase().search(nt.toLowerCase())>=0)return!0}return!1},bt=K.options.data.filter(function(Rt){return lt(Rt)});X(bt)}else k({url:K.options.data+nt,method:"GET",dataType:"json",success:function(Rt){X(Rt)}})},dt=null,K=function(nt){dt&&clearTimeout(dt),dt=setTimeout(function(){ht(nt)},500)};H.forceSelect===null&&(H.forceSelect=!0),K.options={data:H.data||null,input:H.input||null,searchByNode:H.searchByNode||null,onselect:H.onselect||null,forceSelect:H.forceSelect,onsearch:H.onsearch||null,onbeforesearch:H.onbeforesearch||null},K.selectIndex=function(nt){var lt=nt.getAttribute("id"),bt=nt.getAttribute("data-text"),Rt=nt.getAttribute("data-value"),Mt=nt.children[0].src||"";typeof K.options.onselect=="function"&&K.options.onselect(K,bt,Rt,lt,Mt),K.close()},K.open=function(){D.style.display="block"},K.close=function(){dt&&clearTimeout(dt),K.terms="",W.innerHTML="",D.style.display=""},K.isOpened=function(){return!!D.style.display},K.keydown=function(nt){K.isOpened()&&(nt.key=="Enter"?b!==null&&W.children[b]?(K.selectIndex(W.children[b]),nt.preventDefault()):K.close():nt.key==="ArrowUp"?(b!==null&&W.children[0]&&(W.children[b].classList.remove("selected"),!K.options.forceSelect&&b===0?b=null:(b=Math.max(0,b-1),W.children[b].classList.add("selected"))),nt.preventDefault()):nt.key==="ArrowDown"&&(b==null?b=-1:W.children[b].classList.remove("selected"),b<9&&W.children[b+1]&&b++,W.children[b].classList.add("selected"),nt.preventDefault()))},K.keyup=function(nt){if(!K.options.searchByNode&&K.options.input)if(K.options.input.tagName==="DIV")var lt=K.options.input.innerText;else var lt=K.options.input.value;else{var bt=h.getNode();if(bt)var lt=bt.innerText}if(typeof K.options.onbeforesearch=="function"){var Rt=K.options.onbeforesearch(K,lt);if(Rt)lt=Rt;else if(Rt===!1)return}K(lt)},K.blur=function(nt){K.close()},K.options.input&&(K.options.input.addEventListener("keyup",K.keyup),K.options.input.addEventListener("keydown",K.keydown),K.options.input.addEventListener("blur",K.blur));var W=document.createElement("div");return W.classList.add("jsearch_container"),W.onmousedown=d,D.appendChild(W),D.classList.add("jsearch"),D.search=K,K}function He(D,H){var b={};if(b.options={},b.currentImage=null,H&&(b.options=H),D.setAttribute("tabindex","900"),b.options.items=[],!D.classList.contains("jslider")){if(D.classList.add("jslider"),D.classList.add("unselectable"),b.options.height&&(D.style.minHeight=parseInt(b.options.height)+"px"),b.options.width&&(D.style.width=parseInt(b.options.width)+"px"),b.options.grid){D.classList.add("jslider-grid");var d=D.children.length;d>4&&D.setAttribute("data-total",d-4),D.setAttribute("data-number",d>4?4:d)}var X=document.createElement("div");if(X.classList.add("jslider-counter"),D.children.length>0)for(var ht=0;ht<D.children.length;ht++){b.options.items.push(D.children[ht]);var dt=document.createElement("div");dt.onclick=function(){var bt=Array.prototype.slice.call(X.children).indexOf(this);b.show(b.currentImage=b.options.items[bt])},X.appendChild(dt)}var K=document.createElement("div");K.className="jslider-caption";var W=document.createElement("div"),nt=document.createElement("div");nt.className="jslider-close",nt.innerHTML="",nt.onclick=function(){b.close()},W.appendChild(K),W.appendChild(nt)}b.updateCounter=function(bt){for(var Rt=0;Rt<X.children.length;Rt++)if(X.children[Rt].classList.contains("jslider-counter-focus")){X.children[Rt].classList.remove("jslider-counter-focus");break}X.children[bt].classList.add("jslider-counter-focus")},b.show=function(bt){if(!bt)var bt=D.children[0];D.classList.add("jslider-focus"),D.classList.remove("jslider-grid"),D.appendChild(W),D.appendChild(X);var Rt=b.options.items.indexOf(bt);b.updateCounter(Rt);for(var Mt=0;Mt<D.children.length;Mt++)D.children[Mt].style.display="";bt.style.display="block",bt.previousElementSibling?D.classList.add("jslider-left"):D.classList.remove("jslider-left"),bt.nextElementSibling&&bt.nextElementSibling.tagName=="IMG"?D.classList.add("jslider-right"):D.classList.remove("jslider-right"),b.currentImage=bt,b.currentImage.offsetHeight>b.currentImage.offsetWidth&&b.currentImage.classList.add("jslider-vertical"),W.children[0].innerText=b.currentImage.getAttribute("title")},b.open=function(){b.show(),typeof b.options.onopen=="function"&&b.options.onopen(D)},b.close=function(){D.classList.remove("jslider-focus"),D.classList.remove("jslider-left"),D.classList.remove("jslider-right"),b.options.grid&&D.classList.add("jslider-grid");for(var bt=0;bt<D.children.length;bt++)D.children[bt].style.display="";X.remove(),W.remove(),b.currentImage=null,typeof b.options.onclose=="function"&&b.options.onclose(D)},b.reset=function(){D.innerHTML=""},b.next=function(){var bt=b.currentImage.nextElementSibling;bt&&bt.tagName==="IMG"&&b.show(b.currentImage.nextElementSibling)},b.prev=function(){b.currentImage.previousElementSibling&&b.show(b.currentImage.previousElementSibling)};var lt=function(bt){if(bt.target.tagName=="IMG")b.show(bt.target);else if(!bt.target.classList.contains("jslider-close")&&!(bt.target.parentNode.classList.contains("jslider-counter")||bt.target.classList.contains("jslider-counter"))){var Rt=bt.offsetX||bt.changedTouches[0].clientX;bt.target.clientWidth-Rt<40?b.next():Rt<40&&b.prev()}};return"ontouchend"in document.documentElement?D.addEventListener("touchend",lt):D.addEventListener("mouseup",lt),D.addEventListener("swipeleft",function(bt){b.next(),bt.preventDefault(),bt.stopPropagation()}),D.addEventListener("swiperight",function(bt){b.prev(),bt.preventDefault(),bt.stopPropagation()}),D.addEventListener("keydown",function(bt){bt.which==27&&b.close()}),D.slider=b,b}function Ze(D,H){if(D.tags)return D.tags.setOptions(H,!0);var b={type:"tags"};b.options={};var d=function(){return!!(b.options.limit&&D.children.length>=b.options.limit)},X=null,ht=null;b.setOptions=function(Ct,Ut){var at={value:"",limit:null,search:null,placeholder:null,validation:null,onbeforepaste:null,onbeforechange:null,onlimit:null,onchange:null,onfocus:null,onblur:null,onload:null};for(var st in at)Ct&&Ct.hasOwnProperty(st)?b.options[st]=Ct[st]:(typeof b.options[st]>"u"||Ut===!0)&&(b.options[st]=at[st]);return b.options.placeholder?D.setAttribute("data-placeholder",b.options.placeholder):D.removeAttribute("data-placeholder"),D.placeholder=b.options.placeholder,b.setValue(b.options.value),nt(),b.options.search?ht||(ht=document.createElement("div"),D.parentNode.insertBefore(ht,D.nextSibling),X=Te(ht,{data:b.options.search,onselect:function(vt,R,Q){b.selectIndex(R,Q)}})):ht&&(X=null,ht.remove(),ht=null),b},b.add=function(Ct,Ut){if(typeof b.options.onbeforechange=="function"){var at=b.options.onbeforechange(D,b,b.options.value,Ct);if(at===!1)return!1;at!=null&&(Ct=at)}if(X&&X.close(),d())typeof b.options.onlimit=="function"?b.options.onlimit(b,b.options.limit):alert(_.translate("You reach the limit number of entries")+" "+b.options.limit);else{var st=h.getNode();if(st&&st.parentNode&&st.parentNode.classList.contains("jtags")&&st.nextSibling&&!(st.nextSibling.innerText&&st.nextSibling.innerText.trim()))vt=st.nextSibling;else{if(D.lastChild&&(D.lastChild.innerText.trim()||D.removeChild(D.lastChild)),!Ct||typeof Ct=="string")var vt=K(Ct,Ct,st);else for(var R=0;R<=Ct.length;R++)if(!d()){if(!Ct[R]||typeof Ct[R]=="string")var Q=Ct[R]||"",ut=null;else var Q=Ct[R].text,ut=Ct[R].value;var vt=K(Q,ut)}W()}Ut&&dt(vt)}},b.setLimit=function(Ct){for(b.options.limit=Ct,D.children.length-Ct;D.children.length>Ct;)D.removeChild(D.lastChild)},b.remove=function(Ct){Ct.parentNode.removeChild(Ct),D.children.length?W():b.add("",!0)},b.getData=function(){for(var Ct=[],Ut=0;Ut<D.children.length;Ut++){var at=D.children[Ut].innerText.replace(`
`,""),st=D.children[Ut].getAttribute("data-value");st||(st=at),(at||st)&&Ct.push({text:at,value:st})}return Ct},b.getValue=function(Ct){var Ut=null;if(Ct!=null)Ut=D.children[Ct].getAttribute("data-value"),Ut||(Ut=D.children[Ct].innerText.replace(`
`,""));else{for(var at=[],st=0;st<D.children.length;st++)Ut=D.children[st].innerText.replace(`
`,""),Ut&&at.push(b.getValue(st));Ut=at.join(",")}return Ut},b.setValue=function(Ct){if(!Ct)b.reset();else if(D.value!=Ct)if(Array.isArray(Ct))b.add(Ct);else{var Ut=(""+Ct).trim(),at=bt(Ut);D.innerHTML="",b.add(at)}},b.reset=function(){D.classList.add("jtags-empty"),D.innerHTML="<div></div>",W()},b.isValid=function(){for(var Ct=0,Ut=0;Ut<D.children.length;Ut++)D.children[Ut].classList.contains("jtags_error")&&Ct++;return Ct==0},b.selectIndex=function(Ct,Ut){var at=h.getNode();at&&(at.innerText=Ct,Ut&&at.setAttribute("data-value",Ut),at.classList.remove("jtags_error"),d()||b.add("",!0))},b.search=function(Ct){Ct.innerText},b.destroy=function(){D.removeEventListener("mouseup",It),D.removeEventListener("keydown",Mt),D.removeEventListener("keyup",Tt),D.removeEventListener("paste",jt),D.removeEventListener("focus",Zt),D.removeEventListener("blur",ce),D.parentNode.removeChild(D)};var dt=function(Ct){if(D.children.length){var Ut=document.createRange(),at=window.getSelection();if(!Ct)var Ct=D.childNodes[D.childNodes.length-1];Ut.setStart(Ct,Ct.length),Ut.collapse(!0),at.removeAllRanges(),at.addRange(Ut),D.scrollLeft=D.scrollWidth}},K=function(Ct,Ut,at){var st=document.createElement("div");return st.innerHTML=Ct||"",Ut&&st.setAttribute("data-value",Ut),at&&at.parentNode.classList.contains("jtags")?D.insertBefore(st,at.nextSibling):D.appendChild(st),st},W=function(){var Ct=b.getValue();Ct!=b.options.value&&(b.options.value=Ct,typeof b.options.onchange=="function"&&b.options.onchange(D,b,b.options.value),D.value!=b.options.value&&(D.value=b.options.value,typeof D.oninput=="function"&&D.oninput({type:"input",target:D,value:D.value}))),nt()},nt=function(){for(var Ct=0;Ct<D.children.length;Ct++)D.children[Ct].tagName==="DIV"&&(b.getValue(Ct)?(D.children[Ct].classList.add("jtags_label"),typeof b.options.validation=="function"&&b.getValue(Ct)?b.options.validation(D.children[Ct],D.children[Ct].innerText,D.children[Ct].getAttribute("data-value"))?D.children[Ct].classList.remove("jtags_error"):D.children[Ct].classList.add("jtags_error"):D.children[Ct].classList.remove("jtags_error")):D.children[Ct].classList.remove("jtags_label"));lt()},lt=function(){D.innerText.trim()?D.classList.remove("jtags-empty"):(!D.children.length||D.children[0].tagName==="BR")&&(D.innerHTML="",dt(K()))},bt=function(Ct){var Ut=[],at="";if(Ct=Ct.trim(),Ct){for(var st=0;st<Ct.length;st++)Ct[st]==","||Ct[st]==";"||Ct[st]==`
`?at&&(Ut.push(at.trim()),at=""):at+=Ct[st];at&&Ut.push(at)}return Ut},Rt=0,Mt=function(Ct){if(Rt=window.getSelection().anchorOffset,lt(),Ct.key==="Tab"||Ct.key===";"||Ct.key===","){var Ut=window.getSelection().anchorOffset;Ut>1&&(d()?typeof b.options.onlimit=="function"&&b.options.onlimit(b,b.options.limit):b.add("",!0)),Ct.preventDefault()}else if(Ct.key=="Enter"){if(!X||!X.isOpened()){var Ut=window.getSelection().anchorOffset;Ut>1&&(d()||b.add("",!0)),Ct.preventDefault()}}else Ct.key=="Backspace"&&D.children.length==1&&window.getSelection().anchorOffset<1&&Ct.preventDefault();X&&X.keydown(Ct),lt()},Tt=function(Ct){if(Ct.which==39){var Ut=window.getSelection().anchorOffset;Ut>1&&Ut==Rt&&b.add("",!0)}else Ct.which==13||Ct.which==38||Ct.which==40?Ct.preventDefault():X&&X.keyup(Ct);nt()},jt=function(Ct){if(Ct.clipboardData||Ct.originalEvent.clipboardData)var Ut=(Ct.originalEvent||Ct).clipboardData.getData("text/plain");else if(window.clipboardData)var Ut=window.clipboardData.getData("Text");var at=bt(Ut);if(typeof b.options.onbeforepaste=="function"){var st=b.options.onbeforepaste(D,b,at);if(st===!1)return Ct.preventDefault(),!1;st&&(at=st)}at.length>1?(b.add(at,!0),Ct.preventDefault()):at[0]&&(document.execCommand("insertText",!1,at[0]),Ct.preventDefault())},It=function(Ct){if(Ct.target.parentNode&&Ct.target.parentNode.classList.contains("jtags")&&(Ct.target.classList.contains("jtags_label")||Ct.target.classList.contains("jtags_error"))){var Ut=Ct.target.getBoundingClientRect();Ut.width-(Ct.clientX-Ut.left)<16&&b.remove(Ct.target)}Ct.target==D&&dt()},Zt=function(){D.classList.contains("jtags-focus")||((!D.children.length||b.getValue(D.children.length-1))&&(d()||K("")),typeof b.options.onfocus=="function"&&b.options.onfocus(D,b,b.getValue()),D.classList.add("jtags-focus"))},ce=function(){if(D.classList.contains("jtags-focus")){X&&X.close();for(var Ct=0;Ct<D.children.length-1;Ct++)b.getValue(Ct)||D.removeChild(D.children[Ct]);W(),D.classList.remove("jtags-focus"),typeof b.options.onblur=="function"&&b.options.onblur(D,b,b.getValue())}},ve=function(){"touchend"in document.documentElement?D.addEventListener("touchend",It):D.addEventListener("mouseup",It),D.addEventListener("keydown",Mt),D.addEventListener("keyup",Tt),D.addEventListener("paste",jt),D.addEventListener("focus",Zt),D.addEventListener("blur",ce),D.setAttribute("contenteditable",!0),D.classList.add("jtags"),b.setOptions(H),typeof b.options.onload=="function"&&b.options.onload(D,b),D.change=b.setValue,D.val=function(Ct){if(Ct===void 0)return b.getValue();b.setValue(Ct)},D.tags=b};return ve(),b}function Be(D,H){var b={};b.options={};var d={type:"image",extension:"*",input:!1,minWidth:!1,maxWidth:null,maxHeight:null,maxJpegSizeBytes:null,onchange:null,multiple:!1,remoteParser:null};for(var X in d)H&&H.hasOwnProperty(X)?b.options[X]=H[X]:b.options[X]=d[X];b.options.multiple==!0&&D.setAttribute("data-multiple",!0),D.content=[],D.classList.add("jupload"),b.options.input==!0&&D.classList.add("input"),b.add=function(W){if(b.options.multiple==!1&&(D.content=[],D.innerText=""),b.options.type=="image"){var nt=document.createElement("img");nt.setAttribute("src",W.file),nt.setAttribute("tabindex",-1),D.getAttribute("name")||(nt.className="jfile",nt.content=W),D.appendChild(nt)}else{if(W.name)var lt=W.name;else var lt=W.file;var bt=document.createElement("div");bt.innerText=lt||b.options.type,bt.classList.add("jupload-item"),bt.setAttribute("tabindex",-1),D.appendChild(bt)}W.content&&(W.file=h.guid()),D.content.push(W),typeof b.options.onchange=="function"&&b.options.onchange(D,W)},b.addFromFile=function(W){var nt=W.type.split("/");if(nt[0]==b.options.type){var lt=new FileReader;lt.addEventListener("load",function(bt){var Rt={file:bt.srcElement.result,extension:W.name.substr(W.name.lastIndexOf(".")+1),name:W.name,size:W.size,lastmodified:W.lastModified,content:bt.srcElement.result};b.add(Rt)}),lt.readAsDataURL(W)}else alert(_.translate("This extension is not allowed"))},b.addFromUrl=function(W){if(W.substr(0,4)!="data"&&!b.options.remoteParser)console.error("remoteParser not defined in your initialization");else if(W.substr(0,4)=="data"){var nt=W.split(";");nt=nt[0].split("/");var lt=nt[0].replace("data:","");if(lt==b.options.type){var bt={file:W,name:"",extension:nt[1],content:W};b.add(bt)}else alert(b.options.text.extensionNotAllowed)}else{var nt=W.substr(W.lastIndexOf(".")+1);W=b.options.remoteParser+W,k({url:W,type:"GET",dataType:"blob",success:function(Mt){}})}};var ht=b.options.type+"/"+b.options.extension,dt=document.createElement("input");dt.type="file",dt.setAttribute("accept",ht),dt.onchange=function(){for(var W=0;W<this.files.length;W++)b.addFromFile(this.files[W])},b.options.multiple==!0&&dt.setAttribute("multiple",!0);var K=null;return D.addEventListener("click",function(W){K=null,!D.children.length||W.target===D?h.click(dt):W.target.parentNode==D&&(K=W.target)}),D.addEventListener("dblclick",function(W){h.click(dt)}),D.addEventListener("dragenter",function(W){D.style.border="1px dashed #000"}),D.addEventListener("dragleave",function(W){D.style.border="1px solid #eee"}),D.addEventListener("dragstop",function(W){D.style.border="1px solid #eee"}),D.addEventListener("dragover",function(W){W.preventDefault()}),D.addEventListener("keydown",function(W){if(K&&W.which==46){var nt=Array.prototype.indexOf.call(D.children,K);nt>=0&&(D.content.splice(nt,1),K.remove(),K=null)}}),D.addEventListener("drop",function(W){W.preventDefault(),W.stopPropagation();var nt=(W.originalEvent||W).dataTransfer.getData("text/html"),lt=(W.originalEvent||W).dataTransfer.files;if(lt.length)for(var bt=0;bt<W.dataTransfer.files.length;bt++)b.addFromFile(W.dataTransfer.files[bt]);else if(nt){b.options.multiple==!1&&(D.innerText="");var Rt=document.createElement("div");Rt.innerHTML=nt;var Mt=Rt.querySelectorAll("img");if(Mt.length)for(var bt=0;bt<Mt.length;bt++)b.addFromUrl(Mt[bt].src)}return D.style.border="1px solid #eee",!1}),D.val=function(W){if(W===void 0)return D.content&&D.content.length?D.content:null;if(D.innerText="",D.content=[],W)if(Array.isArray(W))for(var nt=0;nt<W.length;nt++)typeof W[nt]=="string"?b.add({file:W[nt]}):b.add(W[nt]);else typeof W=="string"&&b.add({file:W})},D.upload=D.image=b,b}var dn=c(195),fn=c.n(dn),Ve={..._,...h,version:"5.0.27",setExtensions:function(D){if(typeof D=="object")for(var H=Object.keys(D),b=0;b<H.length;b++)Ve[H[b]]=D[H[b]]},tracking:f,path:w,sorting:C,lazyLoading:E,ajax:k,animation:q,calendar:rt,color:pt,contextmenu:Vt,dropdown:_t,editor:$t,floating:et,form:Dt,mask:F,modal:Kt,notification:de,palette:yt,picker:Xt,progressbar:ye,rating:Oe,search:Te,slider:He,tabs:Et,tags:Ze,toolbar:qt,upload:Be,validations:Jt};Ve.image=Be,Ve.image.create=function(D){var H=document.createElement("img");return H.setAttribute("src",D.file),H.className="jfile",H.setAttribute("tabindex",-1),H.content=D,H},Ve.tracker=Dt,Ve.loading=q.loading,Ve.sha512=fn();const Ke=function(){document.jsuitesComponents=[];const D=function(jt,It){return jt[It.type]&&jt[It.type]==It||jt.component&&jt.component==It?!0:jt.parentNode?D(jt.parentNode,It):!1},H=function(jt){if(document.jsuitesComponents&&document.jsuitesComponents.length>0)for(var It=0;It<document.jsuitesComponents.length;It++)document.jsuitesComponents[It]&&!D(jt,document.jsuitesComponents[It])&&document.jsuitesComponents[It].close()};let b=15,d=null,X=!1,ht={x:null,y:null},dt=document.createElement("div");dt.classList.add("jtooltip");const K=function(jt){var It=Ve.findElement(jt.target,"jpanel");if(It&&!It.classList.contains("readonly")){It.focus();var Zt=jt.target.getBoundingClientRect();X={e:It,x:jt.clientX,y:jt.clientY,w:Zt.width,h:Zt.height,d:It.style.cursor,resizing:!!It.style.cursor,actioned:!1},It.style.width||(It.style.width=Zt.width+"px"),It.style.height||(It.style.height=Zt.height+"px");var ce=window.getSelection();if(ce.rangeCount)for(var ve=0;ve<ce.rangeCount;ve++)ce.removeRange(ce.getRangeAt(ve));jt.preventDefault(),jt.stopPropagation()}else X=!1;if(jt.changedTouches&&jt.changedTouches[0])var Ct=jt.changedTouches[0].clientX,Ut=jt.changedTouches[0].clientY;else var Ct=jt.clientX,Ut=jt.clientY;var at=jt.path||jt.composedPath&&jt.composedPath();if(at)d=at[0];else{if(jt.target&&jt.target.shadowRoot)var st=jt.target.shadowRoot;else var st=document;d=st.elementFromPoint(Ct,Ut)}H(d)},W=function(jt){X&&X.e&&(typeof X.e.refresh=="function"&&ht.actioned&&X.e.refresh(),X.e.style.cursor=""),ht={x:null,y:null},X=!1},nt=function(jt){if(X){var It=jt.clientX||jt.pageX,Zt=jt.clientY||jt.pageY;if(X.resizing){var at=null,st=null;if(X.d=="e-resize"||X.d=="ne-resize"||X.d=="se-resize")if(at=X.w+(It-X.x),X.e.style.width=at+"px",jt.shiftKey){var vt=(It-X.x)*(X.h/X.w);st=X.h+vt,X.e.style.height=st+"px"}else var vt=!1;vt||(X.d=="s-resize"||X.d=="se-resize"||X.d=="sw-resize")&&(st=X.h+(Zt-X.y),X.e.style.height=st+"px"),typeof X.e.refresh=="function"&&(ht.actioned=!0,X.e.refresh("dimensions",at,st))}else{ht.x==null&&ht.y==null&&(ht.x=It,ht.y=Zt);var ce=It-ht.x,ve=Zt-ht.y,Ct=X.e.offsetTop+ve,Ut=X.e.offsetLeft+ce;X.e.style.top=Ct+"px",X.e.style.left=Ut+"px",X.e.style.cursor="move",ht.x=It,ht.y=Zt,typeof X.e.refresh=="function"&&(ht.actioned=!0,X.e.refresh("position",Ct,Ut))}}else{var R=Ve.findElement(jt.target,"jpanel");if(R&&R.getAttribute("tabindex")){var Q=R.getBoundingClientRect();jt.clientY-Q.top<b?Q.width-(jt.clientX-Q.left)<b?R.style.cursor="ne-resize":jt.clientX-Q.left<b?R.style.cursor="nw-resize":R.style.cursor="n-resize":Q.height-(jt.clientY-Q.top)<b?Q.width-(jt.clientX-Q.left)<b?R.style.cursor="se-resize":jt.clientX-Q.left<b?R.style.cursor="sw-resize":R.style.cursor="s-resize":Q.width-(jt.clientX-Q.left)<b?R.style.cursor="e-resize":jt.clientX-Q.left<b?R.style.cursor="w-resize":R.style.cursor=""}}},lt=function(jt){var It=jt.target.getAttribute("data-tooltip");if(It){if(dt.innerText=It,jt.changedTouches&&jt.changedTouches[0])var Zt=jt.changedTouches[0].clientX,ce=jt.changedTouches[0].clientY;else var Zt=jt.clientX,ce=jt.clientY;dt.style.top=ce+"px",dt.style.left=Zt+"px",document.body.appendChild(dt)}else dt.innerText&&(dt.innerText="",document.body.removeChild(dt))},bt=function(jt){var It=Ve.findElement(jt.target,"jpanel");It&&typeof It.dblclick=="function"&&It.dblclick(jt)},Rt=function(jt){var It=document.activeElement;if(It&&typeof It.contextmenu=="function")It.contextmenu(jt),jt.preventDefault(),jt.stopImmediatePropagation();else if(It=Ve.findElement(jt.target,function(ce){return ce.tagName&&ce.getAttribute("aria-contextmenu-id")}),It){var Zt=document.querySelector("#"+It);Zt?(Zt.contextmenu.open(jt),jt.preventDefault(),jt.stopImmediatePropagation()):console.error("JSUITES: contextmenu id not found: "+It)}},Mt=function(jt){let It=document.activeElement;It&&jt.key==="Delete"&&typeof It.delete=="function"&&(It.delete(),jt.preventDefault(),jt.stopImmediatePropagation()),document.jsuitesComponents&&document.jsuitesComponents.length&&(It=document.jsuitesComponents[document.jsuitesComponents.length-1],It&&jt.key==="Escape"&&typeof It.isOpened=="function"&&typeof It.close=="function"&&It.isOpened()&&(It.close(),jt.preventDefault(),jt.stopImmediatePropagation()))},Tt=function(jt){(jt.target.getAttribute("data-mask")||jt.target.mask)&&Ve.mask(jt)};document.addEventListener("mouseup",W),document.addEventListener("mousedown",K),document.addEventListener("mousemove",nt),document.addEventListener("mouseover",lt),document.addEventListener("dblclick",bt),document.addEventListener("keydown",Mt),document.addEventListener("contextmenu",Rt),document.addEventListener("input",Tt)};typeof document<"u"&&!document.jsuitesComponents&&Ke();var Xe=Ve}(),p=p.default,p}()})}(jsuites$1)),jsuites$1.exports}requireJsuites();const jsuites="",jspreadsheet$1="";function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var dist={exports:{}};(function(module,exports){if(!jSuites&&typeof commonjsRequire=="function")var jSuites=requireJsuites();(function(t,e){module.exports=e()})(self,function(){return function(){var __webpack_modules__={243:function(t){var e;t.exports=(function(){var r={765:function(j,h){var u;u=function(g){g.version="1.0.2";var N=Math;function P(Ot,_t){for(var Xt=0,qt=0;Xt<Ot.length;++Xt)qt=_t*qt+Ot[Xt];return qt}function _(Ot,_t,Xt,qt,oe){if(_t===0)return Xt;if(_t===1)return qt;for(var $t=2/Ot,fe=qt,et=1;et<_t;++et)fe=qt*et*$t+oe*Xt,Xt=qt,qt=fe;return fe}function f(Ot,_t,Xt,qt,oe){return function($t,fe){if(qt){if($t===0)return qt==1?-1/0:1/0;if($t<0)return NaN}return fe===0?Ot($t):fe===1?_t($t):fe<0?NaN:_($t,fe|=0,Ot($t),_t($t),oe)}}var w,C,E,S,k,B,q,U,F,Y,rt,tt,yt,Et=function(){var Ot=.636619772,_t=[57568490574,-13362590354,6516196407e-1,-1121442418e-2,77392.33017,-184.9052456].reverse(),Xt=[57568490411,1029532985,9494680718e-3,59272.64853,267.8532712,1].reverse(),qt=[1,-.001098628627,2734510407e-14,-2073370639e-15,2093887211e-16].reverse(),oe=[-.01562499995,.0001430488765,-6911147651e-15,7621095161e-16,-934935152e-16].reverse();function $t(Dt){var Wt=0,Kt=0,ae=0,de=Dt*Dt;if(Dt<8)Wt=(Kt=P(_t,de))/(ae=P(Xt,de));else{var ye=Dt-.785398164;Kt=P(qt,de=64/de),ae=P(oe,de),Wt=N.sqrt(Ot/Dt)*(N.cos(ye)*Kt-N.sin(ye)*ae*8/Dt)}return Wt}var fe=[72362614232,-7895059235,2423968531e-1,-2972611439e-3,15704.4826,-30.16036606].reverse(),et=[144725228442,2300535178,1858330474e-2,99447.43394,376.9991397,1].reverse(),Ht=[1,.00183105,-3516396496e-14,2457520174e-15,-240337019e-15].reverse(),Jt=[.04687499995,-.0002002690873,8449199096e-15,-88228987e-14,105787412e-15].reverse();function he(Dt){var Wt=0,Kt=0,ae=0,de=Dt*Dt,ye=N.abs(Dt)-2.356194491;return Math.abs(Dt)<8?Wt=(Kt=Dt*P(fe,de))/(ae=P(et,de)):(Kt=P(Ht,de=64/de),ae=P(Jt,de),Wt=N.sqrt(Ot/N.abs(Dt))*(N.cos(ye)*Kt-N.sin(ye)*ae*8/N.abs(Dt)),Dt<0&&(Wt=-Wt)),Wt}return function Dt(Wt,Kt){if(Kt=Math.round(Kt),!isFinite(Wt))return isNaN(Wt)?Wt:0;if(Kt<0)return(Kt%2?-1:1)*Dt(Wt,-Kt);if(Wt<0)return(Kt%2?-1:1)*Dt(-Wt,Kt);if(Kt===0)return $t(Wt);if(Kt===1)return he(Wt);if(Wt===0)return 0;var ae=0;if(Wt>Kt)ae=_(Wt,Kt,$t(Wt),he(Wt),-1);else{for(var de=!1,ye=0,Oe=0,Te=1,He=0,Ze=2/Wt,Be=2*N.floor((Kt+N.floor(N.sqrt(40*Kt)))/2);Be>0;Be--)He=Be*Ze*Te-ye,ye=Te,Te=He,N.abs(Te)>1e10&&(Te*=1e-10,ye*=1e-10,ae*=1e-10,Oe*=1e-10),de&&(Oe+=Te),de=!de,Be==Kt&&(ae=ye);ae/=Oe=2*Oe-Te}return ae}}(),pt=(w=.636619772,C=[-2957821389,7062834065,-5123598036e-1,1087988129e-2,-86327.92757,228.4622733].reverse(),E=[40076544269,7452499648e-1,7189466438e-3,47447.2647,226.1030244,1].reverse(),S=[1,-.001098628627,2734510407e-14,-2073370639e-15,2093887211e-16].reverse(),k=[-.01562499995,.0001430488765,-6911147651e-15,7621095161e-16,-934945152e-16].reverse(),B=[-4900604943e3,127527439e4,-51534381390,7349264551e-1,-4237922726e-3,8511.937935].reverse(),q=[249958057e5,424441966400,3733650367,2245904002e-2,102042.605,354.9632885,1].reverse(),U=[1,.00183105,-3516396496e-14,2457520174e-15,-240337019e-15].reverse(),F=[.04687499995,-.0002002690873,8449199096e-15,-88228987e-14,105787412e-15].reverse(),f(function(Ot){var _t=0,Xt=0,qt=0,oe=Ot*Ot,$t=Ot-.785398164;return Ot<8?_t=(Xt=P(C,oe))/(qt=P(E,oe))+w*Et(Ot,0)*N.log(Ot):(Xt=P(S,oe=64/oe),qt=P(k,oe),_t=N.sqrt(w/Ot)*(N.sin($t)*Xt+N.cos($t)*qt*8/Ot)),_t},function(Ot){var _t=0,Xt=0,qt=0,oe=Ot*Ot,$t=Ot-2.356194491;return Ot<8?_t=(Xt=Ot*P(B,oe))/(qt=P(q,oe))+w*(Et(Ot,1)*N.log(Ot)-1/Ot):(Xt=P(U,oe=64/oe),qt=P(F,oe),_t=N.sqrt(w/Ot)*(N.sin($t)*Xt+N.cos($t)*qt*8/Ot)),_t},0,1,-1)),Pt=(Y=[1,3.5156229,3.0899424,1.2067492,.2659732,.0360768,.0045813].reverse(),rt=[.39894228,.01328592,.00225319,-.00157565,.00916281,-.02057706,.02635537,-.01647633,.00392377].reverse(),tt=[.5,.87890594,.51498869,.15084934,.02658733,.00301532,32411e-8].reverse(),yt=[.39894228,-.03988024,-.00362018,.00163801,-.01031555,.02282967,-.02895312,.01787654,-.00420059].reverse(),function Ot(_t,Xt){if((Xt=Math.round(Xt))===0)return function(Jt){return Jt<=3.75?P(Y,Jt*Jt/14.0625):N.exp(N.abs(Jt))/N.sqrt(N.abs(Jt))*P(rt,3.75/N.abs(Jt))}(_t);if(Xt===1)return function(Jt){return Jt<3.75?Jt*P(tt,Jt*Jt/14.0625):(Jt<0?-1:1)*N.exp(N.abs(Jt))/N.sqrt(N.abs(Jt))*P(yt,3.75/N.abs(Jt))}(_t);if(Xt<0)return NaN;if(N.abs(_t)===0)return 0;if(_t==1/0)return 1/0;var qt,oe=0,$t=2/N.abs(_t),fe=0,et=1,Ht=0;for(qt=2*N.round((Xt+N.round(N.sqrt(40*Xt)))/2);qt>0;qt--)Ht=qt*$t*et+fe,fe=et,et=Ht,N.abs(et)>1e10&&(et*=1e-10,fe*=1e-10,oe*=1e-10),qt==Xt&&(oe=fe);return oe*=Ot(_t,0)/et,_t<0&&Xt%2?-oe:oe}),Vt=function(){var Ot=[-.57721566,.4227842,.23069756,.0348859,.00262698,1075e-7,74e-7].reverse(),_t=[1.25331414,-.07832358,.02189568,-.01062446,.00587872,-.0025154,53208e-8].reverse(),Xt=[1,.15443144,-.67278579,-.18156897,-.01919402,-.00110404,-4686e-8].reverse(),qt=[1.25331414,.23498619,-.0365562,.01504268,-.00780353,.00325614,-68245e-8].reverse();return f(function(oe){return oe<=2?-N.log(oe/2)*Pt(oe,0)+P(Ot,oe*oe/4):N.exp(-oe)/N.sqrt(oe)*P(_t,2/oe)},function(oe){return oe<=2?N.log(oe/2)*Pt(oe,1)+1/oe*P(Xt,oe*oe/4):N.exp(-oe)/N.sqrt(oe)*P(qt,2/oe)},0,2,1)}();g.besselj=Et,g.bessely=pt,g.besseli=Pt,g.besselk=Vt},u(typeof DO_NOT_EXPORT_BESSEL>"u"?h:{})},162:function(j){var h;j.exports=(h=function(u,g){var N=Array.prototype.concat,P=Array.prototype.slice,_=Object.prototype.toString;function f(F,Y){var rt=F>Y?F:Y;return u.pow(10,17-~~(u.log(rt>0?rt:-rt)*u.LOG10E))}var w=Array.isArray||function(F){return _.call(F)==="[object Array]"};function C(F){return _.call(F)==="[object Function]"}function E(F){return typeof F=="number"&&F-F==0}function S(){return new S._init(arguments)}function k(){return 0}function B(){return 1}function q(F,Y){return F===Y?1:0}S.fn=S.prototype,S._init=function(F){if(w(F[0]))if(w(F[0][0])){C(F[1])&&(F[0]=S.map(F[0],F[1]));for(var Y=0;Y<F[0].length;Y++)this[Y]=F[0][Y];this.length=F[0].length}else this[0]=C(F[1])?S.map(F[0],F[1]):F[0],this.length=1;else if(E(F[0]))this[0]=S.seq.apply(null,F),this.length=1;else{if(F[0]instanceof S)return S(F[0].toArray());this[0]=[],this.length=1}return this},S._init.prototype=S.prototype,S._init.constructor=S,S.utils={calcRdx:f,isArray:w,isFunction:C,isNumber:E,toVector:function(F){return N.apply([],F)}},S._random_fn=u.random,S.setRandom=function(F){if(typeof F!="function")throw new TypeError("fn is not a function");S._random_fn=F},S.extend=function(F){var Y,rt;if(arguments.length===1){for(rt in F)S[rt]=F[rt];return this}for(Y=1;Y<arguments.length;Y++)for(rt in arguments[Y])F[rt]=arguments[Y][rt];return F},S.rows=function(F){return F.length||1},S.cols=function(F){return F[0].length||1},S.dimensions=function(F){return{rows:S.rows(F),cols:S.cols(F)}},S.row=function(F,Y){return w(Y)?Y.map(function(rt){return S.row(F,rt)}):F[Y]},S.rowa=function(F,Y){return S.row(F,Y)},S.col=function(F,Y){if(w(Y)){var rt=S.arange(F.length).map(function(){return new Array(Y.length)});return Y.forEach(function(Et,pt){S.arange(F.length).forEach(function(Pt){rt[Pt][pt]=F[Pt][Et]})}),rt}for(var tt=new Array(F.length),yt=0;yt<F.length;yt++)tt[yt]=[F[yt][Y]];return tt},S.cola=function(F,Y){return S.col(F,Y).map(function(rt){return rt[0]})},S.diag=function(F){for(var Y=S.rows(F),rt=new Array(Y),tt=0;tt<Y;tt++)rt[tt]=[F[tt][tt]];return rt},S.antidiag=function(F){for(var Y=S.rows(F)-1,rt=new Array(Y),tt=0;Y>=0;Y--,tt++)rt[tt]=[F[tt][Y]];return rt},S.transpose=function(F){var Y,rt,tt,yt,Et,pt=[];for(w(F[0])||(F=[F]),rt=F.length,tt=F[0].length,Et=0;Et<tt;Et++){for(Y=new Array(rt),yt=0;yt<rt;yt++)Y[yt]=F[yt][Et];pt.push(Y)}return pt.length===1?pt[0]:pt},S.map=function(F,Y,rt){var tt,yt,Et,pt,Pt;for(w(F[0])||(F=[F]),yt=F.length,Et=F[0].length,pt=rt?F:new Array(yt),tt=0;tt<yt;tt++)for(pt[tt]||(pt[tt]=new Array(Et)),Pt=0;Pt<Et;Pt++)pt[tt][Pt]=Y(F[tt][Pt],tt,Pt);return pt.length===1?pt[0]:pt},S.cumreduce=function(F,Y,rt){var tt,yt,Et,pt,Pt;for(w(F[0])||(F=[F]),yt=F.length,Et=F[0].length,pt=rt?F:new Array(yt),tt=0;tt<yt;tt++)for(pt[tt]||(pt[tt]=new Array(Et)),Et>0&&(pt[tt][0]=F[tt][0]),Pt=1;Pt<Et;Pt++)pt[tt][Pt]=Y(pt[tt][Pt-1],F[tt][Pt]);return pt.length===1?pt[0]:pt},S.alter=function(F,Y){return S.map(F,Y,!0)},S.create=function(F,Y,rt){var tt,yt,Et=new Array(F);for(C(Y)&&(rt=Y,Y=F),tt=0;tt<F;tt++)for(Et[tt]=new Array(Y),yt=0;yt<Y;yt++)Et[tt][yt]=rt(tt,yt);return Et},S.zeros=function(F,Y){return E(Y)||(Y=F),S.create(F,Y,k)},S.ones=function(F,Y){return E(Y)||(Y=F),S.create(F,Y,B)},S.rand=function(F,Y){return E(Y)||(Y=F),S.create(F,Y,S._random_fn)},S.identity=function(F,Y){return E(Y)||(Y=F),S.create(F,Y,q)},S.symmetric=function(F){var Y,rt,tt=F.length;if(F.length!==F[0].length)return!1;for(Y=0;Y<tt;Y++)for(rt=0;rt<tt;rt++)if(F[rt][Y]!==F[Y][rt])return!1;return!0},S.clear=function(F){return S.alter(F,k)},S.seq=function(F,Y,rt,tt){C(tt)||(tt=!1);var yt,Et=[],pt=f(F,Y),Pt=(Y*pt-F*pt)/((rt-1)*pt),Vt=F;for(yt=0;Vt<=Y&&yt<rt;Vt=(F*pt+Pt*pt*++yt)/pt)Et.push(tt?tt(Vt,yt):Vt);return Et},S.arange=function(F,Y,rt){var tt,yt=[];if(rt=rt||1,Y===g&&(Y=F,F=0),F===Y||rt===0)return[];if(F<Y&&rt<0)return[];if(F>Y&&rt>0)return[];if(rt>0)for(tt=F;tt<Y;tt+=rt)yt.push(tt);else for(tt=F;tt>Y;tt+=rt)yt.push(tt);return yt},S.slice=function(){function F(Y,rt,tt,yt){var Et,pt=[],Pt=Y.length;if(rt===g&&tt===g&&yt===g)return S.copy(Y);if(yt=yt||1,(rt=(rt=rt||0)>=0?rt:Pt+rt)===(tt=(tt=tt||Y.length)>=0?tt:Pt+tt)||yt===0)return[];if(rt<tt&&yt<0)return[];if(rt>tt&&yt>0)return[];if(yt>0)for(Et=rt;Et<tt;Et+=yt)pt.push(Y[Et]);else for(Et=rt;Et>tt;Et+=yt)pt.push(Y[Et]);return pt}return function(Y,rt){var tt,yt;return E((rt=rt||{}).row)?E(rt.col)?Y[rt.row][rt.col]:F(S.rowa(Y,rt.row),(tt=rt.col||{}).start,tt.end,tt.step):E(rt.col)?F(S.cola(Y,rt.col),(yt=rt.row||{}).start,yt.end,yt.step):(yt=rt.row||{},tt=rt.col||{},F(Y,yt.start,yt.end,yt.step).map(function(Et){return F(Et,tt.start,tt.end,tt.step)}))}}(),S.sliceAssign=function(F,Y,rt){var tt,yt;if(E(Y.row)){if(E(Y.col))return F[Y.row][Y.col]=rt;Y.col=Y.col||{},Y.col.start=Y.col.start||0,Y.col.end=Y.col.end||F[0].length,Y.col.step=Y.col.step||1,tt=S.arange(Y.col.start,u.min(F.length,Y.col.end),Y.col.step);var Et=Y.row;return tt.forEach(function(Pt,Vt){F[Et][Pt]=rt[Vt]}),F}if(E(Y.col)){Y.row=Y.row||{},Y.row.start=Y.row.start||0,Y.row.end=Y.row.end||F.length,Y.row.step=Y.row.step||1,yt=S.arange(Y.row.start,u.min(F[0].length,Y.row.end),Y.row.step);var pt=Y.col;return yt.forEach(function(Pt,Vt){F[Pt][pt]=rt[Vt]}),F}return rt[0].length===g&&(rt=[rt]),Y.row.start=Y.row.start||0,Y.row.end=Y.row.end||F.length,Y.row.step=Y.row.step||1,Y.col.start=Y.col.start||0,Y.col.end=Y.col.end||F[0].length,Y.col.step=Y.col.step||1,yt=S.arange(Y.row.start,u.min(F.length,Y.row.end),Y.row.step),tt=S.arange(Y.col.start,u.min(F[0].length,Y.col.end),Y.col.step),yt.forEach(function(Pt,Vt){tt.forEach(function(Ot,_t){F[Pt][Ot]=rt[Vt][_t]})}),F},S.diagonal=function(F){var Y=S.zeros(F.length,F.length);return F.forEach(function(rt,tt){Y[tt][tt]=rt}),Y},S.copy=function(F){return F.map(function(Y){return E(Y)?Y:Y.map(function(rt){return rt})})};var U=S.prototype;return U.length=0,U.push=Array.prototype.push,U.sort=Array.prototype.sort,U.splice=Array.prototype.splice,U.slice=Array.prototype.slice,U.toArray=function(){return this.length>1?P.call(this):P.call(this)[0]},U.map=function(F,Y){return S(S.map(this,F,Y))},U.cumreduce=function(F,Y){return S(S.cumreduce(this,F,Y))},U.alter=function(F){return S.alter(this,F),this},function(F){for(var Y=0;Y<F.length;Y++)(function(rt){U[rt]=function(tt){var yt,Et=this;return tt?(setTimeout(function(){tt.call(Et,U[rt].call(Et))}),this):(yt=S[rt](this),w(yt)?S(yt):yt)}})(F[Y])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(F){for(var Y=0;Y<F.length;Y++)(function(rt){U[rt]=function(tt,yt){var Et=this;return yt?(setTimeout(function(){yt.call(Et,U[rt].call(Et,tt))}),this):S(S[rt](this,tt))}})(F[Y])}("row col".split(" ")),function(F){for(var Y=0;Y<F.length;Y++)(function(rt){U[rt]=function(){return S(S[rt].apply(null,arguments))}})(F[Y])}("create zeros ones rand identity".split(" ")),S}(Math),function(u,g){var N=u.utils.isFunction;function P(w,C){return w-C}function _(w,C,E){return g.max(C,g.min(w,E))}u.sum=function(w){for(var C=0,E=w.length;--E>=0;)C+=w[E];return C},u.sumsqrd=function(w){for(var C=0,E=w.length;--E>=0;)C+=w[E]*w[E];return C},u.sumsqerr=function(w){for(var C,E=u.mean(w),S=0,k=w.length;--k>=0;)S+=(C=w[k]-E)*C;return S},u.sumrow=function(w){for(var C=0,E=w.length;--E>=0;)C+=w[E];return C},u.product=function(w){for(var C=1,E=w.length;--E>=0;)C*=w[E];return C},u.min=function(w){for(var C=w[0],E=0;++E<w.length;)w[E]<C&&(C=w[E]);return C},u.max=function(w){for(var C=w[0],E=0;++E<w.length;)w[E]>C&&(C=w[E]);return C},u.unique=function(w){for(var C={},E=[],S=0;S<w.length;S++)C[w[S]]||(C[w[S]]=!0,E.push(w[S]));return E},u.mean=function(w){return u.sum(w)/w.length},u.meansqerr=function(w){return u.sumsqerr(w)/w.length},u.geomean=function(w){var C=w.map(g.log),E=u.mean(C);return g.exp(E)},u.median=function(w){var C=w.length,E=w.slice().sort(P);return 1&C?E[C/2|0]:(E[C/2-1]+E[C/2])/2},u.cumsum=function(w){return u.cumreduce(w,function(C,E){return C+E})},u.cumprod=function(w){return u.cumreduce(w,function(C,E){return C*E})},u.diff=function(w){var C,E=[],S=w.length;for(C=1;C<S;C++)E.push(w[C]-w[C-1]);return E},u.rank=function(w){var C,E=[],S={};for(C=0;C<w.length;C++)S[U=w[C]]?S[U]++:(S[U]=1,E.push(U));var k=E.sort(P),B={},q=1;for(C=0;C<k.length;C++){var U,F=S[U=k[C]],Y=(q+(q+F-1))/2;B[U]=Y,q+=F}return w.map(function(rt){return B[rt]})},u.mode=function(w){var C,E=w.length,S=w.slice().sort(P),k=1,B=0,q=0,U=[];for(C=0;C<E;C++)S[C]===S[C+1]?k++:(k>B?(U=[S[C]],B=k,q=0):k===B&&(U.push(S[C]),q++),k=1);return q===0?U[0]:U},u.range=function(w){return u.max(w)-u.min(w)},u.variance=function(w,C){return u.sumsqerr(w)/(w.length-(C?1:0))},u.pooledvariance=function(w){return w.reduce(function(C,E){return C+u.sumsqerr(E)},0)/(w.reduce(function(C,E){return C+E.length},0)-w.length)},u.deviation=function(w){for(var C=u.mean(w),E=w.length,S=new Array(E),k=0;k<E;k++)S[k]=w[k]-C;return S},u.stdev=function(w,C){return g.sqrt(u.variance(w,C))},u.pooledstdev=function(w){return g.sqrt(u.pooledvariance(w))},u.meandev=function(w){for(var C=u.mean(w),E=[],S=w.length-1;S>=0;S--)E.push(g.abs(w[S]-C));return u.mean(E)},u.meddev=function(w){for(var C=u.median(w),E=[],S=w.length-1;S>=0;S--)E.push(g.abs(w[S]-C));return u.median(E)},u.coeffvar=function(w){return u.stdev(w)/u.mean(w)},u.quartiles=function(w){var C=w.length,E=w.slice().sort(P);return[E[g.round(C/4)-1],E[g.round(C/2)-1],E[g.round(3*C/4)-1]]},u.quantiles=function(w,C,E,S){var k,B,q,U,F,Y=w.slice().sort(P),rt=[C.length],tt=w.length;for(E===void 0&&(E=.375),S===void 0&&(S=.375),k=0;k<C.length;k++)q=tt*(B=C[k])+(E+B*(1-E-S)),U=g.floor(_(q,1,tt-1)),F=_(q-U,0,1),rt[k]=(1-F)*Y[U-1]+F*Y[U];return rt},u.percentile=function(w,C,E){var S=w.slice().sort(P),k=C*(S.length+(E?1:-1))+(E?0:1),B=parseInt(k),q=k-B;return B+1<S.length?S[B-1]+q*(S[B]-S[B-1]):S[B-1]},u.percentileOfScore=function(w,C,E){var S,k,B=0,q=w.length,U=!1;for(E==="strict"&&(U=!0),k=0;k<q;k++)S=w[k],(U&&S<C||!U&&S<=C)&&B++;return B/q},u.histogram=function(w,C){C=C||4;var E,S=u.min(w),k=(u.max(w)-S)/C,B=w.length,q=[];for(E=0;E<C;E++)q[E]=0;for(E=0;E<B;E++)q[g.min(g.floor((w[E]-S)/k),C-1)]+=1;return q},u.covariance=function(w,C){var E,S=u.mean(w),k=u.mean(C),B=w.length,q=new Array(B);for(E=0;E<B;E++)q[E]=(w[E]-S)*(C[E]-k);return u.sum(q)/(B-1)},u.corrcoeff=function(w,C){return u.covariance(w,C)/u.stdev(w,1)/u.stdev(C,1)},u.spearmancoeff=function(w,C){return w=u.rank(w),C=u.rank(C),u.corrcoeff(w,C)},u.stanMoment=function(w,C){for(var E=u.mean(w),S=u.stdev(w),k=w.length,B=0,q=0;q<k;q++)B+=g.pow((w[q]-E)/S,C);return B/w.length},u.skewness=function(w){return u.stanMoment(w,3)},u.kurtosis=function(w){return u.stanMoment(w,4)-3};var f=u.prototype;(function(w){for(var C=0;C<w.length;C++)(function(E){f[E]=function(S,k){var B=[],q=0,U=this;if(N(S)&&(k=S,S=!1),k)return setTimeout(function(){k.call(U,f[E].call(U,S))}),this;if(this.length>1){for(U=S===!0?this:this.transpose();q<U.length;q++)B[q]=u[E](U[q]);return B}return u[E](this[0],S)}})(w[C])})("cumsum cumprod".split(" ")),function(w){for(var C=0;C<w.length;C++)(function(E){f[E]=function(S,k){var B=[],q=0,U=this;if(N(S)&&(k=S,S=!1),k)return setTimeout(function(){k.call(U,f[E].call(U,S))}),this;if(this.length>1){for(E!=="sumrow"&&(U=S===!0?this:this.transpose());q<U.length;q++)B[q]=u[E](U[q]);return S===!0?u[E](u.utils.toVector(B)):B}return u[E](this[0],S)}})(w[C])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(w){for(var C=0;C<w.length;C++)(function(E){f[E]=function(){var S,k=[],B=0,q=this,U=Array.prototype.slice.call(arguments);if(N(U[U.length-1])){S=U[U.length-1];var F=U.slice(0,U.length-1);return setTimeout(function(){S.call(q,f[E].apply(q,F))}),this}S=void 0;var Y=function(rt){return u[E].apply(q,[rt].concat(U))};if(this.length>1){for(q=q.transpose();B<q.length;B++)k[B]=Y(q[B]);return k}return Y(this[0])}})(w[C])}("quantiles percentileOfScore".split(" "))}(h,Math),function(u,g){u.gammaln=function(N){var P,_,f,w=0,C=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],E=1.000000000190015;for(f=(_=P=N)+5.5,f-=(P+.5)*g.log(f);w<6;w++)E+=C[w]/++_;return g.log(2.5066282746310007*E/P)-f},u.loggam=function(N){var P,_,f,w,C,E,S,k=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(P=N,S=0,N==1||N==2)return 0;for(N<=7&&(P=N+(S=g.floor(7-N))),_=1/(P*P),f=2*g.PI,C=k[9],E=8;E>=0;E--)C*=_,C+=k[E];if(w=C/P+.5*g.log(f)+(P-.5)*g.log(P)-P,N<=7)for(E=1;E<=S;E++)w-=g.log(P-1),P-=1;return w},u.gammafn=function(N){var P,_,f,w,C=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],E=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],S=!1,k=0,B=0,q=0,U=N;if(N>171.6243769536076)return 1/0;if(U<=0){if(!(w=U%1+36e-17))return 1/0;S=(1&U?-1:1)*g.PI/g.sin(g.PI*w),U=1-U}for(f=U,_=U<1?U++:(U-=k=(0|U)-1)-1,P=0;P<8;++P)q=(q+C[P])*_,B=B*_+E[P];if(w=q/B+1,f<U)w/=f;else if(f>U)for(P=0;P<k;++P)w*=U,U++;return S&&(w=S/w),w},u.gammap=function(N,P){return u.lowRegGamma(N,P)*u.gammafn(N)},u.lowRegGamma=function(N,P){var _,f=u.gammaln(N),w=N,C=1/N,E=C,S=P+1-N,k=1/1e-30,B=1/S,q=B,U=1,F=-~(8.5*g.log(N>=1?N:1/N)+.4*N+17);if(P<0||N<=0)return NaN;if(P<N+1){for(;U<=F;U++)C+=E*=P/++w;return C*g.exp(-P+N*g.log(P)-f)}for(;U<=F;U++)q*=(B=1/(B=(_=-U*(U-N))*B+(S+=2)))*(k=S+_/k);return 1-q*g.exp(-P+N*g.log(P)-f)},u.factorialln=function(N){return N<0?NaN:u.gammaln(N+1)},u.factorial=function(N){return N<0?NaN:u.gammafn(N+1)},u.combination=function(N,P){return N>170||P>170?g.exp(u.combinationln(N,P)):u.factorial(N)/u.factorial(P)/u.factorial(N-P)},u.combinationln=function(N,P){return u.factorialln(N)-u.factorialln(P)-u.factorialln(N-P)},u.permutation=function(N,P){return u.factorial(N)/u.factorial(N-P)},u.betafn=function(N,P){if(!(N<=0||P<=0))return N+P>170?g.exp(u.betaln(N,P)):u.gammafn(N)*u.gammafn(P)/u.gammafn(N+P)},u.betaln=function(N,P){return u.gammaln(N)+u.gammaln(P)-u.gammaln(N+P)},u.betacf=function(N,P,_){var f,w,C,E,S=1e-30,k=1,B=P+_,q=P+1,U=P-1,F=1,Y=1-B*N/q;for(g.abs(Y)<S&&(Y=S),E=Y=1/Y;k<=100&&(Y=1+(w=k*(_-k)*N/((U+(f=2*k))*(P+f)))*Y,g.abs(Y)<S&&(Y=S),F=1+w/F,g.abs(F)<S&&(F=S),E*=(Y=1/Y)*F,Y=1+(w=-(P+k)*(B+k)*N/((P+f)*(q+f)))*Y,g.abs(Y)<S&&(Y=S),F=1+w/F,g.abs(F)<S&&(F=S),E*=C=(Y=1/Y)*F,!(g.abs(C-1)<3e-7));k++);return E},u.gammapinv=function(N,P){var _,f,w,C,E,S,k=0,B=P-1,q=u.gammaln(P);if(N>=1)return g.max(100,P+100*g.sqrt(P));if(N<=0)return 0;for(P>1?(E=g.log(B),S=g.exp(B*(E-1)-q),C=N<.5?N:1-N,_=(2.30753+.27061*(f=g.sqrt(-2*g.log(C))))/(1+f*(.99229+.04481*f))-f,N<.5&&(_=-_),_=g.max(.001,P*g.pow(1-1/(9*P)-_/(3*g.sqrt(P)),3))):_=N<(f=1-P*(.253+.12*P))?g.pow(N/f,1/P):1-g.log(1-(N-f)/(1-f));k<12;k++){if(_<=0)return 0;if((_-=f=(w=(u.lowRegGamma(P,_)-N)/(f=P>1?S*g.exp(-(_-B)+B*(g.log(_)-E)):g.exp(-_+B*g.log(_)-q)))/(1-.5*g.min(1,w*((P-1)/_-1))))<=0&&(_=.5*(_+f)),g.abs(f)<1e-8*_)break}return _},u.erf=function(N){var P,_,f,w,C=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],E=C.length-1,S=!1,k=0,B=0;for(N<0&&(N=-N,S=!0),_=4*(P=2/(2+N))-2;E>0;E--)f=k,k=_*k-B+C[E],B=f;return w=P*g.exp(-N*N+.5*(C[0]+_*k)-B),S?w-1:1-w},u.erfc=function(N){return 1-u.erf(N)},u.erfcinv=function(N){var P,_,f,w,C=0;if(N>=2)return-100;if(N<=0)return 100;for(w=N<1?N:2-N,P=-.70711*((2.30753+.27061*(f=g.sqrt(-2*g.log(w/2))))/(1+f*(.99229+.04481*f))-f);C<2;C++)P+=(_=u.erfc(P)-w)/(1.1283791670955126*g.exp(-P*P)-P*_);return N<1?P:-P},u.ibetainv=function(N,P,_){var f,w,C,E,S,k,B,q,U,F,Y=P-1,rt=_-1,tt=0;if(N<=0)return 0;if(N>=1)return 1;for(P>=1&&_>=1?(C=N<.5?N:1-N,k=(2.30753+.27061*(E=g.sqrt(-2*g.log(C))))/(1+E*(.99229+.04481*E))-E,N<.5&&(k=-k),B=(k*k-3)/6,q=2/(1/(2*P-1)+1/(2*_-1)),U=k*g.sqrt(B+q)/q-(1/(2*_-1)-1/(2*P-1))*(B+.8333333333333334-2/(3*q)),k=P/(P+_*g.exp(2*U))):(f=g.log(P/(P+_)),w=g.log(_/(P+_)),k=N<(E=g.exp(P*f)/P)/(U=E+(S=g.exp(_*w)/_))?g.pow(P*U*N,1/P):1-g.pow(_*U*(1-N),1/_)),F=-u.gammaln(P)-u.gammaln(_)+u.gammaln(P+_);tt<10;tt++){if(k===0||k===1)return k;if((k-=E=(S=(u.ibeta(k,P,_)-N)/(E=g.exp(Y*g.log(k)+rt*g.log(1-k)+F)))/(1-.5*g.min(1,S*(Y/k-rt/(1-k)))))<=0&&(k=.5*(k+E)),k>=1&&(k=.5*(k+E+1)),g.abs(E)<1e-8*k&&tt>0)break}return k},u.ibeta=function(N,P,_){var f=N===0||N===1?0:g.exp(u.gammaln(P+_)-u.gammaln(P)-u.gammaln(_)+P*g.log(N)+_*g.log(1-N));return!(N<0||N>1)&&(N<(P+1)/(P+_+2)?f*u.betacf(N,P,_)/P:1-f*u.betacf(1-N,_,P)/_)},u.randn=function(N,P){var _,f,w,C,E;if(P||(P=N),N)return u.create(N,P,function(){return u.randn()});do _=u._random_fn(),f=1.7156*(u._random_fn()-.5),E=(w=_-.449871)*w+(C=g.abs(f)+.386595)*(.196*C-.25472*w);while(E>.27597&&(E>.27846||f*f>-4*g.log(_)*_*_));return f/_},u.randg=function(N,P,_){var f,w,C,E,S,k,B=N;if(_||(_=P),N||(N=1),P)return(k=u.zeros(P,_)).alter(function(){return u.randg(N)}),k;N<1&&(N+=1),f=N-.3333333333333333,w=1/g.sqrt(9*f);do{do E=1+w*(S=u.randn());while(E<=0);E*=E*E,C=u._random_fn()}while(C>1-.331*g.pow(S,4)&&g.log(C)>.5*S*S+f*(1-E+g.log(E)));if(N==B)return f*E;do C=u._random_fn();while(C===0);return g.pow(C,1/B)*f*E},function(N){for(var P=0;P<N.length;P++)(function(_){u.fn[_]=function(){return u(u.map(this,function(f){return u[_](f)}))}})(N[P])}("gammaln gammafn factorial factorialln".split(" ")),function(N){for(var P=0;P<N.length;P++)(function(_){u.fn[_]=function(){return u(u[_].apply(null,arguments))}})(N[P])}("randn".split(" "))}(h,Math),function(u,g){function N(_,f,w,C){for(var E,S=0,k=1,B=1,q=1,U=0,F=0;g.abs((B-F)/B)>C;)F=B,k=q+(E=-(f+U)*(f+w+U)*_/(f+2*U)/(f+2*U+1))*k,B=(S=B+E*S)+(E=(U+=1)*(w-U)*_/(f+2*U-1)/(f+2*U))*B,S/=q=k+E*q,k/=q,B/=q,q=1;return B/f}function P(_,f,w){var C=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],E=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],S=.5*_;if(S>=8)return 1;var k,B=2*u.normal.cdf(S,0,1,1,0)-1;B=B>=g.exp(-50/w)?g.pow(B,w):0;for(var q=S,U=(8-S)/(k=_>3?2:3),F=q+U,Y=0,rt=w-1,tt=1;tt<=k;tt++){for(var yt=0,Et=.5*(F+q),pt=.5*(F-q),Pt=1;Pt<=12;Pt++){var Vt,Ot=Et+pt*(6<Pt?C[(Vt=12-Pt+1)-1]:-C[(Vt=Pt)-1]),_t=Ot*Ot;if(_t>60)break;var Xt=2*u.normal.cdf(Ot,0,1,1,0)*.5-2*u.normal.cdf(Ot,_,1,1,0)*.5;Xt>=g.exp(-30/rt)&&(yt+=Xt=E[Vt-1]*g.exp(-.5*_t)*g.pow(Xt,rt))}Y+=yt*=2*pt*w/g.sqrt(2*g.PI),q=F,F+=U}return(B+=Y)<=g.exp(-30/f)?0:(B=g.pow(B,f))>=1?1:B}(function(_){for(var f=0;f<_.length;f++)(function(w){u[w]=function C(E,S,k){return this instanceof C?(this._a=E,this._b=S,this._c=k,this):new C(E,S,k)},u.fn[w]=function(C,E,S){var k=u[w](C,E,S);return k.data=this,k},u[w].prototype.sample=function(C){var E=this._a,S=this._b,k=this._c;return C?u.alter(C,function(){return u[w].sample(E,S,k)}):u[w].sample(E,S,k)},function(C){for(var E=0;E<C.length;E++)(function(S){u[w].prototype[S]=function(k){var B=this._a,q=this._b,U=this._c;return k||k===0||(k=this.data),typeof k!="number"?u.fn.map.call(k,function(F){return u[w][S](F,B,q,U)}):u[w][S](k,B,q,U)}})(C[E])}("pdf cdf inv".split(" ")),function(C){for(var E=0;E<C.length;E++)(function(S){u[w].prototype[S]=function(){return u[w][S](this._a,this._b,this._c)}})(C[E])}("mean median mode variance".split(" "))})(_[f])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),u.extend(u.beta,{pdf:function(_,f,w){return _>1||_<0?0:f==1&&w==1?1:f<512&&w<512?g.pow(_,f-1)*g.pow(1-_,w-1)/u.betafn(f,w):g.exp((f-1)*g.log(_)+(w-1)*g.log(1-_)-u.betaln(f,w))},cdf:function(_,f,w){return _>1||_<0?1*(_>1):u.ibeta(_,f,w)},inv:function(_,f,w){return u.ibetainv(_,f,w)},mean:function(_,f){return _/(_+f)},median:function(_,f){return u.ibetainv(.5,_,f)},mode:function(_,f){return(_-1)/(_+f-2)},sample:function(_,f){var w=u.randg(_);return w/(w+u.randg(f))},variance:function(_,f){return _*f/(g.pow(_+f,2)*(_+f+1))}}),u.extend(u.centralF,{pdf:function(_,f,w){var C;return _<0?0:f<=2?_===0&&f<2?1/0:_===0&&f===2?1:1/u.betafn(f/2,w/2)*g.pow(f/w,f/2)*g.pow(_,f/2-1)*g.pow(1+f/w*_,-(f+w)/2):(C=f*_/(w+_*f),f*(w/(w+_*f))/2*u.binomial.pdf((f-2)/2,(f+w-2)/2,C))},cdf:function(_,f,w){return _<0?0:u.ibeta(f*_/(f*_+w),f/2,w/2)},inv:function(_,f,w){return w/(f*(1/u.ibetainv(_,f/2,w/2)-1))},mean:function(_,f){return f>2?f/(f-2):void 0},mode:function(_,f){return _>2?f*(_-2)/(_*(f+2)):void 0},sample:function(_,f){return 2*u.randg(_/2)/_/(2*u.randg(f/2)/f)},variance:function(_,f){if(!(f<=4))return 2*f*f*(_+f-2)/(_*(f-2)*(f-2)*(f-4))}}),u.extend(u.cauchy,{pdf:function(_,f,w){return w<0?0:w/(g.pow(_-f,2)+g.pow(w,2))/g.PI},cdf:function(_,f,w){return g.atan((_-f)/w)/g.PI+.5},inv:function(_,f,w){return f+w*g.tan(g.PI*(_-.5))},median:function(_){return _},mode:function(_){return _},sample:function(_,f){return u.randn()*g.sqrt(1/(2*u.randg(.5)))*f+_}}),u.extend(u.chisquare,{pdf:function(_,f){return _<0?0:_===0&&f===2?.5:g.exp((f/2-1)*g.log(_)-_/2-f/2*g.log(2)-u.gammaln(f/2))},cdf:function(_,f){return _<0?0:u.lowRegGamma(f/2,_/2)},inv:function(_,f){return 2*u.gammapinv(_,.5*f)},mean:function(_){return _},median:function(_){return _*g.pow(1-2/(9*_),3)},mode:function(_){return _-2>0?_-2:0},sample:function(_){return 2*u.randg(_/2)},variance:function(_){return 2*_}}),u.extend(u.exponential,{pdf:function(_,f){return _<0?0:f*g.exp(-f*_)},cdf:function(_,f){return _<0?0:1-g.exp(-f*_)},inv:function(_,f){return-g.log(1-_)/f},mean:function(_){return 1/_},median:function(_){return 1/_*g.log(2)},mode:function(){return 0},sample:function(_){return-1/_*g.log(u._random_fn())},variance:function(_){return g.pow(_,-2)}}),u.extend(u.gamma,{pdf:function(_,f,w){return _<0?0:_===0&&f===1?1/w:g.exp((f-1)*g.log(_)-_/w-u.gammaln(f)-f*g.log(w))},cdf:function(_,f,w){return _<0?0:u.lowRegGamma(f,_/w)},inv:function(_,f,w){return u.gammapinv(_,f)*w},mean:function(_,f){return _*f},mode:function(_,f){if(_>1)return(_-1)*f},sample:function(_,f){return u.randg(_)*f},variance:function(_,f){return _*f*f}}),u.extend(u.invgamma,{pdf:function(_,f,w){return _<=0?0:g.exp(-(f+1)*g.log(_)-w/_-u.gammaln(f)+f*g.log(w))},cdf:function(_,f,w){return _<=0?0:1-u.lowRegGamma(f,w/_)},inv:function(_,f,w){return w/u.gammapinv(1-_,f)},mean:function(_,f){return _>1?f/(_-1):void 0},mode:function(_,f){return f/(_+1)},sample:function(_,f){return f/u.randg(_)},variance:function(_,f){if(!(_<=2))return f*f/((_-1)*(_-1)*(_-2))}}),u.extend(u.kumaraswamy,{pdf:function(_,f,w){return _===0&&f===1?w:_===1&&w===1?f:g.exp(g.log(f)+g.log(w)+(f-1)*g.log(_)+(w-1)*g.log(1-g.pow(_,f)))},cdf:function(_,f,w){return _<0?0:_>1?1:1-g.pow(1-g.pow(_,f),w)},inv:function(_,f,w){return g.pow(1-g.pow(1-_,1/w),1/f)},mean:function(_,f){return f*u.gammafn(1+1/_)*u.gammafn(f)/u.gammafn(1+1/_+f)},median:function(_,f){return g.pow(1-g.pow(2,-1/f),1/_)},mode:function(_,f){if(_>=1&&f>=1&&_!==1&&f!==1)return g.pow((_-1)/(_*f-1),1/_)},variance:function(){throw new Error("variance not yet implemented")}}),u.extend(u.lognormal,{pdf:function(_,f,w){return _<=0?0:g.exp(-g.log(_)-.5*g.log(2*g.PI)-g.log(w)-g.pow(g.log(_)-f,2)/(2*w*w))},cdf:function(_,f,w){return _<0?0:.5+.5*u.erf((g.log(_)-f)/g.sqrt(2*w*w))},inv:function(_,f,w){return g.exp(-1.4142135623730951*w*u.erfcinv(2*_)+f)},mean:function(_,f){return g.exp(_+f*f/2)},median:function(_){return g.exp(_)},mode:function(_,f){return g.exp(_-f*f)},sample:function(_,f){return g.exp(u.randn()*f+_)},variance:function(_,f){return(g.exp(f*f)-1)*g.exp(2*_+f*f)}}),u.extend(u.noncentralt,{pdf:function(_,f,w){return g.abs(w)<1e-14?u.studentt.pdf(_,f):g.abs(_)<1e-14?g.exp(u.gammaln((f+1)/2)-w*w/2-.5*g.log(g.PI*f)-u.gammaln(f/2)):f/_*(u.noncentralt.cdf(_*g.sqrt(1+2/f),f+2,w)-u.noncentralt.cdf(_,f,w))},cdf:function(_,f,w){var C=1e-14;if(g.abs(w)<C)return u.studentt.cdf(_,f);var E=!1;_<0&&(E=!0,w=-w);for(var S=u.normal.cdf(-w,0,1),k=C+1,B=k,q=_*_/(_*_+f),U=0,F=g.exp(-w*w/2),Y=g.exp(-w*w/2-.5*g.log(2)-u.gammaln(1.5))*w;U<200||B>C||k>C;)B=k,U>0&&(F*=w*w/(2*U),Y*=w*w/(2*(U+.5))),S+=.5*(k=F*u.beta.cdf(q,U+.5,f/2)+Y*u.beta.cdf(q,U+1,f/2)),U++;return E?1-S:S}}),u.extend(u.normal,{pdf:function(_,f,w){return g.exp(-.5*g.log(2*g.PI)-g.log(w)-g.pow(_-f,2)/(2*w*w))},cdf:function(_,f,w){return .5*(1+u.erf((_-f)/g.sqrt(2*w*w)))},inv:function(_,f,w){return-1.4142135623730951*w*u.erfcinv(2*_)+f},mean:function(_){return _},median:function(_){return _},mode:function(_){return _},sample:function(_,f){return u.randn()*f+_},variance:function(_,f){return f*f}}),u.extend(u.pareto,{pdf:function(_,f,w){return _<f?0:w*g.pow(f,w)/g.pow(_,w+1)},cdf:function(_,f,w){return _<f?0:1-g.pow(f/_,w)},inv:function(_,f,w){return f/g.pow(1-_,1/w)},mean:function(_,f){if(!(f<=1))return f*g.pow(_,f)/(f-1)},median:function(_,f){return _*(f*g.SQRT2)},mode:function(_){return _},variance:function(_,f){if(!(f<=2))return _*_*f/(g.pow(f-1,2)*(f-2))}}),u.extend(u.studentt,{pdf:function(_,f){return f=f>1e100?1e100:f,1/(g.sqrt(f)*u.betafn(.5,f/2))*g.pow(1+_*_/f,-(f+1)/2)},cdf:function(_,f){var w=f/2;return u.ibeta((_+g.sqrt(_*_+f))/(2*g.sqrt(_*_+f)),w,w)},inv:function(_,f){var w=u.ibetainv(2*g.min(_,1-_),.5*f,.5);return w=g.sqrt(f*(1-w)/w),_>.5?w:-w},mean:function(_){return _>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(_){return u.randn()*g.sqrt(_/(2*u.randg(_/2)))},variance:function(_){return _>2?_/(_-2):_>1?1/0:void 0}}),u.extend(u.weibull,{pdf:function(_,f,w){return _<0||f<0||w<0?0:w/f*g.pow(_/f,w-1)*g.exp(-g.pow(_/f,w))},cdf:function(_,f,w){return _<0?0:1-g.exp(-g.pow(_/f,w))},inv:function(_,f,w){return f*g.pow(-g.log(1-_),1/w)},mean:function(_,f){return _*u.gammafn(1+1/f)},median:function(_,f){return _*g.pow(g.log(2),1/f)},mode:function(_,f){return f<=1?0:_*g.pow((f-1)/f,1/f)},sample:function(_,f){return _*g.pow(-g.log(u._random_fn()),1/f)},variance:function(_,f){return _*_*u.gammafn(1+2/f)-g.pow(u.weibull.mean(_,f),2)}}),u.extend(u.uniform,{pdf:function(_,f,w){return _<f||_>w?0:1/(w-f)},cdf:function(_,f,w){return _<f?0:_<w?(_-f)/(w-f):1},inv:function(_,f,w){return f+_*(w-f)},mean:function(_,f){return .5*(_+f)},median:function(_,f){return u.mean(_,f)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(_,f){return _/2+f/2+(f/2-_/2)*(2*u._random_fn()-1)},variance:function(_,f){return g.pow(f-_,2)/12}}),u.extend(u.binomial,{pdf:function(_,f,w){return w===0||w===1?f*w===_?1:0:u.combination(f,_)*g.pow(w,_)*g.pow(1-w,f-_)},cdf:function(_,f,w){var C,E=1e-10;if(_<0)return 0;if(_>=f)return 1;if(w<0||w>1||f<=0)return NaN;var S=w,k=(_=g.floor(_))+1,B=f-_,q=k+B,U=g.exp(u.gammaln(q)-u.gammaln(B)-u.gammaln(k)+k*g.log(S)+B*g.log(1-S));return C=S<(k+1)/(q+2)?U*N(S,k,B,E):1-U*N(1-S,B,k,E),g.round(1/E*(1-C))/(1/E)}}),u.extend(u.negbin,{pdf:function(_,f,w){return _===_>>>0&&(_<0?0:u.combination(_+f-1,f-1)*g.pow(1-w,_)*g.pow(w,f))},cdf:function(_,f,w){var C=0,E=0;if(_<0)return 0;for(;E<=_;E++)C+=u.negbin.pdf(E,f,w);return C}}),u.extend(u.hypgeom,{pdf:function(_,f,w,C){if(_!=_|0)return!1;if(_<0||_<w-(f-C)||_>C||_>w)return 0;if(2*w>f)return 2*C>f?u.hypgeom.pdf(f-w-C+_,f,f-w,f-C):u.hypgeom.pdf(C-_,f,f-w,C);if(2*C>f)return u.hypgeom.pdf(w-_,f,w,f-C);if(w<C)return u.hypgeom.pdf(_,f,C,w);for(var E=1,S=0,k=0;k<_;k++){for(;E>1&&S<C;)E*=1-w/(f-S),S++;E*=(C-k)*(w-k)/((k+1)*(f-w-C+k+1))}for(;S<C;S++)E*=1-w/(f-S);return g.min(1,g.max(0,E))},cdf:function(_,f,w,C){if(_<0||_<w-(f-C))return 0;if(_>=C||_>=w)return 1;if(2*w>f)return 2*C>f?u.hypgeom.cdf(f-w-C+_,f,f-w,f-C):1-u.hypgeom.cdf(C-_-1,f,f-w,C);if(2*C>f)return 1-u.hypgeom.cdf(w-_-1,f,w,f-C);if(w<C)return u.hypgeom.cdf(_,f,C,w);for(var E=1,S=1,k=0,B=0;B<_;B++){for(;E>1&&k<C;){var q=1-w/(f-k);S*=q,E*=q,k++}E+=S*=(C-B)*(w-B)/((B+1)*(f-w-C+B+1))}for(;k<C;k++)E*=1-w/(f-k);return g.min(1,g.max(0,E))}}),u.extend(u.poisson,{pdf:function(_,f){return f<0||_%1!=0||_<0?0:g.pow(f,_)*g.exp(-f)/u.factorial(_)},cdf:function(_,f){var w=[],C=0;if(_<0)return 0;for(;C<=_;C++)w.push(u.poisson.pdf(C,f));return u.sum(w)},mean:function(_){return _},variance:function(_){return _},sampleSmall:function(_){var f=1,w=0,C=g.exp(-_);do w++,f*=u._random_fn();while(f>C);return w-1},sampleLarge:function(_){var f,w,C,E,S,k,B,q,U,F,Y=_;for(E=g.sqrt(Y),S=g.log(Y),k=.02483*(B=.931+2.53*E)-.059,q=1.1239+1.1328/(B-3.4),U=.9277-3.6224/(B-2);;)if(w=g.random()-.5,C=g.random(),F=.5-g.abs(w),f=g.floor((2*k/F+B)*w+Y+.43),F>=.07&&C<=U||!(f<0||F<.013&&C>F)&&g.log(C)+g.log(q)-g.log(k/(F*F)+B)<=f*S-Y-u.loggam(f+1))return f},sample:function(_){return _<10?this.sampleSmall(_):this.sampleLarge(_)}}),u.extend(u.triangular,{pdf:function(_,f,w,C){return w<=f||C<f||C>w?NaN:_<f||_>w?0:_<C?2*(_-f)/((w-f)*(C-f)):_===C?2/(w-f):2*(w-_)/((w-f)*(w-C))},cdf:function(_,f,w,C){return w<=f||C<f||C>w?NaN:_<=f?0:_>=w?1:_<=C?g.pow(_-f,2)/((w-f)*(C-f)):1-g.pow(w-_,2)/((w-f)*(w-C))},inv:function(_,f,w,C){return w<=f||C<f||C>w?NaN:_<=(C-f)/(w-f)?f+(w-f)*g.sqrt(_*((C-f)/(w-f))):f+(w-f)*(1-g.sqrt((1-_)*(1-(C-f)/(w-f))))},mean:function(_,f,w){return(_+f+w)/3},median:function(_,f,w){return w<=(_+f)/2?f-g.sqrt((f-_)*(f-w))/g.sqrt(2):w>(_+f)/2?_+g.sqrt((f-_)*(w-_))/g.sqrt(2):void 0},mode:function(_,f,w){return w},sample:function(_,f,w){var C=u._random_fn();return C<(w-_)/(f-_)?_+g.sqrt(C*(f-_)*(w-_)):f-g.sqrt((1-C)*(f-_)*(f-w))},variance:function(_,f,w){return(_*_+f*f+w*w-_*f-_*w-f*w)/18}}),u.extend(u.arcsine,{pdf:function(_,f,w){return w<=f?NaN:_<=f||_>=w?0:2/g.PI*g.pow(g.pow(w-f,2)-g.pow(2*_-f-w,2),-.5)},cdf:function(_,f,w){return _<f?0:_<w?2/g.PI*g.asin(g.sqrt((_-f)/(w-f))):1},inv:function(_,f,w){return f+(.5-.5*g.cos(g.PI*_))*(w-f)},mean:function(_,f){return f<=_?NaN:(_+f)/2},median:function(_,f){return f<=_?NaN:(_+f)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(_,f){return(_+f)/2+(f-_)/2*g.sin(2*g.PI*u.uniform.sample(0,1))},variance:function(_,f){return f<=_?NaN:g.pow(f-_,2)/8}}),u.extend(u.laplace,{pdf:function(_,f,w){return w<=0?0:g.exp(-g.abs(_-f)/w)/(2*w)},cdf:function(_,f,w){return w<=0?0:_<f?.5*g.exp((_-f)/w):1-.5*g.exp(-(_-f)/w)},mean:function(_){return _},median:function(_){return _},mode:function(_){return _},variance:function(_,f){return 2*f*f},sample:function(_,f){var w,C=u._random_fn()-.5;return _-f*((w=C)/g.abs(w))*g.log(1-2*g.abs(C))}}),u.extend(u.tukey,{cdf:function(_,f,w){var C=f,E=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],S=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(_<=0)return 0;if(w<2||C<2)return NaN;if(!Number.isFinite(_))return 1;if(w>25e3)return P(_,1,C);var k,B=.5*w,q=B*g.log(w)-w*g.log(2)-u.gammaln(B),U=B-1,F=.25*w;k=w<=100?1:w<=800?.5:w<=5e3?.25:.125,q+=g.log(k);for(var Y=0,rt=1;rt<=50;rt++){for(var tt=0,yt=(2*rt-1)*k,Et=1;Et<=16;Et++){var pt,Pt;8<Et?(pt=Et-8-1,Pt=q+U*g.log(yt+E[pt]*k)-(E[pt]*k+yt)*F):(pt=Et-1,Pt=q+U*g.log(yt-E[pt]*k)+(E[pt]*k-yt)*F),Pt>=-30&&(tt+=P(8<Et?_*g.sqrt(.5*(E[pt]*k+yt)):_*g.sqrt(.5*(-E[pt]*k+yt)),1,C)*S[pt]*g.exp(Pt))}if(rt*k>=1&&tt<=1e-14)break;Y+=tt}if(tt>1e-14)throw new Error("tukey.cdf failed to converge");return Y>1&&(Y=1),Y},inv:function(_,f,w){if(w<2||f<2)return NaN;if(_<0||_>1)return NaN;if(_===0)return 0;if(_===1)return 1/0;var C,E=function(U,F,Y){var rt=.5-.5*U,tt=g.sqrt(g.log(1/(rt*rt))),yt=tt+((((-453642210148e-16*tt-.204231210125)*tt-.342242088547)*tt-1)*tt+.322232421088)/((((.0038560700634*tt+.10353775285)*tt+.531103462366)*tt+.588581570495)*tt+.099348462606);Y<120&&(yt+=(yt*yt*yt+yt)/Y/4);var Et=.8832-.2368*yt;return Y<120&&(Et+=-1.214/Y+1.208*yt/Y),yt*(Et*g.log(F-1)+1.4142)}(_,f,w),S=u.tukey.cdf(E,f,w)-_;C=S>0?g.max(0,E-1):E+1;for(var k,B=u.tukey.cdf(C,f,w)-_,q=1;q<50;q++)if(k=C-B*(C-E)/(B-S),S=B,E=C,k<0&&(k=0,B=-_),B=u.tukey.cdf(k,f,w)-_,C=k,g.abs(C-E)<1e-4)return k;throw new Error("tukey.inv failed to converge")}})}(h,Math),function(u,g){var N,P,_=Array.prototype.push,f=u.utils.isArray;function w(C){return f(C)||C instanceof u}u.extend({add:function(C,E){return w(E)?(w(E[0])||(E=[E]),u.map(C,function(S,k,B){return S+E[k][B]})):u.map(C,function(S){return S+E})},subtract:function(C,E){return w(E)?(w(E[0])||(E=[E]),u.map(C,function(S,k,B){return S-E[k][B]||0})):u.map(C,function(S){return S-E})},divide:function(C,E){return w(E)?(w(E[0])||(E=[E]),u.multiply(C,u.inv(E))):u.map(C,function(S){return S/E})},multiply:function(C,E){var S,k,B,q,U,F,Y,rt;if(C.length===void 0&&E.length===void 0)return C*E;if(U=C.length,F=C[0].length,Y=u.zeros(U,B=w(E)?E[0].length:F),rt=0,w(E)){for(;rt<B;rt++)for(S=0;S<U;S++){for(q=0,k=0;k<F;k++)q+=C[S][k]*E[k][rt];Y[S][rt]=q}return U===1&&rt===1?Y[0][0]:Y}return u.map(C,function(tt){return tt*E})},outer:function(C,E){return u.multiply(C.map(function(S){return[S]}),[E])},dot:function(C,E){w(C[0])||(C=[C]),w(E[0])||(E=[E]);for(var S,k,B=C[0].length===1&&C.length!==1?u.transpose(C):C,q=E[0].length===1&&E.length!==1?u.transpose(E):E,U=[],F=0,Y=B.length,rt=B[0].length;F<Y;F++){for(U[F]=[],S=0,k=0;k<rt;k++)S+=B[F][k]*q[F][k];U[F]=S}return U.length===1?U[0]:U},pow:function(C,E){return u.map(C,function(S){return g.pow(S,E)})},exp:function(C){return u.map(C,function(E){return g.exp(E)})},log:function(C){return u.map(C,function(E){return g.log(E)})},abs:function(C){return u.map(C,function(E){return g.abs(E)})},norm:function(C,E){var S=0,k=0;for(isNaN(E)&&(E=2),w(C[0])&&(C=C[0]);k<C.length;k++)S+=g.pow(g.abs(C[k]),E);return g.pow(S,1/E)},angle:function(C,E){return g.acos(u.dot(C,E)/(u.norm(C)*u.norm(E)))},aug:function(C,E){var S,k=[];for(S=0;S<C.length;S++)k.push(C[S].slice());for(S=0;S<k.length;S++)_.apply(k[S],E[S]);return k},inv:function(C){for(var E,S=C.length,k=C[0].length,B=u.identity(S,k),q=u.gauss_jordan(C,B),U=[],F=0;F<S;F++)for(U[F]=[],E=k;E<q[0].length;E++)U[F][E-k]=q[F][E];return U},det:function C(E){if(E.length===2)return E[0][0]*E[1][1]-E[0][1]*E[1][0];for(var S=0,k=0;k<E.length;k++){for(var B=[],q=1;q<E.length;q++){B[q-1]=[];for(var U=0;U<E.length;U++)U<k?B[q-1][U]=E[q][U]:U>k&&(B[q-1][U-1]=E[q][U])}var F=k%2?-1:1;S+=C(B)*E[0][k]*F}return S},gauss_elimination:function(C,E){var S,k,B,q,U=0,F=0,Y=C.length,rt=C[0].length,tt=1,yt=0,Et=[];for(S=(C=u.aug(C,E))[0].length,U=0;U<Y;U++){for(k=C[U][U],F=U,q=U+1;q<rt;q++)k<g.abs(C[q][U])&&(k=C[q][U],F=q);if(F!=U)for(q=0;q<S;q++)B=C[U][q],C[U][q]=C[F][q],C[F][q]=B;for(F=U+1;F<Y;F++)for(tt=C[F][U]/C[U][U],q=U;q<S;q++)C[F][q]=C[F][q]-tt*C[U][q]}for(U=Y-1;U>=0;U--){for(yt=0,F=U+1;F<=Y-1;F++)yt+=Et[F]*C[U][F];Et[U]=(C[U][S-1]-yt)/C[U][U]}return Et},gauss_jordan:function(C,E){var S,k,B,q=u.aug(C,E),U=q.length,F=q[0].length,Y=0;for(k=0;k<U;k++){var rt=k;for(B=k+1;B<U;B++)g.abs(q[B][k])>g.abs(q[rt][k])&&(rt=B);var tt=q[k];for(q[k]=q[rt],q[rt]=tt,B=k+1;B<U;B++)for(Y=q[B][k]/q[k][k],S=k;S<F;S++)q[B][S]-=q[k][S]*Y}for(k=U-1;k>=0;k--){for(Y=q[k][k],B=0;B<k;B++)for(S=F-1;S>k-1;S--)q[B][S]-=q[k][S]*q[B][k]/Y;for(q[k][k]/=Y,S=U;S<F;S++)q[k][S]/=Y}return q},triaUpSolve:function(C,E){var S,k=C[0].length,B=u.zeros(1,k)[0],q=!1;return E[0].length!=null&&(E=E.map(function(U){return U[0]}),q=!0),u.arange(k-1,-1,-1).forEach(function(U){S=u.arange(U+1,k).map(function(F){return B[F]*C[U][F]}),B[U]=(E[U]-u.sum(S))/C[U][U]}),q?B.map(function(U){return[U]}):B},triaLowSolve:function(C,E){var S,k=C[0].length,B=u.zeros(1,k)[0],q=!1;return E[0].length!=null&&(E=E.map(function(U){return U[0]}),q=!0),u.arange(k).forEach(function(U){S=u.arange(U).map(function(F){return C[U][F]*B[F]}),B[U]=(E[U]-u.sum(S))/C[U][U]}),q?B.map(function(U){return[U]}):B},lu:function(C){var E,S=C.length,k=u.identity(S),B=u.zeros(C.length,C[0].length);return u.arange(S).forEach(function(q){B[0][q]=C[0][q]}),u.arange(1,S).forEach(function(q){u.arange(q).forEach(function(U){E=u.arange(U).map(function(F){return k[q][F]*B[F][U]}),k[q][U]=(C[q][U]-u.sum(E))/B[U][U]}),u.arange(q,S).forEach(function(U){E=u.arange(q).map(function(F){return k[q][F]*B[F][U]}),B[q][U]=C[E.length][U]-u.sum(E)})}),[k,B]},cholesky:function(C){var E,S=C.length,k=u.zeros(C.length,C[0].length);return u.arange(S).forEach(function(B){E=u.arange(B).map(function(q){return g.pow(k[B][q],2)}),k[B][B]=g.sqrt(C[B][B]-u.sum(E)),u.arange(B+1,S).forEach(function(q){E=u.arange(B).map(function(U){return k[B][U]*k[q][U]}),k[q][B]=(C[B][q]-u.sum(E))/k[B][B]})}),k},gauss_jacobi:function(C,E,S,k){for(var B,q,U,F,Y=0,rt=0,tt=C.length,yt=[],Et=[],pt=[];Y<tt;Y++)for(yt[Y]=[],Et[Y]=[],pt[Y]=[],rt=0;rt<tt;rt++)Y>rt?(yt[Y][rt]=C[Y][rt],Et[Y][rt]=pt[Y][rt]=0):Y<rt?(Et[Y][rt]=C[Y][rt],yt[Y][rt]=pt[Y][rt]=0):(pt[Y][rt]=C[Y][rt],yt[Y][rt]=Et[Y][rt]=0);for(U=u.multiply(u.multiply(u.inv(pt),u.add(yt,Et)),-1),q=u.multiply(u.inv(pt),E),B=S,F=u.add(u.multiply(U,S),q),Y=2;g.abs(u.norm(u.subtract(F,B)))>k;)B=F,F=u.add(u.multiply(U,B),q),Y++;return F},gauss_seidel:function(C,E,S,k){for(var B,q,U,F,Y,rt=0,tt=C.length,yt=[],Et=[],pt=[];rt<tt;rt++)for(yt[rt]=[],Et[rt]=[],pt[rt]=[],B=0;B<tt;B++)rt>B?(yt[rt][B]=C[rt][B],Et[rt][B]=pt[rt][B]=0):rt<B?(Et[rt][B]=C[rt][B],yt[rt][B]=pt[rt][B]=0):(pt[rt][B]=C[rt][B],yt[rt][B]=Et[rt][B]=0);for(F=u.multiply(u.multiply(u.inv(u.add(pt,yt)),Et),-1),U=u.multiply(u.inv(u.add(pt,yt)),E),q=S,Y=u.add(u.multiply(F,S),U),rt=2;g.abs(u.norm(u.subtract(Y,q)))>k;)q=Y,Y=u.add(u.multiply(F,q),U),rt+=1;return Y},SOR:function(C,E,S,k,B){for(var q,U,F,Y,rt,tt=0,yt=C.length,Et=[],pt=[],Pt=[];tt<yt;tt++)for(Et[tt]=[],pt[tt]=[],Pt[tt]=[],q=0;q<yt;q++)tt>q?(Et[tt][q]=C[tt][q],pt[tt][q]=Pt[tt][q]=0):tt<q?(pt[tt][q]=C[tt][q],Et[tt][q]=Pt[tt][q]=0):(Pt[tt][q]=C[tt][q],Et[tt][q]=pt[tt][q]=0);for(Y=u.multiply(u.inv(u.add(Pt,u.multiply(Et,B))),u.subtract(u.multiply(Pt,1-B),u.multiply(pt,B))),F=u.multiply(u.multiply(u.inv(u.add(Pt,u.multiply(Et,B))),E),B),U=S,rt=u.add(u.multiply(Y,S),F),tt=2;g.abs(u.norm(u.subtract(rt,U)))>k;)U=rt,rt=u.add(u.multiply(Y,U),F),tt++;return rt},householder:function(C){for(var E,S,k,B,q=C.length,U=C[0].length,F=0,Y=[],rt=[];F<q-1;F++){for(E=0,B=F+1;B<U;B++)E+=C[B][F]*C[B][F];for(E=(C[F+1][F]>0?-1:1)*g.sqrt(E),S=g.sqrt((E*E-C[F+1][F]*E)/2),(Y=u.zeros(q,1))[F+1][0]=(C[F+1][F]-E)/(2*S),k=F+2;k<q;k++)Y[k][0]=C[k][F]/(2*S);rt=u.subtract(u.identity(q,U),u.multiply(u.multiply(Y,u.transpose(Y)),2)),C=u.multiply(rt,u.multiply(C,rt))}return C},QR:(N=u.sum,P=u.arange,function(C){var E,S,k,B=C.length,q=C[0].length,U=u.zeros(q,q);for(C=u.copy(C),S=0;S<q;S++){for(U[S][S]=g.sqrt(N(P(B).map(function(F){return C[F][S]*C[F][S]}))),E=0;E<B;E++)C[E][S]=C[E][S]/U[S][S];for(k=S+1;k<q;k++)for(U[S][k]=N(P(B).map(function(F){return C[F][S]*C[F][k]})),E=0;E<B;E++)C[E][k]=C[E][k]-C[E][S]*U[S][k]}return[C,U]}),lstsq:function(C,E){var S=!1;E[0].length===void 0&&(E=E.map(function(yt){return[yt]}),S=!0);var k=u.QR(C),B=k[0],q=k[1],U=C[0].length,F=u.slice(B,{col:{end:U}}),Y=function(yt){var Et=(yt=u.copy(yt)).length,pt=u.identity(Et);return u.arange(Et-1,-1,-1).forEach(function(Pt){u.sliceAssign(pt,{row:Pt},u.divide(u.slice(pt,{row:Pt}),yt[Pt][Pt])),u.sliceAssign(yt,{row:Pt},u.divide(u.slice(yt,{row:Pt}),yt[Pt][Pt])),u.arange(Pt).forEach(function(Vt){var Ot=u.multiply(yt[Vt][Pt],-1),_t=u.slice(yt,{row:Vt}),Xt=u.multiply(u.slice(yt,{row:Pt}),Ot);u.sliceAssign(yt,{row:Vt},u.add(_t,Xt));var qt=u.slice(pt,{row:Vt}),oe=u.multiply(u.slice(pt,{row:Pt}),Ot);u.sliceAssign(pt,{row:Vt},u.add(qt,oe))})}),pt}(u.slice(q,{row:{end:U}})),rt=u.transpose(F);rt[0].length===void 0&&(rt=[rt]);var tt=u.multiply(u.multiply(Y,rt),E);return tt.length===void 0&&(tt=[[tt]]),S?tt.map(function(yt){return yt[0]}):tt},jacobi:function(C){for(var E,S,k,B,q,U,F,Y=1,rt=C.length,tt=u.identity(rt,rt),yt=[];Y===1;){for(q=C[0][1],k=0,B=1,E=0;E<rt;E++)for(S=0;S<rt;S++)E!=S&&q<g.abs(C[E][S])&&(q=g.abs(C[E][S]),k=E,B=S);for(U=C[k][k]===C[B][B]?C[k][B]>0?g.PI/4:-g.PI/4:g.atan(2*C[k][B]/(C[k][k]-C[B][B]))/2,(F=u.identity(rt,rt))[k][k]=g.cos(U),F[k][B]=-g.sin(U),F[B][k]=g.sin(U),F[B][B]=g.cos(U),tt=u.multiply(tt,F),C=u.multiply(u.multiply(u.inv(F),C),F),Y=0,E=1;E<rt;E++)for(S=1;S<rt;S++)E!=S&&g.abs(C[E][S])>.001&&(Y=1)}for(E=0;E<rt;E++)yt.push(C[E][E]);return[tt,yt]},rungekutta:function(C,E,S,k,B,q){var U,F,Y;if(q===2)for(;k<=S;)B+=((U=E*C(k,B))+(F=E*C(k+E,B+U)))/2,k+=E;if(q===4)for(;k<=S;)B+=((U=E*C(k,B))+2*(F=E*C(k+E/2,B+U/2))+2*(Y=E*C(k+E/2,B+F/2))+E*C(k+E,B+Y))/6,k+=E;return B},romberg:function(C,E,S,k){for(var B,q,U,F,Y,rt=0,tt=(S-E)/2,yt=[],Et=[],pt=[];rt<k/2;){for(Y=C(E),U=E,F=0;U<=S;U+=tt,F++)yt[F]=U;for(B=yt.length,U=1;U<B-1;U++)Y+=(U%2!=0?4:2)*C(yt[U]);Y=tt/3*(Y+C(S)),pt[rt]=Y,tt/=2,rt++}for(q=pt.length,B=1;q!==1;){for(U=0;U<q-1;U++)Et[U]=(g.pow(4,B)*pt[U+1]-pt[U])/(g.pow(4,B)-1);q=Et.length,pt=Et,Et=[],B++}return pt},richardson:function(C,E,S,k){function B(Pt,Vt){for(var Ot,_t=0,Xt=Pt.length;_t<Xt;_t++)Pt[_t]===Vt&&(Ot=_t);return Ot}for(var q,U,F,Y,rt,tt=g.abs(S-C[B(C,S)+1]),yt=0,Et=[],pt=[];k>=tt;)q=B(C,S+k),U=B(C,S),Et[yt]=(E[q]-2*E[U]+E[2*U-q])/(k*k),k/=2,yt++;for(Y=Et.length,F=1;Y!=1;){for(rt=0;rt<Y-1;rt++)pt[rt]=(g.pow(4,F)*Et[rt+1]-Et[rt])/(g.pow(4,F)-1);Y=pt.length,Et=pt,pt=[],F++}return Et},simpson:function(C,E,S,k){for(var B,q=(S-E)/k,U=C(E),F=[],Y=E,rt=0,tt=1;Y<=S;Y+=q,rt++)F[rt]=Y;for(B=F.length;tt<B-1;tt++)U+=(tt%2!=0?4:2)*C(F[tt]);return q/3*(U+C(S))},hermite:function(C,E,S,k){for(var B,q=C.length,U=0,F=0,Y=[],rt=[],tt=[],yt=[];F<q;F++){for(Y[F]=1,B=0;B<q;B++)F!=B&&(Y[F]*=(k-C[B])/(C[F]-C[B]));for(rt[F]=0,B=0;B<q;B++)F!=B&&(rt[F]+=1/(C[F]-C[B]));tt[F]=(1-2*(k-C[F])*rt[F])*(Y[F]*Y[F]),yt[F]=(k-C[F])*(Y[F]*Y[F]),U+=tt[F]*E[F]+yt[F]*S[F]}return U},lagrange:function(C,E,S){for(var k,B,q=0,U=0,F=C.length;U<F;U++){for(B=E[U],k=0;k<F;k++)U!=k&&(B*=(S-C[k])/(C[U]-C[k]));q+=B}return q},cubic_spline:function(C,E,S){for(var k,B,q=C.length,U=0,F=[],Y=[],rt=[],tt=[],yt=[],Et=[];U<q-1;U++)tt[U]=C[U+1]-C[U];for(rt[0]=0,U=1;U<q-1;U++)rt[U]=3/tt[U]*(E[U+1]-E[U])-3/tt[U-1]*(E[U]-E[U-1]);for(U=1;U<q-1;U++)F[U]=[],Y[U]=[],F[U][U-1]=tt[U-1],F[U][U]=2*(tt[U-1]+tt[U]),F[U][U+1]=tt[U],Y[U][0]=rt[U];for(B=u.multiply(u.inv(F),Y),k=0;k<q-1;k++)yt[k]=(E[k+1]-E[k])/tt[k]-tt[k]*(B[k+1][0]+2*B[k][0])/3,Et[k]=(B[k+1][0]-B[k][0])/(3*tt[k]);for(k=0;k<q&&!(C[k]>S);k++);return E[k-=1]+(S-C[k])*yt[k]+u.sq(S-C[k])*B[k]+(S-C[k])*u.sq(S-C[k])*Et[k]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(C){var E,S,k,B,q,U=C.length,F=C[0].length,Y=0,rt=[],tt=[],yt=[],Et=[],pt=[],Pt=[],Vt=[];for(Y=0;Y<U;Y++)rt[Y]=u.sum(C[Y])/F;for(Y=0;Y<F;Y++)for(pt[Y]=[],E=0;E<U;E++)pt[Y][E]=C[E][Y]-rt[E];for(pt=u.transpose(pt),Y=0;Y<U;Y++)for(Pt[Y]=[],E=0;E<U;E++)Pt[Y][E]=u.dot([pt[Y]],[pt[E]])/(F-1);for(q=(k=u.jacobi(Pt))[0],tt=k[1],Vt=u.transpose(q),Y=0;Y<tt.length;Y++)for(E=Y;E<tt.length;E++)tt[Y]<tt[E]&&(S=tt[Y],tt[Y]=tt[E],tt[E]=S,yt=Vt[Y],Vt[Y]=Vt[E],Vt[E]=yt);for(B=u.transpose(pt),Y=0;Y<U;Y++)for(Et[Y]=[],E=0;E<B.length;E++)Et[Y][E]=u.dot([Vt[Y]],[B[E]]);return[C,tt,Vt,Et]}}),function(C){for(var E=0;E<C.length;E++)(function(S){u.fn[S]=function(k,B){var q=this;return B?(setTimeout(function(){B.call(q,u.fn[S].call(q,k))},15),this):typeof u[S](this,k)=="number"?u[S](this,k):u(u[S](this,k))}})(C[E])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(h,Math),function(u,g){var N=[].slice,P=u.utils.isNumber,_=u.utils.isArray;function f(w,C,E,S){if(w>1||E>1||w<=0||E<=0)throw new Error("Proportions should be greater than 0 and less than 1");var k=(w*C+E*S)/(C+S);return(w-E)/g.sqrt(k*(1-k)*(1/C+1/S))}u.extend({zscore:function(){var w=N.call(arguments);return P(w[1])?(w[0]-w[1])/w[2]:(w[0]-u.mean(w[1]))/u.stdev(w[1],w[2])},ztest:function(){var w,C=N.call(arguments);return _(C[1])?(w=u.zscore(C[0],C[1],C[3]),C[2]===1?u.normal.cdf(-g.abs(w),0,1):2*u.normal.cdf(-g.abs(w),0,1)):C.length>2?(w=u.zscore(C[0],C[1],C[2]),C[3]===1?u.normal.cdf(-g.abs(w),0,1):2*u.normal.cdf(-g.abs(w),0,1)):(w=C[0],C[1]===1?u.normal.cdf(-g.abs(w),0,1):2*u.normal.cdf(-g.abs(w),0,1))}}),u.extend(u.fn,{zscore:function(w,C){return(w-this.mean())/this.stdev(C)},ztest:function(w,C,E){var S=g.abs(this.zscore(w,E));return C===1?u.normal.cdf(-S,0,1):2*u.normal.cdf(-S,0,1)}}),u.extend({tscore:function(){var w=N.call(arguments);return w.length===4?(w[0]-w[1])/(w[2]/g.sqrt(w[3])):(w[0]-u.mean(w[1]))/(u.stdev(w[1],!0)/g.sqrt(w[1].length))},ttest:function(){var w,C=N.call(arguments);return C.length===5?(w=g.abs(u.tscore(C[0],C[1],C[2],C[3])),C[4]===1?u.studentt.cdf(-w,C[3]-1):2*u.studentt.cdf(-w,C[3]-1)):P(C[1])?(w=g.abs(C[0]),C[2]==1?u.studentt.cdf(-w,C[1]-1):2*u.studentt.cdf(-w,C[1]-1)):(w=g.abs(u.tscore(C[0],C[1])),C[2]==1?u.studentt.cdf(-w,C[1].length-1):2*u.studentt.cdf(-w,C[1].length-1))}}),u.extend(u.fn,{tscore:function(w){return(w-this.mean())/(this.stdev(!0)/g.sqrt(this.cols()))},ttest:function(w,C){return C===1?1-u.studentt.cdf(g.abs(this.tscore(w)),this.cols()-1):2*u.studentt.cdf(-g.abs(this.tscore(w)),this.cols()-1)}}),u.extend({anovafscore:function(){var w,C,E,S,k,B,q,U,F=N.call(arguments);if(F.length===1){for(k=new Array(F[0].length),q=0;q<F[0].length;q++)k[q]=F[0][q];F=k}for(C=new Array,q=0;q<F.length;q++)C=C.concat(F[q]);for(E=u.mean(C),w=0,q=0;q<F.length;q++)w+=F[q].length*g.pow(u.mean(F[q])-E,2);for(w/=F.length-1,B=0,q=0;q<F.length;q++)for(S=u.mean(F[q]),U=0;U<F[q].length;U++)B+=g.pow(F[q][U]-S,2);return w/(B/(C.length-F.length))},anovaftest:function(){var w,C,E,S,k=N.call(arguments);if(P(k[0]))return 1-u.centralF.cdf(k[0],k[1],k[2]);var B=u.anovafscore(k);for(w=k.length-1,E=0,S=0;S<k.length;S++)E+=k[S].length;return C=E-w-1,1-u.centralF.cdf(B,w,C)},ftest:function(w,C,E){return 1-u.centralF.cdf(w,C,E)}}),u.extend(u.fn,{anovafscore:function(){return u.anovafscore(this.toArray())},anovaftes:function(){var w,C=0;for(w=0;w<this.length;w++)C+=this[w].length;return u.ftest(this.anovafscore(),this.length-1,C-this.length)}}),u.extend({qscore:function(){var w,C,E,S,k,B=N.call(arguments);return P(B[0])?(w=B[0],C=B[1],E=B[2],S=B[3],k=B[4]):(w=u.mean(B[0]),C=u.mean(B[1]),E=B[0].length,S=B[1].length,k=B[2]),g.abs(w-C)/(k*g.sqrt((1/E+1/S)/2))},qtest:function(){var w,C=N.call(arguments);C.length===3?(w=C[0],C=C.slice(1)):C.length===7?(w=u.qscore(C[0],C[1],C[2],C[3],C[4]),C=C.slice(5)):(w=u.qscore(C[0],C[1],C[2]),C=C.slice(3));var E=C[0],S=C[1];return 1-u.tukey.cdf(w,S,E-S)},tukeyhsd:function(w){for(var C=u.pooledstdev(w),E=w.map(function(F){return u.mean(F)}),S=w.reduce(function(F,Y){return F+Y.length},0),k=[],B=0;B<w.length;++B)for(var q=B+1;q<w.length;++q){var U=u.qtest(E[B],E[q],w[B].length,w[q].length,C,S,w.length);k.push([[B,q],U])}return k}}),u.extend({normalci:function(){var w,C=N.call(arguments),E=new Array(2);return w=C.length===4?g.abs(u.normal.inv(C[1]/2,0,1)*C[2]/g.sqrt(C[3])):g.abs(u.normal.inv(C[1]/2,0,1)*u.stdev(C[2])/g.sqrt(C[2].length)),E[0]=C[0]-w,E[1]=C[0]+w,E},tci:function(){var w,C=N.call(arguments),E=new Array(2);return w=C.length===4?g.abs(u.studentt.inv(C[1]/2,C[3]-1)*C[2]/g.sqrt(C[3])):g.abs(u.studentt.inv(C[1]/2,C[2].length-1)*u.stdev(C[2],!0)/g.sqrt(C[2].length)),E[0]=C[0]-w,E[1]=C[0]+w,E},significant:function(w,C){return w<C}}),u.extend(u.fn,{normalci:function(w,C){return u.normalci(w,C,this.toArray())},tci:function(w,C){return u.tci(w,C,this.toArray())}}),u.extend(u.fn,{oneSidedDifferenceOfProportions:function(w,C,E,S){var k=f(w,C,E,S);return u.ztest(k,1)},twoSidedDifferenceOfProportions:function(w,C,E,S){var k=f(w,C,E,S);return u.ztest(k,2)}})}(h,Math),h.models=function(){function u(g,N){var P=g.length,_=N[0].length-1,f=P-_-1,w=h.lstsq(N,g),C=h.multiply(N,w.map(function(U){return[U]})).map(function(U){return U[0]}),E=h.subtract(g,C),S=h.mean(g),k=h.sum(C.map(function(U){return Math.pow(U-S,2)})),B=h.sum(g.map(function(U,F){return Math.pow(U-C[F],2)})),q=k+B;return{exog:N,endog:g,nobs:P,df_model:_,df_resid:f,coef:w,predict:C,resid:E,ybar:S,SST:q,SSE:k,SSR:B,R2:k/q}}return{ols:function(g,N){var P=u(g,N),_=function(C){var E,S,k=(E=C.exog,S=E[0].length,h.arange(S).map(function(tt){var yt=h.arange(S).filter(function(Et){return Et!==tt});return u(h.col(E,tt).map(function(Et){return Et[0]}),h.col(E,yt))})),B=Math.sqrt(C.SSR/C.df_resid),q=k.map(function(tt){var yt=tt.SST,Et=tt.R2;return B/Math.sqrt(yt*(1-Et))}),U=C.coef.map(function(tt,yt){return(tt-0)/q[yt]}),F=U.map(function(tt){var yt=h.studentt.cdf(tt,C.df_resid);return 2*(yt>.5?1-yt:yt)}),Y=h.studentt.inv(.975,C.df_resid),rt=C.coef.map(function(tt,yt){var Et=Y*q[yt];return[tt-Et,tt+Et]});return{se:q,t:U,p:F,sigmaHat:B,interval95:rt}}(P),f=function(C){var E,S,k,B=C.R2/C.df_model/((1-C.R2)/C.df_resid);return{F_statistic:B,pvalue:1-(E=B,S=C.df_model,k=C.df_resid,h.beta.cdf(E/(k/S+E),S/2,k/2))}}(P),w=1-(1-P.R2)*((P.nobs-1)/P.df_resid);return P.t=_,P.f=f,P.adjust_R2=w,P}}}(),h.extend({buildxmatrix:function(){for(var u=new Array(arguments.length),g=0;g<arguments.length;g++)u[g]=[1].concat(arguments[g]);return h(u)},builddxmatrix:function(){for(var u=new Array(arguments[0].length),g=0;g<arguments[0].length;g++)u[g]=[1].concat(arguments[0][g]);return h(u)},buildjxmatrix:function(u){for(var g=new Array(u.length),N=0;N<u.length;N++)g[N]=u[N];return h.builddxmatrix(g)},buildymatrix:function(u){return h(u).transpose()},buildjymatrix:function(u){return u.transpose()},matrixmult:function(u,g){var N,P,_,f,w;if(u.cols()==g.rows()){if(g.rows()>1){for(f=[],N=0;N<u.rows();N++)for(f[N]=[],P=0;P<g.cols();P++){for(w=0,_=0;_<u.cols();_++)w+=u.toArray()[N][_]*g.toArray()[_][P];f[N][P]=w}return h(f)}for(f=[],N=0;N<u.rows();N++)for(f[N]=[],P=0;P<g.cols();P++){for(w=0,_=0;_<u.cols();_++)w+=u.toArray()[N][_]*g.toArray()[P];f[N][P]=w}return h(f)}},regress:function(u,g){var N=h.xtranspxinv(u),P=u.transpose(),_=h.matrixmult(h(N),P);return h.matrixmult(_,g)},regresst:function(u,g,N){var P=h.regress(u,g),_={anova:{}},f=h.jMatYBar(u,P);_.yBar=f;var w=g.mean();_.anova.residuals=h.residuals(g,f),_.anova.ssr=h.ssr(f,w),_.anova.msr=_.anova.ssr/(u[0].length-1),_.anova.sse=h.sse(g,f),_.anova.mse=_.anova.sse/(g.length-(u[0].length-1)-1),_.anova.sst=h.sst(g,w),_.anova.mst=_.anova.sst/(g.length-1),_.anova.r2=1-_.anova.sse/_.anova.sst,_.anova.r2<0&&(_.anova.r2=0),_.anova.fratio=_.anova.msr/_.anova.mse,_.anova.pvalue=h.anovaftest(_.anova.fratio,u[0].length-1,g.length-(u[0].length-1)-1),_.anova.rmse=Math.sqrt(_.anova.mse),_.anova.r2adj=1-_.anova.mse/_.anova.mst,_.anova.r2adj<0&&(_.anova.r2adj=0),_.stats=new Array(u[0].length);for(var C,E,S,k=h.xtranspxinv(u),B=0;B<P.length;B++)C=Math.sqrt(_.anova.mse*Math.abs(k[B][B])),E=Math.abs(P[B]/C),S=h.ttest(E,g.length-u[0].length-1,N),_.stats[B]=[P[B],C,E,S];return _.regress=P,_},xtranspx:function(u){return h.matrixmult(u.transpose(),u)},xtranspxinv:function(u){var g=h.matrixmult(u.transpose(),u);return h.inv(g)},jMatYBar:function(u,g){var N=h.matrixmult(u,g);return new h(N)},residuals:function(u,g){return h.matrixsubtract(u,g)},ssr:function(u,g){for(var N=0,P=0;P<u.length;P++)N+=Math.pow(u[P]-g,2);return N},sse:function(u,g){for(var N=0,P=0;P<u.length;P++)N+=Math.pow(u[P]-g[P],2);return N},sst:function(u,g){for(var N=0,P=0;P<u.length;P++)N+=Math.pow(u[P]-g,2);return N},matrixsubtract:function(u,g){for(var N=new Array(u.length),P=0;P<u.length;P++){N[P]=new Array(u[P].length);for(var _=0;_<u[P].length;_++)N[P][_]=u[P][_]-g[P][_]}return h(N)}}),h.jStat=h,h)},960:function(j,h,u){const g=u(592);j.exports=function(N){function P(B,q){const U=q.split(".");let F=B;for(const Y of U){if(F==null)return;F=F[Y]}return F}for(let B=0;B<Object.keys(g).length;B++){let q,U=Object.keys(g)[B],F=[];if(typeof g[U]=="object"){F=Object.keys(g[U]),q=Object.values(g[U]);for(let Y=0;Y<q.length;Y++)if(typeof q[Y]=="object"){let rt=F[Y];g[U][rt]&&(F=[...F,...Object.keys(g[U][rt]).map(tt=>rt+"."+tt)],F.splice(F.indexOf(rt),1))}}if(F.length<1)N[U]=g[U];else for(let Y=0;Y<F.length;Y++)typeof P(g[U],F[Y])=="function"&&(N[U]=P(g[U],F[Y]))}let _=function(B){return typeof B=="number"&&(B=parseInt(B)),B},f=null,w=null,C=null;N.TABLE=function(){return C},N.COLUMN=N.COL=function(){return C.tracking&&C.tracking.push(k.getColumnNameFromCoords(_(f),_(w))),_(f)+1},N.ROW=function(){return C.tracking&&C.tracking.push(k.getColumnNameFromCoords(_(f),_(w))),_(w)+1},N.CELL=function(){return k.getColumnNameFromCoords(f,w)},N.VALUE=function(B,q,U){return C.getValueFromCoords(_(B)-1,_(q)-1,U)},N.THISROWCELL=function(B){return C.getValueFromCoords(_(B)-1,_(w))};const E=function(B,q){for(let U=0;U<B.length;U++){let F=k.getTokensFromRange(B[U]);q=q.replace(B[U],"["+F.join(",")+"]")}return q},S=function(B){return typeof B=="string"&&(B=B.trim()),!isNaN(B)&&B!==null&&B!==""},k=function(B,q,U,F,Y){C=Y,f=U,w=F;let rt="",tt={};if(q)if(q.size){let pt,Pt=null;q.forEach(function(Vt,Ot){pt=Ot.replace(/!/g,"."),pt.indexOf(".")!==-1&&(pt=pt.split("."),tt[pt[0]]=!0)}),pt=Object.keys(tt);for(let Vt=0;Vt<pt.length;Vt++)rt+="var "+pt[Vt]+" = {};";q.forEach(function(Vt,Ot){pt=Ot.replace(/!/g,"."),Vt===null||S(Vt)||(Pt=Vt.match(/(('.*?'!)|(\w*!))?(\$?[A-Z]+\$?[0-9]*):(\$?[A-Z]+\$?[0-9]*)?/g),Pt&&Pt.length&&(Vt=updateRanges(Pt,Vt))),pt.indexOf(".")>0?rt+=pt+" = "+q.get(Ot)+`;
`:rt+="var "+pt+" = "+Vt+`;
`})}else{let pt=Object.keys(q);if(pt.length){let Pt,Vt={};for(let Ot=0;Ot<pt.length;Ot++)if(Pt=pt[Ot].replace(/\!/g,"."),Pt.indexOf(".")>0){let _t=_t.split(".");Vt[_t[0]]={}}Pt=Object.keys(Vt);for(let Ot=0;Ot<Pt.length;Ot++)rt+="var "+Pt[Ot]+" = {};";for(let Ot=0;Ot<pt.length;Ot++){if(Pt=pt[Ot].replace(/!/g,"."),q[pt[Ot]]!==null&&!S(q[pt[Ot]])){let _t=q[pt[Ot]].match(/(('.*?'!)|(\w*!))?(\$?[A-Z]+\$?[0-9]*):(\$?[A-Z]+\$?[0-9]*)?/g);_t&&_t.length&&(q[pt[Ot]]=E(_t,q[pt[Ot]]))}Pt.indexOf(".")>0?rt+=Pt+" = "+q[pt[Ot]]+`;
`:rt+="var "+Pt+" = "+q[pt[Ot]]+`;
`}}}let yt=(B=function(pt,Pt){let Vt="",Ot=0,_t=["=","!",">","<"];for(let Xt=0;Xt<pt.length;Xt++)pt[Xt]==='"'&&(Ot=Ot===0?1:0),Ot===1?Vt+=pt[Xt]:(Vt+=pt[Xt].toUpperCase(),Xt>0&&pt[Xt]==="="&&_t.indexOf(pt[Xt-1])===-1&&_t.indexOf(pt[Xt+1])===-1&&(Vt+="="));return Vt=Vt.replace(/\^/g,"**"),Vt=Vt.replace(/<>/g,"!="),Vt=Vt.replace(/&/g,"+"),Vt=Vt.replace(/\$/g,""),Vt}(B=(B=B.replace(/\$/g,"")).replace(/!/g,"."))).match(/(('.*?'!)|(\w*!))?(\$?[A-Z]+\$?[0-9]*):(\$?[A-Z]+\$?[0-9]*)?/g);yt&&yt.length&&(B=E(yt,B));let Et=new Function(rt+"; return "+B)();return Et===null&&(Et=0),Et};return k.getColumnNameFromCoords=function(B,q){return F="",(U=parseInt(B))>701?(F+=String.fromCharCode(64+parseInt(U/676)),F+=String.fromCharCode(64+parseInt(U%676/26))):U>25&&(F+=String.fromCharCode(64+parseInt(U/26))),F+String.fromCharCode(65+U%26)+(parseInt(q)+1);var U,F},k.getCoordsFromColumnName=function(B){var q=/^[a-zA-Z]+/.exec(B);if(q){for(var U=0,F=0;F<q[0].length;F++)U+=parseInt(q[0].charCodeAt(F)-64)*Math.pow(26,q[0].length-1-F);--U<0&&(U=0);var Y=parseInt(/[0-9]+$/.exec(B))||null;return Y>0&&Y--,[U,Y]}},k.getRangeFromTokens=function(B){B=B.filter(function(Y){return Y!="#REF!"});for(var q="",U="",F=0;F<B.length;F++)B[F].indexOf(".")>=0?q=".":B[F].indexOf("!")>=0&&(q="!"),q&&(U=B[F].split(q),B[F]=U[1],U=U[0]+q);return B.sort(function(Y,rt){var tt=Helpers.getCoordsFromColumnName(Y),yt=Helpers.getCoordsFromColumnName(rt);return tt[1]>yt[1]?1:tt[1]<yt[1]?-1:tt[0]>yt[0]?1:tt[0]<yt[0]?-1:0}),B.length?U+(B[0]+":")+B[B.length-1]:"#REF!"},k.getTokensFromRange=function(B){if(B.indexOf(".")>0){var q=B.split(".");B=q[1],q=q[0]+"."}else B.indexOf("!")>0?(q=B.split("!"),B=q[1],q=q[0]+"!"):q="";B=B.split(":");var U=k.getCoordsFromColumnName(B[0]),F=k.getCoordsFromColumnName(B[1]);if(U[0]<=F[0])var Y=U[0],rt=F[0];else Y=F[0],rt=U[0];if(U[1]===null&&F[1]==null)for(var tt=null,yt=null,Et=Object.keys(vars),pt=0;pt<Et.length;pt++){var Pt=k.getCoordsFromColumnName(Et[pt]);Pt[0]===U[0]&&(tt===null||Pt[1]<tt)&&(tt=Pt[1]),Pt[0]===F[0]&&(yt===null||Pt[1]>yt)&&(yt=Pt[1])}else U[1]<=F[1]?(tt=U[1],yt=F[1]):(tt=F[1],yt=U[1]);for(var Vt=[],Ot=tt;Ot<=yt;Ot++){var _t=[];for(pt=Y;pt<=rt;pt++)_t.push(q+k.getColumnNameFromCoords(pt,Ot));Vt.push(_t)}return Vt},k.setFormula=function(B){let q=Object.keys(B);for(let U=0;U<q.length;U++)typeof B[q[U]]=="function"&&(N[q[U]]=B[q[U]])},k.basic=!0,k}(typeof window>"u"?u.g:window)},592:function(j,h,u){var g=u(162),N=u(765);const P=new Error("#NULL!"),_=new Error("#DIV/0!"),f=new Error("#VALUE!"),w=new Error("#REF!"),C=new Error("#NAME?"),E=new Error("#NUM!"),S=new Error("#N/A"),k=new Error("#ERROR!"),B=new Error("#GETTING_DATA");var q=Object.freeze({__proto__:null,data:B,div0:_,error:k,na:S,name:C,nil:P,num:E,ref:w,value:f});function U(o){const a=[];return F(o,v=>{a.push(v)}),a}function F(o,a){let v=-1;const M=o.length;for(;++v<M&&a(o[v],v,o)!==!1;);return o}function Y(o){let a,v=o.length;for(;v--;)if(a=o[v],typeof a!="number")if(a!==!0)if(a!==!1){if(typeof a=="string"){const M=et(a);o[v]=M instanceof Error?0:M}}else o[v]=0;else o[v]=1;return o}function rt(o,a){if(!o)return f;o.every(z=>Array.isArray(z))&&o.length!==0||(o=[[...o]]),o.map((z,J)=>{z.map((ot,gt)=>{ot||(o[J][gt]=0)})});const v=o.reduce((z,J,ot)=>J.length>o[z].length?ot:z,0),M=o[v].length;return o.map(z=>[...z,...Array(M-z.length).fill(a||0)])}function tt(){let o;if(arguments.length===1){const v=arguments[0];o=(a=v)!=null&&typeof a.length=="number"&&typeof a!="string"?U.apply(null,arguments):[v]}else o=Array.from(arguments);for(var a;!Et(o);)o=yt(o);return o}function yt(o){return o&&o.reduce?o.reduce((a,v)=>{const M=Array.isArray(a),z=Array.isArray(v);return M&&z?a.concat(v):M?(a.push(v),a):z?[a].concat(v):[a,v]}):[o]}function Et(o){if(!o)return!1;for(let a=0;a<o.length;++a)if(Array.isArray(o[a]))return!1;return!0}function pt(o,a){return a=a||1,o&&typeof o.slice=="function"?o.slice(a):o}function Pt(o){return o?o[0].map((a,v)=>o.map(M=>M[v])):f}function Vt(o,a){let v=null;return F(o,(M,z)=>{if(M[0]===a)return v=z,!1}),v??f}function Ot(){for(let o=0;o<arguments.length;o++)if(arguments[o]instanceof Error)return arguments[o]}function _t(){let o=arguments.length;for(;o--;)if(arguments[o]instanceof Error)return!0;return!1}function Xt(o){return Math.round(o*1e14)/1e14}function qt(){return tt.apply(null,arguments).filter(o=>typeof o=="number")}function oe(o){if(typeof o=="boolean"||o instanceof Error)return o;if(typeof o=="number")return o!==0;if(typeof o=="string"){const a=o.toUpperCase();if(a==="TRUE")return!0;if(a==="FALSE")return!1}return o instanceof Date&&!isNaN(o)||f}function $t(o){if(!isNaN(o)){if(o instanceof Date)return new Date(o);const a=parseFloat(o);return a<0||a>=2958466?E:function(v){v<60&&(v+=1);const M=Math.floor(v-25569),z=new Date(86400*M*1e3),J=v-Math.floor(v)+1e-7;let ot=Math.floor(86400*J);const gt=ot%60;ot-=gt;const Lt=Math.floor(ot/3600),Bt=Math.floor(ot/60)%60;let Qt=z.getUTCDate(),re=z.getUTCMonth();return v>=60&&v<61&&(Qt=29,re=1),new Date(z.getUTCFullYear(),re,Qt,Lt,Bt,gt)}(a)}return typeof o!="string"||(o=/(\d{4})-(\d\d?)-(\d\d?)$/.test(o)?new Date(o+"T00:00:00.000"):new Date(o),isNaN(o))?f:o}function fe(o){let a,v=o.length;for(;v--;){if(a=$t(o[v]),a===f)return a;o[v]=a}return o}function et(o){return o instanceof Error?o:o==null?0:(typeof o=="boolean"&&(o=+o),isNaN(o)||o===""?f:parseFloat(o))}function Ht(o){let a,v;if(!o||(a=o.length)===0)return f;for(;a--;){if(o[a]instanceof Error)return o[a];if(v=et(o[a]),v instanceof Error)return v;o[a]=v}return o}function Jt(o){return o instanceof Error?o:o==null?"":o.toString()}function he(){let o=arguments.length;for(;o--;)if(typeof arguments[o]=="string")return!0;return!1}function Dt(o){return o!=null}const Wt="=",Kt=[">",">=","<","<=","=","<>"],ae="operator",de="literal",ye=[ae,de],Oe=ae,Te=de;function He(o,a){if(ye.indexOf(a)===-1)throw new Error("Unsupported token type: "+a);return{value:o,type:a}}function Ze(o){return function(a){let v="";const M=[];for(let z=0;z<a.length;z++){const J=a[z];z===0&&Kt.indexOf(J)>=0?M.push(He(J,Oe)):v+=J}return v.length>0&&M.push(He(function(z){return typeof z!="string"||/^\d+(\.\d+)?$/.test(z)&&(z=z.indexOf(".")===-1?parseInt(z,10):parseFloat(z)),z}(v),Te)),M.length>0&&M[0].type!==Oe&&M.unshift(He(Wt,Oe)),M}(function(a){const v=a.length,M=[];let z=0,J="",ot="";for(;z<v;){const gt=a.charAt(z);switch(gt){case">":case"<":case"=":ot+=gt,J.length>0&&(M.push(J),J="");break;default:ot.length>0&&(M.push(ot),ot=""),J+=gt}z++}return J.length>0&&M.push(J),ot.length>0&&M.push(ot),M}(o))}const Be=function(o){const a=[];let v;for(let M=0;M<o.length;M++){const z=o[M];switch(z.type){case Oe:v=z.value;break;case Te:a.push(z.value)}}return function(M,z){let J=!1;switch(z){case">":J=M[0]>M[1];break;case">=":J=M[0]>=M[1];break;case"<":J=M[0]<M[1];break;case"<=":J=M[0]<=M[1];break;case"=":J=M[0]==M[1];break;case"<>":J=M[0]!=M[1]}return J}(a,v)},dn={};function fn(o){return[f,w,_,E,C,P].indexOf(o)>=0||typeof o=="number"&&(isNaN(o)||!isFinite(o))}function Ve(o){return fn(o)||o===S}function Ke(o){return o===!0||o===!1}function Xe(o){return typeof o=="number"&&!isNaN(o)&&isFinite(o)}function D(o){return typeof o=="string"}function H(){const o=[];for(let a=0;a<arguments.length;++a){let v=!1;const M=arguments[a];for(let z=0;z<o.length&&(v=o[z]===M,!v);++z);v||o.push(M)}return o}function b(o,a,v,M){if(!a||!v)return S;M=!(M===0||M===!1);let z=S;const J=typeof o=="number";let ot=!1;for(let gt=0;gt<a.length;gt++){const Lt=a[gt];if(Lt[0]===o){z=v<Lt.length+1?Lt[v-1]:w;break}!ot&&(J&&M&&Lt[0]<=o||M&&typeof Lt[0]=="string"&&Lt[0].localeCompare(o)<0)&&(z=v<Lt.length+1?Lt[v-1]:w),J&&Lt[0]>o&&(ot=!0)}return z}function d(){const o=tt(arguments).filter(Dt);if(o.length===0)return _;const a=Ot.apply(void 0,o);if(a)return a;const v=qt(o),M=v.length;let z,J=0,ot=0;for(let gt=0;gt<M;gt++)J+=v[gt],ot+=1;return z=J/ot,isNaN(z)&&(z=E),z}function X(){const o=tt(arguments).filter(Dt);if(o.length===0)return _;const a=Ot.apply(void 0,o);if(a)return a;const v=o,M=v.length;let z,J=0,ot=0;for(let gt=0;gt<M;gt++){const Lt=v[gt];typeof Lt=="number"&&(J+=Lt),Lt===!0&&J++,Lt!==null&&ot++}return z=J/ot,isNaN(z)&&(z=E),z}dn.TYPE=o=>{switch(o){case P:return 1;case _:return 2;case f:return 3;case w:return 4;case C:return 5;case E:return 6;case S:return 7;case B:return 8}return S};const ht={DIST:function(o,a,v,M,z,J){return arguments.length<4?f:(z=z===void 0?0:z,J=J===void 0?1:J,_t(o=et(o),a=et(a),v=et(v),z=et(z),J=et(J))?f:(o=(o-z)/(J-z),M?g.beta.cdf(o,a,v):g.beta.pdf(o,a,v)))},INV:(o,a,v,M,z)=>(M=M===void 0?0:M,z=z===void 0?1:z,_t(o=et(o),a=et(a),v=et(v),M=et(M),z=et(z))?f:g.beta.inv(o,a,v)*(z-M)+M)},dt={DIST:(o,a,v,M)=>_t(o=et(o),a=et(a),v=et(v),M=et(M))?f:M?g.binomial.cdf(o,a,v):g.binomial.pdf(o,a,v)};dt.DIST.RANGE=(o,a,v,M)=>{if(M=M===void 0?v:M,_t(o=et(o),a=et(a),v=et(v),M=et(M)))return f;let z=0;for(let J=v;J<=M;J++)z+=Pe(o,J)*Math.pow(a,J)*Math.pow(1-a,o-J);return z},dt.INV=(o,a,v)=>{if(_t(o=et(o),a=et(a),v=et(v)))return f;let M=0;for(;M<=o;){if(g.binomial.cdf(M,o,a)>=v)return M;M++}};const K={DIST:(o,a,v)=>_t(o=et(o),a=et(a))?f:v?g.chisquare.cdf(o,a):g.chisquare.pdf(o,a)};K.DIST.RT=(o,a)=>!o|!a?S:o<1||a>Math.pow(10,10)?E:typeof o!="number"||typeof a!="number"?f:1-g.chisquare.cdf(o,a),K.INV=(o,a)=>_t(o=et(o),a=et(a))?f:g.chisquare.inv(o,a),K.INV.RT=(o,a)=>!o|!a?S:o<0||o>1||a<1||a>Math.pow(10,10)?E:typeof o!="number"||typeof a!="number"?f:g.chisquare.inv(1-o,a),K.TEST=function(o,a){if(arguments.length!==2)return S;if(!(o instanceof Array&&a instanceof Array)||o.length!==a.length||o[0]&&a[0]&&o[0].length!==a[0].length)return f;const v=o.length;let M,z,J;for(z=0;z<v;z++)o[z]instanceof Array||(M=o[z],o[z]=[],o[z].push(M)),a[z]instanceof Array||(M=a[z],a[z]=[],a[z].push(M));const ot=o[0].length,gt=ot===1?v-1:(v-1)*(ot-1);let Lt=0;const Bt=Math.PI;for(z=0;z<v;z++)for(J=0;J<ot;J++)Lt+=Math.pow(o[z][J]-a[z][J],2)/a[z][J];return Math.round(1e6*function(Qt,re){let ie=Math.exp(-.5*Qt);re%2==1&&(ie*=Math.sqrt(2*Qt/Bt));let pe=re;for(;pe>=2;)ie=ie*Qt/pe,pe-=2;let je=ie,Ae=re;for(;je>1e-10*ie;)Ae+=2,je=je*Qt/Ae,ie+=je;return 1-ie}(Lt,gt))/1e6};const W={};function nt(){return qt(tt(arguments)).length}function lt(){const o=tt(arguments);return o.length-bt(o)}function bt(){const o=tt(arguments);let a,v=0;for(let M=0;M<o.length;M++)a=o[M],a!=null&&a!==""||v++;return v}W.NORM=(o,a,v)=>_t(o=et(o),a=et(a),v=et(v))?f:g.normalci(1,o,a,v)[1]-1,W.T=(o,a,v)=>_t(o=et(o),a=et(a),v=et(v))?f:g.tci(1,o,a,v)[1]-1;const Rt={P:(o,a)=>{if(_t(o=Ht(tt(o)),a=Ht(tt(a))))return f;const v=g.mean(o),M=g.mean(a);let z=0;const J=o.length;for(let ot=0;ot<J;ot++)z+=(o[ot]-v)*(a[ot]-M);return z/J},S:(o,a)=>_t(o=Ht(tt(o)),a=Ht(tt(a)))?f:g.covariance(o,a)},Mt={DIST:(o,a,v)=>_t(o=et(o),a=et(a))?f:v?g.exponential.cdf(o,a):g.exponential.pdf(o,a)},Tt={};function jt(o,a,v){if(_t(o=et(o),a=Ht(tt(a)),v=Ht(tt(v))))return f;const M=g.mean(v),z=g.mean(a),J=v.length;let ot=0,gt=0;for(let Bt=0;Bt<J;Bt++)ot+=(v[Bt]-M)*(a[Bt]-z),gt+=Math.pow(v[Bt]-M,2);const Lt=ot/gt;return z-Lt*M+Lt*o}function It(o){return(o=et(o))instanceof Error?o:o===0||parseInt(o,10)===o&&o<0?E:g.gammafn(o)}function Zt(o){return(o=et(o))instanceof Error?o:g.gammaln(o)}Tt.DIST=(o,a,v,M)=>_t(o=et(o),a=et(a),v=et(v))?f:M?g.centralF.cdf(o,a,v):g.centralF.pdf(o,a,v),Tt.DIST.RT=function(o,a,v){return arguments.length!==3?S:o<0||a<1||v<1?E:typeof o!="number"||typeof a!="number"||typeof v!="number"?f:1-g.centralF.cdf(o,a,v)},Tt.INV=(o,a,v)=>_t(o=et(o),a=et(a),v=et(v))?f:o<=0||o>1?E:g.centralF.inv(o,a,v),Tt.INV.RT=function(o,a,v){return arguments.length!==3?S:o<0||o>1||a<1||a>Math.pow(10,10)||v<1||v>Math.pow(10,10)?E:typeof o!="number"||typeof a!="number"||typeof v!="number"?f:g.centralF.inv(1-o,a,v)},Tt.TEST=(o,a)=>{if(!o||!a||!(o instanceof Array&&a instanceof Array))return S;if(o.length<2||a.length<2)return _;const v=(J,ot)=>{let gt=0;for(let Lt=0;Lt<J.length;Lt++)gt+=Math.pow(J[Lt]-ot,2);return gt},M=En(o)/o.length,z=En(a)/a.length;return v(o,M)/(o.length-1)/(v(a,z)/(a.length-1))},It.DIST=function(o,a,v,M){return arguments.length!==4?S:o<0||a<=0||v<=0||typeof o!="number"||typeof a!="number"||typeof v!="number"?f:M?g.gamma.cdf(o,a,v,!0):g.gamma.pdf(o,a,v,!1)},It.INV=function(o,a,v){return arguments.length!==3?S:o<0||o>1||a<=0||v<=0?E:typeof o!="number"||typeof a!="number"||typeof v!="number"?f:g.gamma.inv(o,a,v)},Zt.PRECISE=function(o){return arguments.length!==1?S:o<=0?E:typeof o!="number"?f:g.gammaln(o)};const ce={};function ve(o,a){return _t(o=Ht(tt(o)),a=et(a))?o:a<0||o.length<a?f:o.sort((v,M)=>M-v)[a-1]}function Ct(o,a){if(_t(o=Ht(tt(o)),a=Ht(tt(a))))return f;const v=g.mean(o),M=g.mean(a),z=a.length;let J=0,ot=0;for(let Lt=0;Lt<z;Lt++)J+=(a[Lt]-M)*(o[Lt]-v),ot+=Math.pow(a[Lt]-M,2);const gt=J/ot;return[gt,v-gt*M]}ce.DIST=(o,a,v,M,z)=>{if(_t(o=et(o),a=et(a),v=et(v),M=et(M)))return f;function J(ot,gt,Lt,Bt){return Pe(Lt,ot)*Pe(Bt-Lt,gt-ot)/Pe(Bt,gt)}return z?function(ot,gt,Lt,Bt){let Qt=0;for(let re=0;re<=ot;re++)Qt+=J(re,gt,Lt,Bt);return Qt}(o,a,v,M):J(o,a,v,M)};const Ut={};function at(){const o=tt(arguments),a=Ot.apply(void 0,o);if(a)return a;const v=qt(o);return v.length===0?0:Math.max.apply(Math,v)}function st(){const o=tt(arguments),a=Ot.apply(void 0,o);if(a)return a;const v=Y(o);let M=g.median(v);return isNaN(M)&&(M=E),M}function vt(){const o=tt(arguments),a=Ot.apply(void 0,o);if(a)return a;const v=qt(o);return v.length===0?0:Math.min.apply(Math,v)}Ut.DIST=(o,a,v,M)=>_t(o=et(o),a=et(a),v=et(v))?f:M?g.lognormal.cdf(o,a,v):g.lognormal.pdf(o,a,v),Ut.INV=(o,a,v)=>_t(o=et(o),a=et(a),v=et(v))?f:g.lognormal.inv(o,a,v);const R={MULT:function(){const o=Ht(tt(arguments));if(o instanceof Error)return o;const a=o.length,v={};let M,z=[],J=0;for(let ot=0;ot<a;ot++)M=o[ot],v[M]=v[M]?v[M]+1:1,v[M]>J&&(J=v[M],z=[]),v[M]===J&&(z[z.length]=M);return z},SNGL:function(){const o=Ht(tt(arguments));return o instanceof Error?o:R.MULT(o).sort((a,v)=>a-v)[0]}},Q={DIST:(o,a,v,M)=>_t(o=et(o),a=et(a),v=et(v))?f:M?g.negbin.cdf(o,a,v):g.negbin.pdf(o,a,v)},ut={};function St(o,a){if(_t(a=Ht(tt(a)),o=Ht(tt(o))))return f;const v=g.mean(o),M=g.mean(a),z=o.length;let J=0,ot=0,gt=0;for(let Lt=0;Lt<z;Lt++)J+=(o[Lt]-v)*(a[Lt]-M),ot+=Math.pow(o[Lt]-v,2),gt+=Math.pow(a[Lt]-M,2);return J/Math.sqrt(ot*gt)}ut.DIST=(o,a,v,M)=>_t(o=et(o),a=et(a),v=et(v))?f:v<=0?E:M?g.normal.cdf(o,a,v):g.normal.pdf(o,a,v),ut.INV=(o,a,v)=>_t(o=et(o),a=et(a),v=et(v))?f:g.normal.inv(o,a,v),ut.S={},ut.S.DIST=(o,a)=>(o=et(o))instanceof Error?f:a?g.normal.cdf(o,0,1):g.normal.pdf(o,0,1),ut.S.INV=o=>(o=et(o))instanceof Error?f:g.normal.inv(o,0,1);const ct={EXC:(o,a)=>{if(_t(o=Ht(tt(o)),a=et(a)))return f;const v=(o=o.sort((J,ot)=>J-ot)).length;if(a<1/(v+1)||a>1-1/(v+1))return E;const M=a*(v+1)-1,z=Math.floor(M);return Xt(M===z?o[M]:o[z]+(M-z)*(o[z+1]-o[z]))},INC:(o,a)=>{if(_t(o=Ht(tt(o)),a=et(a)))return f;const v=a*((o=o.sort((z,J)=>z-J)).length-1),M=Math.floor(v);return Xt(v===M?o[v]:o[M]+(v-M)*(o[M+1]-o[M]))}},xt={EXC:(o,a,v)=>{if(v=v===void 0?3:v,_t(o=Ht(tt(o)),a=et(a),v=et(v)))return f;o=o.sort((Qt,re)=>Qt-re);const M=H.apply(null,o),z=o.length,J=M.length,ot=Math.pow(10,v);let gt=0,Lt=!1,Bt=0;for(;!Lt&&Bt<J;)a===M[Bt]?(gt=(o.indexOf(M[Bt])+1)/(z+1),Lt=!0):a>=M[Bt]&&(a<M[Bt+1]||Bt===J-1)&&(gt=(o.indexOf(M[Bt])+1+(a-M[Bt])/(M[Bt+1]-M[Bt]))/(z+1),Lt=!0),Bt++;return Math.floor(gt*ot)/ot},INC:(o,a,v)=>{if(v=v===void 0?3:v,_t(o=Ht(tt(o)),a=et(a),v=et(v)))return f;o=o.sort((Qt,re)=>Qt-re);const M=H.apply(null,o),z=o.length,J=M.length,ot=Math.pow(10,v);let gt=0,Lt=!1,Bt=0;for(;!Lt&&Bt<J;)a===M[Bt]?(gt=o.indexOf(M[Bt])/(z-1),Lt=!0):a>=M[Bt]&&(a<M[Bt+1]||Bt===J-1)&&(gt=(o.indexOf(M[Bt])+(a-M[Bt])/(M[Bt+1]-M[Bt]))/(z-1),Lt=!0),Bt++;return Math.floor(gt*ot)/ot}},Ft={DIST:(o,a,v)=>_t(o=et(o),a=et(a))?f:v?g.poisson.cdf(o,a):g.poisson.pdf(o,a)},Yt={EXC:(o,a)=>{if(_t(o=Ht(tt(o)),a=et(a)))return f;switch(a){case 1:return ct.EXC(o,.25);case 2:return ct.EXC(o,.5);case 3:return ct.EXC(o,.75);default:return E}},INC:(o,a)=>{if(_t(o=Ht(tt(o)),a=et(a)))return f;switch(a){case 1:return ct.INC(o,.25);case 2:return ct.INC(o,.5);case 3:return ct.INC(o,.75);default:return E}}},wt={};function te(){const o=Ht(tt(arguments));if(o instanceof Error)return o;const a=g.mean(o),v=o.length;let M=0;for(let z=0;z<v;z++)M+=Math.pow(o[z]-a,3);return v*M/((v-1)*(v-2)*Math.pow(g.stdev(o,!0),3))}function le(o,a){return _t(o=Ht(tt(o)),a=et(a))?o:o.sort((v,M)=>v-M)[a-1]}wt.AVG=(o,a,v)=>{if(_t(o=et(o),a=Ht(tt(a))))return f;const M=(v=v||!1)?(ot,gt)=>ot-gt:(ot,gt)=>gt-ot,z=(a=(a=tt(a)).sort(M)).length;let J=0;for(let ot=0;ot<z;ot++)a[ot]===o&&J++;return J>1?(2*a.indexOf(o)+J+1)/2:a.indexOf(o)+1},wt.EQ=(o,a,v)=>{if(_t(o=et(o),a=Ht(tt(a))))return f;const M=(v=v||!1)?(z,J)=>z-J:(z,J)=>J-z;return(a=a.sort(M)).indexOf(o)+1},te.P=function(){const o=Ht(tt(arguments));if(o instanceof Error)return o;const a=g.mean(o),v=o.length;let M=0,z=0;for(let J=0;J<v;J++)z+=Math.pow(o[J]-a,3),M+=Math.pow(o[J]-a,2);return z/=v,M/=v,z/Math.pow(M,1.5)};const Ee={P:function(){const o=kt.P.apply(this,arguments);let a=Math.sqrt(o);return isNaN(a)&&(a=E),a},S:function(){const o=kt.S.apply(this,arguments);return Math.sqrt(o)}},mt={DIST:(o,a,v)=>v!==1&&v!==2?E:v===1?mt.DIST.RT(o,a):mt.DIST["2T"](o,a)};mt.DIST["2T"]=function(o,a){return arguments.length!==2?S:o<0||a<1?E:typeof o!="number"||typeof a!="number"?f:2*(1-g.studentt.cdf(o,a))},mt.DIST.RT=function(o,a){return arguments.length!==2?S:o<0||a<1?E:typeof o!="number"||typeof a!="number"?f:1-g.studentt.cdf(o,a)},mt.INV=(o,a)=>_t(o=et(o),a=et(a))?f:g.studentt.inv(o,a),mt.INV["2T"]=(o,a)=>(o=et(o),a=et(a),o<=0||o>1||a<1?E:_t(o,a)?f:Math.abs(g.studentt.inv(o/2,a))),mt.TEST=(o,a)=>{if(_t(o=Ht(tt(o)),a=Ht(tt(a))))return f;const v=g.mean(o),M=g.mean(a);let z,J=0,ot=0;for(z=0;z<o.length;z++)J+=Math.pow(o[z]-v,2);for(z=0;z<a.length;z++)ot+=Math.pow(a[z]-M,2);J/=o.length-1,ot/=a.length-1;const gt=Math.abs(v-M)/Math.sqrt(J/o.length+ot/a.length);return mt.DIST["2T"](gt,o.length+a.length-2)};const kt={};function zt(){const o=tt(arguments),a=o.length;let v=0,M=0;const z=X(o);for(let J=0;J<a;J++){const ot=o[J];v+=Math.pow(typeof ot=="number"?ot-z:ot===!0?1-z:0-z,2),ot!==null&&M++}return v/(M-1)}function ne(){const o=tt(arguments),a=o.length;let v=0,M=0;const z=X(o);let J;for(let ot=0;ot<a;ot++){const gt=o[ot];v+=Math.pow(typeof gt=="number"?gt-z:gt===!0?1-z:0-z,2),gt!==null&&M++}return J=v/M,isNaN(J)&&(J=E),J}kt.P=function(){const o=qt(tt(arguments)),a=o.length;let v=0;const M=d(o);let z;for(let J=0;J<a;J++)v+=Math.pow(o[J]-M,2);return z=v/a,isNaN(z)&&(z=E),z},kt.S=function(){const o=qt(tt(arguments)),a=o.length;let v=0;const M=d(o);for(let z=0;z<a;z++)v+=Math.pow(o[z]-M,2);return v/(a-1)};const Me={DIST:(o,a,v,M)=>_t(o=et(o),a=et(a),v=et(v))?f:M?1-Math.exp(-Math.pow(o/v,a)):Math.pow(o,a-1)*Math.exp(-Math.pow(o/v,a))*a/Math.pow(v,a)},_e={};function Se(o,a,v){const M=Ot(o=et(o),a=et(a),v=et(v));if(M)return M;if(a===0)return 0;a=Math.abs(a);const z=-Math.floor(Math.log(a)/Math.log(10));return o>=0?un(Math.ceil(o/a)*a,z):v===0?-un(Math.floor(Math.abs(o)/a)*a,z):-un(Math.ceil(Math.abs(o)/a)*a,z)}function Pe(o,a){return Ot(o=et(o),a=et(a))||(o<a?E:ue(o)/(ue(a)*ue(o-a)))}_e.TEST=(o,a,v)=>{if(_t(o=Ht(tt(o)),a=et(a)))return f;v=v||Ee.S(o);const M=o.length;return 1-ut.S.DIST((d(o)-a)/(v/Math.sqrt(M)),!0)},Se.MATH=Se,Se.PRECISE=Se;const se=[];function ue(o){if((o=et(o))instanceof Error)return o;const a=Math.floor(o);return a===0||a===1?1:(se[a]>0||(se[a]=ue(a-1)*a),se[a])}function yn(o,a){const v=Ot(o=et(o),a=et(a));if(v)return v;if(a===0)return 0;if(!(o>=0&&a>0||o<=0&&a<0))return E;a=Math.abs(a);const M=-Math.floor(Math.log(a)/Math.log(10));return o>=0?un(Math.floor(o/a)*a,M):-un(Math.ceil(Math.abs(o)/a),M)}yn.MATH=(o,a,v)=>{if(a instanceof Error)return a;a=a===void 0?0:a;const M=Ot(o=et(o),a=et(a),v=et(v));if(M)return M;if(a===0)return 0;a=a?Math.abs(a):1;const z=-Math.floor(Math.log(a)/Math.log(10));return o>=0?un(Math.floor(o/a)*a,z):v===0||v===void 0?-un(Math.ceil(Math.abs(o)/a)*a,z):-un(Math.floor(Math.abs(o)/a)*a,z)},yn.PRECISE=yn.MATH;const qn={CEILING:Se};function gi(o,a){const v=Ot(o=et(o),a=et(a));if(v)return v;if(o===0&&a===0)return E;const M=Math.pow(o,a);return isNaN(M)?E:M}function Xn(){const o=tt(arguments).filter(M=>M!=null);if(o.length===0)return 0;const a=Ht(o);if(a instanceof Error)return a;let v=1;for(let M=0;M<a.length;M++)v*=a[M];return v}function un(o,a){return Ot(o=et(o),a=et(a))||+(Math.round(+(o+"e"+a))+"e"+-1*a)}function En(){let o=0;return F(U(arguments),a=>{if(o instanceof Error)return!1;if(a instanceof Error)o=a;else if(typeof a=="number")o+=a;else if(typeof a=="string"){const v=parseFloat(a);!isNaN(v)&&(o+=v)}else if(Array.isArray(a)){const v=En.apply(null,a);v instanceof Error?o=v:o+=v}}),o}var zi=Object.freeze({__proto__:null,ADD:function(o,a){return arguments.length!==2?S:Ot(o=et(o),a=et(a))||o+a},DIVIDE:function(o,a){return arguments.length!==2?S:Ot(o=et(o),a=et(a))||(a===0?_:o/a)},EQ:function(o,a){return arguments.length!==2?S:o instanceof Error?o:a instanceof Error?a:(o===null&&(o=void 0),a===null&&(a=void 0),o===a)},GT:function(o,a){return arguments.length!==2?S:o instanceof Error?o:a instanceof Error?a:(he(o,a)?(o=Jt(o),a=Jt(a)):(o=et(o),a=et(a)),Ot(o,a)||o>a)},GTE:function(o,a){return arguments.length!==2?S:(he(o,a)?(o=Jt(o),a=Jt(a)):(o=et(o),a=et(a)),Ot(o,a)||o>=a)},LT:function(o,a){return arguments.length!==2?S:(he(o,a)?(o=Jt(o),a=Jt(a)):(o=et(o),a=et(a)),Ot(o,a)||o<a)},LTE:function(o,a){return arguments.length!==2?S:(he(o,a)?(o=Jt(o),a=Jt(a)):(o=et(o),a=et(a)),Ot(o,a)||o<=a)},MINUS:function(o,a){return arguments.length!==2?S:Ot(o=et(o),a=et(a))||o-a},MULTIPLY:function(o,a){return arguments.length!==2?S:Ot(o=et(o),a=et(a))||o*a},NE:function(o,a){return arguments.length!==2?S:o instanceof Error?o:a instanceof Error?a:(o===null&&(o=void 0),a===null&&(a=void 0),o!==a)},POW:function(o,a){return arguments.length!==2?S:gi(o,a)}});const Jn=new Date(Date.UTC(1900,0,1)),On=[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],vi=[[],[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],[],[],[],[],[],[],[],[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]],Pn=[[],[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],void 0,void 0,void 0,[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]];function pn(o,a,v){v=v.toUpperCase(),o=$t(o),a=$t(a);const M=o.getFullYear(),z=o.getMonth(),J=o.getDate(),ot=a.getFullYear(),gt=a.getMonth(),Lt=a.getDate();let Bt;switch(v){case"Y":Bt=Math.floor(Dn(o,a));break;case"D":Bt=Ne(a,o);break;case"M":Bt=gt-z+12*(ot-M),Lt<J&&Bt--;break;case"MD":J<=Lt?Bt=Lt-J:(gt===0?(o.setFullYear(ot-1),o.setMonth(12)):(o.setFullYear(ot),o.setMonth(gt-1)),Bt=Ne(a,o));break;case"YM":Bt=gt-z+12*(ot-M),Lt<J&&Bt--,Bt%=12;break;case"YD":gt>z||gt===z&&Lt<J?o.setFullYear(ot):o.setFullYear(ot-1),Bt=Ne(a,o)}return Bt}function we(o){const a=new Date(o);return a.setHours(0,0,0,0),a}function Ne(o,a){return o=$t(o),a=$t(a),o instanceof Error?o:a instanceof Error?a:Rn(we(o))-Rn(we(a))}function on(o,a,v){if(v=oe(v||"false"),o=$t(o),a=$t(a),o instanceof Error)return o;if(a instanceof Error)return a;if(v instanceof Error)return v;const M=o.getMonth();let z,J,ot=a.getMonth();if(v)z=o.getDate()===31?30:o.getDate(),J=a.getDate()===31?30:a.getDate();else{const gt=new Date(o.getFullYear(),M+1,0).getDate(),Lt=new Date(a.getFullYear(),ot+1,0).getDate();z=o.getDate()===gt?30:o.getDate(),a.getDate()===Lt?z<30?(ot++,J=1):J=30:J=a.getDate()}return 360*(a.getFullYear()-o.getFullYear())+30*(ot-M)+(J-z)}function jn(o){if((o=$t(o))instanceof Error)return o;(o=we(o)).setDate(o.getDate()+4-(o.getDay()||7));const a=new Date(o.getFullYear(),0,1);return Math.ceil(((o-a)/864e5+1)/7)}function mn(o,a,v){return mn.INTL(o,a,1,v)}function Nn(o,a,v){return Nn.INTL(o,a,1,v)}function be(o){return new Date(o,1,29).getMonth()===1}function ke(o,a){return Math.ceil((a-o)/1e3/60/60/24)}function Dn(o,a,v){if((o=$t(o))instanceof Error)return o;if((a=$t(a))instanceof Error)return a;v=v||0;let M=o.getDate();const z=o.getMonth()+1,J=o.getFullYear();let ot=a.getDate();const gt=a.getMonth()+1,Lt=a.getFullYear();switch(v){case 0:return M===31&&ot===31?(M=30,ot=30):M===31?M=30:M===30&&ot===31&&(ot=30),(ot+30*gt+360*Lt-(M+30*z+360*J))/360;case 1:{const Bt=(pe,je)=>{const Ae=pe.getFullYear(),qe=new Date(Ae,2,1);if(be(Ae)&&pe<qe&&je>=qe)return!0;const Re=je.getFullYear(),tn=new Date(Re,2,1);return be(Re)&&je>=tn&&pe<tn};let Qt=365;if(J===Lt||J+1===Lt&&(z>gt||z===gt&&M>=ot))return(J===Lt&&be(J)||Bt(o,a)||gt===1&&ot===29)&&(Qt=366),ke(o,a)/Qt;const re=Lt-J+1,ie=(new Date(Lt+1,0,1)-new Date(J,0,1))/1e3/60/60/24/re;return ke(o,a)/ie}case 2:return ke(o,a)/360;case 3:return ke(o,a)/365;case 4:return(ot+30*gt+360*Lt-(M+30*z+360*J))/360}}function Rn(o){const a=o>-22038912e5?2:1;return Math.ceil((o-Jn)/864e5)+a}function Je(o){return(o=et(o))===0?f:o instanceof Error?o:String.fromCharCode(o)}function _i(o){if(_t(o))return o;let a=(o=o||"").charCodeAt(0);return isNaN(a)&&(a=f),a}function kn(){const o=tt(arguments),a=Ot.apply(void 0,o);if(a)return a;let v=0;for(;(v=o.indexOf(!0))>-1;)o[v]="TRUE";let M=0;for(;(M=o.indexOf(!1))>-1;)o[M]="FALSE";return o.join("")}mn.INTL=(o,a,v,M)=>{if((o=$t(o))instanceof Error)return o;if((a=$t(a))instanceof Error)return a;let z=!1;const J=[],ot=[1,2,3,4,5,6,0],gt=new RegExp("^[0|1]{7}$");if(v===void 0)v=Pn[1];else if(typeof v=="string"&&gt.test(v)){z=!0,v=v.split("");for(let re=0;re<v.length;re++)v[re]==="1"&&J.push(ot[re])}else v=Pn[v];if(!(v instanceof Array))return f;M===void 0?M=[]:M instanceof Array||(M=[M]);for(let re=0;re<M.length;re++){const ie=$t(M[re]);if(ie instanceof Error)return ie;M[re]=ie}const Lt=Math.round((a-o)/864e5)+1;let Bt=Lt;const Qt=o;for(let re=0;re<Lt;re++){const ie=new Date().getTimezoneOffset()>0?Qt.getUTCDay():Qt.getDay();let pe=z?J.includes(ie):ie===v[0]||ie===v[1];for(let je=0;je<M.length;je++){const Ae=M[je];if(Ae.getDate()===Qt.getDate()&&Ae.getMonth()===Qt.getMonth()&&Ae.getFullYear()===Qt.getFullYear()){pe=!0;break}}pe&&Bt--,Qt.setDate(Qt.getDate()+1)}return Bt},Nn.INTL=(o,a,v,M)=>{if((o=$t(o))instanceof Error)return o;if((a=et(a))instanceof Error)return a;if(a<0)return E;if(!((v=v===void 0?Pn[1]:Pn[v])instanceof Array))return f;M===void 0?M=[]:M instanceof Array||(M=[M]);for(let J=0;J<M.length;J++){const ot=$t(M[J]);if(ot instanceof Error)return ot;M[J]=ot}let z=0;for(;z<a;){o.setDate(o.getDate()+1);const J=o.getDay();if(J!==v[0]&&J!==v[1]){for(let ot=0;ot<M.length;ot++){const gt=M[ot];if(gt.getDate()===o.getDate()&&gt.getMonth()===o.getMonth()&&gt.getFullYear()===o.getFullYear()){z--;break}}z++}}return o};const xn=kn;function Fe(o,a=2,v=!1){if(o=et(o),isNaN(o)||(a=et(a),isNaN(a)))return f;if(a<0){const M=Math.pow(10,-a);o=Math.round(o/M)*M}else o=o.toFixed(a);if(v)o=o.toString().replace(/,/g,"");else{const M=o.toString().split(".");M[0]=M[0].replace(/\B(?=(\d{3})+$)/g,","),o=M.join(".")}return o}function ze(o,a){return Ot(o,a)||(o=Jt(o),(a=et(a))instanceof Error?a:new Array(a+1).join(o))}const Fn=Je,Hn=_i;function $n(o){return/^[01]{1,10}$/.test(o)}function $e(o,a,v){if(_t(o=et(o),a=et(a)))return o;if((v=v===void 0?"i":v)!=="i"&&v!=="j")return f;if(o===0&&a===0)return 0;if(o===0)return a===1?v:a.toString()+v;if(a===0)return o.toString();{const M=a>0?"+":"";return o.toString()+M+(a===1?v:a.toString()+v)}}function Bn(o,a){return a=a===void 0?0:a,_t(o=et(o),a=et(a))?f:g.erf(o)}function Vn(o){return isNaN(o)?f:g.erfc(o)}function In(o){const a=Ie(o),v=Le(o);return _t(a,v)?f:Math.sqrt(Math.pow(a,2)+Math.pow(v,2))}function Le(o){if(o===void 0||o===!0||o===!1)return f;if(o===0||o==="0")return 0;if(["i","j"].indexOf(o)>=0)return 1;let a=(o=(o+="").replace("+i","+1i").replace("-i","-1i").replace("+j","+1j").replace("-j","-1j")).indexOf("+"),v=o.indexOf("-");a===0&&(a=o.indexOf("+",1)),v===0&&(v=o.indexOf("-",1));const M=o.substring(o.length-1,o.length),z=M==="i"||M==="j";return a>=0||v>=0?z?a>=0?isNaN(o.substring(0,a))||isNaN(o.substring(a+1,o.length-1))?E:Number(o.substring(a+1,o.length-1)):isNaN(o.substring(0,v))||isNaN(o.substring(v+1,o.length-1))?E:-Number(o.substring(v+1,o.length-1)):E:z?isNaN(o.substring(0,o.length-1))?E:o.substring(0,o.length-1):isNaN(o)?E:0}function zn(o){const a=Ie(o),v=Le(o);return _t(a,v)?f:a===0&&v===0?_:a===0&&v>0?Math.PI/2:a===0&&v<0?-Math.PI/2:v===0&&a>0?0:v===0&&a<0?-Math.PI:a>0?Math.atan(v/a):a<0&&v>=0?Math.atan(v/a)+Math.PI:Math.atan(v/a)-Math.PI}function wn(o){const a=Ie(o),v=Le(o);if(_t(a,v))return f;let M=o.substring(o.length-1);return M=M==="i"||M==="j"?M:"i",$e(Math.cos(a)*(Math.exp(v)+Math.exp(-v))/2,-Math.sin(a)*(Math.exp(v)-Math.exp(-v))/2,M)}function Qn(o){const a=Ie(o),v=Le(o);if(_t(a,v))return f;let M=o.substring(o.length-1);return M=M==="i"||M==="j"?M:"i",$e(Math.cos(v)*(Math.exp(a)+Math.exp(-a))/2,Math.sin(v)*(Math.exp(a)-Math.exp(-a))/2,M)}function gn(o,a){const v=Ie(o),M=Le(o),z=Ie(a),J=Le(a);if(_t(v,M,z,J))return f;const ot=o.substring(o.length-1),gt=a.substring(a.length-1);let Lt="i";if((ot==="j"||gt==="j")&&(Lt="j"),z===0&&J===0)return E;const Bt=z*z+J*J;return $e((v*z+M*J)/Bt,(M*z-v*J)/Bt,Lt)}function Ie(o){if(o===void 0||o===!0||o===!1)return f;if(o===0||o==="0"||["i","+i","1i","+1i","-i","-1i","j","+j","1j","+1j","-j","-1j"].indexOf(o)>=0)return 0;let a=(o+="").indexOf("+"),v=o.indexOf("-");a===0&&(a=o.indexOf("+",1)),v===0&&(v=o.indexOf("-",1));const M=o.substring(o.length-1,o.length),z=M==="i"||M==="j";return a>=0||v>=0?z?a>=0?isNaN(o.substring(0,a))||isNaN(o.substring(a+1,o.length-1))?E:Number(o.substring(0,a)):isNaN(o.substring(0,v))||isNaN(o.substring(v+1,o.length-1))?E:Number(o.substring(0,v)):E:z?isNaN(o.substring(0,o.length-1))?E:0:isNaN(o)?E:o}function ge(o){const a=Ie(o),v=Le(o);if(_t(a,v))return f;let M=o.substring(o.length-1);return M=M==="i"||M==="j"?M:"i",$e(Math.sin(a)*(Math.exp(v)+Math.exp(-v))/2,Math.cos(a)*(Math.exp(v)-Math.exp(-v))/2,M)}function sn(o){const a=Ie(o),v=Le(o);if(_t(a,v))return f;let M=o.substring(o.length-1);return M=M==="i"||M==="j"?M:"i",$e(Math.cos(v)*(Math.exp(a)-Math.exp(-a))/2,Math.sin(v)*(Math.exp(a)+Math.exp(-a))/2,M)}Bn.PRECISE=()=>{throw new Error("ERF.PRECISE is not implemented")},Vn.PRECISE=()=>{throw new Error("ERFC.PRECISE is not implemented")};const De=ht.DIST,bi=ht.INV,ti=dt.DIST,ei=Se.MATH,ni=Se.PRECISE,Cn=K.DIST,ii=K.DIST.RT,Gn=K.INV,We=K.INV.RT,An=K.TEST,yi=Rt.P,Ei=Rt.P,Gi=Rt.S,ji=dt.INV,ri=Vn.PRECISE,Wi=Bn.PRECISE,xi=Mt.DIST,Ce=Tt.DIST,Ui=Tt.DIST.RT,an=Tt.INV,Wn=Tt.INV.RT,wi=yn.MATH,qi=yn.PRECISE,oi=Tt.TEST,Yi=It.DIST,Ci=It.INV,Zi=Zt.PRECISE,Ki=ce.DIST,si=Ut.INV,Xi=Ut.DIST,cn=Ut.INV,Ji=R.MULT,Ai=R.SNGL,_n=Q.DIST,Mi=mn.INTL,Ti=ut.DIST,ai=ut.INV,Qi=ut.S.DIST,Li=ut.S.INV,Si=ct.EXC,tr=ct.INC,er=xt.EXC,li=xt.INC,nr=Ft.DIST,Ni=Yt.EXC,Ii=Yt.INC,Yn=wt.AVG,Mn=wt.EQ,ir=te.P,Un=Ee.P,nn=Ee.S,Oi=mt.DIST,Pi=mt.DIST.RT,rr=mt.INV,ui=mt.TEST,ci=kt.P,or=kt.S,sr=Me.DIST,Di=Nn.INTL,ar=_e.TEST;function Qe(o){const a=[];return F(o,v=>{v&&a.push(v)}),a}function Ue(o,a){const v={};for(let J=1;J<o[0].length;++J)v[J]=!0;let M=a[0].length;for(let J=1;J<a.length;++J)a[J].length>M&&(M=a[J].length);for(let J=1;J<o.length;++J)for(let ot=1;ot<o[J].length;++ot){let gt=!1,Lt=!1;for(let Bt=0;Bt<a.length;++Bt){const Qt=a[Bt];if(Qt.length<M)continue;const re=Qt[0];if(o[J][0]===re){Lt=!0;for(let ie=1;ie<Qt.length;++ie)if(!gt)if(Qt[ie]===void 0||Qt[ie]==="*")gt=!0;else{const pe=Ze(Qt[ie]+""),je=[He(o[J][ot],Te)].concat(pe);gt=Be(je)}}}Lt&&(v[ot]=v[ot]&&gt)}const z=[];for(let J=0;J<o[0].length;++J)v[J]&&z.push(J-1);return z}function hi(o){return o&&o.getTime&&!isNaN(o.getTime())}function ln(o){return o instanceof Date?o:new Date(o)}function Tn(o,a,v,M,z){if(M=M||0,z=z||0,_t(o=et(o),a=et(a),v=et(v),M=et(M),z=et(z)))return f;let J;if(o===0)J=M+v*a;else{const ot=Math.pow(1+o,a);J=z===1?M*ot+v*(1+o)*(ot-1)/o:M*ot+v*(ot-1)/o}return-J}function Ln(o,a,v,M,z,J){if(z=z||0,J=J||0,_t(o=et(o),a=et(a),v=et(v),M=et(M),z=et(z),J=et(J)))return f;const ot=vn(o,v,M,z,J);return(a===1?J===1?0:-M:J===1?Tn(o,a-2,ot,M,1)-ot:Tn(o,a-1,ot,M,0))*o}function di(){const o=Ht(tt(arguments));if(o instanceof Error)return o;const a=o[0];let v=0;for(let M=1;M<o.length;M++)v+=o[M]/Math.pow(1+a,M);return v}function vn(o,a,v,M,z){if(M=M||0,z=z||0,_t(o=et(o),a=et(a),v=et(v),M=et(M),z=et(z)))return f;let J;if(o===0)J=(v+M)/a;else{const ot=Math.pow(1+o,a);J=z===1?(M*o/(ot-1)+v*o/(1-1/ot))/(1+o):M*o/(ot-1)+v*o/(1-1/ot)}return-J}const Ri={errors:q,symbols:zi};h.ABS=function(o){return(o=et(o))instanceof Error?o:Math.abs(o)},h.ACCRINT=function(o,a,v,M,z,J,ot){return o=ln(o),a=ln(a),v=ln(v),hi(o)&&hi(a)&&hi(v)?M<=0||z<=0||[1,2,4].indexOf(J)===-1||[0,1,2,3,4].indexOf(ot)===-1||v<=o?E:(z=z||0)*M*Dn(o,v,ot=ot||0):f},h.ACCRINTM=function(){throw new Error("ACCRINTM is not implemented")},h.ACOS=function(o){if((o=et(o))instanceof Error)return o;let a=Math.acos(o);return isNaN(a)&&(a=E),a},h.ACOSH=function(o){if((o=et(o))instanceof Error)return o;let a=Math.log(o+Math.sqrt(o*o-1));return isNaN(a)&&(a=E),a},h.ACOT=function(o){return(o=et(o))instanceof Error?o:Math.atan(1/o)},h.ACOTH=function(o){if((o=et(o))instanceof Error)return o;let a=.5*Math.log((o+1)/(o-1));return isNaN(a)&&(a=E),a},h.AGGREGATE=function(o,a,v,M){if(_t(o=et(o),et(o)))return f;switch(o){case 1:return d(v);case 2:return nt(v);case 3:return lt(v);case 4:return at(v);case 5:return vt(v);case 6:return Xn(v);case 7:return Ee.S(v);case 8:return Ee.P(v);case 9:return En(v);case 10:return kt.S(v);case 11:return kt.P(v);case 12:return st(v);case 13:return R.SNGL(v);case 14:return ve(v,M);case 15:return le(v,M);case 16:return ct.INC(v,M);case 17:return Yt.INC(v,M);case 18:return ct.EXC(v,M);case 19:return Yt.EXC(v,M)}},h.AMORDEGRC=function(){throw new Error("AMORDEGRC is not implemented")},h.AMORLINC=function(){throw new Error("AMORLINC is not implemented")},h.AND=function(){const o=tt(arguments);let a=f;for(let v=0;v<o.length;v++){if(o[v]instanceof Error)return o[v];o[v]!==void 0&&o[v]!==null&&typeof o[v]!="string"&&(a===f&&(a=!0),o[v]||(a=!1))}return a},h.ARABIC=function(o){if(o==null)return 0;if(o instanceof Error)return o;if(!/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(o))return f;let a=0;return o.replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,v=>{a+={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1}[v]}),a},h.ASC=function(){throw new Error("ASC is not implemented")},h.ASIN=function(o){if((o=et(o))instanceof Error)return o;let a=Math.asin(o);return isNaN(a)&&(a=E),a},h.ASINH=function(o){return(o=et(o))instanceof Error?o:Math.log(o+Math.sqrt(o*o+1))},h.ATAN=function(o){return(o=et(o))instanceof Error?o:Math.atan(o)},h.ATAN2=function(o,a){return Ot(o=et(o),a=et(a))||Math.atan2(o,a)},h.ATANH=function(o){if((o=et(o))instanceof Error)return o;let a=Math.log((1+o)/(1-o))/2;return isNaN(a)&&(a=E),a},h.AVEDEV=function(){const o=tt(arguments).filter(Dt);if(o.length===0)return E;const a=Ht(o);return a instanceof Error?a:g.sum(g(a).subtract(g.mean(a)).abs()[0])/a.length},h.AVERAGE=d,h.AVERAGEA=X,h.AVERAGEIF=function(o,a,v){if(arguments.length<=1)return S;if(v=Ht(tt(v=v||o).filter(Dt)),o=tt(o),v instanceof Error)return v;let M=0,z=0;const J=a===void 0||a==="*",ot=J?null:Ze(a+"");for(let gt=0;gt<o.length;gt++){const Lt=o[gt];if(J)z+=v[gt],M++;else{const Bt=[He(Lt,Te)].concat(ot);Be(Bt)&&(z+=v[gt],M++)}}return z/M},h.AVERAGEIFS=function(){const o=U(arguments),a=(o.length-1)/2,v=tt(o[0]);let M=0,z=0;for(let ot=0;ot<v.length;ot++){let gt=!1;for(let Lt=0;Lt<a;Lt++){const Bt=o[2*Lt+1][ot],Qt=o[2*Lt+2];let re=!1;if(Qt===void 0||Qt==="*")re=!0;else{const ie=Ze(Qt+""),pe=[He(Bt,Te)].concat(ie);re=Be(pe)}if(!re){gt=!1;break}gt=!0}gt&&(z+=v[ot],M++)}const J=z/M;return isNaN(J)?0:J},h.BAHTTEXT=function(){throw new Error("BAHTTEXT is not implemented")},h.BASE=function(o,a,v){const M=Ot(o=et(o),a=et(a),v=et(v));if(M)return M;if(a===0)return E;const z=o.toString(a);return new Array(Math.max(v+1-z.length,0)).join("0")+z},h.BESSELI=function(o,a){return _t(o=et(o),a=et(a))?f:N.besseli(o,a)},h.BESSELJ=function(o,a){return _t(o=et(o),a=et(a))?f:N.besselj(o,a)},h.BESSELK=function(o,a){return _t(o=et(o),a=et(a))?f:N.besselk(o,a)},h.BESSELY=function(o,a){return _t(o=et(o),a=et(a))?f:N.bessely(o,a)},h.BETA=ht,h.BETADIST=De,h.BETAINV=bi,h.BIN2DEC=function(o){if(!$n(o))return E;const a=parseInt(o,2),v=o.toString();return v.length===10&&v.substring(0,1)==="1"?parseInt(v.substring(1),2)-512:a},h.BIN2HEX=function(o,a){if(!$n(o))return E;const v=o.toString();if(v.length===10&&v.substring(0,1)==="1")return(0xfffffffe00+parseInt(v.substring(1),2)).toString(16);const M=parseInt(o,2).toString(16);return a===void 0?M:isNaN(a)?f:a<0?E:(a=Math.floor(a))>=M.length?ze("0",a-M.length)+M:E},h.BIN2OCT=function(o,a){if(!$n(o))return E;const v=o.toString();if(v.length===10&&v.substring(0,1)==="1")return(1073741312+parseInt(v.substring(1),2)).toString(8);const M=parseInt(o,2).toString(8);return a===void 0?M:isNaN(a)?f:a<0?E:(a=Math.floor(a))>=M.length?ze("0",a-M.length)+M:E},h.BINOM=dt,h.BINOMDIST=ti,h.BITAND=function(o,a){return _t(o=et(o),a=et(a))?f:o<0||a<0||Math.floor(o)!==o||Math.floor(a)!==a||o>0xffffffffffff||a>0xffffffffffff?E:o&a},h.BITLSHIFT=function(o,a){return _t(o=et(o),a=et(a))?f:o<0||Math.floor(o)!==o||o>0xffffffffffff||Math.abs(a)>53?E:a>=0?o<<a:o>>-a},h.BITOR=function(o,a){return _t(o=et(o),a=et(a))?f:o<0||a<0||Math.floor(o)!==o||Math.floor(a)!==a||o>0xffffffffffff||a>0xffffffffffff?E:o|a},h.BITRSHIFT=function(o,a){return _t(o=et(o),a=et(a))?f:o<0||Math.floor(o)!==o||o>0xffffffffffff||Math.abs(a)>53?E:a>=0?o>>a:o<<-a},h.BITXOR=function(o,a){return _t(o=et(o),a=et(a))?f:o<0||a<0||Math.floor(o)!==o||Math.floor(a)!==a||o>0xffffffffffff||a>0xffffffffffff?E:o^a},h.CEILING=Se,h.CEILINGMATH=ei,h.CEILINGPRECISE=ni,h.CELL=function(){throw new Error("CELL is not implemented")},h.CHAR=Je,h.CHIDIST=Cn,h.CHIDISTRT=ii,h.CHIINV=Gn,h.CHIINVRT=We,h.CHISQ=K,h.CHITEST=An,h.CHOOSE=function(){if(arguments.length<2)return S;const o=arguments[0];return o<1||o>254||arguments.length<o+1?f:arguments[o]},h.CLEAN=function(o){return _t(o)?o:(o=o||"").replace(/[\0-\x1F]/g,"")},h.CODE=_i,h.COLUMN=function(o,a){return arguments.length!==2?S:a<0?E:o instanceof Array&&typeof a=="number"?o.length!==0?g.col(o,a):void 0:f},h.COLUMNS=function(o){return arguments.length!==1?S:o instanceof Array?o.length===0?0:g.cols(o):f},h.COMBIN=Pe,h.COMBINA=function(o,a){return Ot(o=et(o),a=et(a))||(o<a?E:o===0&&a===0?1:Pe(o+a-1,o-1))},h.COMPLEX=$e,h.CONCAT=xn,h.CONCATENATE=kn,h.CONFIDENCE=W,h.CONVERT=function(o,a,v){if((o=et(o))instanceof Error)return o;const M=[["a.u. of action","?",null,"action",!1,!1,105457168181818e-48],["a.u. of charge","e",null,"electric_charge",!1,!1,160217653141414e-33],["a.u. of energy","Eh",null,"energy",!1,!1,435974417757576e-32],["a.u. of length","a?",null,"length",!1,!1,529177210818182e-25],["a.u. of mass","m?",null,"mass",!1,!1,910938261616162e-45],["a.u. of time","?/Eh",null,"time",!1,!1,241888432650516e-31],["admiralty knot","admkn",null,"speed",!1,!0,.514773333],["ampere","A",null,"electric_current",!0,!1,1],["ampere per meter","A/m",null,"magnetic_field_intensity",!0,!1,1],["ngstrm","",["ang"],"length",!1,!0,1e-10],["are","ar",null,"area",!1,!0,100],["astronomical unit","ua",null,"length",!1,!1,149597870691667e-25],["bar","bar",null,"pressure",!1,!1,1e5],["barn","b",null,"area",!1,!1,1e-28],["becquerel","Bq",null,"radioactivity",!0,!1,1],["bit","bit",["b"],"information",!1,!0,1],["btu","BTU",["btu"],"energy",!1,!0,1055.05585262],["byte","byte",null,"information",!1,!0,8],["candela","cd",null,"luminous_intensity",!0,!1,1],["candela per square metre","cd/m?",null,"luminance",!0,!1,1],["coulomb","C",null,"electric_charge",!0,!1,1],["cubic ngstrm","ang3",["ang^3"],"volume",!1,!0,1e-30],["cubic foot","ft3",["ft^3"],"volume",!1,!0,.028316846592],["cubic inch","in3",["in^3"],"volume",!1,!0,16387064e-12],["cubic light-year","ly3",["ly^3"],"volume",!1,!0,846786664623715e-61],["cubic metre","m?",null,"volume",!0,!0,1],["cubic mile","mi3",["mi^3"],"volume",!1,!0,416818182544058e-5],["cubic nautical mile","Nmi3",["Nmi^3"],"volume",!1,!0,6352182208],["cubic Pica","Pica3",["Picapt3","Pica^3","Picapt^3"],"volume",!1,!0,758660370370369e-22],["cubic yard","yd3",["yd^3"],"volume",!1,!0,.764554857984],["cup","cup",null,"volume",!1,!0,.0002365882365],["dalton","Da",["u"],"mass",!1,!1,166053886282828e-41],["day","d",["day"],"time",!1,!0,86400],["degree","",null,"angle",!1,!1,.0174532925199433],["degrees Rankine","Rank",null,"temperature",!1,!0,.555555555555556],["dyne","dyn",["dy"],"force",!1,!0,1e-5],["electronvolt","eV",["ev"],"energy",!1,!0,1.60217656514141],["ell","ell",null,"length",!1,!0,1.143],["erg","erg",["e"],"energy",!1,!0,1e-7],["farad","F",null,"electric_capacitance",!0,!1,1],["fluid ounce","oz",null,"volume",!1,!0,295735295625e-16],["foot","ft",null,"length",!1,!0,.3048],["foot-pound","flb",null,"energy",!1,!0,1.3558179483314],["gal","Gal",null,"acceleration",!1,!1,.01],["gallon","gal",null,"volume",!1,!0,.003785411784],["gauss","G",["ga"],"magnetic_flux_density",!1,!0,1],["grain","grain",null,"mass",!1,!0,647989e-10],["gram","g",null,"mass",!1,!0,.001],["gray","Gy",null,"absorbed_dose",!0,!1,1],["gross registered ton","GRT",["regton"],"volume",!1,!0,2.8316846592],["hectare","ha",null,"area",!1,!0,1e4],["henry","H",null,"inductance",!0,!1,1],["hertz","Hz",null,"frequency",!0,!1,1],["horsepower","HP",["h"],"power",!1,!0,745.69987158227],["horsepower-hour","HPh",["hh","hph"],"energy",!1,!0,2684519538e-3],["hour","h",["hr"],"time",!1,!0,3600],["imperial gallon (U.K.)","uk_gal",null,"volume",!1,!0,.00454609],["imperial hundredweight","lcwt",["uk_cwt","hweight"],"mass",!1,!0,50.802345],["imperial quart (U.K)","uk_qt",null,"volume",!1,!0,.0011365225],["imperial ton","brton",["uk_ton","LTON"],"mass",!1,!0,1016.046909],["inch","in",null,"length",!1,!0,.0254],["international acre","uk_acre",null,"area",!1,!0,4046.8564224],["IT calorie","cal",null,"energy",!1,!0,4.1868],["joule","J",null,"energy",!0,!0,1],["katal","kat",null,"catalytic_activity",!0,!1,1],["kelvin","K",["kel"],"temperature",!0,!0,1],["kilogram","kg",null,"mass",!0,!0,1],["knot","kn",null,"speed",!1,!0,.514444444444444],["light-year","ly",null,"length",!1,!0,9460730472580800],["litre","L",["l","lt"],"volume",!1,!0,.001],["lumen","lm",null,"luminous_flux",!0,!1,1],["lux","lx",null,"illuminance",!0,!1,1],["maxwell","Mx",null,"magnetic_flux",!1,!1,1e-18],["measurement ton","MTON",null,"volume",!1,!0,1.13267386368],["meter per hour","m/h",["m/hr"],"speed",!1,!0,.00027777777777778],["meter per second","m/s",["m/sec"],"speed",!0,!0,1],["meter per second squared","m?s??",null,"acceleration",!0,!1,1],["parsec","pc",["parsec"],"length",!1,!0,0x6da012f958ee1c],["meter squared per second","m?/s",null,"kinematic_viscosity",!0,!1,1],["metre","m",null,"length",!0,!0,1],["miles per hour","mph",null,"speed",!1,!0,.44704],["millimetre of mercury","mmHg",null,"pressure",!1,!1,133.322],["minute","?",null,"angle",!1,!1,.000290888208665722],["minute","min",["mn"],"time",!1,!0,60],["modern teaspoon","tspm",null,"volume",!1,!0,5e-6],["mole","mol",null,"amount_of_substance",!0,!1,1],["morgen","Morgen",null,"area",!1,!0,2500],["n.u. of action","?",null,"action",!1,!1,105457168181818e-48],["n.u. of mass","m?",null,"mass",!1,!1,910938261616162e-45],["n.u. of speed","c?",null,"speed",!1,!1,299792458],["n.u. of time","?/(me?c??)",null,"time",!1,!1,128808866778687e-35],["nautical mile","M",["Nmi"],"length",!1,!0,1852],["newton","N",null,"force",!0,!0,1],["rsted","Oe ",null,"magnetic_field_intensity",!1,!1,79.5774715459477],["ohm","",null,"electric_resistance",!0,!1,1],["ounce mass","ozm",null,"mass",!1,!0,.028349523125],["pascal","Pa",null,"pressure",!0,!1,1],["pascal second","Pa?s",null,"dynamic_viscosity",!0,!1,1],["pferdestrke","PS",null,"power",!1,!0,735.49875],["phot","ph",null,"illuminance",!1,!1,1e-4],["pica (1/6 inch)","pica",null,"length",!1,!0,.00035277777777778],["pica (1/72 inch)","Pica",["Picapt"],"length",!1,!0,.00423333333333333],["poise","P",null,"dynamic_viscosity",!1,!1,.1],["pond","pond",null,"force",!1,!0,.00980665],["pound force","lbf",null,"force",!1,!0,4.4482216152605],["pound mass","lbm",null,"mass",!1,!0,.45359237],["quart","qt",null,"volume",!1,!0,.000946352946],["radian","rad",null,"angle",!0,!1,1],["second","?",null,"angle",!1,!1,484813681109536e-20],["second","s",["sec"],"time",!0,!0,1],["short hundredweight","cwt",["shweight"],"mass",!1,!0,45.359237],["siemens","S",null,"electrical_conductance",!0,!1,1],["sievert","Sv",null,"equivalent_dose",!0,!1,1],["slug","sg",null,"mass",!1,!0,14.59390294],["square ngstrm","ang2",["ang^2"],"area",!1,!0,1e-20],["square foot","ft2",["ft^2"],"area",!1,!0,.09290304],["square inch","in2",["in^2"],"area",!1,!0,64516e-8],["square light-year","ly2",["ly^2"],"area",!1,!0,895054210748189e17],["square meter","m?",null,"area",!0,!0,1],["square mile","mi2",["mi^2"],"area",!1,!0,2589988110336e-6],["square nautical mile","Nmi2",["Nmi^2"],"area",!1,!0,3429904],["square Pica","Pica2",["Picapt2","Pica^2","Picapt^2"],"area",!1,!0,1792111111111e-17],["square yard","yd2",["yd^2"],"area",!1,!0,.83612736],["statute mile","mi",null,"length",!1,!0,1609.344],["steradian","sr",null,"solid_angle",!0,!1,1],["stilb","sb",null,"luminance",!1,!1,1e-4],["stokes","St",null,"kinematic_viscosity",!1,!1,1e-4],["stone","stone",null,"mass",!1,!0,6.35029318],["tablespoon","tbs",null,"volume",!1,!0,147868e-10],["teaspoon","tsp",null,"volume",!1,!0,492892e-11],["tesla","T",null,"magnetic_flux_density",!0,!0,1],["thermodynamic calorie","c",null,"energy",!1,!0,4.184],["ton","ton",null,"mass",!1,!0,907.18474],["tonne","t",null,"mass",!1,!1,1e3],["U.K. pint","uk_pt",null,"volume",!1,!0,.00056826125],["U.S. bushel","bushel",null,"volume",!1,!0,.03523907],["U.S. oil barrel","barrel",null,"volume",!1,!0,.158987295],["U.S. pint","pt",["us_pt"],"volume",!1,!0,.000473176473],["U.S. survey mile","survey_mi",null,"length",!1,!0,1609.347219],["U.S. survey/statute acre","us_acre",null,"area",!1,!0,4046.87261],["volt","V",null,"voltage",!0,!1,1],["watt","W",null,"power",!0,!0,1],["watt-hour","Wh",["wh"],"energy",!1,!0,3600],["weber","Wb",null,"magnetic_flux",!0,!1,1],["yard","yd",null,"length",!1,!0,.9144],["year","yr",null,"time",!1,!0,31557600]],z={Yi:["yobi",80,12089258196146292e8,"Yi","yotta"],Zi:["zebi",70,11805916207174113e5,"Zi","zetta"],Ei:["exbi",60,1152921504606847e3,"Ei","exa"],Pi:["pebi",50,0x4000000000000,"Pi","peta"],Ti:["tebi",40,1099511627776,"Ti","tera"],Gi:["gibi",30,1073741824,"Gi","giga"],Mi:["mebi",20,1048576,"Mi","mega"],ki:["kibi",10,1024,"ki","kilo"]},J={Y:["yotta",1e24,"Y"],Z:["zetta",1e21,"Z"],E:["exa",1e18,"E"],P:["peta",1e15,"P"],T:["tera",1e12,"T"],G:["giga",1e9,"G"],M:["mega",1e6,"M"],k:["kilo",1e3,"k"],h:["hecto",100,"h"],e:["dekao",10,"e"],d:["deci",.1,"d"],c:["centi",.01,"c"],m:["milli",.001,"m"],u:["micro",1e-6,"u"],n:["nano",1e-9,"n"],p:["pico",1e-12,"p"],f:["femto",1e-15,"f"],a:["atto",1e-18,"a"],z:["zepto",1e-21,"z"],y:["yocto",1e-24,"y"]};let ot,gt=null,Lt=null,Bt=a,Qt=v,re=1,ie=1;for(let pe=0;pe<M.length;pe++)ot=M[pe][2]===null?[]:M[pe][2],(M[pe][1]===Bt||ot.indexOf(Bt)>=0)&&(gt=M[pe]),(M[pe][1]===Qt||ot.indexOf(Qt)>=0)&&(Lt=M[pe]);if(gt===null){const pe=z[a.substring(0,2)];let je=J[a.substring(0,1)];a.substring(0,2)==="da"&&(je=["dekao",10,"da"]),pe?(re=pe[2],Bt=a.substring(2)):je&&(re=je[1],Bt=a.substring(je[2].length));for(let Ae=0;Ae<M.length;Ae++)ot=M[Ae][2]===null?[]:M[Ae][2],(M[Ae][1]===Bt||ot.indexOf(Bt)>=0)&&(gt=M[Ae])}if(Lt===null){const pe=z[v.substring(0,2)];let je=J[v.substring(0,1)];v.substring(0,2)==="da"&&(je=["dekao",10,"da"]),pe?(ie=pe[2],Qt=v.substring(2)):je&&(ie=je[1],Qt=v.substring(je[2].length));for(let Ae=0;Ae<M.length;Ae++)ot=M[Ae][2]===null?[]:M[Ae][2],(M[Ae][1]===Qt||ot.indexOf(Qt)>=0)&&(Lt=M[Ae])}return gt===null||Lt===null||gt[3]!==Lt[3]?S:o*gt[6]*re/(Lt[6]*ie)},h.CORREL=function(o,a){return _t(o=Ht(tt(o)),a=Ht(tt(a)))?f:g.corrcoeff(o,a)},h.COS=function(o){return(o=et(o))instanceof Error?o:Math.cos(o)},h.COSH=function(o){return(o=et(o))instanceof Error?o:(Math.exp(o)+Math.exp(-o))/2},h.COT=function(o){return(o=et(o))instanceof Error?o:o===0?_:1/Math.tan(o)},h.COTH=function(o){if((o=et(o))instanceof Error)return o;if(o===0)return _;const a=Math.exp(2*o);return(a+1)/(a-1)},h.COUNT=nt,h.COUNTA=lt,h.COUNTBLANK=bt,h.COUNTIF=function(o,a){if(o=tt(o),a===void 0||a==="*")return o.length;let v=0;const M=Ze(a+"");for(let z=0;z<o.length;z++){const J=[He(o[z],Te)].concat(M);Be(J)&&v++}return v},h.COUNTIFS=function(){const o=U(arguments),a=new Array(tt(o[0]).length);for(let M=0;M<a.length;M++)a[M]=!0;for(let M=0;M<o.length;M+=2){const z=tt(o[M]),J=o[M+1];if(J!==void 0&&J!=="*"){const ot=Ze(J+"");for(let gt=0;gt<z.length;gt++){const Lt=[He(z[gt],Te)].concat(ot);a[gt]=a[gt]&&Be(Lt)}}}let v=0;for(let M=0;M<a.length;M++)a[M]&&v++;return v},h.COUPDAYBS=function(){throw new Error("COUPDAYBS is not implemented")},h.COUPDAYS=function(){throw new Error("COUPDAYS is not implemented")},h.COUPDAYSNC=function(){throw new Error("COUPDAYSNC is not implemented")},h.COUPNCD=function(){throw new Error("COUPNCD is not implemented")},h.COUPNUM=function(){throw new Error("COUPNUM is not implemented")},h.COUPPCD=function(){throw new Error("COUPPCD is not implemented")},h.COVAR=yi,h.COVARIANCE=Rt,h.COVARIANCEP=Ei,h.COVARIANCES=Gi,h.CRITBINOM=ji,h.CSC=function(o){return(o=et(o))instanceof Error?o:o===0?_:1/Math.sin(o)},h.CSCH=function(o){return(o=et(o))instanceof Error?o:o===0?_:2/(Math.exp(o)-Math.exp(-o))},h.CUMIPMT=function(o,a,v,M,z,J){if(_t(o=et(o),a=et(a),v=et(v)))return f;if(o<=0||a<=0||v<=0||M<1||z<1||M>z||J!==0&&J!==1)return E;const ot=vn(o,a,v,0,J);let gt=0;M===1&&(J===0&&(gt=-v),M++);for(let Lt=M;Lt<=z;Lt++)gt+=J===1?Tn(o,Lt-2,ot,v,1)-ot:Tn(o,Lt-1,ot,v,0);return gt*=o,gt},h.CUMPRINC=function(o,a,v,M,z,J){if(_t(o=et(o),a=et(a),v=et(v)))return f;if(o<=0||a<=0||v<=0||M<1||z<1||M>z||J!==0&&J!==1)return E;const ot=vn(o,a,v,0,J);let gt=0;M===1&&(gt=J===0?ot+v*o:ot,M++);for(let Lt=M;Lt<=z;Lt++)gt+=J>0?ot-(Tn(o,Lt-2,ot,v,1)-ot)*o:ot-Tn(o,Lt-1,ot,v,0)*o;return gt},h.DATE=function(o,a,v){let M;return _t(o=et(o),a=et(a),v=et(v))?M=f:(M=new Date(o,a-1,v),M.getFullYear()<0&&(M=E)),M},h.DATEDIF=pn,h.DATEVALUE=function(o){if(typeof o!="string")return f;const a=Date.parse(o);return isNaN(a)?f:new Date(o)},h.DAVERAGE=function(o,a,v){if(isNaN(a)&&typeof a!="string")return f;const M=Ue(o,v);let z=[];if(typeof a=="string"){const ot=Vt(o,a);z=pt(o[ot])}else z=pt(o[a]);let J=0;return F(M,ot=>{J+=z[ot]}),M.length===0?_:J/M.length},h.DAY=function(o){const a=$t(o);return a instanceof Error?a:a.getDate()},h.DAYS=Ne,h.DAYS360=on,h.DB=function(o,a,v,M,z){if(z=z===void 0?12:z,_t(o=et(o),a=et(a),v=et(v),M=et(M),z=et(z)))return f;if(o<0||a<0||v<0||M<0||[1,2,3,4,5,6,7,8,9,10,11,12].indexOf(z)===-1||M>v)return E;if(a>=o)return 0;const J=(1-Math.pow(a/o,1/v)).toFixed(3),ot=o*J*z/12;let gt=ot,Lt=0;const Bt=M===v?v-1:M;for(let Qt=2;Qt<=Bt;Qt++)Lt=(o-gt)*J,gt+=Lt;return M===1?ot:M===v?(o-gt)*J:Lt},h.DBCS=function(){throw new Error("DBCS is not implemented")},h.DCOUNT=function(o,a,v){if(isNaN(a)&&typeof a!="string")return f;const M=Ue(o,v);let z=[];if(typeof a=="string"){const ot=Vt(o,a);z=pt(o[ot])}else z=pt(o[a]);const J=[];return F(M,ot=>{J.push(z[ot])}),nt(J)},h.DCOUNTA=function(o,a,v){if(isNaN(a)&&typeof a!="string")return f;const M=Ue(o,v);let z=[];if(typeof a=="string"){const ot=Vt(o,a);z=pt(o[ot])}else z=pt(o[a]);const J=[];return F(M,ot=>{J.push(z[ot])}),lt(J)},h.DDB=function(o,a,v,M,z){if(z=z===void 0?2:z,_t(o=et(o),a=et(a),v=et(v),M=et(M),z=et(z)))return f;if(o<0||a<0||v<0||M<0||z<=0||M>v)return E;if(a>=o)return 0;let J=0,ot=0;for(let gt=1;gt<=M;gt++)ot=Math.min(z/v*(o-J),o-a-J),J+=ot;return ot},h.DEC2BIN=function(o,a){if((o=et(o))instanceof Error)return o;if(!/^-?[0-9]{1,3}$/.test(o)||o<-512||o>511)return E;if(o<0)return"1"+ze("0",9-(512+o).toString(2).length)+(512+o).toString(2);const v=parseInt(o,10).toString(2);return a===void 0?v:isNaN(a)?f:a<0?E:(a=Math.floor(a))>=v.length?ze("0",a-v.length)+v:E},h.DEC2HEX=function(o,a){if((o=et(o))instanceof Error)return o;if(!/^-?[0-9]{1,12}$/.test(o)||o<-549755813888||o>549755813887)return E;if(o<0)return(1099511627776+o).toString(16);const v=parseInt(o,10).toString(16);return a===void 0?v:isNaN(a)?f:a<0?E:(a=Math.floor(a))>=v.length?ze("0",a-v.length)+v:E},h.DEC2OCT=function(o,a){if((o=et(o))instanceof Error)return o;if(!/^-?[0-9]{1,9}$/.test(o)||o<-536870912||o>536870911)return E;if(o<0)return(1073741824+o).toString(8);const v=parseInt(o,10).toString(8);return a===void 0?v:isNaN(a)?f:a<0?E:(a=Math.floor(a))>=v.length?ze("0",a-v.length)+v:E},h.DECIMAL=function(o,a){return arguments.length<1?f:Ot(o=et(o),a=et(a))||(a===0?E:parseInt(o,a))},h.DEGREES=function(o){return(o=et(o))instanceof Error?o:180*o/Math.PI},h.DELTA=function(o,a){return a=a===void 0?0:a,_t(o=et(o),a=et(a))?f:o===a?1:0},h.DEVSQ=function(){const o=Ht(tt(arguments));if(o instanceof Error)return o;const a=g.mean(o);let v=0;for(let M=0;M<o.length;M++)v+=Math.pow(o[M]-a,2);return v},h.DGET=function(o,a,v){if(isNaN(a)&&typeof a!="string")return f;const M=Ue(o,v);let z=[];return z=pt(typeof a=="string"?o[Vt(o,a)]:o[a]),M.length===0?f:M.length>1?E:z[M[0]]},h.DISC=function(o,a,v,M,z){if(_t(o=$t(o),a=$t(a),v=et(v),M=et(M),z=(z=et(z))||0))return f;if(v<=0||M<=0)return E;if(o>=a)return f;let J,ot;switch(z){case 0:J=360,ot=on(o,a,!1);break;case 1:case 3:J=365,ot=pn(o,a,"D");break;case 2:J=360,ot=pn(o,a,"D");break;case 4:J=360,ot=on(o,a,!0);break;default:return E}return(M-v)/M*J/ot},h.DMAX=function(o,a,v){if(isNaN(a)&&typeof a!="string")return f;const M=Ue(o,v);let z=[];if(typeof a=="string"){const ot=Vt(o,a);z=pt(o[ot])}else z=pt(o[a]);let J=z[M[0]];return F(M,ot=>{J<z[ot]&&(J=z[ot])}),J},h.DMIN=function(o,a,v){if(isNaN(a)&&typeof a!="string")return f;const M=Ue(o,v);let z=[];if(typeof a=="string"){const ot=Vt(o,a);z=pt(o[ot])}else z=pt(o[a]);let J=z[M[0]];return F(M,ot=>{J>z[ot]&&(J=z[ot])}),J},h.DOLLAR=function(o,a=2){if(o=et(o),isNaN(o))return f;const v={style:"currency",currency:"USD",minimumFractionDigits:a>=0?a:0,maximumFractionDigits:a>=0?a:0},M=(o=un(o,a)).toLocaleString("en-US",v);return o<0?"$("+M.slice(2)+")":M},h.DOLLARDE=function(o,a){if(_t(o=et(o),a=et(a)))return f;if(a<0)return E;if(a>=0&&a<1)return _;a=parseInt(a,10);let v=parseInt(o,10);v+=o%1*Math.pow(10,Math.ceil(Math.log(a)/Math.LN10))/a;const M=Math.pow(10,Math.ceil(Math.log(a)/Math.LN2)+1);return v=Math.round(v*M)/M,v},h.DOLLARFR=function(o,a){if(_t(o=et(o),a=et(a)))return f;if(a<0)return E;if(a>=0&&a<1)return _;a=parseInt(a,10);let v=parseInt(o,10);return v+=o%1*Math.pow(10,-Math.ceil(Math.log(a)/Math.LN10))*a,v},h.DPRODUCT=function(o,a,v){if(isNaN(a)&&typeof a!="string")return f;const M=Ue(o,v);let z=[];if(typeof a=="string"){const gt=Vt(o,a);z=pt(o[gt])}else z=pt(o[a]);let J=[];F(M,gt=>{J.push(z[gt])}),J=Qe(J);let ot=1;return F(J,gt=>{ot*=gt}),ot},h.DSTDEV=function(o,a,v){if(isNaN(a)&&typeof a!="string")return f;const M=Ue(o,v);let z=[];if(typeof a=="string"){const ot=Vt(o,a);z=pt(o[ot])}else z=pt(o[a]);let J=[];return F(M,ot=>{J.push(z[ot])}),J=Qe(J),Ee.S(J)},h.DSTDEVP=function(o,a,v){if(isNaN(a)&&typeof a!="string")return f;const M=Ue(o,v);let z=[];if(typeof a=="string"){const ot=Vt(o,a);z=pt(o[ot])}else z=pt(o[a]);let J=[];return F(M,ot=>{J.push(z[ot])}),J=Qe(J),Ee.P(J)},h.DSUM=function(o,a,v){if(isNaN(a)&&typeof a!="string")return f;const M=Ue(o,v);let z=[];if(typeof a=="string"){const ot=Vt(o,a);z=pt(o[ot])}else z=pt(o[a]);const J=[];return F(M,ot=>{J.push(z[ot])}),En(J)},h.DURATION=function(){throw new Error("DURATION is not implemented")},h.DVAR=function(o,a,v){if(isNaN(a)&&typeof a!="string")return f;const M=Ue(o,v);let z=[];if(typeof a=="string"){const ot=Vt(o,a);z=pt(o[ot])}else z=pt(o[a]);const J=[];return F(M,ot=>{J.push(z[ot])}),kt.S(J)},h.DVARP=function(o,a,v){if(isNaN(a)&&typeof a!="string")return f;const M=Ue(o,v);let z=[];if(typeof a=="string"){const ot=Vt(o,a);z=pt(o[ot])}else z=pt(o[a]);const J=[];return F(M,ot=>{J.push(z[ot])}),kt.P(J)},h.EDATE=function(o,a){return(o=$t(o))instanceof Error?o:isNaN(a)?f:(a=parseInt(a,10),o.setMonth(o.getMonth()+a),o)},h.EFFECT=function(o,a){return _t(o=et(o),a=et(a))?f:o<=0||a<1?E:(a=parseInt(a,10),Math.pow(1+o/a,a)-1)},h.EOMONTH=function(o,a){return(o=$t(o))instanceof Error?o:isNaN(a)?f:(a=parseInt(a,10),new Date(o.getFullYear(),o.getMonth()+a+1,0))},h.ERF=Bn,h.ERFC=Vn,h.ERFCPRECISE=ri,h.ERFPRECISE=Wi,h.ERROR=dn,h.EVEN=function(o){return(o=et(o))instanceof Error?o:Se(o,-2,-1)},h.EXACT=function(o,a){return arguments.length!==2?S:Ot(o,a)||(o=Jt(o))===Jt(a)},h.EXP=function(o){return arguments.length<1?S:arguments.length>1?k:(o=et(o))instanceof Error?o:o=Math.exp(o)},h.EXPON=Mt,h.EXPONDIST=xi,h.F=Tt,h.FACT=ue,h.FACTDOUBLE=function o(a){if((a=et(a))instanceof Error)return a;const v=Math.floor(a);return v<=0?1:v*o(v-2)},h.FALSE=function(){return!1},h.FDIST=Ce,h.FDISTRT=Ui,h.FIND=function(o,a,v){if(arguments.length<2)return S;o=Jt(o),v=v===void 0?0:v;const M=(a=Jt(a)).indexOf(o,v-1);return M===-1?f:M+1},h.FINV=an,h.FINVRT=Wn,h.FISHER=function(o){return(o=et(o))instanceof Error?o:Math.log((1+o)/(1-o))/2},h.FISHERINV=function(o){if((o=et(o))instanceof Error)return o;const a=Math.exp(2*o);return(a-1)/(a+1)},h.FIXED=Fe,h.FLOOR=yn,h.FLOORMATH=wi,h.FLOORPRECISE=qi,h.FORECAST=jt,h.FREQUENCY=function(o,a){if(_t(o=Ht(tt(o)),a=Ht(tt(a))))return f;const v=o.length,M=a.length,z=[];for(let J=0;J<=M;J++){z[J]=0;for(let ot=0;ot<v;ot++)J===0?o[ot]<=a[0]&&(z[0]+=1):J<M?o[ot]>a[J-1]&&o[ot]<=a[J]&&(z[J]+=1):J===M&&o[ot]>a[M-1]&&(z[M]+=1)}return z},h.FTEST=oi,h.FV=Tn,h.FVSCHEDULE=function(o,a){if(_t(o=et(o),a=Ht(tt(a))))return f;const v=a.length;let M=o;for(let z=0;z<v;z++)M*=1+a[z];return M},h.GAMMA=It,h.GAMMADIST=Yi,h.GAMMAINV=Ci,h.GAMMALN=Zt,h.GAMMALNPRECISE=Zi,h.GAUSS=function(o){return(o=et(o))instanceof Error?o:g.normal.cdf(o,0,1)-.5},h.GCD=function(){const o=Ht(tt(arguments));if(o instanceof Error)return o;const a=o.length,v=o[0];let M=v<0?-v:v;for(let z=1;z<a;z++){const J=o[z];let ot=J<0?-J:J;for(;M&&ot;)M>ot?M%=ot:ot%=M;M+=ot}return M},h.GEOMEAN=function(){const o=Ht(tt(arguments));return o instanceof Error?o:g.geomean(o)},h.GESTEP=function(o,a){return _t(a=a||0,o=et(o))?o:o>=a?1:0},h.GROWTH=function(o,a,v,M){if((o=Ht(o))instanceof Error)return o;let z;if(a===void 0)for(a=[],z=1;z<=o.length;z++)a.push(z);if(v===void 0)for(v=[],z=1;z<=o.length;z++)v.push(z);if(_t(a=Ht(a),v=Ht(v)))return f;M===void 0&&(M=!0);const J=o.length;let ot,gt,Lt=0,Bt=0,Qt=0,re=0;for(z=0;z<J;z++){const pe=a[z],je=Math.log(o[z]);Lt+=pe,Bt+=je,Qt+=pe*je,re+=pe*pe}Lt/=J,Bt/=J,Qt/=J,re/=J,M?(ot=(Qt-Lt*Bt)/(re-Lt*Lt),gt=Bt-ot*Lt):(ot=Qt/re,gt=0);const ie=[];for(z=0;z<v.length;z++)ie.push(Math.exp(gt+ot*v[z]));return ie},h.HARMEAN=function(){const o=Ht(tt(arguments));if(o instanceof Error)return o;const a=o.length;let v=0;for(let M=0;M<a;M++)v+=1/o[M];return a/v},h.HEX2BIN=function(o,a){if(!/^[0-9A-Fa-f]{1,10}$/.test(o))return E;const v=!(o.length!==10||o.substring(0,1).toLowerCase()!=="f"),M=v?parseInt(o,16)-1099511627776:parseInt(o,16);if(M<-512||M>511)return E;if(v)return"1"+ze("0",9-(512+M).toString(2).length)+(512+M).toString(2);const z=M.toString(2);return a===void 0?z:isNaN(a)?f:a<0?E:(a=Math.floor(a))>=z.length?ze("0",a-z.length)+z:E},h.HEX2DEC=function(o){if(!/^[0-9A-Fa-f]{1,10}$/.test(o))return E;const a=parseInt(o,16);return a>=549755813888?a-1099511627776:a},h.HEX2OCT=function(o,a){if(!/^[0-9A-Fa-f]{1,10}$/.test(o))return E;const v=parseInt(o,16);if(v>536870911&&v<0xffe0000000)return E;if(v>=0xffe0000000)return(v-0xffc0000000).toString(8);const M=v.toString(8);return a===void 0?M:isNaN(a)?f:a<0?E:(a=Math.floor(a))>=M.length?ze("0",a-M.length)+M:E},h.HLOOKUP=function(o,a,v,M){return b(o,Pt(a),v,M)},h.HOUR=function(o){return(o=$t(o))instanceof Error?o:o.getHours()},h.HYPGEOM=ce,h.HYPGEOMDIST=Ki,h.IF=function(o,a,v){return o instanceof Error?o:((a=!(arguments.length>=2)||a)==null&&(a=0),(v=arguments.length===3&&v)==null&&(v=0),o?a:v)},h.IFERROR=function(o,a){return Ve(o)?a:o},h.IFNA=function(o,a){return o===S?a:o},h.IFS=function(){for(let o=0;o<arguments.length/2;o++)if(arguments[2*o])return arguments[2*o+1];return S},h.IMABS=In,h.IMAGINARY=Le,h.IMARGUMENT=zn,h.IMCONJUGATE=function(o){const a=Ie(o),v=Le(o);if(_t(a,v))return f;let M=o.substring(o.length-1);return M=M==="i"||M==="j"?M:"i",v!==0?$e(a,-v,M):o},h.IMCOS=wn,h.IMCOSH=Qn,h.IMCOT=function(o){return _t(Ie(o),Le(o))?f:gn(wn(o),ge(o))},h.IMCSC=function(o){return o===!0||o===!1?f:_t(Ie(o),Le(o))?E:gn("1",ge(o))},h.IMCSCH=function(o){return o===!0||o===!1?f:_t(Ie(o),Le(o))?E:gn("1",sn(o))},h.IMDIV=gn,h.IMEXP=function(o){const a=Ie(o),v=Le(o);if(_t(a,v))return f;let M=o.substring(o.length-1);M=M==="i"||M==="j"?M:"i";const z=Math.exp(a);return $e(z*Math.cos(v),z*Math.sin(v),M)},h.IMLN=function(o){const a=Ie(o),v=Le(o);if(_t(a,v))return f;let M=o.substring(o.length-1);return M=M==="i"||M==="j"?M:"i",$e(Math.log(Math.sqrt(a*a+v*v)),Math.atan(v/a),M)},h.IMLOG10=function(o){const a=Ie(o),v=Le(o);if(_t(a,v))return f;let M=o.substring(o.length-1);return M=M==="i"||M==="j"?M:"i",$e(Math.log(Math.sqrt(a*a+v*v))/Math.log(10),Math.atan(v/a)/Math.log(10),M)},h.IMLOG2=function(o){const a=Ie(o),v=Le(o);if(_t(a,v))return f;let M=o.substring(o.length-1);return M=M==="i"||M==="j"?M:"i",$e(Math.log(Math.sqrt(a*a+v*v))/Math.log(2),Math.atan(v/a)/Math.log(2),M)},h.IMPOWER=function(o,a){if(_t(a=et(a),Ie(o),Le(o)))return f;let v=o.substring(o.length-1);v=v==="i"||v==="j"?v:"i";const M=Math.pow(In(o),a),z=zn(o);return $e(M*Math.cos(a*z),M*Math.sin(a*z),v)},h.IMPRODUCT=function(){let o=arguments[0];if(!arguments.length)return f;for(let a=1;a<arguments.length;a++){const v=Ie(o),M=Le(o),z=Ie(arguments[a]),J=Le(arguments[a]);if(_t(v,M,z,J))return f;o=$e(v*z-M*J,v*J+M*z)}return o},h.IMREAL=Ie,h.IMSEC=function(o){return o===!0||o===!1||_t(Ie(o),Le(o))?f:gn("1",wn(o))},h.IMSECH=function(o){return _t(Ie(o),Le(o))?f:gn("1",Qn(o))},h.IMSIN=ge,h.IMSINH=sn,h.IMSQRT=function(o){if(_t(Ie(o),Le(o)))return f;let a=o.substring(o.length-1);a=a==="i"||a==="j"?a:"i";const v=Math.sqrt(In(o)),M=zn(o);return $e(v*Math.cos(M/2),v*Math.sin(M/2),a)},h.IMSUB=function(o,a){const v=Ie(o),M=Le(o),z=Ie(a),J=Le(a);if(_t(v,M,z,J))return f;const ot=o.substring(o.length-1),gt=a.substring(a.length-1);let Lt="i";return(ot==="j"||gt==="j")&&(Lt="j"),$e(v-z,M-J,Lt)},h.IMSUM=function(){if(!arguments.length)return f;const o=tt(arguments);let a=o[0];for(let v=1;v<o.length;v++){const M=Ie(a),z=Le(a),J=Ie(o[v]),ot=Le(o[v]);if(_t(M,z,J,ot))return f;a=$e(M+J,z+ot)}return a},h.IMTAN=function(o){return o===!0||o===!1||_t(Ie(o),Le(o))?f:gn(ge(o),wn(o))},h.INDEX=function(o,a,v){const M=Ot(o,a,v);if(M)return M;if(!Array.isArray(o))return f;const z=o.length>0&&!Array.isArray(o[0]);return z&&!v?(v=a,a=1):(v=v||1,a=a||1),v<0||a<0?f:z&&a===1&&v<=o.length?o[v-1]:a<=o.length&&v<=o[a-1].length?o[a-1][v-1]:w},h.INFO=function(){throw new Error("INFO is not implemented")},h.INT=function(o){return(o=et(o))instanceof Error?o:Math.floor(o)},h.INTERCEPT=function(o,a){return _t(o=Ht(o),a=Ht(a))?f:o.length!==a.length?S:jt(0,o,a)},h.INTRATE=function(){throw new Error("INTRATE is not implemented")},h.IPMT=Ln,h.IRR=function(o,a){if(a=a||0,_t(o=Ht(tt(o)),a=et(a)))return f;const v=(ie,pe,je)=>{const Ae=je+1;let qe=ie[0];for(let Re=1;Re<ie.length;Re++)qe+=ie[Re]/Math.pow(Ae,(pe[Re]-pe[0])/365);return qe},M=(ie,pe,je)=>{const Ae=je+1;let qe=0;for(let Re=1;Re<ie.length;Re++){const tn=(pe[Re]-pe[0])/365;qe-=tn*ie[Re]/Math.pow(Ae,tn+1)}return qe},z=[];let J=!1,ot=!1;for(let ie=0;ie<o.length;ie++)z[ie]=ie===0?0:z[ie-1]+365,o[ie]>0&&(J=!0),o[ie]<0&&(ot=!0);if(!J||!ot)return E;let gt,Lt,Bt,Qt=a=a===void 0?.1:a,re=!0;do Bt=v(o,z,Qt),gt=Qt-Bt/M(o,z,Qt),Lt=Math.abs(gt-Qt),Qt=gt,re=Lt>1e-10&&Math.abs(Bt)>1e-10;while(re);return Qt},h.ISBLANK=function(o){return o===null},h.ISERR=fn,h.ISERROR=Ve,h.ISEVEN=function(o){return!(1&Math.floor(Math.abs(o)))},h.ISFORMULA=function(){throw new Error("ISFORMULA is not implemented")},h.ISLOGICAL=Ke,h.ISNA=function(o){return o===S},h.ISNONTEXT=function(o){return typeof o!="string"},h.ISNUMBER=Xe,h.ISO=qn,h.ISODD=function(o){return!!(1&Math.floor(Math.abs(o)))},h.ISOWEEKNUM=jn,h.ISPMT=function(o,a,v,M){return _t(o=et(o),a=et(a),v=et(v),M=et(M))?f:M*o*(a/v-1)},h.ISREF=function(){throw new Error("ISREF is not implemented")},h.ISTEXT=D,h.KURT=function(){const o=Ht(tt(arguments));if(o instanceof Error)return o;const a=g.mean(o),v=o.length;let M=0;for(let z=0;z<v;z++)M+=Math.pow(o[z]-a,4);return M/=Math.pow(g.stdev(o,!0),4),v*(v+1)/((v-1)*(v-2)*(v-3))*M-3*(v-1)*(v-1)/((v-2)*(v-3))},h.LARGE=ve,h.LCM=function(){const o=Ht(tt(arguments));if(o instanceof Error)return o;for(var a,v,M,z,J=1;(M=o.pop())!==void 0;){if(M===0)return 0;for(;M>1;){if(M%2){for(a=3,v=Math.floor(Math.sqrt(M));a<=v&&M%a;a+=2);z=a<=v?a:M}else z=2;for(M/=z,J*=z,a=o.length;a;o[--a]%z==0&&(o[a]/=z)==1&&o.splice(a,1));}}return J},h.LEFT=function(o,a){return Ot(o,a)||(o=Jt(o),(a=et(a=a===void 0?1:a))instanceof Error||typeof o!="string"?f:o.substring(0,a))},h.LEN=function(o){return arguments.length===0?k:o instanceof Error?o:Array.isArray(o)?f:Jt(o).length},h.LINEST=Ct,h.LN=function(o){return(o=et(o))instanceof Error?o:o===0?E:Math.log(o)},h.LOG=function(o,a){return Ot(o=et(o),a=et(a))||(o===0||a===0?E:Math.log(o)/Math.log(a))},h.LOG10=function(o){return(o=et(o))instanceof Error?o:o===0?E:Math.log(o)/Math.log(10)},h.LOGEST=function(o,a){if(_t(o=Ht(tt(o)),a=Ht(tt(a)))||o.length!==a.length)return f;for(let M=0;M<o.length;M++)o[M]=Math.log(o[M]);const v=Ct(o,a);return v[0]=Math.round(1e6*Math.exp(v[0]))/1e6,v[1]=Math.round(1e6*Math.exp(v[1]))/1e6,v},h.LOGINV=si,h.LOGNORM=Ut,h.LOGNORMDIST=Xi,h.LOGNORMINV=cn,h.LOOKUP=function(o,a,v){a=tt(a),v=v?tt(v):a;const M=typeof o=="number";let z=S;for(let J=0;J<a.length;J++){if(a[J]===o)return v[J];if(M&&a[J]<=o||typeof a[J]=="string"&&a[J].localeCompare(o)<0)z=v[J];else if(M&&a[J]>o)return z}return z},h.LOWER=function(o){return arguments.length!==1?f:_t(o=Jt(o))?o:o.toLowerCase()},h.MATCH=function(o,a,v){if(!o||!a||(arguments.length===2&&(v=1),!((a=tt(a))instanceof Array))||v!==-1&&v!==0&&v!==1)return S;let M,z;for(let J=0;J<a.length;J++)if(v===1){if(a[J]===o)return J+1;a[J]<o&&(z?a[J]>z&&(M=J+1,z=a[J]):(M=J+1,z=a[J]))}else if(v===0){if(typeof o=="string"&&typeof a[J]=="string"){const ot=o.toLowerCase().replace(/\?/g,".").replace(/\*/g,".*").replace(/~/g,"\\");if(new RegExp("^"+ot+"$").test(a[J].toLowerCase()))return J+1}else if(a[J]===o)return J+1}else if(v===-1){if(a[J]===o)return J+1;a[J]>o&&(z?a[J]<z&&(M=J+1,z=a[J]):(M=J+1,z=a[J]))}return M||S},h.MAX=at,h.MAXA=function(){const o=tt(arguments),a=Ot.apply(void 0,o);if(a)return a;let v=Y(o);return v=v.map(M=>M??0),v.length===0?0:Math.max.apply(Math,v)},h.MDURATION=function(){throw new Error("MDURATION is not implemented")},h.MEDIAN=st,h.MID=function(o,a,v){if(a==null)return f;if(_t(a=et(a),v=et(v))||typeof o!="string")return v;const M=a-1,z=M+v;return o.substring(M,z)},h.MIN=vt,h.MINA=function(){const o=tt(arguments),a=Ot.apply(void 0,o);if(a)return a;let v=Y(o);return v=v.map(M=>M??0),v.length===0?0:Math.min.apply(Math,v)},h.MINUTE=function(o){return(o=$t(o))instanceof Error?o:o.getMinutes()},h.MIRR=function(o,a,v){if(_t(o=Ht(tt(o)),a=et(a),v=et(v)))return f;const M=o.length,z=[],J=[];for(let Lt=0;Lt<M;Lt++)o[Lt]<0?z.push(o[Lt]):J.push(o[Lt]);const ot=-di(v,J)*Math.pow(1+v,M-1),gt=di(a,z)*(1+a);return Math.pow(ot/gt,1/(M-1))-1},h.MMULT=function(o,a){return!Array.isArray(o)||!Array.isArray(a)||o.some(v=>!v.length)||a.some(v=>!v.length)||yt(o).some(v=>typeof v!="number")||yt(a).some(v=>typeof v!="number")||o[0].length!==a.length?f:Array(o.length).fill(0).map(()=>Array(a[0].length).fill(0)).map((v,M)=>v.map((z,J)=>o[M].reduce((ot,gt,Lt)=>ot+gt*a[Lt][J],0)))},h.MOD=function(o,a){const v=Ot(o=et(o),a=et(a));if(v)return v;if(a===0)return _;let M=Math.abs(o%a);return M=o<0?a-M:M,a>0?M:-M},h.MODE=R,h.MODEMULT=Ji,h.MODESNGL=Ai,h.MONTH=function(o){return(o=$t(o))instanceof Error?o:o.getMonth()+1},h.MROUND=function(o,a){return Ot(o=et(o),a=et(a))||(o*a==0?0:o*a<0?E:Math.round(o/a)*a)},h.MULTINOMIAL=function(){const o=Ht(tt(arguments));if(o instanceof Error)return o;let a=0,v=1;for(let M=0;M<o.length;M++)a+=o[M],v*=ue(o[M]);return ue(a)/v},h.MUNIT=function(o){return arguments.length>1?S:!(o=parseInt(o))||o<=0?f:Array(o).fill(0).map(()=>Array(o).fill(0)).map((a,v)=>(a[v]=1,a))},h.N=function(o){return Xe(o)?o:o instanceof Date?o.getTime():o===!0?1:o===!1?0:Ve(o)?o:0},h.NA=function(){return S},h.NEGBINOM=Q,h.NEGBINOMDIST=_n,h.NETWORKDAYS=mn,h.NETWORKDAYSINTL=Mi,h.NOMINAL=function(o,a){return _t(o=et(o),a=et(a))?f:o<=0||a<1?E:(a=parseInt(a,10),(Math.pow(o+1,1/a)-1)*a)},h.NORM=ut,h.NORMDIST=Ti,h.NORMINV=ai,h.NORMSDIST=Qi,h.NORMSINV=Li,h.NOT=function(o){return typeof o=="string"?f:o instanceof Error?o:!o},h.NOW=function(){return new Date},h.NPER=function(o,a,v,M,z){if(z=z===void 0?0:z,M=M===void 0?0:M,_t(o=et(o),a=et(a),v=et(v),M=et(M),z=et(z)))return f;if(o===0)return-(v+M)/a;{const J=a*(1+o*z)-M*o,ot=v*o+a*(1+o*z);return Math.log(J/ot)/Math.log(1+o)}},h.NPV=di,h.NUMBERVALUE=function(o,a,v){return typeof(o=Dt(o)?o:"")=="number"?o:typeof o!="string"?S:(a=a===void 0?".":a,v=v===void 0?",":v,Number(o.replace(a,".").replace(v,"")))},h.OCT2BIN=function(o,a){if(!/^[0-7]{1,10}$/.test(o))return E;const v=!(o.length!==10||o.substring(0,1)!=="7"),M=v?parseInt(o,8)-1073741824:parseInt(o,8);if(M<-512||M>511)return E;if(v)return"1"+ze("0",9-(512+M).toString(2).length)+(512+M).toString(2);const z=M.toString(2);return a===void 0?z:isNaN(a)?f:a<0?E:(a=Math.floor(a))>=z.length?ze("0",a-z.length)+z:E},h.OCT2DEC=function(o){if(!/^[0-7]{1,10}$/.test(o))return E;const a=parseInt(o,8);return a>=536870912?a-1073741824:a},h.OCT2HEX=function(o,a){if(!/^[0-7]{1,10}$/.test(o))return E;const v=parseInt(o,8);if(v>=536870912)return"ff"+(v+3221225472).toString(16);const M=v.toString(16);return a===void 0?M:isNaN(a)?f:a<0?E:(a=Math.floor(a))>=M.length?ze("0",a-M.length)+M:E},h.ODD=function(o){if((o=et(o))instanceof Error)return o;let a=Math.ceil(Math.abs(o));return a=1&a?a:a+1,o>=0?a:-a},h.ODDFPRICE=function(){throw new Error("ODDFPRICE is not implemented")},h.ODDFYIELD=function(){throw new Error("ODDFYIELD is not implemented")},h.ODDLPRICE=function(){throw new Error("ODDLPRICE is not implemented")},h.ODDLYIELD=function(){throw new Error("ODDLYIELD is not implemented")},h.OR=function(){const o=tt(arguments);let a=f;for(let v=0;v<o.length;v++){if(o[v]instanceof Error)return o[v];o[v]!==void 0&&o[v]!==null&&typeof o[v]!="string"&&(a===f&&(a=!1),o[v]&&(a=!0))}return a},h.PDURATION=function(o,a,v){return _t(o=et(o),a=et(a),v=et(v))?f:o<=0?E:(Math.log(v)-Math.log(a))/Math.log(1+o)},h.PEARSON=St,h.PERCENTILE=ct,h.PERCENTILEEXC=Si,h.PERCENTILEINC=tr,h.PERCENTRANK=xt,h.PERCENTRANKEXC=er,h.PERCENTRANKINC=li,h.PERMUT=function(o,a){return _t(o=et(o),a=et(a))?f:ue(o)/ue(o-a)},h.PERMUTATIONA=function(o,a){return _t(o=et(o),a=et(a))?f:Math.pow(o,a)},h.PHI=function(o){return(o=et(o))instanceof Error?f:Math.exp(-.5*o*o)/2.5066282746310002},h.PI=function(){return Math.PI},h.PMT=vn,h.POISSON=Ft,h.POISSONDIST=nr,h.POWER=gi,h.PPMT=function(o,a,v,M,z,J){return z=z||0,J=J||0,_t(o=et(o),v=et(v),M=et(M),z=et(z),J=et(J))?f:vn(o,v,M,z,J)-Ln(o,a,v,M,z,J)},h.PRICE=function(){throw new Error("PRICE is not implemented")},h.PRICEDISC=function(o,a,v,M,z){if(_t(o=$t(o),a=$t(a),v=et(v),M=et(M),z=(z=et(z))||0))return f;if(v<=0||M<=0)return E;if(o>=a)return f;let J,ot;switch(z){case 0:J=360,ot=on(o,a,!1);break;case 1:case 3:J=365,ot=pn(o,a,"D");break;case 2:J=360,ot=pn(o,a,"D");break;case 4:J=360,ot=on(o,a,!0);break;default:return E}return M-v*M*ot/J},h.PRICEMAT=function(){throw new Error("PRICEMAT is not implemented")},h.PROB=function(o,a,v,M){if(v===void 0)return 0;if(M=M===void 0?v:M,_t(o=Ht(tt(o)),a=Ht(tt(a)),v=et(v),M=et(M)))return f;if(v===M)return o.indexOf(v)>=0?a[o.indexOf(v)]:0;const z=o.sort((gt,Lt)=>gt-Lt),J=z.length;let ot=0;for(let gt=0;gt<J;gt++)z[gt]>=v&&z[gt]<=M&&(ot+=a[o.indexOf(z[gt])]);return ot},h.PRODUCT=Xn,h.PRONETIC=function(){throw new Error("PRONETIC is not implemented")},h.PROPER=function(o){return _t(o)?o:isNaN(o)&&typeof o=="number"?f:(o=Jt(o)).replace(/\w\S*/g,a=>a.charAt(0).toUpperCase()+a.substr(1).toLowerCase())},h.PV=function(o,a,v,M,z){return M=M||0,z=z||0,_t(o=et(o),a=et(a),v=et(v),M=et(M),z=et(z))?f:o===0?-v*a-M:((1-Math.pow(1+o,a))/o*v*(1+o*z)-M)/Math.pow(1+o,a)},h.QUARTILE=Yt,h.QUARTILEEXC=Ni,h.QUARTILEINC=Ii,h.QUOTIENT=function(o,a){return Ot(o=et(o),a=et(a))||parseInt(o/a,10)},h.RADIANS=function(o){return(o=et(o))instanceof Error?o:o*Math.PI/180},h.RAND=function(){return Math.random()},h.RANDBETWEEN=function(o,a){return Ot(o=et(o),a=et(a))||o+Math.ceil((a-o+1)*Math.random())-1},h.RANK=wt,h.RANKAVG=Yn,h.RANKEQ=Mn,h.RATE=function(o,a,v,M,z,J){if(J=J===void 0?.01:J,M=M===void 0?0:M,z=z===void 0?0:z,_t(o=et(o),a=et(a),v=et(v),M=et(M),z=et(z),J=et(J)))return f;const ot=1e-10;let gt=J;z=z?1:0;for(let Lt=0;Lt<20;Lt++){if(gt<=-1)return E;let Bt,Qt,re;if(Math.abs(gt)<ot?Bt=v*(1+o*gt)+a*(1+gt*z)*o+M:(Qt=Math.pow(1+gt,o),Bt=v*Qt+a*(1/gt+z)*(Qt-1)+M),Math.abs(Bt)<ot)return gt;if(Math.abs(gt)<ot)re=v*o+a*z*o;else{Qt=Math.pow(1+gt,o);const ie=o*Math.pow(1+gt,o-1);re=v*ie+a*(1/gt+z)*ie+a*(-1/(gt*gt))*(Qt-1)}gt-=Bt/re}return gt},h.RECEIVED=function(){throw new Error("RECEIVED is not implemented")},h.REPLACE=function(o,a,v,M){return _t(a=et(a),v=et(v))||typeof o!="string"||typeof M!="string"?f:o.substr(0,a-1)+M+o.substr(a-1+v)},h.REPT=ze,h.RIGHT=function(o,a){return Ot(o,a)||(o=Jt(o),(a=et(a=a===void 0?1:a))instanceof Error?a:o.substring(o.length-a))},h.ROMAN=function(o){if((o=et(o))instanceof Error)return o;const a=String(o).split(""),v=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];let M="",z=3;for(;z--;)M=(v[+a.pop()+10*z]||"")+M;return new Array(+a.join("")+1).join("M")+M},h.ROUND=un,h.ROUNDDOWN=function(o,a){return Ot(o=et(o),a=et(a))||(o>0?1:-1)*Math.floor(Math.abs(o)*Math.pow(10,a))/Math.pow(10,a)},h.ROUNDUP=function(o,a){return Ot(o=et(o),a=et(a))||(o>0?1:-1)*Math.ceil(Math.abs(o)*Math.pow(10,a))/Math.pow(10,a)},h.ROW=function(o,a){return arguments.length!==2?S:a<0?E:o instanceof Array&&typeof a=="number"?o.length!==0?g.row(o,a):void 0:f},h.ROWS=function(o){return arguments.length!==1?S:o instanceof Array?o.length===0?0:g.rows(o):f},h.RRI=function(o,a,v){return _t(o=et(o),a=et(a),v=et(v))?f:o===0||a===0?E:Math.pow(v/a,1/o)-1},h.RSQ=function(o,a){return _t(o=Ht(tt(o)),a=Ht(tt(a)))?f:Math.pow(St(o,a),2)},h.SEARCH=function(o,a,v){let M;return typeof o!="string"||typeof a!="string"?f:(v=v===void 0?0:v,M=a.toLowerCase().indexOf(o.toLowerCase(),v-1)+1,M===0?f:M)},h.SEC=function(o){return(o=et(o))instanceof Error?o:1/Math.cos(o)},h.SECH=function(o){return(o=et(o))instanceof Error?o:2/(Math.exp(o)+Math.exp(-o))},h.SECOND=function(o){return(o=$t(o))instanceof Error?o:o.getSeconds()},h.SERIESSUM=function(o,a,v,M){if(_t(o=et(o),a=et(a),v=et(v),M=Ht(M)))return f;let z=M[0]*Math.pow(o,a);for(let J=1;J<M.length;J++)z+=M[J]*Math.pow(o,a+J*v);return z},h.SHEET=function(){throw new Error("SHEET is not implemented")},h.SHEETS=function(){throw new Error("SHEETS is not implemented")},h.SIGN=function(o){return(o=et(o))instanceof Error?o:o<0?-1:o===0?0:1},h.SIN=function(o){return(o=et(o))instanceof Error?o:Math.sin(o)},h.SINH=function(o){return(o=et(o))instanceof Error?o:(Math.exp(o)-Math.exp(-o))/2},h.SKEW=te,h.SKEWP=ir,h.SLN=function(o,a,v){return _t(o=et(o),a=et(a),v=et(v))?f:v===0?E:(o-a)/v},h.SLOPE=function(o,a){if(_t(o=Ht(tt(o)),a=Ht(tt(a))))return f;const v=g.mean(a),M=g.mean(o),z=a.length;let J=0,ot=0;for(let gt=0;gt<z;gt++)J+=(a[gt]-v)*(o[gt]-M),ot+=Math.pow(a[gt]-v,2);return J/ot},h.SMALL=le,h.SORT=function(o,a=1,v=1,M=!1){if(!o||!Array.isArray(o))return S;if(o.length===0)return 0;if(!(a=et(a))||a<1||(v=et(v))!==1&&v!==-1)return f;if(typeof(M=oe(M))!="boolean")return C;const z=gt=>gt.sort((Lt,Bt)=>(Lt=Jt(Lt[a-1]),Bt=Jt(Bt[a-1]),v===1?Lt<Bt?-1*v:v:Lt>Bt?v:-1*v)),J=rt(o),ot=M?Pt(J):J;return a>=1&&a<=ot[0].length?M?Pt(z(ot)):z(ot):f},h.SQRT=function(o){return(o=et(o))instanceof Error?o:o<0?E:Math.sqrt(o)},h.SQRTPI=function(o){return(o=et(o))instanceof Error?o:Math.sqrt(o*Math.PI)},h.STANDARDIZE=function(o,a,v){return _t(o=et(o),a=et(a),v=et(v))?f:(o-a)/v},h.STDEV=Ee,h.STDEVA=function(){const o=zt.apply(this,arguments);return Math.sqrt(o)},h.STDEVP=Un,h.STDEVPA=function(){const o=ne.apply(this,arguments);let a=Math.sqrt(o);return isNaN(a)&&(a=E),a},h.STDEVS=nn,h.STEYX=function(o,a){if(_t(o=Ht(tt(o)),a=Ht(tt(a))))return f;const v=g.mean(a),M=g.mean(o),z=a.length;let J=0,ot=0,gt=0;for(let Lt=0;Lt<z;Lt++)J+=Math.pow(o[Lt]-M,2),ot+=(a[Lt]-v)*(o[Lt]-M),gt+=Math.pow(a[Lt]-v,2);return Math.sqrt((J-ot*ot/gt)/(z-2))},h.SUBSTITUTE=function(o,a,v,M){if(arguments.length<3)return S;if(o&&a){if(M===void 0)return o.split(a).join(v);{if(M=Math.floor(Number(M)),Number.isNaN(M)||M<=0)return f;let z=0,J=0;for(;z>-1&&o.indexOf(a,z)>-1;)if(z=o.indexOf(a,z+1),J++,z>-1&&J===M)return o.substring(0,z)+v+o.substring(z+a.length);return o}}return o},h.SUBTOTAL=function(o,a){if((o=et(o))instanceof Error)return o;switch(o){case 1:case 101:return d(a);case 2:case 102:return nt(a);case 3:case 103:return lt(a);case 4:case 104:return at(a);case 5:case 105:return vt(a);case 6:case 106:return Xn(a);case 7:case 107:return Ee.S(a);case 8:case 108:return Ee.P(a);case 9:case 109:return En(a);case 10:case 110:return kt.S(a);case 11:case 111:return kt.P(a)}},h.SUM=En,h.SUMIF=function(o,a,v){if(o=tt(o),v=v?tt(v):o,o instanceof Error)return o;if(a==null||a instanceof Error)return 0;let M=0;const z=a==="*",J=z?null:Ze(a+"");for(let ot=0;ot<o.length;ot++){const gt=o[ot],Lt=v[ot];if(z)M+=gt;else{const Bt=[He(gt,Te)].concat(J);M+=Be(Bt)?Lt:0}}return M},h.SUMIFS=function(){const o=U(arguments),a=Ht(tt(o.shift()));if(a instanceof Error)return a;const v=o,M=v.length/2;for(let J=0;J<M;J++)v[2*J]=tt(v[2*J]);let z=0;for(let J=0;J<a.length;J++){let ot=!1;for(let gt=0;gt<M;gt++){const Lt=v[2*gt][J],Bt=v[2*gt+1];let Qt=!1;if(Bt===void 0||Bt==="*")Qt=!0;else{const re=Ze(Bt+""),ie=[He(Lt,Te)].concat(re);Qt=Be(ie)}if(!Qt){ot=!1;break}ot=!0}ot&&(z+=a[J])}return z},h.SUMPRODUCT=function(){if(!arguments||arguments.length===0)return f;const o=arguments.length+1;let a,v,M,z,J=0;for(let ot=0;ot<arguments[0].length;ot++)if(arguments[0][ot]instanceof Array)for(let gt=0;gt<arguments[0][ot].length;gt++){for(a=1,v=1;v<o;v++){const Lt=arguments[v-1][ot][gt];if(Lt instanceof Error)return Lt;if(z=et(Lt),z instanceof Error)return z;a*=z}J+=a}else{for(a=1,v=1;v<o;v++){const gt=arguments[v-1][ot];if(gt instanceof Error)return gt;if(M=et(gt),M instanceof Error)return M;a*=M}J+=a}return J},h.SUMSQ=function(){const o=Ht(tt(arguments));if(o instanceof Error)return o;let a=0;const v=o.length;for(let M=0;M<v;M++)a+=Xe(o[M])?o[M]*o[M]:0;return a},h.SUMX2MY2=function(o,a){if(_t(o=Ht(tt(o)),a=Ht(tt(a))))return f;let v=0;for(let M=0;M<o.length;M++)v+=o[M]*o[M]-a[M]*a[M];return v},h.SUMX2PY2=function(o,a){if(_t(o=Ht(tt(o)),a=Ht(tt(a))))return f;let v=0;o=Ht(tt(o)),a=Ht(tt(a));for(let M=0;M<o.length;M++)v+=o[M]*o[M]+a[M]*a[M];return v},h.SUMXMY2=function(o,a){if(_t(o=Ht(tt(o)),a=Ht(tt(a))))return f;let v=0;o=tt(o),a=tt(a);for(let M=0;M<o.length;M++)v+=Math.pow(o[M]-a[M],2);return v},h.SWITCH=function(){let o;if(arguments.length>0){const a=arguments[0],v=arguments.length-1,M=Math.floor(v/2);let z=!1;const J=v%2!=0,ot=v%2==0?null:arguments[arguments.length-1];if(M){for(let gt=0;gt<M;gt++)if(a===arguments[2*gt+1]){o=arguments[2*gt+2],z=!0;break}}z||(o=J?ot:S)}else o=f;return o},h.SYD=function(o,a,v,M){return _t(o=et(o),a=et(a),v=et(v),M=et(M))?f:v===0||M<1||M>v?E:(o-a)*(v-(M=parseInt(M,10))+1)*2/(v*(v+1))},h.T=function(o){return o instanceof Error||typeof o=="string"?o:""},h.TAN=function(o){return(o=et(o))instanceof Error?o:Math.tan(o)},h.TANH=function(o){if((o=et(o))instanceof Error)return o;const a=Math.exp(2*o);return(a-1)/(a+1)},h.TBILLEQ=function(o,a,v){return _t(o=$t(o),a=$t(a),v=et(v))?f:v<=0||o>a||a-o>31536e6?E:365*v/(360-v*on(o,a,!1))},h.TBILLPRICE=function(o,a,v){return _t(o=$t(o),a=$t(a),v=et(v))?f:v<=0||o>a||a-o>31536e6?E:100*(1-v*on(o,a,!1)/360)},h.TBILLYIELD=function(o,a,v){return _t(o=$t(o),a=$t(a),v=et(v))?f:v<=0||o>a||a-o>31536e6?E:360*(100-v)/(v*on(o,a,!1))},h.TDIST=Oi,h.TDISTRT=Pi,h.TEXT=function(o,a){if(o===void 0||o instanceof Error||a instanceof Error)return S;if(a==null)return"";if(typeof a=="number")return String(a);if(typeof a!="string")return f;const v=a.startsWith("$")?"$":"",M=a.endsWith("%");return M&&(o*=100),o=(o=Fe(o,(a=a.replace(/%/g,"").replace(/\$/g,"")).split(".")[1].match(/0/g).length,!a.includes(","))).startsWith("-")?"-"+v+(o=o.replace("-","")):v+o,M&&(o+="%"),o},h.TEXTJOIN=function(o,a,...v){if(typeof a!="boolean"&&(a=oe(a)),arguments.length<3)return S;o=o??"";let M=tt(v),z=a?M.filter(J=>J):M;if(Array.isArray(o)){o=tt(o);let J=z.map(gt=>[gt]),ot=0;for(let gt=0;gt<J.length-1;gt++)J[gt].push(o[ot]),ot++,ot===o.length&&(ot=0);return z=tt(J),z.join("")}return z.join(o)},h.TIME=function(o,a,v){return _t(o=et(o),a=et(a),v=et(v))?f:o<0||a<0||v<0?E:(3600*o+60*a+v)/86400},h.TIMEVALUE=function(o){return(o=$t(o))instanceof Error?o:(3600*o.getHours()+60*o.getMinutes()+o.getSeconds())/86400},h.TINV=rr,h.TODAY=function(){return we(new Date)},h.TRANSPOSE=function(o){return o?Pt(rt(o)):S},h.TREND=function(o,a,v){if(_t(o=Ht(tt(o)),a=Ht(tt(a)),v=Ht(tt(v))))return f;const M=Ct(o,a),z=M[0],J=M[1],ot=[];return v.forEach(gt=>{ot.push(z*gt+J)}),ot},h.TRIM=function(o){return(o=Jt(o))instanceof Error?o:o.replace(/\s+/g," ").trim()},h.TRIMMEAN=function(o,a){if(_t(o=Ht(tt(o)),a=et(a)))return f;const v=yn(o.length*a,2)/2;return g.mean((z=(z=v)||1,(M=pt(o.sort((J,ot)=>J-ot),v))&&typeof M.slice=="function"?M.slice(0,M.length-z):M));var M,z},h.TRUE=function(){return!0},h.TRUNC=function(o,a){return Ot(o=et(o),a=et(a))||(o>0?1:-1)*Math.floor(Math.abs(o)*Math.pow(10,a))/Math.pow(10,a)},h.TTEST=ui,h.TYPE=function(o){return Xe(o)?1:D(o)?2:Ke(o)?4:Ve(o)?16:Array.isArray(o)?64:void 0},h.UNICHAR=Fn,h.UNICODE=Hn,h.UNIQUE=H,h.UPPER=function(o){return(o=Jt(o))instanceof Error?o:o.toUpperCase()},h.VALUE=function(o){const a=Ot(o);if(a)return a;if(typeof o=="number")return o;if(Dt(o)||(o=""),typeof o!="string")return f;const v=/(%)$/.test(o)||/^(%)/.test(o);if((o=(o=(o=o.replace(/^[^0-9-]{0,3}/,"")).replace(/[^0-9]{0,3}$/,"")).replace(/[ ,]/g,""))==="")return 0;let M=Number(o);return isNaN(M)?f:(M=M||0,v&&(M*=.01),M)},h.VAR=kt,h.VARA=zt,h.VARP=ci,h.VARPA=ne,h.VARS=or,h.VDB=function(){throw new Error("VDB is not implemented")},h.VLOOKUP=b,h.WEEKDAY=function(o,a){if((o=$t(o))instanceof Error)return o;a===void 0&&(a=1);const v=o.getDay();return vi[a][v]},h.WEEKNUM=function(o,a){if((o=$t(o))instanceof Error)return o;if(a===void 0&&(a=1),a===21)return jn(o);const v=On[a];let M=new Date(o.getFullYear(),0,1);const z=M.getDay()<v?1:0;return M-=24*Math.abs(M.getDay()-v)*60*60*1e3,Math.floor((o-M)/864e5/7+1)+z},h.WEIBULL=Me,h.WEIBULLDIST=sr,h.WORKDAY=Nn,h.WORKDAYINTL=Di,h.XIRR=function(o,a,v){if(_t(o=Ht(tt(o)),a=fe(tt(a)),v=et(v)))return f;const M=(ie,pe,je)=>{const Ae=je+1;let qe=ie[0];for(let Re=1;Re<ie.length;Re++)qe+=ie[Re]/Math.pow(Ae,Ne(pe[Re],pe[0])/365);return qe},z=(ie,pe,je)=>{const Ae=je+1;let qe=0;for(let Re=1;Re<ie.length;Re++){const tn=Ne(pe[Re],pe[0])/365;qe-=tn*ie[Re]/Math.pow(Ae,tn+1)}return qe};let J=!1,ot=!1;for(let ie=0;ie<o.length;ie++)o[ie]>0&&(J=!0),o[ie]<0&&(ot=!0);if(!J||!ot)return E;let gt,Lt,Bt,Qt=v=v||.1,re=!0;do Bt=M(o,a,Qt),gt=Qt-Bt/z(o,a,Qt),Lt=Math.abs(gt-Qt),Qt=gt,re=Lt>1e-10&&Math.abs(Bt)>1e-10;while(re);return Qt},h.XNPV=function(o,a,v){if(_t(o=et(o),a=Ht(tt(a)),v=fe(tt(v))))return f;let M=0;for(let z=0;z<a.length;z++)M+=a[z]/Math.pow(1+o,Ne(v[z],v[0])/365);return M},h.XOR=function(){const o=tt(arguments);let a=f;for(let v=0;v<o.length;v++){if(o[v]instanceof Error)return o[v];o[v]!==void 0&&o[v]!==null&&typeof o[v]!="string"&&(a===f&&(a=0),o[v]&&a++)}return a===f?a:!!(1&Math.floor(Math.abs(a)))},h.YEAR=function(o){return(o=$t(o))instanceof Error?o:o.getFullYear()},h.YEARFRAC=Dn,h.YIELD=function(){throw new Error("YIELD is not implemented")},h.YIELDDISC=function(){throw new Error("YIELDDISC is not implemented")},h.YIELDMAT=function(){throw new Error("YIELDMAT is not implemented")},h.Z=_e,h.ZTEST=ar,h.utils=Ri}},s={};function c(j){var h=s[j];if(h!==void 0)return h.exports;var u=s[j]={exports:{}};return r[j].call(u.exports,u,u.exports,c),u.exports}c.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var p=c(960);e=p}(),e)},138:function(module,__unused_webpack_exports,__webpack_require__){if(!formula)var formula=__webpack_require__(243);var factory;factory=function(){var Version=(info={title:"Jspreadsheet",version:"4.13.2",type:"CE",host:"https://bossanova.uk/jspreadsheet",license:"MIT",print:function(){return[this.title+" "+this.type+" "+this.version,this.host,this.license].join(`\r
`)}},function(){return info}),info,isFormula=function(t){var e=(""+t)[0];return e=="="||e=="#"},getMask=function(t){if(t.format||t.mask||t.locale){var e={};return t.mask?e.mask=t.mask:t.format?e.mask=t.format:(e.locale=t.locale,e.options=t.options),t.decimal&&(e.options||(e.options={}),e.options={decimal:t.decimal}),e}return null},jexcel=function(el,options){var obj={options:{}};if(!(el instanceof Element||el instanceof HTMLDocument))return console.error("Jspreadsheet: el is not a valid DOM element"),!1;if(el.tagName=="TABLE"){if(!(options=jexcel.createFromTable(el,options)))return console.error("Jspreadsheet: el is not a valid DOM element"),!1;var div=document.createElement("div");el.parentNode.insertBefore(div,el),el.remove(),el=div}var defaults={url:null,method:"GET",requestVariables:null,data:null,sorting:null,copyCompatibility:!1,root:null,rows:[],columns:[],colHeaders:[],colWidths:[],colAlignments:[],nestedHeaders:null,defaultColWidth:50,defaultColAlign:"center",defaultRowHeight:null,minSpareRows:0,minSpareCols:0,minDimensions:[0,0],allowExport:!0,includeHeadersOnDownload:!1,includeHeadersOnCopy:!1,columnSorting:!0,columnDrag:!1,columnResize:!0,rowResize:!1,rowDrag:!0,editable:!0,allowInsertRow:!0,allowManualInsertRow:!0,allowInsertColumn:!0,allowManualInsertColumn:!0,allowDeleteRow:!0,allowDeletingAllRows:!1,allowDeleteColumn:!0,allowRenameColumn:!0,allowComments:!1,wordWrap:!1,imageOptions:null,csv:null,csvFileName:"jspreadsheet",csvHeaders:!0,csvDelimiter:",",parseTableFirstRowAsHeader:!1,parseTableAutoCellType:!1,selectionCopy:!0,mergeCells:{},toolbar:null,search:!1,pagination:!1,paginationOptions:null,fullscreen:!1,lazyLoading:!1,loadingSpin:!1,tableOverflow:!1,tableHeight:"300px",tableWidth:null,textOverflow:!1,meta:null,style:null,classes:null,parseFormulas:!0,autoIncrement:!0,autoCasting:!0,secureFormulas:!0,stripHTML:!0,stripHTMLOnCopy:!1,filters:!1,footers:null,onundo:null,onredo:null,onload:null,onchange:null,oncomments:null,onbeforechange:null,onafterchanges:null,onbeforeinsertrow:null,oninsertrow:null,onbeforeinsertcolumn:null,oninsertcolumn:null,onbeforedeleterow:null,ondeleterow:null,onbeforedeletecolumn:null,ondeletecolumn:null,onmoverow:null,onmovecolumn:null,onresizerow:null,onresizecolumn:null,onsort:null,onselection:null,oncopy:null,onpaste:null,onbeforepaste:null,onmerge:null,onfocus:null,onblur:null,onchangeheader:null,oncreateeditor:null,oneditionstart:null,oneditionend:null,onchangestyle:null,onchangemeta:null,onchangepage:null,onbeforesave:null,onsave:null,onevent:null,persistance:!1,updateTable:null,detachForUpdates:!1,freezeColumns:null,text:{noRecordsFound:"No records found",showingPage:"Showing page {0} of {1} entries",show:"Show ",search:"Search",entries:" entries",columnName:"Column name",insertANewColumnBefore:"Insert a new column before",insertANewColumnAfter:"Insert a new column after",deleteSelectedColumns:"Delete selected columns",renameThisColumn:"Rename this column",orderAscending:"Order ascending",orderDescending:"Order descending",insertANewRowBefore:"Insert a new row before",insertANewRowAfter:"Insert a new row after",deleteSelectedRows:"Delete selected rows",editComments:"Edit comments",addComments:"Add comments",comments:"Comments",clearComments:"Clear comments",copy:"Copy...",paste:"Paste...",saveAs:"Save as...",about:"About",areYouSureToDeleteTheSelectedRows:"Are you sure to delete the selected rows?",areYouSureToDeleteTheSelectedColumns:"Are you sure to delete the selected columns?",thisActionWillDestroyAnyExistingMergedCellsAreYouSure:"This action will destroy any existing merged cells. Are you sure?",thisActionWillClearYourSearchResultsAreYouSure:"This action will clear your search results. Are you sure?",thereIsAConflictWithAnotherMergedCell:"There is a conflict with another merged cell",invalidMergeProperties:"Invalid merged properties",cellAlreadyMerged:"Cell already merged",noCellsSelected:"No cells selected"},about:!0};for(var property in defaults)if(options&&options.hasOwnProperty(property))if(property==="text")for(var textKey in obj.options[property]=defaults[property],options[property])options[property].hasOwnProperty(textKey)&&(obj.options[property][textKey]=options[property][textKey]);else obj.options[property]=options[property];else obj.options[property]=defaults[property];obj.el=el,obj.corner=null,obj.contextMenu=null,obj.textarea=null,obj.ads=null,obj.content=null,obj.table=null,obj.thead=null,obj.tbody=null,obj.rows=[],obj.results=null,obj.searchInput=null,obj.toolbar=null,obj.pagination=null,obj.pageNumber=null,obj.headerContainer=null,obj.colgroupContainer=null,obj.headers=[],obj.records=[],obj.history=[],obj.formula=[],obj.colgroup=[],obj.selection=[],obj.highlighted=[],obj.selectedCell=null,obj.selectedContainer=null,obj.style=[],obj.data=null,obj.filter=null,obj.filters=[],obj.cursor=null,obj.historyIndex=-1,obj.ignoreEvents=!1,obj.ignoreHistory=!1,obj.edition=null,obj.hashString=null,obj.resizing=null,obj.dragging=null,obj.options.lazyLoading==1&&obj.options.tableOverflow==0&&obj.options.fullscreen==0&&(console.error("Jspreadsheet: The lazyloading only works when tableOverflow = yes or fullscreen = yes"),obj.options.lazyLoading=!1),obj.fullscreen=function(t){t==null&&(t=!obj.options.fullscreen),obj.options.fullscreen!=t&&(obj.options.fullscreen=t,t==1?el.classList.add("fullscreen"):el.classList.remove("fullscreen"))},obj.dispatch=function(t){if(!obj.ignoreEvents){if(typeof obj.options.onevent=="function")var e=obj.options.onevent.apply(this,arguments);typeof obj.options[t]=="function"&&(e=obj.options[t].apply(this,Array.prototype.slice.call(arguments,1)))}if(t=="onafterchanges"&&obj.options.persistance){var r=obj.options.persistance==1?obj.options.url:obj.options.persistance,s=obj.prepareJson(arguments[2]);obj.save(r,s)}return e},obj.prepareTable=function(){var t=obj.options.columns.length;if(obj.options.data&&obj.options.data[0]!==void 0){var e=Object.keys(obj.options.data[0]);e.length>t&&(t=e.length)}obj.options.minDimensions[0]>t&&(t=obj.options.minDimensions[0]);for(var r=[],s=0;s<t;s++)obj.options.colHeaders[s]||(obj.options.colHeaders[s]=""),obj.options.colWidths[s]||(obj.options.colWidths[s]=obj.options.defaultColWidth),obj.options.colAlignments[s]||(obj.options.colAlignments[s]=obj.options.defaultColAlign),obj.options.columns[s]?obj.options.columns[s].type||(obj.options.columns[s].type="text"):obj.options.columns[s]={type:"text"},obj.options.columns[s].name||(obj.options.columns[s].name=e&&e[s]?e[s]:s),obj.options.columns[s].source||(obj.options.columns[s].source=[]),obj.options.columns[s].options||(obj.options.columns[s].options=[]),obj.options.columns[s].editor||(obj.options.columns[s].editor=null),obj.options.columns[s].allowEmpty||(obj.options.columns[s].allowEmpty=!1),obj.options.columns[s].title||(obj.options.columns[s].title=obj.options.colHeaders[s]?obj.options.colHeaders[s]:""),obj.options.columns[s].width||(obj.options.columns[s].width=obj.options.colWidths[s]?obj.options.colWidths[s]:obj.options.defaultColWidth),obj.options.columns[s].align||(obj.options.columns[s].align=obj.options.colAlignments[s]?obj.options.colAlignments[s]:"center"),obj.options.columns[s].type=="autocomplete"||obj.options.columns[s].type=="dropdown"?obj.options.columns[s].url&&r.push({url:obj.options.columns[s].url,index:s,method:"GET",dataType:"json",success:function(c){for(var p=0;p<c.length;p++)obj.options.columns[this.index].source.push(c[p])}}):obj.options.columns[s].type=="calendar"&&(obj.options.columns[s].options.format||(obj.options.columns[s].options.format="DD/MM/YYYY"));r.length?jSuites.ajax(r,function(){obj.createTable()}):obj.createTable()},obj.createTable=function(){obj.table=document.createElement("table"),obj.thead=document.createElement("thead"),obj.tbody=document.createElement("tbody"),obj.headers=[],obj.colgroup=[],obj.content=document.createElement("div"),obj.content.classList.add("jexcel_content"),obj.content.onscroll=function(E){obj.scrollControls(E)},obj.content.onwheel=function(E){obj.wheelControls(E)},obj.toolbar=document.createElement("div"),obj.toolbar.classList.add("jexcel_toolbar");var t=document.createElement("div"),e=document.createTextNode(obj.options.text.search+": ");obj.searchInput=document.createElement("input"),obj.searchInput.classList.add("jexcel_search"),t.appendChild(e),t.appendChild(obj.searchInput),obj.searchInput.onfocus=function(){obj.resetSelection()};var r=document.createElement("div");if(obj.options.pagination>0&&obj.options.paginationOptions&&obj.options.paginationOptions.length>0){obj.paginationDropdown=document.createElement("select"),obj.paginationDropdown.classList.add("jexcel_pagination_dropdown"),obj.paginationDropdown.onchange=function(){obj.options.pagination=parseInt(this.value),obj.page(0)};for(var s=0;s<obj.options.paginationOptions.length;s++){var c=document.createElement("option");c.value=obj.options.paginationOptions[s],c.innerHTML=obj.options.paginationOptions[s],obj.paginationDropdown.appendChild(c)}obj.paginationDropdown.value=obj.options.pagination,r.appendChild(document.createTextNode(obj.options.text.show)),r.appendChild(obj.paginationDropdown),r.appendChild(document.createTextNode(obj.options.text.entries))}var p,j=document.createElement("div");if(j.classList.add("jexcel_filter"),j.appendChild(r),j.appendChild(t),obj.colgroupContainer=document.createElement("colgroup"),(p=document.createElement("col")).setAttribute("width","50"),obj.colgroupContainer.appendChild(p),obj.options.nestedHeaders&&obj.options.nestedHeaders.length>0)if(obj.options.nestedHeaders[0]&&obj.options.nestedHeaders[0][0])for(var h=0;h<obj.options.nestedHeaders.length;h++)obj.thead.appendChild(obj.createNestedHeader(obj.options.nestedHeaders[h]));else obj.thead.appendChild(obj.createNestedHeader(obj.options.nestedHeaders));for(obj.headerContainer=document.createElement("tr"),(p=document.createElement("td")).classList.add("jexcel_selectall"),obj.headerContainer.appendChild(p),s=0;s<obj.options.columns.length;s++)obj.createCellHeader(s),obj.headerContainer.appendChild(obj.headers[s]),obj.colgroupContainer.appendChild(obj.colgroup[s]);if(obj.thead.appendChild(obj.headerContainer),obj.options.filters==1){obj.filter=document.createElement("tr");var u=document.createElement("td");for(obj.filter.appendChild(u),s=0;s<obj.options.columns.length;s++)(u=document.createElement("td")).innerHTML="&nbsp;",u.setAttribute("data-x",s),u.className="jexcel_column_filter",obj.options.columns[s].type=="hidden"&&(u.style.display="none"),obj.filter.appendChild(u);obj.thead.appendChild(obj.filter)}obj.table=document.createElement("table"),obj.table.classList.add("jexcel"),obj.table.setAttribute("cellpadding","0"),obj.table.setAttribute("cellspacing","0"),obj.table.setAttribute("unselectable","yes"),obj.table.appendChild(obj.colgroupContainer),obj.table.appendChild(obj.thead),obj.table.appendChild(obj.tbody),obj.options.textOverflow||obj.table.classList.add("jexcel_overflow"),obj.corner=document.createElement("div"),obj.corner.className="jexcel_corner",obj.corner.setAttribute("unselectable","on"),obj.corner.setAttribute("onselectstart","return false"),obj.options.selectionCopy==0&&(obj.corner.style.display="none"),obj.textarea=document.createElement("textarea"),obj.textarea.className="jexcel_textarea",obj.textarea.id="jexcel_textarea",obj.textarea.tabIndex="-1",obj.contextMenu=document.createElement("div"),obj.contextMenu.className="jexcel_contextmenu",jSuites.contextmenu(obj.contextMenu,{onclick:function(){obj.contextMenu.contextmenu.close(!1)}});var g=document.createElement("a");g.setAttribute("href","https://bossanova.uk/jspreadsheet/"),obj.ads=document.createElement("div"),obj.ads.className="jexcel_about";try{if(typeof sessionStorage<"u"&&!sessionStorage.getItem("jexcel")){sessionStorage.setItem("jexcel",!0);var N=document.createElement("img");N.src="//bossanova.uk/jspreadsheet/logo.png",g.appendChild(N)}}catch{}var P=document.createElement("span");P.innerHTML="Jspreadsheet CE",g.appendChild(P),obj.ads.appendChild(g),document.createElement("div").classList.add("jexcel_table"),obj.pagination=document.createElement("div"),obj.pagination.classList.add("jexcel_pagination");var _=document.createElement("div"),f=document.createElement("div");if(obj.pagination.appendChild(_),obj.pagination.appendChild(f),obj.options.pagination||(obj.pagination.style.display="none"),obj.options.search==1&&el.appendChild(j),obj.content.appendChild(obj.table),obj.content.appendChild(obj.corner),obj.content.appendChild(obj.textarea),el.appendChild(obj.toolbar),el.appendChild(obj.content),el.appendChild(obj.pagination),el.appendChild(obj.contextMenu),el.appendChild(obj.ads),el.classList.add("jexcel_container"),obj.options.toolbar&&obj.options.toolbar.length&&obj.createToolbar(),obj.options.fullscreen==1?el.classList.add("fullscreen"):obj.options.tableOverflow==1&&(obj.options.tableHeight&&(obj.content.style["overflow-y"]="auto",obj.content.style["box-shadow"]="rgb(221 221 221) 2px 2px 5px 0.1px",obj.content.style.maxHeight=obj.options.tableHeight),obj.options.tableWidth&&(obj.content.style["overflow-x"]="auto",obj.content.style.width=obj.options.tableWidth)),obj.options.tableOverflow!=1&&obj.options.toolbar&&el.classList.add("with-toolbar"),obj.options.columnDrag==1&&obj.thead.classList.add("draggable"),obj.options.columnResize==1&&obj.thead.classList.add("resizable"),obj.options.rowDrag==1&&obj.tbody.classList.add("draggable"),obj.options.rowResize==1&&obj.tbody.classList.add("resizable"),obj.setData(),obj.options.style&&obj.setStyle(obj.options.style,null,null,1,1),obj.options.classes){var w=Object.keys(obj.options.classes);for(s=0;s<w.length;s++){var C=jexcel.getIdFromColumnName(w[s],!0);obj.records[C[1]][C[0]].classList.add(obj.options.classes[w[s]])}}},obj.refresh=function(){obj.options.url?(obj.options.loadingSpin==1&&jSuites.loading.show(),jSuites.ajax({url:obj.options.url,method:obj.options.method,data:obj.options.requestVariables,dataType:"json",success:function(t){obj.options.data=t.data?t.data:t,obj.setData(),obj.options.loadingSpin==1&&jSuites.loading.hide()}})):obj.setData()},obj.setData=function(t){if(t&&(typeof t=="string"&&(t=JSON.parse(t)),obj.options.data=t),obj.options.data||(obj.options.data=[]),obj.options.data&&obj.options.data[0]&&!Array.isArray(obj.options.data[0])){t=[];for(var e=0;e<obj.options.data.length;e++){for(var r=[],s=0;s<obj.options.columns.length;s++)r[s]=obj.options.data[e][obj.options.columns[s].name];t.push(r)}obj.options.data=t}e=0,s=0;var c=obj.options.columns.length,p=obj.options.data.length,j=obj.options.minDimensions[0],h=obj.options.minDimensions[1],u=j>c?j:c,g=h>p?h:p;for(e=0;e<g;e++)for(s=0;s<u;s++)obj.options.data[e]==null&&(obj.options.data[e]=[]),obj.options.data[e][s]==null&&(obj.options.data[e][s]="");if(obj.rows=[],obj.results=null,obj.records=[],obj.history=[],obj.historyIndex=-1,obj.tbody.innerHTML="",obj.options.lazyLoading==1){var N=0,P=obj.options.data.length<100?obj.options.data.length:100;obj.options.pagination&&(obj.options.pagination=!1,console.error("Jspreadsheet: Pagination will be disable due the lazyLoading"))}else obj.options.pagination?(obj.pageNumber||(obj.pageNumber=0),obj.options.pagination,N=obj.options.pagination*obj.pageNumber,P=obj.options.pagination*obj.pageNumber+obj.options.pagination,obj.options.data.length<P&&(P=obj.options.data.length)):(N=0,P=obj.options.data.length);for(e=0;e<obj.options.data.length;e++){var _=obj.createRow(e,obj.options.data[e]);e>=N&&e<P&&obj.tbody.appendChild(_)}if(obj.options.lazyLoading==1||obj.options.pagination&&obj.updatePagination(),obj.options.mergeCells){var f=Object.keys(obj.options.mergeCells);for(s=0;s<f.length;s++){var w=obj.options.mergeCells[f[s]];obj.setMerge(f[s],w[0],w[1],1)}}obj.updateTable(),obj.dispatch("onload",el,obj)},obj.getData=function(t,e){for(var r=[],s=0,c=0,p=e==1||obj.options.copyCompatibility==0,j=obj.options.columns.length,h=obj.options.data.length,u=0;u<h;u++){s=0;for(var g=0;g<j;g++)t&&!obj.records[u][g].classList.contains("highlight")||(r[c]||(r[c]=[]),r[c][s]=p?obj.options.data[u][g]:obj.records[u][g].innerHTML,s++);s>0&&c++}return r},obj.getJsonRow=function(t){for(var e=obj.options.data[t],r=obj.options.columns.length,s={},c=0;c<r;c++)obj.options.columns[c].name||(obj.options.columns[c].name=c),s[obj.options.columns[c].name]=e[c];return s},obj.getJson=function(t){for(var e=[],r=obj.options.columns.length,s=obj.options.data.length,c=0;c<s;c++){for(var p=null,j=0;j<r;j++)t&&!obj.records[c][j].classList.contains("highlight")||(p==null&&(p={}),obj.options.columns[j].name||(obj.options.columns[j].name=j),p[obj.options.columns[j].name]=obj.options.data[c][j]);p!=null&&e.push(p)}return e},obj.prepareJson=function(t){for(var e=[],r=0;r<t.length;r++){var s=t[r].x,c=t[r].y,p=obj.options.columns[s].name?obj.options.columns[s].name:s;e[c]||(e[c]={row:c,data:{}}),e[c].data[p]=t[r].newValue}return e.filter(function(j){return j!=null})},obj.save=function(t,e){var r=obj.dispatch("onbeforesave",el,obj,e);if(r)e=r;else if(r===!1)return!1;jSuites.ajax({url:t,method:"POST",dataType:"json",data:{data:JSON.stringify(e)},success:function(s){obj.dispatch("onsave",el,obj,e)}})},obj.getRowData=function(t){return obj.options.data[t]},obj.setRowData=function(t,e){for(var r=0;r<obj.headers.length;r++){var s=jexcel.getColumnNameFromId([r,t]);e[r]!=null&&obj.setValue(s,e[r])}},obj.getColumnData=function(t){for(var e=[],r=0;r<obj.options.data.length;r++)e.push(obj.options.data[r][t]);return e},obj.setColumnData=function(t,e){for(var r=0;r<obj.rows.length;r++){var s=jexcel.getColumnNameFromId([t,r]);e[r]!=null&&obj.setValue(s,e[r])}},obj.createRow=function(t,e){obj.records[t]||(obj.records[t]=[]),e||(e=obj.options.data[t]),obj.rows[t]=document.createElement("tr"),obj.rows[t].setAttribute("data-y",t);var r=null;obj.options.defaultRowHeight&&(obj.rows[t].style.height=obj.options.defaultRowHeight+"px"),obj.options.rows[t]&&(obj.options.rows[t].height&&(obj.rows[t].style.height=obj.options.rows[t].height),obj.options.rows[t].title&&(r=obj.options.rows[t].title)),r||(r=parseInt(t+1));var s=document.createElement("td");s.innerHTML=r,s.setAttribute("data-y",t),s.className="jexcel_row",obj.rows[t].appendChild(s);for(var c=0;c<obj.options.columns.length;c++)obj.records[t][c]=obj.createCell(c,t,e[c]),obj.rows[t].appendChild(obj.records[t][c]);return obj.rows[t]},obj.parseValue=function(t,e,r,s){(""+r).substr(0,1)=="="&&obj.options.parseFormulas==1&&(r=obj.executeFormula(r,t,e));var c=obj.options.columns[t];if(c&&!isFormula(r)){var p=null;if(p=getMask(c)){r&&r==Number(r)&&(r=Number(r));var j=jSuites.mask.render(r,p,!0);if(s&&p.mask){var h=p.mask.split(";");h[1]&&(h[1].match(new RegExp("\\[Red\\]","gi"))&&(r<0?s.classList.add("red"):s.classList.remove("red")),h[1].match(new RegExp("\\(","gi"))&&r<0&&(j="("+j+")"))}j&&(r=j)}}return r};var validDate=function(t){return(t=""+t).substr(4,1)=="-"&&t.substr(7,1)=="-"||(t=t.split("-"))[0].length==4&&t[0]==Number(t[0])&&t[1].length==2&&t[1]==Number(t[1])};obj.createCell=function(t,e,r){var s=document.createElement("td");if(s.setAttribute("data-x",t),s.setAttribute("data-y",e),(""+r).substr(0,1)=="="&&obj.options.secureFormulas==1){var c=secureFormula(r);c!=r&&(r=c)}if(obj.options.columns[t].editor)obj.options.stripHTML===!1||obj.options.columns[t].stripHTML===!1?s.innerHTML=r:s.textContent=r,typeof obj.options.columns[t].editor.createCell=="function"&&(s=obj.options.columns[t].editor.createCell(s));else if(obj.options.columns[t].type=="hidden")s.style.display="none",s.textContent=r;else if(obj.options.columns[t].type=="checkbox"||obj.options.columns[t].type=="radio"){var p=document.createElement("input");p.type=obj.options.columns[t].type,p.name="c"+t,p.checked=r==1||r==1||r=="true",p.onclick=function(){obj.setValue(s,this.checked)},obj.options.columns[t].readOnly!=1&&obj.options.editable!=0||p.setAttribute("disabled","disabled"),s.appendChild(p),obj.options.data[e][t]=p.checked}else if(obj.options.columns[t].type=="calendar"){var j=null;if(!validDate(r)){var h=jSuites.calendar.extractDateFromString(r,obj.options.columns[t].options.format);h&&(j=h)}s.textContent=jSuites.calendar.getDateString(j||r,obj.options.columns[t].options.format)}else if(obj.options.columns[t].type=="dropdown"||obj.options.columns[t].type=="autocomplete")s.classList.add("jexcel_dropdown"),s.textContent=obj.getDropDownValue(t,r);else if(obj.options.columns[t].type=="color")if(obj.options.columns[t].render=="square"){var u=document.createElement("div");u.className="color",u.style.backgroundColor=r,s.appendChild(u)}else s.style.color=r,s.textContent=r;else if(obj.options.columns[t].type=="image"){if(r&&r.substr(0,10)=="data:image"){var g=document.createElement("img");g.src=r,s.appendChild(g)}}else obj.options.columns[t].type=="html"||obj.options.stripHTML===!1||obj.options.columns[t].stripHTML===!1?s.innerHTML=stripScript(obj.parseValue(t,e,r,s)):s.textContent=obj.parseValue(t,e,r,s);obj.options.columns[t].readOnly==1&&(s.className="readonly");var N=obj.options.columns[t].align?obj.options.columns[t].align:"center";return s.style.textAlign=N,obj.options.columns[t].wordWrap!=0&&(obj.options.wordWrap==1||obj.options.columns[t].wordWrap==1||s.innerHTML.length>200)&&(s.style.whiteSpace="pre-wrap"),t>0&&this.options.textOverflow==1&&(r||s.innerHTML?obj.records[e][t-1].style.overflow="hidden":t==obj.options.columns.length-1&&(s.style.overflow="hidden")),s},obj.createCellHeader=function(t){var e=obj.options.columns[t].width?obj.options.columns[t].width:obj.options.defaultColWidth,r=obj.options.columns[t].align?obj.options.columns[t].align:obj.options.defaultColAlign;obj.headers[t]=document.createElement("td"),obj.options.stripHTML?obj.headers[t].textContent=obj.options.columns[t].title?obj.options.columns[t].title:jexcel.getColumnName(t):obj.headers[t].innerHTML=obj.options.columns[t].title?obj.options.columns[t].title:jexcel.getColumnName(t),obj.headers[t].setAttribute("data-x",t),obj.headers[t].style.textAlign=r,obj.options.columns[t].title&&obj.headers[t].setAttribute("title",obj.headers[t].innerText),obj.options.columns[t].id&&obj.headers[t].setAttribute("id",obj.options.columns[t].id),obj.colgroup[t]=document.createElement("col"),obj.colgroup[t].setAttribute("width",e),obj.options.columns[t].type=="hidden"&&(obj.headers[t].style.display="none",obj.colgroup[t].style.display="none")},obj.updateNestedHeader=function(t,e,r){obj.options.nestedHeaders[e][t].title&&(obj.options.nestedHeaders[e][t].title=r,obj.options.nestedHeaders[e].element.children[t+1].textContent=r)},obj.createNestedHeader=function(t){var e=document.createElement("tr");e.classList.add("jexcel_nested");var r=document.createElement("td");e.appendChild(r),t.element=e;for(var s=0,c=0;c<t.length;c++){t[c].colspan||(t[c].colspan=1),t[c].align||(t[c].align="center"),t[c].title||(t[c].title=""),t[c].id||(t[c].id="");for(var p=t[c].colspan,j=[],h=0;h<p;h++)obj.options.columns[s]&&obj.options.columns[s].type=="hidden"&&p++,j.push(s),s++;(r=document.createElement("td")).setAttribute("data-column",j.join(",")),r.setAttribute("colspan",t[c].colspan),r.setAttribute("align",t[c].align),r.setAttribute("id",t[c].id),r.textContent=t[c].title,e.appendChild(r)}return e},obj.createToolbar=function(t){t?obj.options.toolbar=t:t=obj.options.toolbar;for(var e=0;e<t.length;e++)if(t[e].type=="i")(p=document.createElement("i")).classList.add("jexcel_toolbar_item"),p.classList.add("material-icons"),p.setAttribute("data-k",t[e].k),p.setAttribute("data-v",t[e].v),p.setAttribute("id",t[e].id),t[e].tooltip&&p.setAttribute("title",t[e].tooltip),t[e].onclick&&(t[e].onclick,1)?p.onclick=function(j){var h=j;return function(){t[h].onclick(el,obj,this)}}(e):p.onclick=function(){var j=this.getAttribute("data-k"),h=this.getAttribute("data-v");obj.setStyle(obj.highlighted,j,h)},p.textContent=t[e].content,obj.toolbar.appendChild(p);else if(t[e].type=="select"){var r=!1;(p=document.createElement("select")).classList.add("jexcel_toolbar_item"),p.setAttribute("data-k",t[e].k),t[e].tooltip&&p.setAttribute("title",t[e].tooltip),t[e].onchange&&(t[e].onchange,1)?(p.onchange=t[e].onchange,r=!0):p.onchange=function(){var j=this.getAttribute("data-k");obj.setStyle(obj.highlighted,j,this.value)};for(var s=0;s<t[e].v.length;s++){var c=document.createElement("option");c.value=t[e].v[s],c.textContent=t[e].v[s],t[e].selectedValue&&c.value===t[e].selectedValue&&(c.selected=!0),p.appendChild(c)}r&&p.dispatchEvent(new Event("change")),obj.toolbar.appendChild(p)}else if(t[e].type=="color"){var p;(p=document.createElement("i")).classList.add("jexcel_toolbar_item"),p.classList.add("material-icons"),p.setAttribute("data-k",t[e].k),p.setAttribute("data-v",""),t[e].tooltip&&p.setAttribute("title",t[e].tooltip),obj.toolbar.appendChild(p),p.textContent=t[e].content,jSuites.color(p,{onchange:function(j,h){var u=j.getAttribute("data-k");obj.setStyle(obj.highlighted,u,h)}})}},obj.setMerge=function(t,e,r,s){var c=!1;if(!t){if(!obj.highlighted.length)return alert(obj.options.text.noCellsSelected),null;var p=parseInt(obj.highlighted[0].getAttribute("data-x")),j=parseInt(obj.highlighted[0].getAttribute("data-y")),h=parseInt(obj.highlighted[obj.highlighted.length-1].getAttribute("data-x")),u=parseInt(obj.highlighted[obj.highlighted.length-1].getAttribute("data-y"));t=jexcel.getColumnNameFromId([p,j]),e=h-p+1,r=u-j+1}var g=jexcel.getIdFromColumnName(t,!0);if(obj.options.mergeCells[t])obj.records[g[1]][g[0]].getAttribute("data-merged")&&(c=obj.options.text.cellAlreadyMerged);else if((!e||e<2)&&(!r||r<2))c=obj.options.text.invalidMergeProperties;else for(var N=g[1];N<g[1]+r;N++)for(var P=g[0];P<g[0]+e;P++)jexcel.getColumnNameFromId([P,N]),obj.records[N][P].getAttribute("data-merged")&&(c=obj.options.text.thereIsAConflictWithAnotherMergedCell);if(c)alert(c);else{e>1?obj.records[g[1]][g[0]].setAttribute("colspan",e):e=1,r>1?obj.records[g[1]][g[0]].setAttribute("rowspan",r):r=1,obj.options.mergeCells[t]=[e,r,[]],obj.records[g[1]][g[0]].setAttribute("data-merged","true"),obj.records[g[1]][g[0]].style.overflow="hidden";for(var _=[],f=g[1];f<g[1]+r;f++)for(var w=g[0];w<g[0]+e;w++)g[0]==w&&g[1]==f||(_.push(obj.options.data[f][w]),obj.updateCell(w,f,"",!0),obj.options.mergeCells[t][2].push(obj.records[f][w]),obj.records[f][w].style.display="none",obj.records[f][w]=obj.records[g[1]][g[0]]);obj.updateSelection(obj.records[g[1]][g[0]]),s||(obj.setHistory({action:"setMerge",column:t,colspan:e,rowspan:r,data:_}),obj.dispatch("onmerge",el,t,e,r))}},obj.getMerge=function(t){var e={};if(t)e=obj.options.mergeCells[t]?[obj.options.mergeCells[t][0],obj.options.mergeCells[t][1]]:null;else if(obj.options.mergeCells){obj.options.mergeCells;for(var r=Object.keys(obj.options.mergeCells),s=0;s<r.length;s++)e[r[s]]=[obj.options.mergeCells[r[s]][0],obj.options.mergeCells[r[s]][1]]}return e},obj.removeMerge=function(t,e,r){if(obj.options.mergeCells[t]){var s=jexcel.getIdFromColumnName(t,!0);obj.records[s[1]][s[0]].removeAttribute("colspan"),obj.records[s[1]][s[0]].removeAttribute("rowspan"),obj.records[s[1]][s[0]].removeAttribute("data-merged");for(var c=obj.options.mergeCells[t],p=0,j=0;j<c[1];j++)for(var h=0;h<c[0];h++)(j>0||h>0)&&(obj.records[s[1]+j][s[0]+h]=c[2][p],obj.records[s[1]+j][s[0]+h].style.display="",e&&e[p]&&obj.updateCell(s[0]+h,s[1]+j,e[p]),p++);obj.updateSelection(obj.records[s[1]][s[0]],obj.records[s[1]+j-1][s[0]+h-1]),r||delete obj.options.mergeCells[t]}},obj.destroyMerged=function(t){if(obj.options.mergeCells){obj.options.mergeCells;for(var e=Object.keys(obj.options.mergeCells),r=0;r<e.length;r++)obj.removeMerge(e[r],null,t)}},obj.isColMerged=function(t,e){var r=[];if(obj.options.mergeCells)for(var s=Object.keys(obj.options.mergeCells),c=0;c<s.length;c++){var p=jexcel.getIdFromColumnName(s[c],!0),j=obj.options.mergeCells[s[c]][0],h=p[0],u=p[0]+(j>1?j-1:0);e==null?h<=t&&u>=t&&r.push(s[c]):e?h<t&&u>=t&&r.push(s[c]):h<=t&&u>t&&r.push(s[c])}return r},obj.isRowMerged=function(t,e){var r=[];if(obj.options.mergeCells)for(var s=Object.keys(obj.options.mergeCells),c=0;c<s.length;c++){var p=jexcel.getIdFromColumnName(s[c],!0),j=obj.options.mergeCells[s[c]][1],h=p[1],u=p[1]+(j>1?j-1:0);e==null?h<=t&&u>=t&&r.push(s[c]):e?h<t&&u>=t&&r.push(s[c]):h<=t&&u>t&&r.push(s[c])}return r},obj.openFilter=function(t){if(obj.options.filters){t=parseInt(t),obj.resetSelection();var e=[];if(obj.options.columns[t].type=="checkbox")e.push({id:"true",name:"True"}),e.push({id:"false",name:"False"});else{for(var r=[],s=!1,c=0;c<obj.options.data.length;c++){var p=obj.options.data[c][t],j=obj.records[c][t].innerHTML;p&&j?r[p]=j:s=!0}var h=Object.keys(r);for(e=[],c=0;c<h.length;c++)e.push({id:h[c],name:r[h[c]]});s&&e.push({value:"",id:"",name:"(Blanks)"})}var u=document.createElement("div");obj.filter.children[t+1].innerHTML="",obj.filter.children[t+1].appendChild(u),obj.filter.children[t+1].style.paddingLeft="0px",obj.filter.children[t+1].style.paddingRight="0px",obj.filter.children[t+1].style.overflow="initial";var g={data:e,multiple:!0,autocomplete:!0,opened:!0,value:obj.filters[t]!==void 0?obj.filters[t]:null,width:"100%",position:obj.options.tableOverflow==1||obj.options.fullscreen==1,onclose:function(N){obj.resetFilters(),obj.filters[t]=N.dropdown.getValue(!0),obj.filter.children[t+1].innerHTML=N.dropdown.getText(),obj.filter.children[t+1].style.paddingLeft="",obj.filter.children[t+1].style.paddingRight="",obj.filter.children[t+1].style.overflow="",obj.closeFilter(t),obj.refreshSelection()}};jSuites.dropdown(u,g)}else console.log("Jspreadsheet: filters not enabled.")},obj.resetFilters=function(){if(obj.options.filters)for(var t=0;t<obj.filter.children.length;t++)obj.filter.children[t].innerHTML="&nbsp;",obj.filters[t]=null;obj.results=null,obj.updateResult()},obj.closeFilter=function(t){if(!t)for(var e=0;e<obj.filter.children.length;e++)obj.filters[e]&&(t=e);var r=function(p,j,h){for(var u=0;u<p.length;u++){var g=""+obj.options.data[h][j],N=""+obj.records[h][j].innerHTML;if(p[u]==g||p[u]==N)return!0}return!1},s=obj.filters[t];obj.results=[];for(var c=0;c<obj.options.data.length;c++)r(s,t,c)&&obj.results.push(c);obj.results.length||(obj.results=null),obj.updateResult()},obj.openEditor=function(t,e,r){var s=t.getAttribute("data-y"),c=t.getAttribute("data-x");obj.dispatch("oneditionstart",el,t,c,s),c>0&&(obj.records[s][c-1].style.overflow="hidden");var p=function(k){var B=t.getBoundingClientRect(),q=document.createElement(k);return q.style.width=B.width+"px",q.style.height=B.height-2+"px",q.style.minHeight=B.height-2+"px",t.classList.add("editor"),t.innerHTML="",t.appendChild(q),obj.dispatch("oncreateeditor",el,t,c,s,q),q};if(t.classList.contains("readonly")!=1){if(obj.edition=[obj.records[s][c],obj.records[s][c].innerHTML,c,s],obj.options.columns[c].editor)obj.options.columns[c].editor.openEditor(t,el,e,r);else if(obj.options.columns[c].type!="hidden")if(obj.options.columns[c].type=="checkbox"||obj.options.columns[c].type=="radio"){var j=!t.children[0].checked;obj.setValue(t,j),obj.edition=null}else if(obj.options.columns[c].type=="dropdown"||obj.options.columns[c].type=="autocomplete"){if(j=obj.options.data[s][c],obj.options.columns[c].multiple&&!Array.isArray(j)&&(j=j.split(";")),typeof obj.options.columns[c].filter=="function")var h=obj.options.columns[c].filter(el,t,c,s,obj.options.columns[c].source);else h=obj.options.columns[c].source;for(var u=[],g=0;g<h.length;g++)u.push(h[g]);var N=p("div"),P={data:u,multiple:!!obj.options.columns[c].multiple,autocomplete:!(!obj.options.columns[c].autocomplete&&obj.options.columns[c].type!="autocomplete"),opened:!0,value:j,width:"100%",height:N.style.minHeight,position:obj.options.tableOverflow==1||obj.options.fullscreen==1,onclose:function(){obj.closeEditor(t,!0)}};obj.options.columns[c].options&&obj.options.columns[c].options.type&&(P.type=obj.options.columns[c].options.type),jSuites.dropdown(N,P)}else if(obj.options.columns[c].type=="calendar"||obj.options.columns[c].type=="color")j=obj.options.data[s][c],(N=p("input")).value=j,obj.options.tableOverflow!=1&&obj.options.fullscreen!=1||(obj.options.columns[c].options.position=!0),obj.options.columns[c].options.value=obj.options.data[s][c],obj.options.columns[c].options.opened=!0,obj.options.columns[c].options.onclose=function(k,B){obj.closeEditor(t,!0)},obj.options.columns[c].type=="color"?jSuites.color(N,obj.options.columns[c].options):jSuites.calendar(N,obj.options.columns[c].options),N.focus();else if(obj.options.columns[c].type=="html"){j=obj.options.data[s][c],(N=p("div")).style.position="relative",(w=document.createElement("div")).classList.add("jexcel_richtext"),N.appendChild(w),jSuites.editor(w,{focus:!0,value:j});var _=t.getBoundingClientRect(),f=w.getBoundingClientRect();window.innerHeight<_.bottom+f.height?w.style.top=_.top-(f.height+2)+"px":w.style.top=_.top+"px"}else if(obj.options.columns[c].type=="image"){var w,C=t.children[0];(N=p("div")).style.position="relative",(w=document.createElement("div")).classList.add("jclose"),C&&C.src&&w.appendChild(C),N.appendChild(w),jSuites.image(w,obj.options.imageOptions),_=t.getBoundingClientRect(),f=w.getBoundingClientRect(),window.innerHeight<_.bottom+f.height?w.style.top=_.top-(f.height+2)+"px":w.style.top=_.top+"px"}else{j=e==1?"":obj.options.data[s][c],obj.options.columns[c].wordWrap==0||obj.options.wordWrap!=1&&obj.options.columns[c].wordWrap!=1?N=p("input"):N=p("textarea"),N.focus(),N.value=j,P=obj.options.columns[c];var E=null;if(!isFormula(j)&&(E=getMask(P))){if(!P.disabledMaskOnEdition)if(P.mask){var S=P.mask.split(";");N.setAttribute("data-mask",S[0])}else P.locale&&N.setAttribute("data-locale",P.locale);E.input=N,N.mask=E,jSuites.mask.render(j,E,!1)}N.onblur=function(){obj.closeEditor(t,!0)},N.scrollLeft=N.scrollWidth}}},obj.closeEditor=function(t,e){var r=parseInt(t.getAttribute("data-x")),s=parseInt(t.getAttribute("data-y"));if(e==1){if(obj.options.columns[r].editor)var c=obj.options.columns[r].editor.closeEditor(t,e);else if(!(obj.options.columns[r].type=="checkbox"||obj.options.columns[r].type=="radio"||obj.options.columns[r].type=="hidden"))if(obj.options.columns[r].type=="dropdown"||obj.options.columns[r].type=="autocomplete")c=t.children[0].dropdown.close(!0);else if(obj.options.columns[r].type=="calendar")c=t.children[0].calendar.close(!0);else if(obj.options.columns[r].type=="color")c=t.children[0].color.close(!0);else if(obj.options.columns[r].type=="html")c=t.children[0].children[0].editor.getData();else if(obj.options.columns[r].type=="image"){var p=t.children[0].children[0].children[0];c=p&&p.tagName=="IMG"?p.src:""}else if(obj.options.columns[r].type=="numeric")(""+(c=t.children[0].value)).substr(0,1)!="="&&c==""&&(c=obj.options.columns[r].allowEmpty?"":0),t.children[0].onblur=null;else{c=t.children[0].value,t.children[0].onblur=null;var j,h=obj.options.columns[r];if((j=getMask(h))&&c!==""&&!isFormula(c)&&typeof c!="number"){var u=jSuites.mask.extract(c,j,!0);u&&u.value!==""&&(c=u.value)}}obj.options.data[s][r]==c?t.innerHTML=obj.edition[1]:obj.setValue(t,c)}else obj.options.columns[r].editor?obj.options.columns[r].editor.closeEditor(t,e):obj.options.columns[r].type=="dropdown"||obj.options.columns[r].type=="autocomplete"?t.children[0].dropdown.close(!0):obj.options.columns[r].type=="calendar"?t.children[0].calendar.close(!0):obj.options.columns[r].type=="color"?t.children[0].color.close(!0):t.children[0].onblur=null,t.innerHTML=obj.edition&&obj.edition[1]?obj.edition[1]:"";obj.dispatch("oneditionend",el,t,r,s,c,e),t.classList.remove("editor"),obj.edition=null},obj.getCell=function(t){var e=(t=jexcel.getIdFromColumnName(t,!0))[0],r=t[1];return obj.records[r][e]},obj.getColumnOptions=function(t,e){var r=obj.options.columns[t];return r||(r={type:"text"}),r},obj.getCellFromCoords=function(t,e){return obj.records[e][t]},obj.getLabel=function(t){var e=(t=jexcel.getIdFromColumnName(t,!0))[0],r=t[1];return obj.records[r][e].innerHTML},obj.getLabelFromCoords=function(t,e){return obj.records[e][t].innerHTML},obj.getValue=function(t,e){if(typeof t=="object")var r=t.getAttribute("data-x"),s=t.getAttribute("data-y");else r=(t=jexcel.getIdFromColumnName(t,!0))[0],s=t[1];var c=null;return r!=null&&s!=null&&(obj.records[s]&&obj.records[s][r]&&(e||obj.options.copyCompatibility==1)?c=obj.records[s][r].innerHTML:obj.options.data[s]&&obj.options.data[s][r]!="undefined"&&(c=obj.options.data[s][r])),c},obj.getValueFromCoords=function(t,e,r){var s=null;return t!=null&&e!=null&&(obj.records[e]&&obj.records[e][t]&&r||obj.options.copyCompatibility==1?s=obj.records[e][t].innerHTML:obj.options.data[e]&&obj.options.data[e][t]!="undefined"&&(s=obj.options.data[e][t])),s},obj.setValue=function(t,e,r){var s=[];if(typeof t=="string"){var c=(u=jexcel.getIdFromColumnName(t,!0))[0],p=u[1];s.push(obj.updateCell(c,p,e,r)),obj.updateFormulaChain(c,p,s)}else if(c=null,p=null,t&&t.getAttribute&&(c=t.getAttribute("data-x"),p=t.getAttribute("data-y")),c!=null&&p!=null)s.push(obj.updateCell(c,p,e,r)),obj.updateFormulaChain(c,p,s);else{var j=Object.keys(t);if(j.length>0)for(var h=0;h<j.length;h++){var u;typeof t[h]=="string"?(c=(u=jexcel.getIdFromColumnName(t[h],!0))[0],p=u[1]):t[h].x!=null&&t[h].y!=null?(c=t[h].x,p=t[h].y,t[h].newValue!=null?e=t[h].newValue:t[h].value!=null&&(e=t[h].value)):(c=t[h].getAttribute("data-x"),p=t[h].getAttribute("data-y")),c!=null&&p!=null&&(s.push(obj.updateCell(c,p,e,r)),obj.updateFormulaChain(c,p,s))}}obj.setHistory({action:"setValue",records:s,selection:obj.selectedCell}),obj.updateTable(),obj.onafterchanges(el,s)},obj.setValueFromCoords=function(t,e,r,s){var c=[];c.push(obj.updateCell(t,e,r,s)),obj.updateFormulaChain(t,e,c),obj.setHistory({action:"setValue",records:c,selection:obj.selectedCell}),obj.updateTable(),obj.onafterchanges(el,c)},obj.setCheckRadioValue=function(){for(var t=[],e=Object.keys(obj.highlighted),r=0;r<e.length;r++){var s=obj.highlighted[r].getAttribute("data-x"),c=obj.highlighted[r].getAttribute("data-y");obj.options.columns[s].type!="checkbox"&&obj.options.columns[s].type!="radio"||t.push(obj.updateCell(s,c,!obj.options.data[c][s]))}t.length&&(obj.setHistory({action:"setValue",records:t,selection:obj.selectedCell}),obj.onafterchanges(el,t))};var stripScript=function(t){var e=new Option;e.innerHTML=t;var r=null;for(t=e.getElementsByTagName("script");r=t[0];)r.parentNode.removeChild(r);return e.innerHTML};obj.updateCell=function(t,e,r,s){if(obj.records[e][t].classList.contains("readonly")!=1||s){var c;(""+r).substr(0,1)=="="&&obj.options.secureFormulas==1&&(c=secureFormula(r))!=r&&(r=c),(c=obj.dispatch("onbeforechange",el,obj.records[e][t],t,e,r))!=null&&(r=c),obj.options.columns[t].editor&&typeof obj.options.columns[t].editor.updateCell=="function"&&(r=obj.options.columns[t].editor.updateCell(obj.records[e][t],r,s)),N={x:t,y:e,col:t,row:e,newValue:r,oldValue:obj.options.data[e][t]};let P=obj.options.columns[t].editor;if(P)obj.options.data[e][t]=r,typeof P.setValue=="function"&&P.setValue(obj.records[e][t],r);else if(obj.options.columns[t].type=="checkbox"||obj.options.columns[t].type=="radio"){if(obj.options.columns[t].type=="radio")for(var p=0;p<obj.options.data.length;p++)obj.options.data[p][t]=!1;obj.records[e][t].children[0].checked=r==1||r==1||r=="true"||r=="TRUE",obj.options.data[e][t]=obj.records[e][t].children[0].checked}else if(obj.options.columns[t].type=="dropdown"||obj.options.columns[t].type=="autocomplete")obj.options.data[e][t]=r,obj.records[e][t].textContent=obj.getDropDownValue(t,r);else if(obj.options.columns[t].type=="calendar"){var j=null;if(!validDate(r)){var h=jSuites.calendar.extractDateFromString(r,obj.options.columns[t].options.format);h&&(j=h)}obj.options.data[e][t]=r,obj.records[e][t].textContent=jSuites.calendar.getDateString(j||r,obj.options.columns[t].options.format)}else if(obj.options.columns[t].type=="color")if(obj.options.data[e][t]=r,obj.options.columns[t].render=="square"){var u=document.createElement("div");u.className="color",u.style.backgroundColor=r,obj.records[e][t].textContent="",obj.records[e][t].appendChild(u)}else obj.records[e][t].style.color=r,obj.records[e][t].textContent=r;else if(obj.options.columns[t].type=="image"){if(r=""+r,obj.options.data[e][t]=r,obj.records[e][t].innerHTML="",r&&r.substr(0,10)=="data:image"){var g=document.createElement("img");g.src=r,obj.records[e][t].appendChild(g)}}else obj.options.data[e][t]=r,obj.options.columns[t].type=="html"?obj.records[e][t].innerHTML=stripScript(obj.parseValue(t,e,r)):obj.options.stripHTML===!1||obj.options.columns[t].stripHTML===!1?obj.records[e][t].innerHTML=stripScript(obj.parseValue(t,e,r,obj.records[e][t])):obj.records[e][t].textContent=obj.parseValue(t,e,r,obj.records[e][t]),obj.options.columns[t].wordWrap!=0&&(obj.options.wordWrap==1||obj.options.columns[t].wordWrap==1||obj.records[e][t].innerHTML.length>200)?obj.records[e][t].style.whiteSpace="pre-wrap":obj.records[e][t].style.whiteSpace="";t>0&&(obj.records[e][t-1].style.overflow=r?"hidden":""),obj.dispatch("onchange",el,obj.records[e]&&obj.records[e][t]?obj.records[e][t]:null,t,e,r,N.oldValue)}else var N={x:t,y:e,col:t,row:e};return N},obj.copyData=function(t,e){var r=obj.getData(!0,!0),s=obj.selectedContainer,c=parseInt(t.getAttribute("data-x")),p=parseInt(t.getAttribute("data-y")),j=parseInt(e.getAttribute("data-x")),h=parseInt(e.getAttribute("data-y")),u=[],g=!1;if(s[0]==c){if(p<s[1])var N=p-s[1];else N=1;var P=0}else P=c<s[0]?c-s[0]:1,N=0;for(var _=0,f=0,w=p;w<=h;w++)if(!obj.rows[w]||obj.rows[w].style.display!="none"){r[f]==null&&(f=0),_=0,s[0]!=c&&(P=c<s[0]?c-s[0]:1);for(var C=c;C<=j;C++){if(obj.records[w][C]&&!obj.records[w][C].classList.contains("readonly")&&obj.records[w][C].style.display!="none"&&g==0){if(!obj.selection.length&&obj.options.data[w][C]!=""){g=!0;continue}(r[f]==null||r[f][_]==null)&&(_=0);var E=r[f][_];if(E&&!r[1]&&obj.options.autoIncrement==1){if(obj.options.columns[C].type=="text"||obj.options.columns[C].type=="number")if((""+E).substr(0,1)=="="){var S=E.match(/([A-Z]+[0-9]+)/g);if(S){for(var k=[],B=0;B<S.length;B++){var q=jexcel.getIdFromColumnName(S[B],1);q[0]+=P,q[1]+=N,q[1]<0&&(q[1]=0);var U=jexcel.getColumnNameFromId([q[0],q[1]]);U!=S[B]&&(k[S[B]]=U)}k&&(E=obj.updateFormula(E,k))}}else E==Number(E)&&(E=Number(E)+N);else if(obj.options.columns[C].type=="calendar"){var F=new Date(E);F.setDate(F.getDate()+N),E=F.getFullYear()+"-"+jexcel.doubleDigitFormat(parseInt(F.getMonth()+1))+"-"+jexcel.doubleDigitFormat(F.getDate())+" 00:00:00"}}u.push(obj.updateCell(C,w,E)),obj.updateFormulaChain(C,w,u)}_++,s[0]!=c&&P++}f++,N++}obj.setHistory({action:"setValue",records:u,selection:obj.selectedCell}),obj.updateTable(),obj.onafterchanges(el,u)},obj.refreshSelection=function(){obj.selectedCell&&obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3])},obj.conditionalSelectionUpdate=function(t,e,r){if(t==1){if(obj.selectedCell&&(e>=obj.selectedCell[1]&&e<=obj.selectedCell[3]||r>=obj.selectedCell[1]&&r<=obj.selectedCell[3]))return void obj.resetSelection()}else if(obj.selectedCell&&(e>=obj.selectedCell[0]&&e<=obj.selectedCell[2]||r>=obj.selectedCell[0]&&r<=obj.selectedCell[2]))return void obj.resetSelection()},obj.resetSelection=function(t){if(obj.highlighted.length){g=1;for(var e=0;e<obj.highlighted.length;e++){obj.highlighted[e].classList.remove("highlight"),obj.highlighted[e].classList.remove("highlight-left"),obj.highlighted[e].classList.remove("highlight-right"),obj.highlighted[e].classList.remove("highlight-top"),obj.highlighted[e].classList.remove("highlight-bottom"),obj.highlighted[e].classList.remove("highlight-selected");var r=parseInt(obj.highlighted[e].getAttribute("data-x")),s=parseInt(obj.highlighted[e].getAttribute("data-y"));if(obj.highlighted[e].getAttribute("data-merged"))var c=parseInt(obj.highlighted[e].getAttribute("colspan")),p=parseInt(obj.highlighted[e].getAttribute("rowspan")),j=c>0?r+(c-1):r,h=p>0?s+(p-1):s;else j=r,h=s;for(var u=r;u<=j;u++)obj.headers[u]&&obj.headers[u].classList.remove("selected");for(u=s;u<=h;u++)obj.rows[u]&&obj.rows[u].classList.remove("selected")}}else var g=0;return obj.highlighted=[],obj.selectedCell=null,obj.corner.style.top="-2000px",obj.corner.style.left="-2000px",t==1&&g==1&&obj.dispatch("onblur",el),g},obj.updateSelection=function(t,e,r){var s=t.getAttribute("data-x"),c=t.getAttribute("data-y");if(e)var p=e.getAttribute("data-x"),j=e.getAttribute("data-y");else p=s,j=c;obj.updateSelectionFromCoords(s,c,p,j,r)},obj.updateSelectionFromCoords=function(t,e,r,s,c){var p=obj.resetSelection();if(e==null&&(e=0,s=obj.rows.length-1),r==null&&(r=t),s==null&&(s=e),t>=obj.headers.length&&(t=obj.headers.length-1),e>=obj.rows.length&&(e=obj.rows.length-1),r>=obj.headers.length&&(r=obj.headers.length-1),s>=obj.rows.length&&(s=obj.rows.length-1),obj.selectedCell=[t,e,r,s],t!=null){if(obj.records[e][t]&&obj.records[e][t].classList.add("highlight-selected"),parseInt(t)<parseInt(r))var j=parseInt(t),h=parseInt(r);else j=parseInt(r),h=parseInt(t);if(parseInt(e)<parseInt(s))var u=parseInt(e),g=parseInt(s);else u=parseInt(s),g=parseInt(e);for(var N=j;N<=h;N++)for(var P=u;P<=g;P++)if(obj.records[P][N]&&obj.records[P][N].getAttribute("data-merged")){var _=parseInt(obj.records[P][N].getAttribute("data-x")),f=parseInt(obj.records[P][N].getAttribute("data-y")),w=parseInt(obj.records[P][N].getAttribute("colspan")),C=parseInt(obj.records[P][N].getAttribute("rowspan"));w>1&&(_<j&&(j=_),_+w>h&&(h=_+w-1)),C&&(f<u&&(u=f),f+C>g&&(g=f+C-1))}var E=null,S=null,k=null,B=null;for(P=u;P<=g;P++)obj.rows[P].style.display!="none"&&(k==null&&(k=P),B=P);for(N=j;N<=h;N++){for(P=u;P<=g;P++)obj.rows[P].style.display!="none"&&obj.records[P][N].style.display!="none"&&(obj.records[P][N].classList.add("highlight"),obj.highlighted.push(obj.records[P][N]));obj.options.columns[N].type!="hidden"&&(E==null&&(E=N),S=N)}for(E||(E=0),S||(S=0),N=E;N<=S;N++)obj.options.columns[N].type!="hidden"&&(obj.records[k]&&obj.records[k][N]&&obj.records[k][N].classList.add("highlight-top"),obj.records[B]&&obj.records[B][N]&&obj.records[B][N].classList.add("highlight-bottom"),obj.headers[N].classList.add("selected"));for(P=k;P<=B;P++)obj.rows[P]&&obj.rows[P].style.display!="none"&&(obj.records[P][E].classList.add("highlight-left"),obj.records[P][S].classList.add("highlight-right"),obj.rows[P].classList.add("selected"));obj.selectedContainer=[E,k,S,B]}p==0&&(obj.dispatch("onfocus",el),obj.removeCopyingSelection()),obj.dispatch("onselection",el,E,k,S,B,c),obj.updateCornerPosition()},obj.removeCopySelection=function(){for(var t=0;t<obj.selection.length;t++)obj.selection[t].classList.remove("selection"),obj.selection[t].classList.remove("selection-left"),obj.selection[t].classList.remove("selection-right"),obj.selection[t].classList.remove("selection-top"),obj.selection[t].classList.remove("selection-bottom");obj.selection=[]},obj.updateCopySelection=function(t,e){obj.removeCopySelection();var r=obj.selectedContainer[0],s=obj.selectedContainer[1],c=obj.selectedContainer[2],p=obj.selectedContainer[3];if(t!=null&&e!=null){if(t-c>0)var j=parseInt(c)+1,h=parseInt(t);else j=parseInt(t),h=parseInt(r)-1;if(e-p>0)var u=parseInt(p)+1,g=parseInt(e);else u=parseInt(e),g=parseInt(s)-1;h-j<=g-u?(j=parseInt(r),h=parseInt(c)):(u=parseInt(s),g=parseInt(p));for(var N=u;N<=g;N++)for(var P=j;P<=h;P++)obj.records[N][P]&&obj.rows[N].style.display!="none"&&obj.records[N][P].style.display!="none"&&(obj.records[N][P].classList.add("selection"),obj.records[u][P].classList.add("selection-top"),obj.records[g][P].classList.add("selection-bottom"),obj.records[N][j].classList.add("selection-left"),obj.records[N][h].classList.add("selection-right"),obj.selection.push(obj.records[N][P]))}},obj.updateCornerPosition=function(){if(obj.highlighted.length){var t=obj.highlighted[obj.highlighted.length-1],e=t.getAttribute("data-x"),r=obj.content.getBoundingClientRect(),s=r.left,c=r.top,p=t.getBoundingClientRect(),j=p.left,h=p.top,u=p.width,g=p.height,N=j-s+obj.content.scrollLeft+u-4,P=h-c+obj.content.scrollTop+g-4;if(obj.corner.style.top=P+"px",obj.corner.style.left=N+"px",obj.options.freezeColumns){var _=obj.getFreezeWidth();e>obj.options.freezeColumns-1&&j-s+u<_?obj.corner.style.display="none":obj.options.selectionCopy==1&&(obj.corner.style.display="")}else obj.options.selectionCopy==1&&(obj.corner.style.display="")}else obj.corner.style.top="-2000px",obj.corner.style.left="-2000px"},obj.updateScroll=function(t){var e=obj.content.getBoundingClientRect(),r=e.left,s=e.top,c=e.width,p=e.height,j=obj.records[obj.selectedCell[3]][obj.selectedCell[2]].getBoundingClientRect(),h=j.left,u=j.top,g=j.width,N=j.height;if(t==0||t==1)var P=h-r+obj.content.scrollLeft,_=u-s+obj.content.scrollTop-2;else P=h-r+obj.content.scrollLeft+g,_=u-s+obj.content.scrollTop+N;_>obj.content.scrollTop+30&&_<obj.content.scrollTop+p||(_<obj.content.scrollTop+30?obj.content.scrollTop=_-N:obj.content.scrollTop=_-(p-2));var f=obj.getFreezeWidth();P>obj.content.scrollLeft+f&&P<obj.content.scrollLeft+c||(P<obj.content.scrollLeft+30?(obj.content.scrollLeft=P,obj.content.scrollLeft<50&&(obj.content.scrollLeft=0)):P<obj.content.scrollLeft+f?obj.content.scrollLeft=P-f-1:obj.content.scrollLeft=P-(c-20))},obj.getWidth=function(t){if(t===void 0)for(var e=[],r=0;r<obj.headers.length;r++)e.push(obj.options.columns[r].width);else typeof t=="object"&&(t=t.getAttribute("data-x")),e=obj.colgroup[t].getAttribute("width");return e},obj.setWidth=function(t,e,r){if(e){if(Array.isArray(t)){r||(r=[]);for(var s=0;s<t.length;s++){r[s]||(r[s]=obj.colgroup[t[s]].getAttribute("width"));var c=Array.isArray(e)&&e[s]?e[s]:e;obj.colgroup[t[s]].setAttribute("width",c),obj.options.columns[t[s]].width=c}}else r||(r=obj.colgroup[t].getAttribute("width")),obj.colgroup[t].setAttribute("width",e),obj.options.columns[t].width=e;obj.setHistory({action:"setWidth",column:t,oldValue:r,newValue:e}),obj.dispatch("onresizecolumn",el,t,e,r),obj.updateCornerPosition()}},obj.setHeight=function(t,e,r){e>0&&(typeof t=="object"&&(t=t.getAttribute("data-y")),r||(r=obj.rows[t].getAttribute("height"))||(r=obj.rows[t].getBoundingClientRect().height),e=parseInt(e),obj.rows[t].style.height=e+"px",obj.options.rows[t]||(obj.options.rows[t]={}),obj.options.rows[t].height=e,obj.setHistory({action:"setHeight",row:t,oldValue:r,newValue:e}),obj.dispatch("onresizerow",el,t,e,r),obj.updateCornerPosition())},obj.getHeight=function(t){if(t===void 0)for(var e=[],r=0;r<obj.rows.length;r++){var s=obj.rows[r].style.height;s&&(e[r]=s)}else typeof t=="object"&&(t=$(t).getAttribute("data-y")),e=obj.rows[t].style.height;return e},obj.setFooter=function(t){if(t&&(obj.options.footers=t),obj.options.footers){obj.tfoot||(obj.tfoot=document.createElement("tfoot"),obj.table.appendChild(obj.tfoot));for(var e=0;e<obj.options.footers.length;e++){if(obj.tfoot.children[e])var r=obj.tfoot.children[e];else{r=document.createElement("tr");var s=document.createElement("td");r.appendChild(s),obj.tfoot.appendChild(r)}for(var c=0;c<obj.headers.length;c++){if(obj.options.footers[e][c]||(obj.options.footers[e][c]=""),obj.tfoot.children[e].children[c+1])s=obj.tfoot.children[e].children[c+1];else{s=document.createElement("td"),r.appendChild(s);var p=obj.options.columns[c].align?obj.options.columns[c].align:"center";s.style.textAlign=p}s.textContent=obj.parseValue(+obj.records.length+c,e,obj.options.footers[e][c]),s.style.display=obj.colgroup[c].style.display}}}},obj.getHeader=function(t){return obj.headers[t].textContent},obj.setHeader=function(t,e){if(obj.headers[t]){var r=obj.headers[t].textContent;e||(e=prompt(obj.options.text.columnName,r)),e&&(obj.headers[t].textContent=e,obj.headers[t].setAttribute("title",e),obj.options.columns[t].title=e),obj.setHistory({action:"setHeader",column:t,oldValue:r,newValue:e}),obj.dispatch("onchangeheader",el,t,r,e)}},obj.getHeaders=function(t){for(var e=[],r=0;r<obj.headers.length;r++)e.push(obj.getHeader(r));return t?e:e.join(obj.options.csvDelimiter)},obj.getMeta=function(t,e){return t?e?obj.options.meta[t]&&obj.options.meta[t][e]?obj.options.meta[t][e]:null:obj.options.meta[t]?obj.options.meta[t]:null:obj.options.meta},obj.setMeta=function(t,e,r){if(obj.options.meta||(obj.options.meta={}),e&&r)obj.options.meta[t]||(obj.options.meta[t]={}),obj.options.meta[t][e]=r;else for(var s=Object.keys(t),c=0;c<s.length;c++){obj.options.meta[s[c]]||(obj.options.meta[s[c]]={});for(var p=Object.keys(t[s[c]]),j=0;j<p.length;j++)obj.options.meta[s[c]][p[j]]=t[s[c]][p[j]]}obj.dispatch("onchangemeta",el,t,e,r)},obj.updateMeta=function(t){if(obj.options.meta){for(var e={},r=Object.keys(obj.options.meta),s=0;s<r.length;s++)t[r[s]]?e[t[r[s]]]=obj.options.meta[r[s]]:e[r[s]]=obj.options.meta[r[s]];obj.options.meta=e}},obj.getStyle=function(t,e){if(t)return t=jexcel.getIdFromColumnName(t,!0),e?obj.records[t[1]][t[0]].style[e]:obj.records[t[1]][t[0]].getAttribute("style");for(var r={},s=obj.options.data[0].length,c=obj.options.data.length,p=0;p<c;p++)for(var j=0;j<s;j++){var h=e?obj.records[p][j].style[e]:obj.records[p][j].getAttribute("style");h&&(r[jexcel.getColumnNameFromId([j,p])]=h)}return r},obj.resetStyle=function(t,e){for(var r=Object.keys(t),s=0;s<r.length;s++){var c=jexcel.getIdFromColumnName(r[s],!0);obj.records[c[1]]&&obj.records[c[1]][c[0]]&&obj.records[c[1]][c[0]].setAttribute("style","")}obj.setStyle(t,null,null,null,e)},obj.setStyle=function(t,e,r,s,c){var p={},j={},h=function(E,S,k){var B=jexcel.getIdFromColumnName(E,!0);if(obj.records[B[1]]&&obj.records[B[1]][B[0]]&&(obj.records[B[1]][B[0]].classList.contains("readonly")==0||s)){var q=obj.records[B[1]][B[0]].style[S];q!=k||s?obj.records[B[1]][B[0]].style[S]=k:(k="",obj.records[B[1]][B[0]].style[S]=""),j[E]||(j[E]=[]),p[E]||(p[E]=[]),j[E].push([S+":"+q]),p[E].push([S+":"+k])}};if(e&&r)if(typeof t=="string")h(t,e,r);else for(var u=[],g=0;g<t.length;g++){var N=t[g].getAttribute("data-x"),P=t[g].getAttribute("data-y"),_=jexcel.getColumnNameFromId([N,P]);u[_]||(h(_,e,r),u[_]=!0)}else{var f=Object.keys(t);for(g=0;g<f.length;g++){var w=t[f[g]];typeof w=="string"&&(w=w.split(";"));for(var C=0;C<w.length;C++)typeof w[C]=="string"&&(w[C]=w[C].split(":")),w[C][0].trim()&&h(f[g],w[C][0].trim(),w[C][1])}}for(f=Object.keys(j),g=0;g<f.length;g++)j[f[g]]=j[f[g]].join(";");for(f=Object.keys(p),g=0;g<f.length;g++)p[f[g]]=p[f[g]].join(";");c||obj.setHistory({action:"setStyle",oldValue:j,newValue:p}),obj.dispatch("onchangestyle",el,t,e,r)},obj.getComments=function(t,e){if(t)return typeof t=="string"&&(t=jexcel.getIdFromColumnName(t,!0)),e?[obj.records[t[1]][t[0]].getAttribute("title"),obj.records[t[1]][t[0]].getAttribute("author")]:obj.records[t[1]][t[0]].getAttribute("title")||"";for(var r={},s=0;s<obj.options.data.length;s++)for(var c=0;c<obj.options.columns.length;c++){var p=obj.records[s][c].getAttribute("title");p&&(r[t=jexcel.getColumnNameFromId([c,s])]=p)}return r},obj.setComments=function(t,e,r){if(typeof t=="string")var s=jexcel.getIdFromColumnName(t,!0);else s=t;var c=obj.records[s[1]][s[0]].getAttribute("title"),p=[c,r=obj.records[s[1]][s[0]].getAttribute("data-author")];obj.records[s[1]][s[0]].setAttribute("title",e||""),obj.records[s[1]][s[0]].setAttribute("data-author",r||""),e?obj.records[s[1]][s[0]].classList.add("jexcel_comments"):obj.records[s[1]][s[0]].classList.remove("jexcel_comments"),obj.setHistory({action:"setComments",column:t,newValue:[e,r],oldValue:p}),obj.dispatch("oncomments",el,e,c,s,s[0],s[1])},obj.getConfig=function(){var t=obj.options;return t.style=obj.getStyle(),t.mergeCells=obj.getMerge(),t.comments=obj.getComments(),t},obj.orderBy=function(t,e){if(t>=0){if(Object.keys(obj.options.mergeCells).length>0){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}e=e==null?obj.headers[t].classList.contains("arrow-down")?1:0:e?1:0;var r=[];if(obj.options.columns[t].type=="number"||obj.options.columns[t].type=="numeric"||obj.options.columns[t].type=="percentage"||obj.options.columns[t].type=="autonumber"||obj.options.columns[t].type=="color")for(var s=0;s<obj.options.data.length;s++)r[s]=[s,Number(obj.options.data[s][t])];else if(obj.options.columns[t].type=="calendar"||obj.options.columns[t].type=="checkbox"||obj.options.columns[t].type=="radio")for(s=0;s<obj.options.data.length;s++)r[s]=[s,obj.options.data[s][t]];else for(s=0;s<obj.options.data.length;s++)r[s]=[s,obj.records[s][t].textContent.toLowerCase()];typeof obj.options.sorting!="function"&&(obj.options.sorting=function(p){return function(j,h){var u=j[1],g=h[1];return p?u===""&&g!==""?1:u!==""&&g===""||u>g?-1:u<g?1:0:u===""&&g!==""?1:u!==""&&g===""?-1:u>g?1:u<g?-1:0}}),r=r.sort(obj.options.sorting(e));var c=[];for(s=0;s<r.length;s++)c[s]=r[s][0];return obj.setHistory({action:"orderBy",rows:c,column:t,order:e}),obj.updateOrderArrow(t,e),obj.updateOrder(c),obj.dispatch("onsort",el,t,e),!0}},obj.updateOrderArrow=function(t,e){for(var r=0;r<obj.headers.length;r++)obj.headers[r].classList.remove("arrow-up"),obj.headers[r].classList.remove("arrow-down");e?obj.headers[t].classList.add("arrow-up"):obj.headers[t].classList.add("arrow-down")},obj.updateOrder=function(t){for(var e=[],r=0;r<t.length;r++)e[r]=obj.options.data[t[r]];for(obj.options.data=e,e=[],r=0;r<t.length;r++)e[r]=obj.records[t[r]];for(obj.records=e,e=[],r=0;r<t.length;r++)e[r]=obj.rows[t[r]];if(obj.rows=e,obj.updateTableReferences(),obj.results&&obj.results.length)obj.searchInput.value?obj.search(obj.searchInput.value):obj.closeFilter();else if(obj.results=null,obj.pageNumber=0,obj.options.pagination>0)obj.page(0);else if(obj.options.lazyLoading==1)obj.loadPage(0);else for(r=0;r<obj.rows.length;r++)obj.tbody.appendChild(obj.rows[r])},obj.moveRow=function(t,e,r){if(Object.keys(obj.options.mergeCells).length>0){if(t>e)var s=1;else s=0;if(obj.isRowMerged(t).length||obj.isRowMerged(e,s).length){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}}if(obj.options.search==1){if(obj.results&&obj.results.length!=obj.rows.length){if(!confirm(obj.options.text.thisActionWillClearYourSearchResultsAreYouSure))return!1;obj.resetSearch()}obj.results=null}r||(Array.prototype.indexOf.call(obj.tbody.children,obj.rows[e])>=0?t>e?obj.tbody.insertBefore(obj.rows[t],obj.rows[e]):obj.tbody.insertBefore(obj.rows[t],obj.rows[e].nextSibling):obj.tbody.removeChild(obj.rows[t])),obj.rows.splice(e,0,obj.rows.splice(t,1)[0]),obj.records.splice(e,0,obj.records.splice(t,1)[0]),obj.options.data.splice(e,0,obj.options.data.splice(t,1)[0]),obj.options.pagination>0&&obj.tbody.children.length!=obj.options.pagination&&obj.page(obj.pageNumber),obj.setHistory({action:"moveRow",oldValue:t,newValue:e}),obj.updateTableReferences(),obj.dispatch("onmoverow",el,t,e)},obj.insertRow=function(t,e,r){if(obj.options.allowInsertRow==1){var s=[];if(t>0)var c=t;else c=1,t&&(s=t);r=!!r;var p=obj.options.data.length-1;if((e==null||e>=parseInt(p)||e<0)&&(e=p),obj.dispatch("onbeforeinsertrow",el,e,c,r)===!1)return!1;if(Object.keys(obj.options.mergeCells).length>0&&obj.isRowMerged(e,r).length){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}if(obj.options.search==1){if(obj.results&&obj.results.length!=obj.rows.length){if(!confirm(obj.options.text.thisActionWillClearYourSearchResultsAreYouSure))return!1;obj.resetSearch()}obj.results=null}for(var j=r?e:e+1,h=obj.records.splice(j),u=obj.options.data.splice(j),g=obj.rows.splice(j),N=[],P=[],_=[],f=j;f<c+j;f++){obj.options.data[f]=[];for(var w=0;w<obj.options.columns.length;w++)obj.options.data[f][w]=s[w]?s[w]:"";var C=obj.createRow(f,obj.options.data[f]);g[0]?Array.prototype.indexOf.call(obj.tbody.children,g[0])>=0&&obj.tbody.insertBefore(C,g[0]):Array.prototype.indexOf.call(obj.tbody.children,obj.rows[e])>=0&&obj.tbody.appendChild(C),N.push(obj.records[f]),P.push(obj.options.data[f]),_.push(C)}Array.prototype.push.apply(obj.records,h),Array.prototype.push.apply(obj.options.data,u),Array.prototype.push.apply(obj.rows,g),obj.options.pagination>0&&obj.page(obj.pageNumber),obj.setHistory({action:"insertRow",rowNumber:e,numOfRows:c,insertBefore:r,rowRecords:N,rowData:P,rowNode:_}),obj.updateTableReferences(),obj.dispatch("oninsertrow",el,e,c,N,r)}},obj.deleteRow=function(t,e){if(obj.options.allowDeleteRow==1)if(obj.options.allowDeletingAllRows==1||obj.options.data.length>1){if(t==null){var r=obj.getSelectedRows();r[0]?(t=parseInt(r[0].getAttribute("data-y")),e=r.length):(t=obj.options.data.length-1,e=1)}var s=obj.options.data.length-1;if((t==null||t>s||t<0)&&(t=s),e||(e=1),t+e>=obj.options.data.length&&(e=obj.options.data.length-t),obj.dispatch("onbeforedeleterow",el,t,e)===!1)return!1;if(parseInt(t)>-1){var c=!1;if(Object.keys(obj.options.mergeCells).length>0)for(var p=t;p<t+e;p++)obj.isRowMerged(p,!1).length&&(c=!0);if(c){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}if(obj.options.search==1){if(obj.results&&obj.results.length!=obj.rows.length){if(!confirm(obj.options.text.thisActionWillClearYourSearchResultsAreYouSure))return!1;obj.resetSearch()}obj.results=null}for(obj.options.allowDeletingAllRows==0&&s+1===e&&(e--,console.error("Jspreadsheet: It is not possible to delete the last row")),p=t;p<t+e;p++)Array.prototype.indexOf.call(obj.tbody.children,obj.rows[p])>=0&&(obj.rows[p].className="",obj.rows[p].parentNode.removeChild(obj.rows[p]));var j=obj.records.splice(t,e),h=obj.options.data.splice(t,e),u=obj.rows.splice(t,e);obj.options.pagination>0&&obj.tbody.children.length!=obj.options.pagination&&obj.page(obj.pageNumber),obj.conditionalSelectionUpdate(1,t,t+e-1),obj.setHistory({action:"deleteRow",rowNumber:t,numOfRows:e,insertBefore:1,rowRecords:j,rowData:h,rowNode:u}),obj.updateTableReferences(),obj.dispatch("ondeleterow",el,t,e,j)}}else console.error("Jspreadsheet: It is not possible to delete the last row")},obj.moveColumn=function(t,e){if(Object.keys(obj.options.mergeCells).length>0){if(t>e)var r=1;else r=0;if(obj.isColMerged(t).length||obj.isColMerged(e,r).length){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}}if((t=parseInt(t))>(e=parseInt(e))){obj.headerContainer.insertBefore(obj.headers[t],obj.headers[e]),obj.colgroupContainer.insertBefore(obj.colgroup[t],obj.colgroup[e]);for(var s=0;s<obj.rows.length;s++)obj.rows[s].insertBefore(obj.records[s][t],obj.records[s][e])}else for(obj.headerContainer.insertBefore(obj.headers[t],obj.headers[e].nextSibling),obj.colgroupContainer.insertBefore(obj.colgroup[t],obj.colgroup[e].nextSibling),s=0;s<obj.rows.length;s++)obj.rows[s].insertBefore(obj.records[s][t],obj.records[s][e].nextSibling);for(obj.options.columns.splice(e,0,obj.options.columns.splice(t,1)[0]),obj.headers.splice(e,0,obj.headers.splice(t,1)[0]),obj.colgroup.splice(e,0,obj.colgroup.splice(t,1)[0]),s=0;s<obj.rows.length;s++)obj.options.data[s].splice(e,0,obj.options.data[s].splice(t,1)[0]),obj.records[s].splice(e,0,obj.records[s].splice(t,1)[0]);if(obj.options.footers)for(s=0;s<obj.options.footers.length;s++)obj.options.footers[s].splice(e,0,obj.options.footers[s].splice(t,1)[0]);obj.setHistory({action:"moveColumn",oldValue:t,newValue:e}),obj.updateTableReferences(),obj.dispatch("onmovecolumn",el,t,e)},obj.insertColumn=function(t,e,r,s){if(obj.options.allowInsertColumn==1){var c=[];if(t>0)var p=t;else p=1,t&&(c=t);r=!!r;var j=obj.options.columns.length-1;if((e==null||e>=parseInt(j)||e<0)&&(e=j),obj.dispatch("onbeforeinsertcolumn",el,e,p,r)===!1)return!1;if(Object.keys(obj.options.mergeCells).length>0&&obj.isColMerged(e,r).length){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}s||(s=[]);for(var h=0;h<p;h++)s[h]||(s[h]={type:"text",source:[],options:[],width:obj.options.defaultColWidth,align:obj.options.defaultColAlign});var u=r?e:e+1;obj.options.columns=jexcel.injectArray(obj.options.columns,u,s);for(var g=obj.headers.splice(u),N=obj.colgroup.splice(u),P=[],_=[],f=[],w=[],C=[],E=u;E<p+u;E++)obj.createCellHeader(E),obj.headerContainer.insertBefore(obj.headers[E],obj.headerContainer.children[E+1]),obj.colgroupContainer.insertBefore(obj.colgroup[E],obj.colgroupContainer.children[E+1]),P.push(obj.headers[E]),_.push(obj.colgroup[E]);if(obj.options.footers)for(var S=0;S<obj.options.footers.length;S++){for(C[S]=[],h=0;h<p;h++)C[S].push("");obj.options.footers[S].splice(u,0,C[S])}for(var k=0;k<obj.options.data.length;k++){var B=obj.options.data[k].splice(u),q=obj.records[k].splice(u);for(w[k]=[],f[k]=[],E=u;E<p+u;E++){var U=c[k]?c[k]:"";obj.options.data[k][E]=U;var F=obj.createCell(E,k,obj.options.data[k][E]);obj.records[k][E]=F,obj.rows[k]&&obj.rows[k].insertBefore(F,obj.rows[k].children[E+1]),w[k].push(U),f[k].push(F)}Array.prototype.push.apply(obj.options.data[k],B),Array.prototype.push.apply(obj.records[k],q)}if(Array.prototype.push.apply(obj.headers,g),Array.prototype.push.apply(obj.colgroup,N),obj.options.nestedHeaders&&obj.options.nestedHeaders.length>0)if(obj.options.nestedHeaders[0]&&obj.options.nestedHeaders[0][0])for(S=0;S<obj.options.nestedHeaders.length;S++){var Y=parseInt(obj.options.nestedHeaders[S][obj.options.nestedHeaders[S].length-1].colspan)+p;obj.options.nestedHeaders[S][obj.options.nestedHeaders[S].length-1].colspan=Y,obj.thead.children[S].children[obj.thead.children[S].children.length-1].setAttribute("colspan",Y);var rt=obj.thead.children[S].children[obj.thead.children[S].children.length-1].getAttribute("data-column");for(rt=rt.split(","),E=u;E<p+u;E++)rt.push(E);obj.thead.children[S].children[obj.thead.children[S].children.length-1].setAttribute("data-column",rt)}else Y=parseInt(obj.options.nestedHeaders[0].colspan)+p,obj.options.nestedHeaders[0].colspan=Y,obj.thead.children[0].children[obj.thead.children[0].children.length-1].setAttribute("colspan",Y);obj.setHistory({action:"insertColumn",columnNumber:e,numOfColumns:p,insertBefore:r,columns:s,headers:P,colgroup:_,records:f,footers:C,data:w}),obj.updateTableReferences(),obj.dispatch("oninsertcolumn",el,e,p,f,r)}},obj.deleteColumn=function(t,e){if(obj.options.allowDeleteColumn==1)if(obj.headers.length>1){if(t==null){var r=obj.getSelectedColumns(!0);r.length?(t=parseInt(r[0]),e=parseInt(r.length)):(t=obj.headers.length-1,e=1)}var s=obj.options.data[0].length-1;if((t==null||t>s||t<0)&&(t=s),e||(e=1),e>obj.options.data[0].length-t&&(e=obj.options.data[0].length-t),obj.dispatch("onbeforedeletecolumn",el,t,e)===!1)return!1;if(parseInt(t)>-1){var c=!1;if(Object.keys(obj.options.mergeCells).length>0)for(var p=t;p<t+e;p++)obj.isColMerged(p,!1).length&&(c=!0);if(c){if(!confirm(obj.options.text.thisActionWillDestroyAnyExistingMergedCellsAreYouSure))return!1;obj.destroyMerged()}var j=obj.options.columns.splice(t,e);for(p=t;p<t+e;p++)obj.colgroup[p].className="",obj.headers[p].className="",obj.colgroup[p].parentNode.removeChild(obj.colgroup[p]),obj.headers[p].parentNode.removeChild(obj.headers[p]);for(var h=obj.headers.splice(t,e),u=obj.colgroup.splice(t,e),g=[],N=[],P=[],_=0;_<obj.options.data.length;_++)for(p=t;p<t+e;p++)obj.records[_][p].className="",obj.records[_][p].parentNode.removeChild(obj.records[_][p]);for(_=0;_<obj.options.data.length;_++)N[_]=obj.options.data[_].splice(t,e),g[_]=obj.records[_].splice(t,e);if(obj.options.footers)for(_=0;_<obj.options.footers.length;_++)P[_]=obj.options.footers[_].splice(t,e);if(obj.conditionalSelectionUpdate(0,t,t+e-1),obj.options.nestedHeaders&&obj.options.nestedHeaders.length>0)if(obj.options.nestedHeaders[0]&&obj.options.nestedHeaders[0][0])for(var f=0;f<obj.options.nestedHeaders.length;f++){var w=parseInt(obj.options.nestedHeaders[f][obj.options.nestedHeaders[f].length-1].colspan)-e;obj.options.nestedHeaders[f][obj.options.nestedHeaders[f].length-1].colspan=w,obj.thead.children[f].children[obj.thead.children[f].children.length-1].setAttribute("colspan",w)}else w=parseInt(obj.options.nestedHeaders[0].colspan)-e,obj.options.nestedHeaders[0].colspan=w,obj.thead.children[0].children[obj.thead.children[0].children.length-1].setAttribute("colspan",w);obj.setHistory({action:"deleteColumn",columnNumber:t,numOfColumns:e,insertBefore:1,columns:j,headers:h,colgroup:u,records:g,footers:P,data:N}),obj.updateTableReferences(),obj.dispatch("ondeletecolumn",el,t,e,g)}}else console.error("Jspreadsheet: It is not possible to delete the last column")},obj.getSelectedRows=function(t){for(var e=[],r=0;r<obj.rows.length;r++)obj.rows[r].classList.contains("selected")&&(t?e.push(r):e.push(obj.rows[r]));return e},obj.getSelectedColumns=function(){for(var t=[],e=0;e<obj.headers.length;e++)obj.headers[e].classList.contains("selected")&&t.push(e);return t},obj.getHighlighted=function(){return obj.highlighted},obj.updateTableReferences=function(){for(var t=0;t<obj.headers.length;t++)(p=obj.headers[t].getAttribute("data-x"))!=t&&(obj.headers[t].setAttribute("data-x",t),obj.headers[t].getAttribute("title")||(obj.headers[t].innerHTML=jexcel.getColumnName(t)));for(var e=0;e<obj.rows.length;e++)obj.rows[e]&&(j=obj.rows[e].getAttribute("data-y"))!=e&&(obj.rows[e].setAttribute("data-y",e),obj.rows[e].children[0].setAttribute("data-y",e),obj.rows[e].children[0].innerHTML=e+1);var r=[],s=[],c=function(f,w,C,E){if(f!=C&&obj.records[E][C].setAttribute("data-x",C),w!=E&&obj.records[E][C].setAttribute("data-y",E),f!=C||w!=E){var S=jexcel.getColumnNameFromId([f,w]),k=jexcel.getColumnNameFromId([C,E]);r[S]=k}};for(e=0;e<obj.records.length;e++)for(t=0;t<obj.records[0].length;t++)if(obj.records[e][t]){var p=obj.records[e][t].getAttribute("data-x"),j=obj.records[e][t].getAttribute("data-y");if(obj.records[e][t].getAttribute("data-merged")){var h=jexcel.getColumnNameFromId([p,j]),u=jexcel.getColumnNameFromId([t,e]);if(s[h]==null)if(h==u)s[h]=!1;else{var g=parseInt(t-p),N=parseInt(e-j);s[h]=[u,g,N]}}else c(p,j,t,e)}var P=Object.keys(s);if(P.length){for(t=0;t<P.length;t++)if(s[P[t]]){var _=jexcel.getIdFromColumnName(P[t],!0);for(c(p=_[0],j=_[1],p+s[P[t]][1],j+s[P[t]][2]),h=P[t],u=s[P[t]][0],e=0;e<obj.options.mergeCells[h][2].length;e++)p=parseInt(obj.options.mergeCells[h][2][e].getAttribute("data-x")),j=parseInt(obj.options.mergeCells[h][2][e].getAttribute("data-y")),obj.options.mergeCells[h][2][e].setAttribute("data-x",p+s[P[t]][1]),obj.options.mergeCells[h][2][e].setAttribute("data-y",j+s[P[t]][2]);obj.options.mergeCells[u]=obj.options.mergeCells[h],delete obj.options.mergeCells[h]}}obj.updateFormulas(r),obj.updateMeta(r),obj.refreshSelection(),obj.updateTable()},obj.updateTable=function(){if(obj.options.minSpareRows>0){for(var t=0,e=obj.rows.length-1;e>=0;e--){for(var r=!1,s=0;s<obj.headers.length;s++)obj.options.data[e][s]&&(r=!0);if(r)break;t++}obj.options.minSpareRows-t>0&&obj.insertRow(obj.options.minSpareRows-t)}if(obj.options.minSpareCols>0){var c=0;for(s=obj.headers.length-1;s>=0;s--){for(r=!1,e=0;e<obj.rows.length;e++)obj.options.data[e][s]&&(r=!0);if(r)break;c++}obj.options.minSpareCols-c>0&&obj.insertColumn(obj.options.minSpareCols-c)}if(typeof obj.options.updateTable=="function"){for(obj.options.detachForUpdates&&el.removeChild(obj.content),e=0;e<obj.rows.length;e++)for(s=0;s<obj.headers.length;s++)obj.options.updateTable(el,obj.records[e][s],s,e,obj.options.data[e][s],obj.records[e][s].textContent,jexcel.getColumnNameFromId([s,e]));obj.options.detachForUpdates&&el.insertBefore(obj.content,obj.pagination)}obj.options.footers&&obj.setFooter(),setTimeout(function(){obj.updateCornerPosition()},0)},obj.isReadOnly=function(t){if(t=obj.getCell(t))return!!t.classList.contains("readonly")},obj.setReadOnly=function(t,e){(t=obj.getCell(t))&&(e?t.classList.add("readonly"):t.classList.remove("readonly"))},obj.showRow=function(t){obj.rows[t].style.display=""},obj.hideRow=function(t){obj.rows[t].style.display="none"},obj.showColumn=function(t){obj.headers[t].style.display="",obj.colgroup[t].style.display="",obj.filter&&obj.filter.children.length>t+1&&(obj.filter.children[t+1].style.display="");for(var e=0;e<obj.options.data.length;e++)obj.records[e][t].style.display="";obj.options.footers&&obj.setFooter(),obj.resetSelection()},obj.hideColumn=function(t){obj.headers[t].style.display="none",obj.colgroup[t].style.display="none",obj.filter&&obj.filter.children.length>t+1&&(obj.filter.children[t+1].style.display="none");for(var e=0;e<obj.options.data.length;e++)obj.records[e][t].style.display="none";obj.options.footers&&obj.setFooter(),obj.resetSelection()},obj.showIndex=function(){obj.table.classList.remove("jexcel_hidden_index")},obj.hideIndex=function(){obj.table.classList.add("jexcel_hidden_index")};var chainLoopProtection=[];obj.updateFormulaChain=function(t,e,r){var s=jexcel.getColumnNameFromId([t,e]);if(obj.formula[s]&&obj.formula[s].length>0)if(chainLoopProtection[s])obj.records[e][t].innerHTML="#ERROR",obj.formula[s]="";else{chainLoopProtection[s]=!0;for(var c=0;c<obj.formula[s].length;c++){var p=jexcel.getIdFromColumnName(obj.formula[s][c],!0),j=""+obj.options.data[p[1]][p[0]];j.substr(0,1)=="="?r.push(obj.updateCell(p[0],p[1],j,!0)):Object.keys(obj.formula)[c]=null,obj.updateFormulaChain(p[0],p[1],r)}}chainLoopProtection=[]},obj.updateFormulas=function(t){for(var e=0;e<obj.options.data.length;e++)for(var r=0;r<obj.options.data[0].length;r++)if((h=""+obj.options.data[e][r]).substr(0,1)=="="){var s=obj.updateFormula(h,t);s!=h&&(obj.options.data[e][r]=s)}var c=[],p=Object.keys(obj.formula);for(e=0;e<p.length;e++){var j=p[e],h=obj.formula[j];for(t[j]&&(j=t[j]),c[j]=[],r=0;r<h.length;r++){var u=h[r];t[u]&&(u=t[u]),c[j].push(u)}}obj.formula=c},obj.updateFormula=function(t,e){for(var r=/[A-Z]/,s=/[0-9]/,c="",p=null,j=null,h="",u=0;u<t.length;u++)r.exec(t[u])?(p=1,j=0,h+=t[u]):s.exec(t[u])?(j=p?1:0,h+=t[u]):(p&&j&&(h=e[h]?e[h]:h),c+=h,c+=t[u],p=0,j=0,h="");return h&&(p&&j&&(h=e[h]?e[h]:h),c+=h),c};var secureFormula=function(t){for(var e="",r=0,s=0;s<t.length;s++)t[s]=='"'&&(r=r==0?1:0),e+=r==1?t[s]:t[s].toUpperCase();return e};obj.executeFormula=function(expression,x,y){var formulaResults=[],formulaLoopProtection=[],execute=function(expression,x,y){var parentId=jexcel.getColumnNameFromId([x,y]);if(formulaLoopProtection[parentId])return console.error("Reference loop detected"),"#ERROR";formulaLoopProtection[parentId]=!0;var tokensUpdate=function(t){for(var e=0;e<t.length;e++){var r=[],s=t[e].split(":"),c=jexcel.getIdFromColumnName(s[0],!0),p=jexcel.getIdFromColumnName(s[1],!0);if(c[0]<=p[0])var j=c[0],h=p[0];else j=p[0],h=c[0];if(c[1]<=p[1])var u=c[1],g=p[1];else u=p[1],g=c[1];for(var N=u;N<=g;N++)for(var P=j;P<=h;P++)r.push(jexcel.getColumnNameFromId([P,N]));expression=expression.replace(t[e],r.join(","))}};expression=expression.replace(/\$?([A-Z]+)\$?([0-9]+)/g,"$1$2");var tokens=expression.match(/([A-Z]+[0-9]+)\:([A-Z]+[0-9]+)/g);tokens&&tokens.length&&tokensUpdate(tokens);var tokens=expression.match(/([A-Z]+[0-9]+)/g);if(tokens&&tokens.indexOf(parentId)>-1)return console.error("Self Reference detected"),"#ERROR";var formulaExpressions={};if(tokens){for(var i=0;i<tokens.length;i++)if(obj.formula[tokens[i]]||(obj.formula[tokens[i]]=[]),obj.formula[tokens[i]].indexOf(parentId)<0&&obj.formula[tokens[i]].push(parentId),eval("typeof("+tokens[i]+') == "undefined"')){var position=jexcel.getIdFromColumnName(tokens[i],1);if(obj.options.data[position[1]]!==void 0&&obj.options.data[position[1]][position[0]]!==void 0)var value=obj.options.data[position[1]][position[0]];else var value="";if((""+value).substr(0,1)=="="&&(formulaResults[tokens[i]]!==void 0?value=formulaResults[tokens[i]]:(value=execute(value,position[0],position[1]),formulaResults[tokens[i]]=value)),(""+value).trim()=="")formulaExpressions[tokens[i]]=null;else if(value==Number(value)&&obj.options.autoCasting==1)formulaExpressions[tokens[i]]=Number(value);else{var number=obj.parseNumber(value,position[0]);obj.options.autoCasting==1&&number?formulaExpressions[tokens[i]]=number:formulaExpressions[tokens[i]]='"'+value+'"'}}}try{var res=jexcel.formula(expression.substr(1),formulaExpressions,x,y,obj)}catch(t){var res="#ERROR";console.log(t)}return res};return execute(expression,x,y)},obj.parseNumber=function(t,e){var r=e&&obj.options.columns[e].decimal?obj.options.columns[e].decimal:".",s=""+t;return(s=s.split(r))[0]=s[0].match(/[+-]?[0-9]/g),s[0]&&(s[0]=s[0].join("")),s[1]&&(s[1]=s[1].match(/[0-9]*/g).join("")),s[0]&&Number.isInteger(Number(s[0]))?s[1]?t=+(s[0]+"."+s[1]):t=+(s[0]+".00"):t=null,t},obj.row=function(t){},obj.col=function(t){},obj.up=function(t,e){if(t?obj.selectedCell[3]>0&&obj.up.visible(1,e?0:1):(obj.selectedCell[1]>0&&obj.up.visible(0,e?0:1),obj.selectedCell[2]=obj.selectedCell[0],obj.selectedCell[3]=obj.selectedCell[1]),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]),obj.options.lazyLoading==1)if(obj.selectedCell[1]==0||obj.selectedCell[3]==0)obj.loadPage(0),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]);else if(obj.loadValidation())obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]);else{var r=parseInt(obj.tbody.firstChild.getAttribute("data-y"));obj.selectedCell[1]-r<30&&(obj.loadUp(),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]))}else if(obj.options.pagination>0){var s=obj.whichPage(obj.selectedCell[3]);s!=obj.pageNumber&&obj.page(s)}obj.updateScroll(1)},obj.up.visible=function(t,e){if(t==0)var r=parseInt(obj.selectedCell[0]),s=parseInt(obj.selectedCell[1]);else r=parseInt(obj.selectedCell[2]),s=parseInt(obj.selectedCell[3]);if(e==0){for(var c=0;c<s;c++)if(obj.records[c][r].style.display!="none"&&obj.rows[c].style.display!="none"){s=c;break}}else s=obj.up.get(r,s);t==0?(obj.selectedCell[0]=r,obj.selectedCell[1]=s):(obj.selectedCell[2]=r,obj.selectedCell[3]=s)},obj.up.get=function(t,e){t=parseInt(t);for(var r=(e=parseInt(e))-1;r>=0;r--)if(obj.records[r][t].style.display!="none"&&obj.rows[r].style.display!="none"){if(obj.records[r][t].getAttribute("data-merged")&&obj.records[r][t]==obj.records[e][t])continue;e=r;break}return e},obj.down=function(t,e){if(t?obj.selectedCell[3]<obj.records.length-1&&obj.down.visible(1,e?0:1):(obj.selectedCell[1]<obj.records.length-1&&obj.down.visible(0,e?0:1),obj.selectedCell[2]=obj.selectedCell[0],obj.selectedCell[3]=obj.selectedCell[1]),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]),obj.options.lazyLoading==1)obj.selectedCell[1]==obj.records.length-1||obj.selectedCell[3]==obj.records.length-1?(obj.loadPage(-1),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3])):obj.loadValidation()?obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]):parseInt(obj.tbody.lastChild.getAttribute("data-y"))-obj.selectedCell[3]<30&&(obj.loadDown(),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]));else if(obj.options.pagination>0){var r=obj.whichPage(obj.selectedCell[3]);r!=obj.pageNumber&&obj.page(r)}obj.updateScroll(3)},obj.down.visible=function(t,e){if(t==0)var r=parseInt(obj.selectedCell[0]),s=parseInt(obj.selectedCell[1]);else r=parseInt(obj.selectedCell[2]),s=parseInt(obj.selectedCell[3]);if(e==0){for(var c=obj.rows.length-1;c>s;c--)if(obj.records[c][r].style.display!="none"&&obj.rows[c].style.display!="none"){s=c;break}}else s=obj.down.get(r,s);t==0?(obj.selectedCell[0]=r,obj.selectedCell[1]=s):(obj.selectedCell[2]=r,obj.selectedCell[3]=s)},obj.down.get=function(t,e){t=parseInt(t);for(var r=(e=parseInt(e))+1;r<obj.rows.length;r++)if(obj.records[r][t].style.display!="none"&&obj.rows[r].style.display!="none"){if(obj.records[r][t].getAttribute("data-merged")&&obj.records[r][t]==obj.records[e][t])continue;e=r;break}return e},obj.right=function(t,e){t?obj.selectedCell[2]<obj.headers.length-1&&obj.right.visible(1,e?0:1):(obj.selectedCell[0]<obj.headers.length-1&&obj.right.visible(0,e?0:1),obj.selectedCell[2]=obj.selectedCell[0],obj.selectedCell[3]=obj.selectedCell[1]),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]),obj.updateScroll(2)},obj.right.visible=function(t,e){if(t==0)var r=parseInt(obj.selectedCell[0]),s=parseInt(obj.selectedCell[1]);else r=parseInt(obj.selectedCell[2]),s=parseInt(obj.selectedCell[3]);if(e==0){for(var c=obj.headers.length-1;c>r;c--)if(obj.records[s][c].style.display!="none"){r=c;break}}else r=obj.right.get(r,s);t==0?(obj.selectedCell[0]=r,obj.selectedCell[1]=s):(obj.selectedCell[2]=r,obj.selectedCell[3]=s)},obj.right.get=function(t,e){t=parseInt(t),e=parseInt(e);for(var r=t+1;r<obj.headers.length;r++)if(obj.records[e][r].style.display!="none"){if(obj.records[e][r].getAttribute("data-merged")&&obj.records[e][r]==obj.records[e][t])continue;t=r;break}return t},obj.left=function(t,e){t?obj.selectedCell[2]>0&&obj.left.visible(1,e?0:1):(obj.selectedCell[0]>0&&obj.left.visible(0,e?0:1),obj.selectedCell[2]=obj.selectedCell[0],obj.selectedCell[3]=obj.selectedCell[1]),obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]),obj.updateScroll(0)},obj.left.visible=function(t,e){if(t==0)var r=parseInt(obj.selectedCell[0]),s=parseInt(obj.selectedCell[1]);else r=parseInt(obj.selectedCell[2]),s=parseInt(obj.selectedCell[3]);if(e==0){for(var c=0;c<r;c++)if(obj.records[s][c].style.display!="none"){r=c;break}}else r=obj.left.get(r,s);t==0?(obj.selectedCell[0]=r,obj.selectedCell[1]=s):(obj.selectedCell[2]=r,obj.selectedCell[3]=s)},obj.left.get=function(t,e){t=parseInt(t),e=parseInt(e);for(var r=t-1;r>=0;r--)if(obj.records[e][r].style.display!="none"){if(obj.records[e][r].getAttribute("data-merged")&&obj.records[e][r]==obj.records[e][t])continue;t=r;break}return t},obj.first=function(t,e){if(t?e?obj.selectedCell[3]=0:obj.left.visible(1,0):(e?obj.selectedCell[1]=0:obj.left.visible(0,0),obj.selectedCell[2]=obj.selectedCell[0],obj.selectedCell[3]=obj.selectedCell[1]),obj.options.lazyLoading!=1||obj.selectedCell[1]!=0&&obj.selectedCell[3]!=0){if(obj.options.pagination>0){var r=obj.whichPage(obj.selectedCell[3]);r!=obj.pageNumber&&obj.page(r)}}else obj.loadPage(0);obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]),obj.updateScroll(1)},obj.last=function(t,e){if(t?e?obj.selectedCell[3]=obj.records.length-1:obj.right.visible(1,0):(e?obj.selectedCell[1]=obj.records.length-1:obj.right.visible(0,0),obj.selectedCell[2]=obj.selectedCell[0],obj.selectedCell[3]=obj.selectedCell[1]),obj.options.lazyLoading!=1||obj.selectedCell[1]!=obj.records.length-1&&obj.selectedCell[3]!=obj.records.length-1){if(obj.options.pagination>0){var r=obj.whichPage(obj.selectedCell[3]);r!=obj.pageNumber&&obj.page(r)}}else obj.loadPage(-1);obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3]),obj.updateScroll(3)},obj.selectAll=function(){obj.selectedCell||(obj.selectedCell=[]),obj.selectedCell[0]=0,obj.selectedCell[1]=0,obj.selectedCell[2]=obj.headers.length-1,obj.selectedCell[3]=obj.records.length-1,obj.updateSelectionFromCoords(obj.selectedCell[0],obj.selectedCell[1],obj.selectedCell[2],obj.selectedCell[3])},obj.loadPage=function(t){if(obj.options.search!=1&&obj.options.filters!=1||!obj.results)e=obj.rows;else var e=obj.results;var r=100;t!=null&&t!=-1||(t=Math.ceil(e.length/r)-1);var s=t*r,c=t*r+r;c>e.length&&(c=e.length),(s=c-100)<0&&(s=0);for(var p=s;p<c;p++)obj.options.search!=1&&obj.options.filters!=1||!obj.results?obj.tbody.appendChild(obj.rows[p]):obj.tbody.appendChild(obj.rows[e[p]]),obj.tbody.children.length>r&&obj.tbody.removeChild(obj.tbody.firstChild)},obj.loadUp=function(){if(obj.options.search!=1&&obj.options.filters!=1||!obj.results)t=obj.rows;else var t=obj.results;var e=0;if(t.length>100){var r=parseInt(obj.tbody.firstChild.getAttribute("data-y"));if(obj.options.search!=1&&obj.options.filters!=1||!obj.results||(r=t.indexOf(r)),r>0)for(var s=0;s<30;s++)(r-=1)>-1&&(obj.options.search!=1&&obj.options.filters!=1||!obj.results?obj.tbody.insertBefore(obj.rows[r],obj.tbody.firstChild):obj.tbody.insertBefore(obj.rows[t[r]],obj.tbody.firstChild),obj.tbody.children.length>100&&(obj.tbody.removeChild(obj.tbody.lastChild),e=1))}return e},obj.loadDown=function(){if(obj.options.search!=1&&obj.options.filters!=1||!obj.results)t=obj.rows;else var t=obj.results;var e=0;if(t.length>100){var r=parseInt(obj.tbody.lastChild.getAttribute("data-y"));if(obj.options.search!=1&&obj.options.filters!=1||!obj.results||(r=t.indexOf(r)),r<obj.rows.length-1)for(var s=0;s<=30;s++)r<t.length&&(obj.options.search!=1&&obj.options.filters!=1||!obj.results?obj.tbody.appendChild(obj.rows[r]):obj.tbody.appendChild(obj.rows[t[r]]),obj.tbody.children.length>100&&(obj.tbody.removeChild(obj.tbody.firstChild),e=1)),r+=1}return e},obj.loadValidation=function(){if(obj.selectedCell){var t=parseInt(obj.tbody.firstChild.getAttribute("data-y"))/100,e=parseInt(obj.selectedCell[3]/100),r=parseInt(obj.rows.length/100);if(t!=e&&e<=r&&!Array.prototype.indexOf.call(obj.tbody.children,obj.rows[obj.selectedCell[3]]))return obj.loadPage(e),!0}return!1},obj.resetSearch=function(){obj.searchInput.value="",obj.search(""),obj.results=null},obj.search=function(t){if(obj.options.filters&&obj.resetFilters(),obj.resetSelection(),obj.pageNumber=0,obj.results=[],t){var e=function(s){obj.results.indexOf(s)==-1&&obj.results.push(s)},r=t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");r=new RegExp(r,"i"),obj.options.data.forEach(function(s,c){if(function(g,N,P){for(var _=0;_<g.length;_++)if((""+g[_]).toLowerCase().search(N)>=0||(""+obj.records[P][_].innerHTML).toLowerCase().search(N)>=0)return!0;return!1}(s,r,c)){var p=obj.isRowMerged(c);if(p.length)for(var j=0;j<p.length;j++)for(var h=jexcel.getIdFromColumnName(p[j],!0),u=0;u<obj.options.mergeCells[p[j]][1];u++)e(h[1]+u);else e(c)}})}else obj.results=null;return obj.updateResult()},obj.updateResult=function(){var t,e=0;for(t=obj.options.lazyLoading==1?100:obj.options.pagination>0?obj.options.pagination:obj.results?obj.results.length:obj.rows.length;obj.tbody.firstChild;)obj.tbody.removeChild(obj.tbody.firstChild);for(var r=0;r<obj.rows.length;r++)!obj.results||obj.results.indexOf(r)>-1?(e<t&&(obj.tbody.appendChild(obj.rows[r]),e++),obj.rows[r].style.display=""):obj.rows[r].style.display="none";return obj.options.pagination>0&&obj.updatePagination(),obj.updateCornerPosition(),t},obj.whichPage=function(t){return obj.options.search!=1&&obj.options.filters!=1||!obj.results||(t=obj.results.indexOf(t)),Math.ceil((parseInt(t)+1)/parseInt(obj.options.pagination))-1},obj.page=function(t){var e=obj.pageNumber;if(obj.options.search!=1&&obj.options.filters!=1||!obj.results)r=obj.rows;else var r=obj.results;var s=parseInt(obj.options.pagination);t!=null&&t!=-1||(t=Math.ceil(r.length/s)-1),obj.pageNumber=t;var c=t*s,p=t*s+s;for(p>r.length&&(p=r.length),c<0&&(c=0);obj.tbody.firstChild;)obj.tbody.removeChild(obj.tbody.firstChild);for(var j=c;j<p;j++)obj.options.search!=1&&obj.options.filters!=1||!obj.results?obj.tbody.appendChild(obj.rows[j]):obj.tbody.appendChild(obj.rows[r[j]]);obj.options.pagination>0&&obj.updatePagination(),obj.updateCornerPosition(),obj.dispatch("onchangepage",el,t,e)},obj.updatePagination=function(){if(obj.pagination.children[0].innerHTML="",obj.pagination.children[1].innerHTML="",obj.options.pagination){if(obj.options.search!=1&&obj.options.filters!=1||!obj.results)t=obj.rows.length;else var t=obj.results.length;if(t){var e=Math.ceil(t/obj.options.pagination);if(obj.pageNumber<6)var r=1,s=e<10?e:10;else e-obj.pageNumber<5?(s=e,(r=e-9)<1&&(r=1)):(r=obj.pageNumber-4,s=obj.pageNumber+5);r>1&&((p=document.createElement("div")).className="jexcel_page",p.innerHTML="<",p.title=1,obj.pagination.children[1].appendChild(p));for(var c=r;c<=s;c++){var p;(p=document.createElement("div")).className="jexcel_page",p.innerHTML=c,obj.pagination.children[1].appendChild(p),obj.pageNumber==c-1&&p.classList.add("jexcel_page_selected")}s<e&&((p=document.createElement("div")).className="jexcel_page",p.innerHTML=">",p.title=e,obj.pagination.children[1].appendChild(p)),obj.pagination.children[0].innerHTML=function(j){var h=Array.prototype.slice.call(arguments,1);return j.replace(/{(\d+)}/g,function(u,g){return h[g]!==void 0?h[g]:u})}(obj.options.text.showingPage,obj.pageNumber+1,e)}else obj.pagination.children[0].innerHTML=obj.options.text.noRecordsFound}},obj.download=function(t){if(obj.options.allowExport==0)console.error("Export not allowed");else{var e="";e+=obj.copy(!1,obj.options.csvDelimiter,!0,t,!0);var r=new Blob(["\uFEFF"+e],{type:"text/csv;charset=utf-8;"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(r,obj.options.csvFileName+".csv");else{var s=document.createElement("a"),c=URL.createObjectURL(r);s.href=c,s.setAttribute("download",obj.options.csvFileName+".csv"),document.body.appendChild(s),s.click(),s.parentNode.removeChild(s)}}},obj.setHistory=function(t){if(obj.ignoreHistory!=1){var e=++obj.historyIndex;obj.history=obj.history=obj.history.slice(0,e+1),obj.history[e]=t}},obj.copy=function(t,e,r,s,c){e||(e="	");for(var p=new RegExp(e,"ig"),j=[],h=[],u=[],g=[],N=[],P=obj.options.data[0].length,_=obj.options.data.length,f="",w=!1,C="",E="",S=0,k=0,B=0,q=0,U=!0,F=0;F<_;F++)for(var Y=0;Y<P;Y++)t&&!obj.records[F][Y].classList.contains("highlight")||(B<=Y&&(B=Y),q<=F&&(q=F));if(P===B+1&&_===q+1&&(U=!1),c&&obj.options.includeHeadersOnDownload==1||!c&&obj.options.includeHeadersOnCopy==1&&!U||s){if(obj.options.nestedHeaders&&obj.options.nestedHeaders.length>0)for(f=obj.options.nestedHeaders[0]&&obj.options.nestedHeaders[0][0]?obj.options.nestedHeaders:[obj.options.nestedHeaders],F=0;F<f.length;F++){var rt=[];for(Y=0;Y<f[F].length;Y++){var tt=parseInt(f[F][Y].colspan);rt.push(f[F][Y].title);for(var yt=0;yt<tt-1;yt++)rt.push("")}E+=rt.join(e)+`\r
`}w=!0}for(obj.style=[],F=0;F<_;F++){for(h=[],u=[],Y=0;Y<P;Y++)if(!t||obj.records[F][Y].classList.contains("highlight")){w==1&&j.push(obj.headers[Y].textContent);var Et=obj.options.data[F][Y];if(Et.match&&(Et.match(p)||Et.match(/,/g)||Et.match(/\n/)||Et.match(/\"/))&&(Et='"'+(Et=Et.replace(new RegExp('"',"g"),'""'))+'"'),h.push(Et),obj.options.columns[Y].type=="checkbox"||obj.options.columns[Y].type=="radio")var pt=Et;else(pt=obj.options.stripHTMLOnCopy==1?obj.records[F][Y].textContent:obj.records[F][Y].innerHTML).match&&(pt.match(p)||pt.match(/,/g)||pt.match(/\n/)||pt.match(/\"/))&&(pt='"'+(pt=pt.replace(new RegExp('"',"g"),'""'))+'"');u.push(pt),f=(f=obj.records[F][Y].getAttribute("style")).replace("display: none;",""),obj.style.push(f||"")}h.length&&(w&&(S=h.length,g.push(j.join(e))),g.push(h.join(e))),u.length&&(k++,w&&(N.push(j.join(e)),w=!1),N.push(u.join(e)))}P==S&&_==k&&(C=E);var Pt=C+g.join(`\r
`),Vt=C+N.join(`\r
`);if(r||(obj.options.copyCompatibility==1?obj.textarea.value=Vt:obj.textarea.value=Pt,obj.textarea.select(),document.execCommand("copy")),obj.options.copyCompatibility==1?obj.data=Vt:obj.data=Pt,obj.hashString=obj.hash(obj.data),!r){if(obj.removeCopyingSelection(),obj.highlighted)for(Y=0;Y<obj.highlighted.length;Y++)obj.highlighted[Y].classList.add("copying"),obj.highlighted[Y].classList.contains("highlight-left")&&obj.highlighted[Y].classList.add("copying-left"),obj.highlighted[Y].classList.contains("highlight-right")&&obj.highlighted[Y].classList.add("copying-right"),obj.highlighted[Y].classList.contains("highlight-top")&&obj.highlighted[Y].classList.add("copying-top"),obj.highlighted[Y].classList.contains("highlight-bottom")&&obj.highlighted[Y].classList.add("copying-bottom");obj.dispatch("oncopy",el,obj.options.copyCompatibility==1?N:g,obj.hashString)}return obj.data},obj.paste=function(t,e,r){var s=obj.dispatch("onbeforepaste",el,r,t,e);if(s===!1)return!1;s&&(r=s);var c=obj.hash(r),p=c==obj.hashString?obj.style:null;if(obj.options.copyCompatibility==1&&c==obj.hashString&&(r=obj.data),r=obj.parseCSV(r,"	"),t!=null&&e!=null&&r){for(var j=0,h=0,u=[],g={},N={},P=0,_=parseInt(t),f=parseInt(e),w=null;w=r[h];){for(j=0,_=parseInt(t);w[j]!=null;){var C=obj.updateCell(_,f,w[j]);if(u.push(C),obj.updateFormulaChain(_,f,u),p&&p[P]){var E=jexcel.getColumnNameFromId([_,f]);g[E]=p[P],N[E]=obj.getStyle(E),obj.records[f][_].setAttribute("style",p[P]),P++}if(w[++j]!=null){if(_>=obj.headers.length-1){if(obj.options.allowInsertColumn!=1)break;obj.insertColumn()}_=obj.right.get(_,f)}}if(r[++h]){if(f>=obj.rows.length-1){if(obj.options.allowInsertRow!=1)break;obj.insertRow()}f=obj.down.get(t,f)}}obj.updateSelectionFromCoords(t,e,_,f),obj.setHistory({action:"setValue",records:u,selection:obj.selectedCell,newStyle:g,oldStyle:N}),obj.updateTable(),obj.dispatch("onpaste",el,r),obj.onafterchanges(el,u)}obj.removeCopyingSelection()},obj.removeCopyingSelection=function(){for(var t=document.querySelectorAll(".jexcel .copying"),e=0;e<t.length;e++)t[e].classList.remove("copying"),t[e].classList.remove("copying-left"),t[e].classList.remove("copying-right"),t[e].classList.remove("copying-top"),t[e].classList.remove("copying-bottom")},obj.historyProcessRow=function(t,e){var r=e.insertBefore?+e.rowNumber:e.rowNumber+1;if(obj.options.search==1&&obj.results&&obj.results.length!=obj.rows.length&&obj.resetSearch(),t==1){for(var s=e.numOfRows,c=r;c<s+r;c++)obj.rows[c].parentNode.removeChild(obj.rows[c]);obj.records.splice(r,s),obj.options.data.splice(r,s),obj.rows.splice(r,s),obj.conditionalSelectionUpdate(1,r,s+r-1)}else{obj.records=jexcel.injectArray(obj.records,r,e.rowRecords),obj.options.data=jexcel.injectArray(obj.options.data,r,e.rowData),obj.rows=jexcel.injectArray(obj.rows,r,e.rowNode);var p=0;for(c=r;c<e.numOfRows+r;c++)obj.tbody.insertBefore(e.rowNode[p],obj.tbody.children[c]),p++}obj.options.pagination>0&&obj.page(obj.pageNumber),obj.updateTableReferences()},obj.historyProcessColumn=function(t,e){var r=e.insertBefore?e.columnNumber:e.columnNumber+1;if(t==1){var s=e.numOfColumns;obj.options.columns.splice(r,s);for(var c=r;c<s+r;c++)obj.headers[c].parentNode.removeChild(obj.headers[c]),obj.colgroup[c].parentNode.removeChild(obj.colgroup[c]);obj.headers.splice(r,s),obj.colgroup.splice(r,s);for(var p=0;p<e.data.length;p++){for(c=r;c<s+r;c++)obj.records[p][c].parentNode.removeChild(obj.records[p][c]);obj.records[p].splice(r,s),obj.options.data[p].splice(r,s)}if(obj.options.footers)for(p=0;p<obj.options.footers.length;p++)obj.options.footers[p].splice(r,s)}else{obj.options.columns=jexcel.injectArray(obj.options.columns,r,e.columns),obj.headers=jexcel.injectArray(obj.headers,r,e.headers),obj.colgroup=jexcel.injectArray(obj.colgroup,r,e.colgroup);var j=0;for(c=r;c<e.numOfColumns+r;c++)obj.headerContainer.insertBefore(e.headers[j],obj.headerContainer.children[c+1]),obj.colgroupContainer.insertBefore(e.colgroup[j],obj.colgroupContainer.children[c+1]),j++;for(p=0;p<e.data.length;p++)for(obj.options.data[p]=jexcel.injectArray(obj.options.data[p],r,e.data[p]),obj.records[p]=jexcel.injectArray(obj.records[p],r,e.records[p]),j=0,c=r;c<e.numOfColumns+r;c++)obj.rows[p].insertBefore(e.records[p][j],obj.rows[p].children[c+1]),j++;if(obj.options.footers)for(p=0;p<obj.options.footers.length;p++)obj.options.footers[p]=jexcel.injectArray(obj.options.footers[p],r,e.footers[p])}if(obj.options.nestedHeaders&&obj.options.nestedHeaders.length>0)if(obj.options.nestedHeaders[0]&&obj.options.nestedHeaders[0][0])for(p=0;p<obj.options.nestedHeaders.length;p++){if(t==1)var h=parseInt(obj.options.nestedHeaders[p][obj.options.nestedHeaders[p].length-1].colspan)-e.numOfColumns;else h=parseInt(obj.options.nestedHeaders[p][obj.options.nestedHeaders[p].length-1].colspan)+e.numOfColumns;obj.options.nestedHeaders[p][obj.options.nestedHeaders[p].length-1].colspan=h,obj.thead.children[p].children[obj.thead.children[p].children.length-1].setAttribute("colspan",h)}else h=t==1?parseInt(obj.options.nestedHeaders[0].colspan)-e.numOfColumns:parseInt(obj.options.nestedHeaders[0].colspan)+e.numOfColumns,obj.options.nestedHeaders[0].colspan=h,obj.thead.children[0].children[obj.thead.children[0].children.length-1].setAttribute("colspan",h);obj.updateTableReferences()},obj.undo=function(){var t=!!obj.ignoreEvents,e=!!obj.ignoreHistory;obj.ignoreEvents=!0,obj.ignoreHistory=!0;var r=[];if(obj.historyIndex>=0){var s=obj.history[obj.historyIndex--];if(s.action=="insertRow")obj.historyProcessRow(1,s);else if(s.action=="deleteRow")obj.historyProcessRow(0,s);else if(s.action=="insertColumn")obj.historyProcessColumn(1,s);else if(s.action=="deleteColumn")obj.historyProcessColumn(0,s);else if(s.action=="moveRow")obj.moveRow(s.newValue,s.oldValue);else if(s.action=="moveColumn")obj.moveColumn(s.newValue,s.oldValue);else if(s.action=="setMerge")obj.removeMerge(s.column,s.data);else if(s.action=="setStyle")obj.setStyle(s.oldValue,null,null,1);else if(s.action=="setWidth")obj.setWidth(s.column,s.oldValue);else if(s.action=="setHeight")obj.setHeight(s.row,s.oldValue);else if(s.action=="setHeader")obj.setHeader(s.column,s.oldValue);else if(s.action=="setComments")obj.setComments(s.column,s.oldValue[0],s.oldValue[1]);else if(s.action=="orderBy"){for(var c=[],p=0;p<s.rows.length;p++)c[s.rows[p]]=p;obj.updateOrderArrow(s.column,s.order?0:1),obj.updateOrder(c)}else if(s.action=="setValue"){for(var j=0;j<s.records.length;j++)r.push({x:s.records[j].x,y:s.records[j].y,newValue:s.records[j].oldValue}),s.oldStyle&&obj.resetStyle(s.oldStyle);obj.setValue(r),s.selection&&obj.updateSelectionFromCoords(s.selection[0],s.selection[1],s.selection[2],s.selection[3])}}obj.ignoreEvents=t,obj.ignoreHistory=e,obj.dispatch("onundo",el,s)},obj.redo=function(){var t=!!obj.ignoreEvents,e=!!obj.ignoreHistory;if(obj.ignoreEvents=!0,obj.ignoreHistory=!0,obj.historyIndex<obj.history.length-1){var r=obj.history[++obj.historyIndex];if(r.action=="insertRow")obj.historyProcessRow(0,r);else if(r.action=="deleteRow")obj.historyProcessRow(1,r);else if(r.action=="insertColumn")obj.historyProcessColumn(0,r);else if(r.action=="deleteColumn")obj.historyProcessColumn(1,r);else if(r.action=="moveRow")obj.moveRow(r.oldValue,r.newValue);else if(r.action=="moveColumn")obj.moveColumn(r.oldValue,r.newValue);else if(r.action=="setMerge")obj.setMerge(r.column,r.colspan,r.rowspan,1);else if(r.action=="setStyle")obj.setStyle(r.newValue,null,null,1);else if(r.action=="setWidth")obj.setWidth(r.column,r.newValue);else if(r.action=="setHeight")obj.setHeight(r.row,r.newValue);else if(r.action=="setHeader")obj.setHeader(r.column,r.newValue);else if(r.action=="setComments")obj.setComments(r.column,r.newValue[0],r.newValue[1]);else if(r.action=="orderBy")obj.updateOrderArrow(r.column,r.order),obj.updateOrder(r.rows);else if(r.action=="setValue"){obj.setValue(r.records);for(var s=0;s<r.records.length;s++)r.oldStyle&&obj.resetStyle(r.newStyle);r.selection&&obj.updateSelectionFromCoords(r.selection[0],r.selection[1],r.selection[2],r.selection[3])}}obj.ignoreEvents=t,obj.ignoreHistory=e,obj.dispatch("onredo",el,r)},obj.getDropDownValue=function(t,e){var r=[];if(obj.options.columns[t]&&obj.options.columns[t].source){for(var s=[],c=obj.options.columns[t].source,p=0;p<c.length;p++)typeof c[p]=="object"?s[c[p].id]=c[p].name:s[c[p]]=c[p];var j=Array.isArray(e)?e:(""+e).split(";");for(p=0;p<j.length;p++)typeof j[p]=="object"?r.push(s[j[p].id]):s[j[p]]&&r.push(s[j[p]])}else console.error("Invalid column");return r.length>0?r.join("; "):""},obj.parseCSV=function(t,e){(t=t.replace(/\r?\n$|\r$|\n$/g,"")).charCodeAt(t.length-1)==9&&(t+="\0"),e=e||",";for(var r=[],s=!1,c=0,p=0,j=0;j<t.length;j++){var h=t[j],u=t[j+1];r[c]=r[c]||[],r[c][p]=r[c][p]||"",h=='"'&&s&&u=='"'?(r[c][p]+=h,++j):h!='"'?h!=e||s?h!="\r"||u!=`
`||s?h==`
`&&!s||h=="\r"&&!s?(++c,p=0):r[c][p]+=h:(++c,p=0,++j):++p:s=!s}return r},obj.hash=function(t){var e,r=0;if(t.length===0)return r;for(e=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;return r},obj.onafterchanges=function(t,e){obj.dispatch("onafterchanges",t,e)},obj.destroy=function(){jexcel.destroy(el)},obj.init=function(){jexcel.current=obj,typeof jexcel.build=="function"&&(obj.options.root?jexcel.build(obj.options.root):(jexcel.build(document),jexcel.build=null)),el.setAttribute("tabindex",1),el.addEventListener("focus",function(t){jexcel.current&&!obj.selectedCell&&(obj.updateSelectionFromCoords(0,0,0,0),obj.left())}),obj.options.csv?(obj.options.loadingSpin==1&&jSuites.loading.show(),jSuites.ajax({url:obj.options.csv,method:obj.options.method,data:obj.options.requestVariables,dataType:"text",success:function(t){var e=obj.parseCSV(t,obj.options.csvDelimiter);if(obj.options.csvHeaders==1&&e.length>0)for(var r=e.shift(),s=0;s<r.length;s++)obj.options.columns[s]||(obj.options.columns[s]={type:"text",align:obj.options.defaultColAlign,width:obj.options.defaultColWidth}),obj.options.columns[s].title===void 0&&(obj.options.columns[s].title=r[s]);obj.options.data=e,obj.prepareTable(),obj.options.loadingSpin==1&&jSuites.loading.hide()}})):obj.options.url?(obj.options.loadingSpin==1&&jSuites.loading.show(),jSuites.ajax({url:obj.options.url,method:obj.options.method,data:obj.options.requestVariables,dataType:"json",success:function(t){obj.options.data=t.data?t.data:t,obj.prepareTable(),obj.options.loadingSpin==1&&jSuites.loading.hide()}})):obj.prepareTable()},options&&options.contextMenu!=null?obj.options.contextMenu=options.contextMenu:obj.options.contextMenu=function(t,e,r,s){var c=[];if(r==null)obj.options.allowInsertColumn==1&&c.push({title:obj.options.text.insertANewColumnBefore,onclick:function(){obj.insertColumn(1,parseInt(e),1)}}),obj.options.allowInsertColumn==1&&c.push({title:obj.options.text.insertANewColumnAfter,onclick:function(){obj.insertColumn(1,parseInt(e),0)}}),obj.options.allowDeleteColumn==1&&c.push({title:obj.options.text.deleteSelectedColumns,onclick:function(){obj.deleteColumn(obj.getSelectedColumns().length?void 0:parseInt(e))}}),obj.options.allowRenameColumn==1&&c.push({title:obj.options.text.renameThisColumn,onclick:function(){obj.setHeader(e)}}),obj.options.columnSorting==1&&(c.push({type:"line"}),c.push({title:obj.options.text.orderAscending,onclick:function(){obj.orderBy(e,0)}}),c.push({title:obj.options.text.orderDescending,onclick:function(){obj.orderBy(e,1)}}));else if(obj.options.allowInsertRow==1&&(c.push({title:obj.options.text.insertANewRowBefore,onclick:function(){obj.insertRow(1,parseInt(r),1)}}),c.push({title:obj.options.text.insertANewRowAfter,onclick:function(){obj.insertRow(1,parseInt(r))}})),obj.options.allowDeleteRow==1&&c.push({title:obj.options.text.deleteSelectedRows,onclick:function(){obj.deleteRow(obj.getSelectedRows().length?void 0:parseInt(r))}}),e&&obj.options.allowComments==1){c.push({type:"line"});var p=obj.records[r][e].getAttribute("title")||"";c.push({title:p?obj.options.text.editComments:obj.options.text.addComments,onclick:function(){var j=prompt(obj.options.text.comments,p);j&&obj.setComments([e,r],j)}}),p&&c.push({title:obj.options.text.clearComments,onclick:function(){obj.setComments([e,r],"")}})}return c.push({type:"line"}),c.push({title:obj.options.text.copy,shortcut:"Ctrl + C",onclick:function(){obj.copy(!0)}}),navigator&&navigator.clipboard&&c.push({title:obj.options.text.paste,shortcut:"Ctrl + V",onclick:function(){obj.selectedCell&&navigator.clipboard.readText().then(function(j){j&&jexcel.current.paste(obj.selectedCell[0],obj.selectedCell[1],j)})}}),obj.options.allowExport&&c.push({title:obj.options.text.saveAs,shortcut:"Ctrl + S",onclick:function(){obj.download()}}),obj.options.about&&c.push({title:obj.options.text.about,onclick:function(){obj.options.about===!0?alert(Version().print()):alert(obj.options.about)}}),c},obj.scrollControls=function(t){obj.wheelControls(),obj.options.freezeColumns>0&&obj.content.scrollLeft!=scrollLeft&&obj.updateFreezePosition(),obj.options.lazyLoading!=1&&obj.options.tableOverflow!=1||obj.edition&&t.target.className.substr(0,9)!="jdropdown"&&obj.closeEditor(obj.edition[0],!0)},obj.wheelControls=function(t){obj.options.lazyLoading==1&&jexcel.timeControlLoading==null&&(jexcel.timeControlLoading=setTimeout(function(){obj.content.scrollTop+obj.content.clientHeight>=obj.content.scrollHeight-10?obj.loadDown()&&(obj.content.scrollTop+obj.content.clientHeight>obj.content.scrollHeight-10&&(obj.content.scrollTop=obj.content.scrollTop-obj.content.clientHeight),obj.updateCornerPosition()):obj.content.scrollTop<=obj.content.clientHeight&&obj.loadUp()&&(obj.content.scrollTop<10&&(obj.content.scrollTop=obj.content.scrollTop+obj.content.clientHeight),obj.updateCornerPosition()),jexcel.timeControlLoading=null},100))},obj.getFreezeWidth=function(){var t=0;if(obj.options.freezeColumns>0)for(var e=0;e<obj.options.freezeColumns;e++)t+=parseInt(obj.options.columns[e].width);return t};var scrollLeft=0;return obj.updateFreezePosition=function(){var t=0;if((scrollLeft=obj.content.scrollLeft)>50)for(var e=0;e<obj.options.freezeColumns;e++){e>0&&obj.options.columns[e-1].type!=="hidden"&&(t+=parseInt(obj.options.columns[e-1].width)),obj.headers[e].classList.add("jexcel_freezed"),obj.headers[e].style.left=t+"px";for(var r=0;r<obj.rows.length;r++)if(obj.rows[r]&&obj.records[r][e]){var s=scrollLeft+(e>0?obj.records[r][e-1].style.width:0)-51+"px";obj.records[r][e].classList.add("jexcel_freezed"),obj.records[r][e].style.left=s}}else for(e=0;e<obj.options.freezeColumns;e++)for(obj.headers[e].classList.remove("jexcel_freezed"),obj.headers[e].style.left="",r=0;r<obj.rows.length;r++)obj.records[r][e]&&(obj.records[r][e].classList.remove("jexcel_freezed"),obj.records[r][e].style.left="");obj.updateCornerPosition()},el.addEventListener("DOMMouseScroll",obj.wheelControls),el.addEventListener("mousewheel",obj.wheelControls),el.jexcel=obj,el.jspreadsheet=obj,obj.init(),obj};jexcel.setDictionary=function(t){jSuites.setDictionary(t)},jexcel.setExtensions=function(t){for(var e=Object.keys(t),r=0;r<e.length;r++)typeof t[e[r]]=="function"&&(jexcel[e[r]]=t[e[r]],jexcel.license&&typeof t[e[r]].license=="function"&&t[e[r]].license(jexcel.license))},formula!==void 0&&(jexcel.formula=formula),jexcel.version=Version,jexcel.current=null,jexcel.timeControl=null,jexcel.timeControlLoading=null;const destroyEvents=function(t){t.removeEventListener("mouseup",jexcel.mouseUpControls),t.removeEventListener("mousedown",jexcel.mouseDownControls),t.removeEventListener("mousemove",jexcel.mouseMoveControls),t.removeEventListener("mouseover",jexcel.mouseOverControls),t.removeEventListener("dblclick",jexcel.doubleClickControls),t.removeEventListener("paste",jexcel.pasteControls),t.removeEventListener("contextmenu",jexcel.contextMenuControls),t.removeEventListener("touchstart",jexcel.touchStartControls),t.removeEventListener("touchend",jexcel.touchEndControls),t.removeEventListener("touchcancel",jexcel.touchEndControls),document.removeEventListener("keydown",jexcel.keyDownControls)};var component;return jexcel.destroy=function(t,e){if(t.jexcel){var r=t.jexcel.options.root?t.jexcel.options.root:document;t.removeEventListener("DOMMouseScroll",t.jexcel.scrollControls),t.removeEventListener("mousewheel",t.jexcel.scrollControls),t.jexcel=null,t.innerHTML="",e&&(destroyEvents(r),jexcel=null)}},jexcel.build=function(t){destroyEvents(t),t.addEventListener("mouseup",jexcel.mouseUpControls),t.addEventListener("mousedown",jexcel.mouseDownControls),t.addEventListener("mousemove",jexcel.mouseMoveControls),t.addEventListener("mouseover",jexcel.mouseOverControls),t.addEventListener("dblclick",jexcel.doubleClickControls),t.addEventListener("paste",jexcel.pasteControls),t.addEventListener("contextmenu",jexcel.contextMenuControls),t.addEventListener("touchstart",jexcel.touchStartControls),t.addEventListener("touchend",jexcel.touchEndControls),t.addEventListener("touchcancel",jexcel.touchEndControls),t.addEventListener("touchmove",jexcel.touchEndControls),document.addEventListener("keydown",jexcel.keyDownControls)},jexcel.keyDownControls=function(t){if(jexcel.current){if(jexcel.current.edition)if(t.which==27)jexcel.current.edition&&jexcel.current.closeEditor(jexcel.current.edition[0],!1),t.preventDefault();else if(t.which==13){if(jexcel.current.options.columns[jexcel.current.edition[2]].type=="calendar")jexcel.current.closeEditor(jexcel.current.edition[0],!0);else if(!(jexcel.current.options.columns[jexcel.current.edition[2]].type=="dropdown"||jexcel.current.options.columns[jexcel.current.edition[2]].type=="autocomplete"))if((jexcel.current.options.wordWrap==1||jexcel.current.options.columns[jexcel.current.edition[2]].wordWrap==1||jexcel.current.options.data[jexcel.current.edition[3]][jexcel.current.edition[2]].length>200)&&t.altKey){var e=jexcel.current.edition[0].children[0],r=jexcel.current.edition[0].children[0].value,s=e.selectionStart;r=r.slice(0,s)+`
`+r.slice(s),e.value=r,e.focus(),e.selectionStart=s+1,e.selectionEnd=s+1}else jexcel.current.edition[0].children[0].blur()}else t.which==9&&(["calendar","html"].includes(jexcel.current.options.columns[jexcel.current.edition[2]].type)?jexcel.current.closeEditor(jexcel.current.edition[0],!0):jexcel.current.edition[0].children[0].blur());if(!jexcel.current.edition&&jexcel.current.selectedCell)if(t.which==37)jexcel.current.left(t.shiftKey,t.ctrlKey),t.preventDefault();else if(t.which==39)jexcel.current.right(t.shiftKey,t.ctrlKey),t.preventDefault();else if(t.which==38)jexcel.current.up(t.shiftKey,t.ctrlKey),t.preventDefault();else if(t.which==40)jexcel.current.down(t.shiftKey,t.ctrlKey),t.preventDefault();else if(t.which==36)jexcel.current.first(t.shiftKey,t.ctrlKey),t.preventDefault();else if(t.which==35)jexcel.current.last(t.shiftKey,t.ctrlKey),t.preventDefault();else if(t.which==46)jexcel.current.options.editable==1&&(jexcel.current.selectedRow?jexcel.current.options.allowDeleteRow==1&&confirm(jexcel.current.options.text.areYouSureToDeleteTheSelectedRows)&&jexcel.current.deleteRow():jexcel.current.selectedHeader?jexcel.current.options.allowDeleteColumn==1&&confirm(jexcel.current.options.text.areYouSureToDeleteTheSelectedColumns)&&jexcel.current.deleteColumn():jexcel.current.setValue(jexcel.current.highlighted,""));else if(t.which==13)t.shiftKey?jexcel.current.up():(jexcel.current.options.allowInsertRow==1&&jexcel.current.options.allowManualInsertRow==1&&jexcel.current.selectedCell[1]==jexcel.current.options.data.length-1&&jexcel.current.insertRow(),jexcel.current.down()),t.preventDefault();else if(t.which==9)t.shiftKey?jexcel.current.left():(jexcel.current.options.allowInsertColumn==1&&jexcel.current.options.allowManualInsertColumn==1&&jexcel.current.selectedCell[0]==jexcel.current.options.data[0].length-1&&jexcel.current.insertColumn(),jexcel.current.right()),t.preventDefault();else if(!t.ctrlKey&&!t.metaKey||t.shiftKey){if(jexcel.current.selectedCell&&jexcel.current.options.editable==1){var c=jexcel.current.selectedCell[1],p=jexcel.current.selectedCell[0];jexcel.current.options.columns[p].type!="readonly"&&(t.keyCode==32?(t.preventDefault(),jexcel.current.options.columns[p].type=="checkbox"||jexcel.current.options.columns[p].type=="radio"?jexcel.current.setCheckRadioValue():jexcel.current.openEditor(jexcel.current.records[c][p],!0)):t.keyCode==113?jexcel.current.openEditor(jexcel.current.records[c][p],!1):(t.keyCode==8||t.keyCode>=48&&t.keyCode<=57||t.keyCode>=96&&t.keyCode<=111||t.keyCode>=187&&t.keyCode<=190||(String.fromCharCode(t.keyCode)==t.key||String.fromCharCode(t.keyCode).toLowerCase()==t.key.toLowerCase())&&jexcel.validLetter(String.fromCharCode(t.keyCode)))&&(jexcel.current.openEditor(jexcel.current.records[c][p],!0),jexcel.current.options.columns[p].type=="calendar"&&t.preventDefault()))}}else t.which==65?(jexcel.current.selectAll(),t.preventDefault()):t.which==83?(jexcel.current.download(),t.preventDefault()):t.which==89?(jexcel.current.redo(),t.preventDefault()):t.which==90?(jexcel.current.undo(),t.preventDefault()):t.which==67?(jexcel.current.copy(!0),t.preventDefault()):t.which==88?(jexcel.current.options.editable==1?jexcel.cutControls():jexcel.copyControls(),t.preventDefault()):t.which==86&&jexcel.pasteControls();else t.target.classList.contains("jexcel_search")&&(jexcel.timeControl&&clearTimeout(jexcel.timeControl),jexcel.timeControl=setTimeout(function(){jexcel.current.search(t.target.value)},200))}},jexcel.isMouseAction=!1,jexcel.mouseDownControls=function(t){if((t=t||window.event).buttons)var e=t.buttons;else e=t.button?t.button:t.which;var r=jexcel.getElement(t.target);if(r[0]?jexcel.current!=r[0].jexcel&&(jexcel.current&&(jexcel.current.edition&&jexcel.current.closeEditor(jexcel.current.edition[0],!0),jexcel.current.resetSelection()),jexcel.current=r[0].jexcel):jexcel.current&&(jexcel.current.edition&&jexcel.current.closeEditor(jexcel.current.edition[0],!0),jexcel.current.resetSelection(!0),jexcel.current=null),jexcel.current&&e==1){if(t.target.classList.contains("jexcel_selectall"))jexcel.current&&jexcel.current.selectAll();else if(t.target.classList.contains("jexcel_corner"))jexcel.current.options.editable==1&&(jexcel.current.selectedCorner=!0);else{if(r[1]==1){if(f=t.target.getAttribute("data-x")){var s=t.target.getBoundingClientRect();if(jexcel.current.options.columnResize==1&&s.width-t.offsetX<6){jexcel.current.resizing={mousePosition:t.pageX,column:f,width:s.width},jexcel.current.headers[f].classList.add("resizing");for(var c=0;c<jexcel.current.records.length;c++)jexcel.current.records[c][f]&&jexcel.current.records[c][f].classList.add("resizing")}else if(jexcel.current.options.columnDrag==1&&s.height-t.offsetY<6)if(jexcel.current.isColMerged(f).length)console.error("Jspreadsheet: This column is part of a merged cell.");else for(jexcel.current.resetSelection(),jexcel.current.dragging={element:t.target,column:f,destination:f},jexcel.current.headers[f].classList.add("dragging"),c=0;c<jexcel.current.records.length;c++)jexcel.current.records[c][f]&&jexcel.current.records[c][f].classList.add("dragging");else{if(jexcel.current.selectedHeader&&(t.shiftKey||t.ctrlKey))var p=jexcel.current.selectedHeader,j=f;else jexcel.current.selectedHeader==f&&jexcel.current.options.allowRenameColumn==1&&(jexcel.timeControl=setTimeout(function(){jexcel.current.setHeader(f)},800)),jexcel.current.selectedHeader=f,p=f,j=f;jexcel.current.updateSelectionFromCoords(p,0,j,jexcel.current.options.data.length-1)}}else if(t.target.parentNode.classList.contains("jexcel_nested")){if(t.target.getAttribute("data-column"))var h=t.target.getAttribute("data-column").split(","),u=parseInt(h[0]),g=parseInt(h[h.length-1]);else u=0,g=jexcel.current.options.columns.length-1;jexcel.current.updateSelectionFromCoords(u,0,g,jexcel.current.options.data.length-1)}}else jexcel.current.selectedHeader=!1;if(r[1]==2){var N=t.target.getAttribute("data-y");if(t.target.classList.contains("jexcel_row"))s=t.target.getBoundingClientRect(),jexcel.current.options.rowResize==1&&s.height-t.offsetY<6?(jexcel.current.resizing={element:t.target.parentNode,mousePosition:t.pageY,row:N,height:s.height},t.target.parentNode.classList.add("resizing")):jexcel.current.options.rowDrag==1&&s.width-t.offsetX<6?jexcel.current.isRowMerged(N).length?console.error("Jspreadsheet: This row is part of a merged cell"):jexcel.current.options.search==1&&jexcel.current.results?console.error("Jspreadsheet: Please clear your search before perform this action"):(jexcel.current.resetSelection(),jexcel.current.dragging={element:t.target.parentNode,row:N,destination:N},t.target.parentNode.classList.add("dragging")):(jexcel.current.selectedRow&&(t.shiftKey||t.ctrlKey)?(p=jexcel.current.selectedRow,j=N):(jexcel.current.selectedRow=N,p=N,j=N),jexcel.current.updateSelectionFromCoords(0,p,jexcel.current.options.data[0].length-1,j));else if(t.target.classList.contains("jclose")&&t.target.clientWidth-t.offsetX<50&&t.offsetY<50)jexcel.current.closeEditor(jexcel.current.edition[0],!0);else{var P=function(w){var C=w.getAttribute("data-x"),E=w.getAttribute("data-y");return C&&E?[C,E]:w.parentNode?P(w.parentNode):void 0},_=P(t.target);if(_){var f=_[0];N=_[1],jexcel.current.edition&&(jexcel.current.edition[2]==f&&jexcel.current.edition[3]==N||jexcel.current.closeEditor(jexcel.current.edition[0],!0)),jexcel.current.edition||(t.shiftKey?jexcel.current.updateSelectionFromCoords(jexcel.current.selectedCell[0],jexcel.current.selectedCell[1],f,N):jexcel.current.updateSelectionFromCoords(f,N)),jexcel.current.selectedHeader=null,jexcel.current.selectedRow=null}}}else jexcel.current.selectedRow=!1;t.target.classList.contains("jexcel_page")&&(t.target.textContent=="<"?jexcel.current.page(0):t.target.textContent==">"?jexcel.current.page(t.target.getAttribute("title")-1):jexcel.current.page(t.target.textContent-1))}jexcel.current.edition?jexcel.isMouseAction=!1:jexcel.isMouseAction=!0}else jexcel.isMouseAction=!1},jexcel.mouseUpControls=function(t){if(jexcel.current)if(jexcel.current.resizing){if(jexcel.current.resizing.column){var e=jexcel.current.colgroup[jexcel.current.resizing.column].getAttribute("width"),r=jexcel.current.getSelectedColumns();if(r.length>1){for(var s=[],c=0;c<r.length;c++)s.push(parseInt(jexcel.current.colgroup[r[c]].getAttribute("width")));s[r.indexOf(parseInt(jexcel.current.resizing.column))]=jexcel.current.resizing.width,jexcel.current.setWidth(r,e,s)}else jexcel.current.setWidth(jexcel.current.resizing.column,e,jexcel.current.resizing.width);jexcel.current.headers[jexcel.current.resizing.column].classList.remove("resizing");for(var p=0;p<jexcel.current.records.length;p++)jexcel.current.records[p][jexcel.current.resizing.column]&&jexcel.current.records[p][jexcel.current.resizing.column].classList.remove("resizing")}else{jexcel.current.rows[jexcel.current.resizing.row].children[0].classList.remove("resizing");var j=jexcel.current.rows[jexcel.current.resizing.row].getAttribute("height");jexcel.current.setHeight(jexcel.current.resizing.row,j,jexcel.current.resizing.height),jexcel.current.resizing.element.classList.remove("resizing")}jexcel.current.resizing=null}else if(jexcel.current.dragging){if(jexcel.current.dragging){if(jexcel.current.dragging.column){var h=t.target.getAttribute("data-x");for(jexcel.current.headers[jexcel.current.dragging.column].classList.remove("dragging"),p=0;p<jexcel.current.rows.length;p++)jexcel.current.records[p][jexcel.current.dragging.column]&&jexcel.current.records[p][jexcel.current.dragging.column].classList.remove("dragging");for(c=0;c<jexcel.current.headers.length;c++)jexcel.current.headers[c].classList.remove("dragging-left"),jexcel.current.headers[c].classList.remove("dragging-right");h&&jexcel.current.dragging.column!=jexcel.current.dragging.destination&&jexcel.current.moveColumn(jexcel.current.dragging.column,jexcel.current.dragging.destination)}else{if(jexcel.current.dragging.element.nextSibling){var u=parseInt(jexcel.current.dragging.element.nextSibling.getAttribute("data-y"));jexcel.current.dragging.row<u&&(u-=1)}else u=parseInt(jexcel.current.dragging.element.previousSibling.getAttribute("data-y"));jexcel.current.dragging.row!=jexcel.current.dragging.destination&&jexcel.current.moveRow(jexcel.current.dragging.row,u,!0),jexcel.current.dragging.element.classList.remove("dragging")}jexcel.current.dragging=null}}else jexcel.current.selectedCorner&&(jexcel.current.selectedCorner=!1,jexcel.current.selection.length>0&&(jexcel.current.copyData(jexcel.current.selection[0],jexcel.current.selection[jexcel.current.selection.length-1]),jexcel.current.removeCopySelection()));jexcel.timeControl&&(clearTimeout(jexcel.timeControl),jexcel.timeControl=null),jexcel.isMouseAction=!1},jexcel.mouseMoveControls=function(t){if((t=t||window.event).buttons)var e=t.buttons;else e=t.button?t.button:t.which;if(e||(jexcel.isMouseAction=!1),jexcel.current)if(jexcel.isMouseAction==1){if(jexcel.current.resizing)if(jexcel.current.resizing.column){var r=t.pageX-jexcel.current.resizing.mousePosition;if(jexcel.current.resizing.width+r>0){var s=jexcel.current.resizing.width+r;jexcel.current.colgroup[jexcel.current.resizing.column].setAttribute("width",s),jexcel.current.updateCornerPosition()}}else{var c=t.pageY-jexcel.current.resizing.mousePosition;if(jexcel.current.resizing.height+c>0){var p=jexcel.current.resizing.height+c;jexcel.current.rows[jexcel.current.resizing.row].setAttribute("height",p),jexcel.current.updateCornerPosition()}}else if(jexcel.current.dragging)if(jexcel.current.dragging.column){var j=t.target.getAttribute("data-x");if(j)if(jexcel.current.isColMerged(j).length)console.error("Jspreadsheet: This column is part of a merged cell.");else{for(var h=0;h<jexcel.current.headers.length;h++)jexcel.current.headers[h].classList.remove("dragging-left"),jexcel.current.headers[h].classList.remove("dragging-right");jexcel.current.dragging.column==j?jexcel.current.dragging.destination=parseInt(j):t.target.clientWidth/2>t.offsetX?(jexcel.current.dragging.column<j?jexcel.current.dragging.destination=parseInt(j)-1:jexcel.current.dragging.destination=parseInt(j),jexcel.current.headers[j].classList.add("dragging-left")):(jexcel.current.dragging.column<j?jexcel.current.dragging.destination=parseInt(j):jexcel.current.dragging.destination=parseInt(j)+1,jexcel.current.headers[j].classList.add("dragging-right"))}}else{var u=t.target.getAttribute("data-y");if(u)if(jexcel.current.isRowMerged(u).length)console.error("Jspreadsheet: This row is part of a merged cell.");else{var g=t.target.clientHeight/2>t.offsetY?t.target.parentNode.nextSibling:t.target.parentNode;jexcel.current.dragging.element!=g&&(t.target.parentNode.parentNode.insertBefore(jexcel.current.dragging.element,g),jexcel.current.dragging.destination=Array.prototype.indexOf.call(jexcel.current.dragging.element.parentNode.children,jexcel.current.dragging.element))}}}else{var N=t.target.getAttribute("data-x"),P=t.target.getAttribute("data-y"),_=t.target.getBoundingClientRect();jexcel.current.cursor&&(jexcel.current.cursor.style.cursor="",jexcel.current.cursor=null),t.target.parentNode.parentNode&&t.target.parentNode.parentNode.className&&(t.target.parentNode.parentNode.classList.contains("resizable")&&(t.target&&N&&!P&&_.width-(t.clientX-_.left)<6?(jexcel.current.cursor=t.target,jexcel.current.cursor.style.cursor="col-resize"):t.target&&!N&&P&&_.height-(t.clientY-_.top)<6&&(jexcel.current.cursor=t.target,jexcel.current.cursor.style.cursor="row-resize")),t.target.parentNode.parentNode.classList.contains("draggable")&&(t.target&&!N&&P&&_.width-(t.clientX-_.left)<6||t.target&&N&&!P&&_.height-(t.clientY-_.top)<6)&&(jexcel.current.cursor=t.target,jexcel.current.cursor.style.cursor="move"))}},jexcel.mouseOverControls=function(t){if((t=t||window.event).buttons)var e=t.buttons;else e=t.button?t.button:t.which;if(e||(jexcel.isMouseAction=!1),jexcel.current&&jexcel.isMouseAction==1){var r=jexcel.getElement(t.target);if(r[0]){if(jexcel.current!=r[0].jexcel&&jexcel.current)return!1;var s=t.target.getAttribute("data-x"),c=t.target.getAttribute("data-y");if(!(jexcel.current.resizing||jexcel.current.dragging)){if(r[1]==1&&jexcel.current.selectedHeader){s=t.target.getAttribute("data-x");var p=jexcel.current.selectedHeader,j=s;jexcel.current.updateSelectionFromCoords(p,0,j,jexcel.current.options.data.length-1)}r[1]==2&&(t.target.classList.contains("jexcel_row")?jexcel.current.selectedRow&&(p=jexcel.current.selectedRow,j=c,jexcel.current.updateSelectionFromCoords(0,p,jexcel.current.options.data[0].length-1,j)):jexcel.current.edition||s&&c&&(jexcel.current.selectedCorner?jexcel.current.updateCopySelection(s,c):jexcel.current.selectedCell&&jexcel.current.updateSelectionFromCoords(jexcel.current.selectedCell[0],jexcel.current.selectedCell[1],s,c)))}}}jexcel.timeControl&&(clearTimeout(jexcel.timeControl),jexcel.timeControl=null)},jexcel.doubleClickControls=function(t){if(jexcel.current)if(t.target.classList.contains("jexcel_corner")){if(jexcel.current.highlighted.length>0){var e=jexcel.current.highlighted[0].getAttribute("data-x"),r=parseInt(jexcel.current.highlighted[jexcel.current.highlighted.length-1].getAttribute("data-y"))+1,s=jexcel.current.highlighted[jexcel.current.highlighted.length-1].getAttribute("data-x"),c=jexcel.current.records.length-1;jexcel.current.copyData(jexcel.current.records[r][e],jexcel.current.records[c][s])}}else if(t.target.classList.contains("jexcel_column_filter")){var p=t.target.getAttribute("data-x");jexcel.current.openFilter(p)}else{var j=jexcel.getElement(t.target);if(j[1]==1&&jexcel.current.options.columnSorting==1&&(p=t.target.getAttribute("data-x"))&&jexcel.current.orderBy(p),j[1]==2&&jexcel.current.options.editable==1&&!jexcel.current.edition){var h=function(g){if(g.parentNode){var N=g.getAttribute("data-x"),P=g.getAttribute("data-y");return N&&P?g:h(g.parentNode)}},u=h(t.target);u&&u.classList.contains("highlight")&&jexcel.current.openEditor(u)}}},jexcel.copyControls=function(t){jexcel.current&&jexcel.copyControls.enabled&&(jexcel.current.edition||jexcel.current.copy(!0))},jexcel.cutControls=function(t){jexcel.current&&(jexcel.current.edition||(jexcel.current.copy(!0),jexcel.current.options.editable==1&&jexcel.current.setValue(jexcel.current.highlighted,"")))},jexcel.pasteControls=function(t){jexcel.current&&jexcel.current.selectedCell&&(jexcel.current.edition||jexcel.current.options.editable==1&&(t&&t.clipboardData?(jexcel.current.paste(jexcel.current.selectedCell[0],jexcel.current.selectedCell[1],t.clipboardData.getData("text")),t.preventDefault()):window.clipboardData&&jexcel.current.paste(jexcel.current.selectedCell[0],jexcel.current.selectedCell[1],window.clipboardData.getData("text"))))},jexcel.contextMenuControls=function(t){if("buttons"in(t=t||window.event)?t.buttons:t.which||t.button,jexcel.current){if(jexcel.current.edition)t.preventDefault();else if(jexcel.current.options.contextMenu&&(jexcel.current.contextMenu.contextmenu.close(),jexcel.current)){var e=t.target.getAttribute("data-x"),r=t.target.getAttribute("data-y");if(e||r){(e<parseInt(jexcel.current.selectedCell[0])||e>parseInt(jexcel.current.selectedCell[2])||r<parseInt(jexcel.current.selectedCell[1])||r>parseInt(jexcel.current.selectedCell[3]))&&jexcel.current.updateSelectionFromCoords(e,r,e,r);var s=jexcel.current.options.contextMenu(jexcel.current,e,r,t);jexcel.current.contextMenu.contextmenu.open(t,s),t.preventDefault()}}}},jexcel.touchStartControls=function(t){var e=jexcel.getElement(t.target);if(e[0]?jexcel.current!=e[0].jexcel&&(jexcel.current&&jexcel.current.resetSelection(),jexcel.current=e[0].jexcel):jexcel.current&&(jexcel.current.resetSelection(),jexcel.current=null),jexcel.current&&!jexcel.current.edition){var r=t.target.getAttribute("data-x"),s=t.target.getAttribute("data-y");r&&s&&(jexcel.current.updateSelectionFromCoords(r,s),jexcel.timeControl=setTimeout(function(){jexcel.current.options.columns[r].type=="color"?jexcel.tmpElement=null:jexcel.tmpElement=t.target,jexcel.current.openEditor(t.target,!1,t)},500))}},jexcel.touchEndControls=function(t){jexcel.timeControl&&(clearTimeout(jexcel.timeControl),jexcel.timeControl=null,jexcel.tmpElement&&jexcel.tmpElement.children[0].tagName=="INPUT"&&jexcel.tmpElement.children[0].focus(),jexcel.tmpElement=null)},jexcel.tabs=function(t,e){var r=[];if(t.classList.contains("jexcel_tabs"))c=t.children[0],p=t.children[1];else{t.innerHTML="",t.classList.add("jexcel_tabs"),t.jexcel=[];var s=document.createElement("div"),c=t.appendChild(s),p=(s=document.createElement("div"),t.appendChild(s))}for(var j=[],h=[],u=0;u<e.length;u++){j[u]=document.createElement("div"),j[u].classList.add("jexcel_tab");var g=jexcel(j[u],e[u]);p.appendChild(j[u]),r[u]=t.jexcel.push(g),h[u]=document.createElement("div"),h[u].classList.add("jexcel_tab_link"),h[u].setAttribute("data-spreadsheet",t.jexcel.length-1),h[u].innerHTML=e[u].sheetName,h[u].onclick=function(){for(var P=0;P<c.children.length;P++)c.children[P].classList.remove("selected"),p.children[P].style.display="none";var _=this.getAttribute("data-spreadsheet");p.children[_].style.display="block",c.children[_].classList.add("selected")},c.appendChild(h[u])}for(var N=0;N<c.children.length;N++)c.children[N].classList.remove("selected"),p.children[N].style.display="none";return c.children[c.children.length-1].classList.add("selected"),p.children[c.children.length-1].style.display="block",r},jexcel.createTabs=jexcel.tabs,jexcel.fromSpreadsheet=function(t,e){var r,s=function(c){var p=[];return c.SheetNames.forEach(function(j){var h={rows:[],columns:[],data:[],style:{}};if(h.sheetName=j,(E=c.Sheets[j]["!cols"])&&E.length)for(var u=0;u<E.length;u++)h.columns[u]={},E[u]&&E[u].wpx&&(h.columns[u].width=E[u].wpx+"px");if((E=c.Sheets[j]["!rows"])&&E.length)for(u=0;u<E.length;u++)E[u]&&E[u].hpx&&(h.rows[u]={},h.rows[u].height=E[u].hpx+"px");if((E=c.Sheets[j]["!merges"])&&E.length>0)for(h.mergeCells=[],u=0;u<E.length;u++){var g=E[u].s.c,N=E[u].s.r,P=E[u].e.c,_=E[u].e.r,f=jexcel.getColumnNameFromId([g,N]);h.mergeCells[f]=[P-g+1,_-N+1]}var w=0,C=0,E=Object.keys(c.Sheets[j]);for(u=0;u<E.length;u++)if(E[u].substr(0,1)!="!"){var S=c.Sheets[j][E[u]],k=jexcel.getIdFromColumnName(E[u],!0);h.data[k[1]]||(h.data[k[1]]=[]),h.data[k[1]][k[0]]=S.f?"="+S.f:S.w,w<k[0]&&(w=k[0]),C<k[1]&&(C=k[1]),S.style&&Object.keys(S.style).length>0&&(h.style[E[u]]=S.style),S.s&&S.s.fgColor&&(h.style[E[u]]&&(h.style[E[u]]+=";"),h.style[E[u]]+="background-color:#"+S.s.fgColor.rgb)}for(var B=h.columns,q=0;q<=C;q++)for(u=0;u<=w;u++)h.data[q]||(h.data[q]=[]),h.data[q][u]||B<u&&(h.data[q][u]="");p.push(h)}),p};(r=new XMLHttpRequest).open("GET",t,!0),typeof Uint8Array<"u"?(r.responseType="arraybuffer",r.onload=function(c){var p=r.response,j=new Uint8Array(p),h=XLSX.read(j,{type:"array",cellFormula:!0,cellStyles:!0});e(s(h))}):(r.setRequestHeader("Accept-Charset","x-user-defined"),r.onreadystatechange=function(){if(r.readyState==4&&r.status==200){var c=convertResponseBodyToText(r.responseBody),p=XLSX.read(c,{type:"binary",cellFormula:!0,cellStyles:!0});e(s(p))}}),r.send()},jexcel.validLetter=function(t){return t.match(/([\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC-\u0400-\u04FF']+)/g)?1:0},jexcel.injectArray=function(t,e,r){return t.slice(0,e).concat(r).concat(t.slice(e))},jexcel.getColumnName=function(t){var e="";return t>701?(e+=String.fromCharCode(64+parseInt(t/676)),e+=String.fromCharCode(64+parseInt(t%676/26))):t>25&&(e+=String.fromCharCode(64+parseInt(t/26))),e+String.fromCharCode(65+t%26)},jexcel.getIdFromColumnName=function(t,e){var r=/^[a-zA-Z]+/.exec(t);if(r){for(var s=0,c=0;c<r[0].length;c++)s+=parseInt(r[0].charCodeAt(c)-64)*Math.pow(26,r[0].length-1-c);--s<0&&(s=0);var p=parseInt(/[0-9]+$/.exec(t));p>0&&p--,t=e==1?[s,p]:s+"-"+p}return t},jexcel.getColumnNameFromId=function(t){return Array.isArray(t)||(t=t.split("-")),jexcel.getColumnName(parseInt(t[0]))+(parseInt(t[1])+1)},jexcel.getElement=function(t){var e=0,r=0;return function s(c){c.className&&c.classList.contains("jexcel_container")&&(r=c),c.tagName=="THEAD"?e=1:c.tagName=="TBODY"&&(e=2),c.parentNode&&(r||s(c.parentNode))}(t),[r,e]},jexcel.doubleDigitFormat=function(t){return(t=""+t).length==1&&(t="0"+t),t},jexcel.createFromTable=function(t,e){if(t.tagName=="TABLE"){e||(e={}),e.columns=[],e.data=[];var r=t.querySelectorAll("colgroup > col");if(r.length)for(var s=0;s<r.length;s++){if(!(c=r[s].style.width))var c=r[s].getAttribute("width");c&&(e.columns[s]||(e.columns[s]={}),e.columns[s].width=c)}var p=function(Pt){var Vt=Pt.getBoundingClientRect(),Ot=Vt.width>50?Vt.width:50;e.columns[s]||(e.columns[s]={}),Pt.getAttribute("data-celltype")?e.columns[s].type=Pt.getAttribute("data-celltype"):e.columns[s].type="text",e.columns[s].width=Ot+"px",e.columns[s].title=Pt.innerHTML,e.columns[s].align=Pt.style.textAlign||"center",(Vt=Pt.getAttribute("name"))&&(e.columns[s].name=Vt),(Vt=Pt.getAttribute("id"))&&(e.columns[s].id=Vt),(Vt=Pt.getAttribute("data-mask"))&&(e.columns[s].mask=Vt)},j=[],h=t.querySelectorAll(":scope > thead > tr");if(h.length){for(var u=0;u<h.length-1;u++){var g=[];for(s=0;s<h[u].children.length;s++){var N={title:h[u].children[s].textContent,colspan:h[u].children[s].getAttribute("colspan")||1};g.push(N)}j.push(g)}for(h=h[h.length-1].children,s=0;s<h.length;s++)p(h[s])}var P=0,_={},f={},w={},C={},E=t.querySelectorAll(":scope > tr, :scope > tbody > tr");for(u=0;u<E.length;u++)if(e.data[P]=[],e.parseTableFirstRowAsHeader!=1||h.length||u!=0){for(s=0;s<E[u].children.length;s++){if(S=E[u].children[s].getAttribute("data-formula"))S.substr(0,1)!="="&&(S="="+S);else var S=E[u].children[s].innerHTML;e.data[P].push(S);var k=jexcel.getColumnNameFromId([s,u]),B=E[u].children[s].getAttribute("class");B&&(C[k]=B);var q=parseInt(E[u].children[s].getAttribute("colspan"))||0,U=parseInt(E[u].children[s].getAttribute("rowspan"))||0;(q||U)&&(_[k]=[q||1,U||1]),E[u].children[s].style&&E[u].children[s].style.display=="none"&&(E[u].children[s].style.display="");var F=E[u].children[s].getAttribute("style");F&&(w[k]=F),E[u].children[s].classList.contains("styleBold")&&(w[k]?w[k]+="; font-weight:bold;":w[k]="font-weight:bold;")}E[u].style&&E[u].style.height&&(f[u]={height:E[u].style.height}),P++}else for(s=0;s<E[u].children.length;s++)p(E[u].children[s]);if(Object.keys(j).length>0&&(e.nestedHeaders=j),Object.keys(w).length>0&&(e.style=w),Object.keys(_).length>0&&(e.mergeCells=_),Object.keys(f).length>0&&(e.rows=f),Object.keys(C).length>0&&(e.classes=C),(E=t.querySelectorAll("tfoot tr")).length){var Y=[];for(u=0;u<E.length;u++){var rt=[];for(s=0;s<E[u].children.length;s++)rt.push(E[u].children[s].textContent);Y.push(rt)}Object.keys(Y).length>0&&(e.footers=Y)}if(e.parseTableAutoCellType==1){var tt=[];for(s=0;s<e.columns.length;s++){var yt=!0,Et=!0;for(tt[s]=[],u=0;u<e.data.length;u++)S=e.data[u][s],tt[s][S]||(tt[s][S]=0),tt[s][S]++,S.length>25&&(yt=!1),S.length==10&&S.substr(4,1)=="-"&&S.substr(7,1)=="-"||(Et=!1);var pt=Object.keys(tt[s]).length;Et?e.columns[s].type="calendar":yt==1&&pt>1&&pt<=parseInt(.1*e.data.length)&&(e.columns[s].type="dropdown",e.columns[s].source=Object.keys(tt[s]))}}return e}console.log("Element is not a table")},jexcel.helpers=(component={getCaretIndex:function(t){if(this.config.root)var e=this.config.root;else e=window;var r=0,s=e.getSelection();if(s&&s.rangeCount!==0){var c=s.getRangeAt(0),p=c.cloneRange();p.selectNodeContents(t),p.setEnd(c.endContainer,c.endOffset),r=p.toString().length}return r},invert:function(t){for(var e=[],r=Object.keys(t),s=0;s<r.length;s++)e[t[r[s]]]=r[s];return e},getColumnName:function(t){var e="";return t>701?(e+=String.fromCharCode(64+parseInt(t/676)),e+=String.fromCharCode(64+parseInt(t%676/26))):t>25&&(e+=String.fromCharCode(64+parseInt(t/26))),e+String.fromCharCode(65+t%26)},getColumnNameFromCoords:function(t,e){return component.getColumnName(parseInt(t))+(parseInt(e)+1)},getCoordsFromColumnName:function(t){var e=/^[a-zA-Z]+/.exec(t);if(e){for(var r=0,s=0;s<e[0].length;s++)r+=parseInt(e[0].charCodeAt(s)-64)*Math.pow(26,e[0].length-1-s);--r<0&&(r=0);var c=parseInt(/[0-9]+$/.exec(t))||null;return c>0&&c--,[r,c]}},createFromTable:function(){},injectArray:function(t,e,r){return t.slice(0,e).concat(r).concat(t.slice(e))},parseCSV:function(t,e){e=e||",";for(var r=0,s=0,c=[[]],p=0,j=null,h=!1,u=!1,g=0;g<t.length;g++)if(c[s]||(c[s]=[]),c[s][r]||(c[s][r]=""),t[g]!="\r")if(t[g]!=`
`&&t[g]!=e||h!=0&&u!=1&&j){if(t[g]=='"'&&(h=!h),j===null){if((j=h)==1)continue}else if(j===!0&&!u&&t[g]=='"'){t[g+1]=='"'?(h=!0,c[s][r]+=t[g],g++):u=!0;continue}c[s][r]+=t[g]}else{if(j=null,h=!1,u=!1,c[s][r][0]=='"'){var N=c[s][r].trim();N[N.length-1]=='"'&&(c[s][r]=N.substr(1,N.length-2))}t[g]==`
`?(r=0,s++):++r>p&&(p=r)}for(var P=0;P<c.length;P++)for(g=0;g<=p;g++)c[P][g]===void 0&&(c[P][g]="");return c}},component),typeof jQuery<"u"&&function(t){t.fn.jspreadsheet=t.fn.jexcel=function(e){var r=t(this).get(0);return r.jexcel?Array.isArray(r.jexcel)?r.jexcel[e][arguments[1]].apply(this,Array.prototype.slice.call(arguments,2)):r.jexcel[e].apply(this,Array.prototype.slice.call(arguments,1)):jexcel(t(this).get(0),arguments[0])}}(jQuery),jexcel},module.exports=factory()}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(r.exports,r,r.exports,__webpack_require__),r.exports}var __webpack_exports__=__webpack_require__(138);return __webpack_exports__}()})})(dist);var distExports=dist.exports;const jspreadsheet=getDefaultExportFromCjs(distExports),beforechange=(t,e,r,s,c)=>(c=c.replace(",",""),isValidNumber(zen2han(c))?zen2han(c):""),contextMenuItems=(t,e,r,s)=>{let c=[];return r!=null&&t.options.allowDeleteRow==!0&&(c.push({title:t.options.text.deleteSelectedRows,onclick:function(){t.deleteRow(t.getSelectedRows().length?void 0:parseInt(r))}}),c.push({title:t.options.text.copy,shortcut:"Ctrl + C",onclick:function(){t.copy()}})),c.push({type:"line"}),c},beforeDeleteColumn=(t,e,r,s,c)=>{if(t.jspreadsheet.colgroup.length==2)return!1},beforeInsertColumn=(t,e,r,s,c)=>{if(t.jspreadsheet.colgroup.length==2)return!1},text={deleteSelectedRows:"",copy:""},initTableData=[[110.1,51.1],[120.2,52.2],[130.3,53.3]],columnsConfig=[{type:"numeric",title:"X()",width:180,name:"x_latitude"},{type:"numeric",title:"Y()",width:180,name:"y_longitude"}],sourceTable=jspreadsheet(document.getElementById("sourceDataTable"),{data:initTableData,columns:columnsConfig,onbeforechange:beforechange,contextMenu:contextMenuItems,onbeforedeletecolumn:beforeDeleteColumn,onbeforeinsertcolumn:beforeInsertColumn,text,freezeColumns:2}),convertedTable=jspreadsheet(document.getElementById("convertedDataTable"),{data:initTableData,columns:columnsConfig,onbeforechange:beforechange,contextMenu:contextMenuItems,onbeforedeletecolumn:beforeDeleteColumn,onbeforeinsertcolumn:beforeInsertColumn,text,freezeColumns:2}),transpose=t=>t[0].map((e,r)=>t.map(s=>s[r]));var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start$1="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(t,e){return t.concat([e+"-"+start$1,e+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(t,e){return t.concat([e,e+"-"+start$1,e+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(t){return t?(t.nodeName||"").toLowerCase():null}function getWindow(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function isElement$1(t){var e=getWindow(t).Element;return t instanceof e||t instanceof Element}function isHTMLElement(t){var e=getWindow(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function isShadowRoot(t){if(typeof ShadowRoot>"u")return!1;var e=getWindow(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function applyStyles(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var s=e.styles[r]||{},c=e.attributes[r]||{},p=e.elements[r];!isHTMLElement(p)||!getNodeName(p)||(Object.assign(p.style,s),Object.keys(c).forEach(function(j){var h=c[j];h===!1?p.removeAttribute(j):p.setAttribute(j,h===!0?"":h)}))})}function effect$2(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(s){var c=e.elements[s],p=e.attributes[s]||{},j=Object.keys(e.styles.hasOwnProperty(s)?e.styles[s]:r[s]),h=j.reduce(function(u,g){return u[g]="",u},{});!isHTMLElement(c)||!getNodeName(c)||(Object.assign(c.style,h),Object.keys(p).forEach(function(u){c.removeAttribute(u)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(t){return t.split("-")[0]}var max=Math.max,min=Math.min,round=Math.round;function getUAString(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var s=t.getBoundingClientRect(),c=1,p=1;e&&isHTMLElement(t)&&(c=t.offsetWidth>0&&round(s.width)/t.offsetWidth||1,p=t.offsetHeight>0&&round(s.height)/t.offsetHeight||1);var j=isElement$1(t)?getWindow(t):window,h=j.visualViewport,u=!isLayoutViewport()&&r,g=(s.left+(u&&h?h.offsetLeft:0))/c,N=(s.top+(u&&h?h.offsetTop:0))/p,P=s.width/c,_=s.height/p;return{width:P,height:_,top:N,right:g+P,bottom:N+_,left:g,x:g,y:N}}function getLayoutRect(t){var e=getBoundingClientRect(t),r=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:s}}function contains(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&isShadowRoot(r)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function getComputedStyle$1(t){return getWindow(t).getComputedStyle(t)}function isTableElement(t){return["table","td","th"].indexOf(getNodeName(t))>=0}function getDocumentElement(t){return((isElement$1(t)?t.ownerDocument:t.document)||window.document).documentElement}function getParentNode(t){return getNodeName(t)==="html"?t:t.assignedSlot||t.parentNode||(isShadowRoot(t)?t.host:null)||getDocumentElement(t)}function getTrueOffsetParent(t){return!isHTMLElement(t)||getComputedStyle$1(t).position==="fixed"?null:t.offsetParent}function getContainingBlock(t){var e=/firefox/i.test(getUAString()),r=/Trident/i.test(getUAString());if(r&&isHTMLElement(t)){var s=getComputedStyle$1(t);if(s.position==="fixed")return null}var c=getParentNode(t);for(isShadowRoot(c)&&(c=c.host);isHTMLElement(c)&&["html","body"].indexOf(getNodeName(c))<0;){var p=getComputedStyle$1(c);if(p.transform!=="none"||p.perspective!=="none"||p.contain==="paint"||["transform","perspective"].indexOf(p.willChange)!==-1||e&&p.willChange==="filter"||e&&p.filter&&p.filter!=="none")return c;c=c.parentNode}return null}function getOffsetParent(t){for(var e=getWindow(t),r=getTrueOffsetParent(t);r&&isTableElement(r)&&getComputedStyle$1(r).position==="static";)r=getTrueOffsetParent(r);return r&&(getNodeName(r)==="html"||getNodeName(r)==="body"&&getComputedStyle$1(r).position==="static")?e:r||getContainingBlock(t)||e}function getMainAxisFromPlacement(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function within(t,e,r){return max(t,min(e,r))}function withinMaxClamp(t,e,r){var s=within(t,e,r);return s>r?r:s}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(t){return Object.assign({},getFreshSideObject(),t)}function expandToHashMap(t,e){return e.reduce(function(r,s){return r[s]=t,r},{})}var toPaddingObject=function t(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,mergePaddingObject(typeof e!="number"?e:expandToHashMap(e,basePlacements))};function arrow(t){var e,r=t.state,s=t.name,c=t.options,p=r.elements.arrow,j=r.modifiersData.popperOffsets,h=getBasePlacement(r.placement),u=getMainAxisFromPlacement(h),g=[left,right].indexOf(h)>=0,N=g?"height":"width";if(!(!p||!j)){var P=toPaddingObject(c.padding,r),_=getLayoutRect(p),f=u==="y"?top:left,w=u==="y"?bottom:right,C=r.rects.reference[N]+r.rects.reference[u]-j[u]-r.rects.popper[N],E=j[u]-r.rects.reference[u],S=getOffsetParent(p),k=S?u==="y"?S.clientHeight||0:S.clientWidth||0:0,B=C/2-E/2,q=P[f],U=k-_[N]-P[w],F=k/2-_[N]/2+B,Y=within(q,F,U),rt=u;r.modifiersData[s]=(e={},e[rt]=Y,e.centerOffset=Y-F,e)}}function effect$1(t){var e=t.state,r=t.options,s=r.element,c=s===void 0?"[data-popper-arrow]":s;c!=null&&(typeof c=="string"&&(c=e.elements.popper.querySelector(c),!c)||contains(e.elements.popper,c)&&(e.elements.arrow=c))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(t){return t.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(t,e){var r=t.x,s=t.y,c=e.devicePixelRatio||1;return{x:round(r*c)/c||0,y:round(s*c)/c||0}}function mapToStyles(t){var e,r=t.popper,s=t.popperRect,c=t.placement,p=t.variation,j=t.offsets,h=t.position,u=t.gpuAcceleration,g=t.adaptive,N=t.roundOffsets,P=t.isFixed,_=j.x,f=_===void 0?0:_,w=j.y,C=w===void 0?0:w,E=typeof N=="function"?N({x:f,y:C}):{x:f,y:C};f=E.x,C=E.y;var S=j.hasOwnProperty("x"),k=j.hasOwnProperty("y"),B=left,q=top,U=window;if(g){var F=getOffsetParent(r),Y="clientHeight",rt="clientWidth";if(F===getWindow(r)&&(F=getDocumentElement(r),getComputedStyle$1(F).position!=="static"&&h==="absolute"&&(Y="scrollHeight",rt="scrollWidth")),F=F,c===top||(c===left||c===right)&&p===end){q=bottom;var tt=P&&F===U&&U.visualViewport?U.visualViewport.height:F[Y];C-=tt-s.height,C*=u?1:-1}if(c===left||(c===top||c===bottom)&&p===end){B=right;var yt=P&&F===U&&U.visualViewport?U.visualViewport.width:F[rt];f-=yt-s.width,f*=u?1:-1}}var Et=Object.assign({position:h},g&&unsetSides),pt=N===!0?roundOffsetsByDPR({x:f,y:C},getWindow(r)):{x:f,y:C};if(f=pt.x,C=pt.y,u){var Pt;return Object.assign({},Et,(Pt={},Pt[q]=k?"0":"",Pt[B]=S?"0":"",Pt.transform=(U.devicePixelRatio||1)<=1?"translate("+f+"px, "+C+"px)":"translate3d("+f+"px, "+C+"px, 0)",Pt))}return Object.assign({},Et,(e={},e[q]=k?C+"px":"",e[B]=S?f+"px":"",e.transform="",e))}function computeStyles(t){var e=t.state,r=t.options,s=r.gpuAcceleration,c=s===void 0?!0:s,p=r.adaptive,j=p===void 0?!0:p,h=r.roundOffsets,u=h===void 0?!0:h,g={placement:getBasePlacement(e.placement),variation:getVariation(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:c,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,mapToStyles(Object.assign({},g,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:j,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,mapToStyles(Object.assign({},g,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(t){var e=t.state,r=t.instance,s=t.options,c=s.scroll,p=c===void 0?!0:c,j=s.resize,h=j===void 0?!0:j,u=getWindow(e.elements.popper),g=[].concat(e.scrollParents.reference,e.scrollParents.popper);return p&&g.forEach(function(N){N.addEventListener("scroll",r.update,passive)}),h&&u.addEventListener("resize",r.update,passive),function(){p&&g.forEach(function(N){N.removeEventListener("scroll",r.update,passive)}),h&&u.removeEventListener("resize",r.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function t(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(t){return t.replace(/left|right|bottom|top/g,function(e){return hash$1[e]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(t){return t.replace(/start|end/g,function(e){return hash[e]})}function getWindowScroll(t){var e=getWindow(t),r=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:r,scrollTop:s}}function getWindowScrollBarX(t){return getBoundingClientRect(getDocumentElement(t)).left+getWindowScroll(t).scrollLeft}function getViewportRect(t,e){var r=getWindow(t),s=getDocumentElement(t),c=r.visualViewport,p=s.clientWidth,j=s.clientHeight,h=0,u=0;if(c){p=c.width,j=c.height;var g=isLayoutViewport();(g||!g&&e==="fixed")&&(h=c.offsetLeft,u=c.offsetTop)}return{width:p,height:j,x:h+getWindowScrollBarX(t),y:u}}function getDocumentRect(t){var e,r=getDocumentElement(t),s=getWindowScroll(t),c=(e=t.ownerDocument)==null?void 0:e.body,p=max(r.scrollWidth,r.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),j=max(r.scrollHeight,r.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),h=-s.scrollLeft+getWindowScrollBarX(t),u=-s.scrollTop;return getComputedStyle$1(c||r).direction==="rtl"&&(h+=max(r.clientWidth,c?c.clientWidth:0)-p),{width:p,height:j,x:h,y:u}}function isScrollParent(t){var e=getComputedStyle$1(t),r=e.overflow,s=e.overflowX,c=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+c+s)}function getScrollParent(t){return["html","body","#document"].indexOf(getNodeName(t))>=0?t.ownerDocument.body:isHTMLElement(t)&&isScrollParent(t)?t:getScrollParent(getParentNode(t))}function listScrollParents(t,e){var r;e===void 0&&(e=[]);var s=getScrollParent(t),c=s===((r=t.ownerDocument)==null?void 0:r.body),p=getWindow(s),j=c?[p].concat(p.visualViewport||[],isScrollParent(s)?s:[]):s,h=e.concat(j);return c?h:h.concat(listScrollParents(getParentNode(j)))}function rectToClientRect(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function getInnerBoundingClientRect(t,e){var r=getBoundingClientRect(t,!1,e==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function getClientRectFromMixedType(t,e,r){return e===viewport?rectToClientRect(getViewportRect(t,r)):isElement$1(e)?getInnerBoundingClientRect(e,r):rectToClientRect(getDocumentRect(getDocumentElement(t)))}function getClippingParents(t){var e=listScrollParents(getParentNode(t)),r=["absolute","fixed"].indexOf(getComputedStyle$1(t).position)>=0,s=r&&isHTMLElement(t)?getOffsetParent(t):t;return isElement$1(s)?e.filter(function(c){return isElement$1(c)&&contains(c,s)&&getNodeName(c)!=="body"}):[]}function getClippingRect(t,e,r,s){var c=e==="clippingParents"?getClippingParents(t):[].concat(e),p=[].concat(c,[r]),j=p[0],h=p.reduce(function(u,g){var N=getClientRectFromMixedType(t,g,s);return u.top=max(N.top,u.top),u.right=min(N.right,u.right),u.bottom=min(N.bottom,u.bottom),u.left=max(N.left,u.left),u},getClientRectFromMixedType(t,j,s));return h.width=h.right-h.left,h.height=h.bottom-h.top,h.x=h.left,h.y=h.top,h}function computeOffsets(t){var e=t.reference,r=t.element,s=t.placement,c=s?getBasePlacement(s):null,p=s?getVariation(s):null,j=e.x+e.width/2-r.width/2,h=e.y+e.height/2-r.height/2,u;switch(c){case top:u={x:j,y:e.y-r.height};break;case bottom:u={x:j,y:e.y+e.height};break;case right:u={x:e.x+e.width,y:h};break;case left:u={x:e.x-r.width,y:h};break;default:u={x:e.x,y:e.y}}var g=c?getMainAxisFromPlacement(c):null;if(g!=null){var N=g==="y"?"height":"width";switch(p){case start$1:u[g]=u[g]-(e[N]/2-r[N]/2);break;case end:u[g]=u[g]+(e[N]/2-r[N]/2);break}}return u}function detectOverflow(t,e){e===void 0&&(e={});var r=e,s=r.placement,c=s===void 0?t.placement:s,p=r.strategy,j=p===void 0?t.strategy:p,h=r.boundary,u=h===void 0?clippingParents:h,g=r.rootBoundary,N=g===void 0?viewport:g,P=r.elementContext,_=P===void 0?popper:P,f=r.altBoundary,w=f===void 0?!1:f,C=r.padding,E=C===void 0?0:C,S=mergePaddingObject(typeof E!="number"?E:expandToHashMap(E,basePlacements)),k=_===popper?reference:popper,B=t.rects.popper,q=t.elements[w?k:_],U=getClippingRect(isElement$1(q)?q:q.contextElement||getDocumentElement(t.elements.popper),u,N,j),F=getBoundingClientRect(t.elements.reference),Y=computeOffsets({reference:F,element:B,strategy:"absolute",placement:c}),rt=rectToClientRect(Object.assign({},B,Y)),tt=_===popper?rt:F,yt={top:U.top-tt.top+S.top,bottom:tt.bottom-U.bottom+S.bottom,left:U.left-tt.left+S.left,right:tt.right-U.right+S.right},Et=t.modifiersData.offset;if(_===popper&&Et){var pt=Et[c];Object.keys(yt).forEach(function(Pt){var Vt=[right,bottom].indexOf(Pt)>=0?1:-1,Ot=[top,bottom].indexOf(Pt)>=0?"y":"x";yt[Pt]+=pt[Ot]*Vt})}return yt}function computeAutoPlacement(t,e){e===void 0&&(e={});var r=e,s=r.placement,c=r.boundary,p=r.rootBoundary,j=r.padding,h=r.flipVariations,u=r.allowedAutoPlacements,g=u===void 0?placements:u,N=getVariation(s),P=N?h?variationPlacements:variationPlacements.filter(function(w){return getVariation(w)===N}):basePlacements,_=P.filter(function(w){return g.indexOf(w)>=0});_.length===0&&(_=P);var f=_.reduce(function(w,C){return w[C]=detectOverflow(t,{placement:C,boundary:c,rootBoundary:p,padding:j})[getBasePlacement(C)],w},{});return Object.keys(f).sort(function(w,C){return f[w]-f[C]})}function getExpandedFallbackPlacements(t){if(getBasePlacement(t)===auto)return[];var e=getOppositePlacement(t);return[getOppositeVariationPlacement(t),e,getOppositeVariationPlacement(e)]}function flip(t){var e=t.state,r=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var c=r.mainAxis,p=c===void 0?!0:c,j=r.altAxis,h=j===void 0?!0:j,u=r.fallbackPlacements,g=r.padding,N=r.boundary,P=r.rootBoundary,_=r.altBoundary,f=r.flipVariations,w=f===void 0?!0:f,C=r.allowedAutoPlacements,E=e.options.placement,S=getBasePlacement(E),k=S===E,B=u||(k||!w?[getOppositePlacement(E)]:getExpandedFallbackPlacements(E)),q=[E].concat(B).reduce(function(Jt,he){return Jt.concat(getBasePlacement(he)===auto?computeAutoPlacement(e,{placement:he,boundary:N,rootBoundary:P,padding:g,flipVariations:w,allowedAutoPlacements:C}):he)},[]),U=e.rects.reference,F=e.rects.popper,Y=new Map,rt=!0,tt=q[0],yt=0;yt<q.length;yt++){var Et=q[yt],pt=getBasePlacement(Et),Pt=getVariation(Et)===start$1,Vt=[top,bottom].indexOf(pt)>=0,Ot=Vt?"width":"height",_t=detectOverflow(e,{placement:Et,boundary:N,rootBoundary:P,altBoundary:_,padding:g}),Xt=Vt?Pt?right:left:Pt?bottom:top;U[Ot]>F[Ot]&&(Xt=getOppositePlacement(Xt));var qt=getOppositePlacement(Xt),oe=[];if(p&&oe.push(_t[pt]<=0),h&&oe.push(_t[Xt]<=0,_t[qt]<=0),oe.every(function(Jt){return Jt})){tt=Et,rt=!1;break}Y.set(Et,oe)}if(rt)for(var $t=w?3:1,fe=function(he){var Dt=q.find(function(Wt){var Kt=Y.get(Wt);if(Kt)return Kt.slice(0,he).every(function(ae){return ae})});if(Dt)return tt=Dt,"break"},et=$t;et>0;et--){var Ht=fe(et);if(Ht==="break")break}e.placement!==tt&&(e.modifiersData[s]._skip=!0,e.placement=tt,e.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function isAnySideFullyClipped(t){return[top,right,bottom,left].some(function(e){return t[e]>=0})}function hide(t){var e=t.state,r=t.name,s=e.rects.reference,c=e.rects.popper,p=e.modifiersData.preventOverflow,j=detectOverflow(e,{elementContext:"reference"}),h=detectOverflow(e,{altBoundary:!0}),u=getSideOffsets(j,s),g=getSideOffsets(h,c,p),N=isAnySideFullyClipped(u),P=isAnySideFullyClipped(g);e.modifiersData[r]={referenceClippingOffsets:u,popperEscapeOffsets:g,isReferenceHidden:N,hasPopperEscaped:P},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":N,"data-popper-escaped":P})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(t,e,r){var s=getBasePlacement(t),c=[left,top].indexOf(s)>=0?-1:1,p=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,j=p[0],h=p[1];return j=j||0,h=(h||0)*c,[left,right].indexOf(s)>=0?{x:h,y:j}:{x:j,y:h}}function offset(t){var e=t.state,r=t.options,s=t.name,c=r.offset,p=c===void 0?[0,0]:c,j=placements.reduce(function(N,P){return N[P]=distanceAndSkiddingToXY(P,e.rects,p),N},{}),h=j[e.placement],u=h.x,g=h.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=g),e.modifiersData[s]=j}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(t){var e=t.state,r=t.name;e.modifiersData[r]=computeOffsets({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(t){return t==="x"?"y":"x"}function preventOverflow(t){var e=t.state,r=t.options,s=t.name,c=r.mainAxis,p=c===void 0?!0:c,j=r.altAxis,h=j===void 0?!1:j,u=r.boundary,g=r.rootBoundary,N=r.altBoundary,P=r.padding,_=r.tether,f=_===void 0?!0:_,w=r.tetherOffset,C=w===void 0?0:w,E=detectOverflow(e,{boundary:u,rootBoundary:g,padding:P,altBoundary:N}),S=getBasePlacement(e.placement),k=getVariation(e.placement),B=!k,q=getMainAxisFromPlacement(S),U=getAltAxis(q),F=e.modifiersData.popperOffsets,Y=e.rects.reference,rt=e.rects.popper,tt=typeof C=="function"?C(Object.assign({},e.rects,{placement:e.placement})):C,yt=typeof tt=="number"?{mainAxis:tt,altAxis:tt}:Object.assign({mainAxis:0,altAxis:0},tt),Et=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,pt={x:0,y:0};if(F){if(p){var Pt,Vt=q==="y"?top:left,Ot=q==="y"?bottom:right,_t=q==="y"?"height":"width",Xt=F[q],qt=Xt+E[Vt],oe=Xt-E[Ot],$t=f?-rt[_t]/2:0,fe=k===start$1?Y[_t]:rt[_t],et=k===start$1?-rt[_t]:-Y[_t],Ht=e.elements.arrow,Jt=f&&Ht?getLayoutRect(Ht):{width:0,height:0},he=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:getFreshSideObject(),Dt=he[Vt],Wt=he[Ot],Kt=within(0,Y[_t],Jt[_t]),ae=B?Y[_t]/2-$t-Kt-Dt-yt.mainAxis:fe-Kt-Dt-yt.mainAxis,de=B?-Y[_t]/2+$t+Kt+Wt+yt.mainAxis:et+Kt+Wt+yt.mainAxis,ye=e.elements.arrow&&getOffsetParent(e.elements.arrow),Oe=ye?q==="y"?ye.clientTop||0:ye.clientLeft||0:0,Te=(Pt=Et==null?void 0:Et[q])!=null?Pt:0,He=Xt+ae-Te-Oe,Ze=Xt+de-Te,Be=within(f?min(qt,He):qt,Xt,f?max(oe,Ze):oe);F[q]=Be,pt[q]=Be-Xt}if(h){var dn,fn=q==="x"?top:left,Ve=q==="x"?bottom:right,Ke=F[U],Xe=U==="y"?"height":"width",D=Ke+E[fn],H=Ke-E[Ve],b=[top,left].indexOf(S)!==-1,d=(dn=Et==null?void 0:Et[U])!=null?dn:0,X=b?D:Ke-Y[Xe]-rt[Xe]-d+yt.altAxis,ht=b?Ke+Y[Xe]+rt[Xe]-d-yt.altAxis:H,dt=f&&b?withinMaxClamp(X,Ke,ht):within(f?X:D,Ke,f?ht:H);F[U]=dt,pt[U]=dt-Ke}e.modifiersData[s]=pt}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function getNodeScroll(t){return t===getWindow(t)||!isHTMLElement(t)?getWindowScroll(t):getHTMLElementScroll(t)}function isElementScaled(t){var e=t.getBoundingClientRect(),r=round(e.width)/t.offsetWidth||1,s=round(e.height)/t.offsetHeight||1;return r!==1||s!==1}function getCompositeRect(t,e,r){r===void 0&&(r=!1);var s=isHTMLElement(e),c=isHTMLElement(e)&&isElementScaled(e),p=getDocumentElement(e),j=getBoundingClientRect(t,c,r),h={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(s||!s&&!r)&&((getNodeName(e)!=="body"||isScrollParent(p))&&(h=getNodeScroll(e)),isHTMLElement(e)?(u=getBoundingClientRect(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):p&&(u.x=getWindowScrollBarX(p))),{x:j.left+h.scrollLeft-u.x,y:j.top+h.scrollTop-u.y,width:j.width,height:j.height}}function order(t){var e=new Map,r=new Set,s=[];t.forEach(function(p){e.set(p.name,p)});function c(p){r.add(p.name);var j=[].concat(p.requires||[],p.requiresIfExists||[]);j.forEach(function(h){if(!r.has(h)){var u=e.get(h);u&&c(u)}}),s.push(p)}return t.forEach(function(p){r.has(p.name)||c(p)}),s}function orderModifiers(t){var e=order(t);return modifierPhases.reduce(function(r,s){return r.concat(e.filter(function(c){return c.phase===s}))},[])}function debounce(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function mergeByName(t){var e=t.reduce(function(r,s){var c=r[s.name];return r[s.name]=c?Object.assign({},c,s,{options:Object.assign({},c.options,s.options),data:Object.assign({},c.data,s.data)}):s,r},{});return Object.keys(e).map(function(r){return e[r]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function popperGenerator(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,s=r===void 0?[]:r,c=e.defaultOptions,p=c===void 0?DEFAULT_OPTIONS:c;return function(h,u,g){g===void 0&&(g=p);var N={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,p),modifiersData:{},elements:{reference:h,popper:u},attributes:{},styles:{}},P=[],_=!1,f={state:N,setOptions:function(S){var k=typeof S=="function"?S(N.options):S;C(),N.options=Object.assign({},p,N.options,k),N.scrollParents={reference:isElement$1(h)?listScrollParents(h):h.contextElement?listScrollParents(h.contextElement):[],popper:listScrollParents(u)};var B=orderModifiers(mergeByName([].concat(s,N.options.modifiers)));return N.orderedModifiers=B.filter(function(q){return q.enabled}),w(),f.update()},forceUpdate:function(){if(!_){var S=N.elements,k=S.reference,B=S.popper;if(areValidElements(k,B)){N.rects={reference:getCompositeRect(k,getOffsetParent(B),N.options.strategy==="fixed"),popper:getLayoutRect(B)},N.reset=!1,N.placement=N.options.placement,N.orderedModifiers.forEach(function(yt){return N.modifiersData[yt.name]=Object.assign({},yt.data)});for(var q=0;q<N.orderedModifiers.length;q++){if(N.reset===!0){N.reset=!1,q=-1;continue}var U=N.orderedModifiers[q],F=U.fn,Y=U.options,rt=Y===void 0?{}:Y,tt=U.name;typeof F=="function"&&(N=F({state:N,options:rt,name:tt,instance:f})||N)}}}},update:debounce(function(){return new Promise(function(E){f.forceUpdate(),E(N)})}),destroy:function(){C(),_=!0}};if(!areValidElements(h,u))return f;f.setOptions(g).then(function(E){!_&&g.onFirstUpdate&&g.onFirstUpdate(E)});function w(){N.orderedModifiers.forEach(function(E){var S=E.name,k=E.options,B=k===void 0?{}:k,q=E.effect;if(typeof q=="function"){var U=q({state:N,name:S,instance:f,options:B}),F=function(){};P.push(U||F)}})}function C(){P.forEach(function(E){return E()}),P=[]}return f}}var createPopper$2=popperGenerator(),defaultModifiers$1=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1],createPopper$1=popperGenerator({defaultModifiers:defaultModifiers$1}),defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});const Popper=Object.freeze(Object.defineProperty({__proto__:null,afterMain,afterRead,afterWrite,applyStyles:applyStyles$1,arrow:arrow$1,auto,basePlacements,beforeMain,beforeRead,beforeWrite,bottom,clippingParents,computeStyles:computeStyles$1,createPopper,createPopperBase:createPopper$2,createPopperLite:createPopper$1,detectOverflow,end,eventListeners,flip:flip$1,hide:hide$1,left,main,modifierPhases,offset:offset$1,placements,popper,popperGenerator,popperOffsets:popperOffsets$1,preventOverflow:preventOverflow$1,read,reference,right,start:start$1,top,variationPlacements,viewport,write},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const elementMap=new Map,Data={set(t,e,r){elementMap.has(t)||elementMap.set(t,new Map);const s=elementMap.get(t);if(!s.has(e)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(e,r)},get(t,e){return elementMap.has(t)&&elementMap.get(t).get(e)||null},remove(t,e){if(!elementMap.has(t))return;const r=elementMap.get(t);r.delete(e),r.size===0&&elementMap.delete(t)}},MAX_UID=1e6,MILLISECONDS_MULTIPLIER=1e3,TRANSITION_END="transitionend",parseSelector=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(e,r)=>`#${CSS.escape(r)}`)),t),toType=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),getUID=t=>{do t+=Math.floor(Math.random()*MAX_UID);while(document.getElementById(t));return t},getTransitionDurationFromElement=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:r}=window.getComputedStyle(t);const s=Number.parseFloat(e),c=Number.parseFloat(r);return!s&&!c?0:(e=e.split(",")[0],r=r.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(r))*MILLISECONDS_MULTIPLIER)},triggerTransitionEnd=t=>{t.dispatchEvent(new Event(TRANSITION_END))},isElement=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),getElement=t=>isElement(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(parseSelector(t)):null,isVisible=t=>{if(!isElement(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",r=t.closest("details:not([open])");if(!r)return e;if(r!==t){const s=t.closest("summary");if(s&&s.parentNode!==r||s===null)return!1}return e},isDisabled=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",findShadowRoot=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?findShadowRoot(t.parentNode):null},noop=()=>{},reflow=t=>{t.offsetHeight},getjQuery=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,DOMContentLoadedCallbacks=[],onDOMContentLoaded=t=>{document.readyState==="loading"?(DOMContentLoadedCallbacks.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of DOMContentLoadedCallbacks)e()}),DOMContentLoadedCallbacks.push(t)):t()},isRTL=()=>document.documentElement.dir==="rtl",defineJQueryPlugin=t=>{onDOMContentLoaded(()=>{const e=getjQuery();if(e){const r=t.NAME,s=e.fn[r];e.fn[r]=t.jQueryInterface,e.fn[r].Constructor=t,e.fn[r].noConflict=()=>(e.fn[r]=s,t.jQueryInterface)}})},execute=(t,e=[],r=t)=>typeof t=="function"?t(...e):r,executeAfterTransition=(t,e,r=!0)=>{if(!r){execute(t);return}const s=5,c=getTransitionDurationFromElement(e)+s;let p=!1;const j=({target:h})=>{h===e&&(p=!0,e.removeEventListener(TRANSITION_END,j),execute(t))};e.addEventListener(TRANSITION_END,j),setTimeout(()=>{p||triggerTransitionEnd(e)},c)},getNextActiveElement=(t,e,r,s)=>{const c=t.length;let p=t.indexOf(e);return p===-1?!r&&s?t[c-1]:t[0]:(p+=r?1:-1,s&&(p=(p+c)%c),t[Math.max(0,Math.min(p,c-1))])},namespaceRegex=/[^.]*(?=\..*)\.|.*/,stripNameRegex=/\..*/,stripUidRegex=/::\d+$/,eventRegistry={};let uidEvent=1;const customEvents={mouseenter:"mouseover",mouseleave:"mouseout"},nativeEvents=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function makeEventUid(t,e){return e&&`${e}::${uidEvent++}`||t.uidEvent||uidEvent++}function getElementEvents(t){const e=makeEventUid(t);return t.uidEvent=e,eventRegistry[e]=eventRegistry[e]||{},eventRegistry[e]}function bootstrapHandler(t,e){return function r(s){return hydrateObj(s,{delegateTarget:t}),r.oneOff&&EventHandler.off(t,s.type,e),e.apply(t,[s])}}function bootstrapDelegationHandler(t,e,r){return function s(c){const p=t.querySelectorAll(e);for(let{target:j}=c;j&&j!==this;j=j.parentNode)for(const h of p)if(h===j)return hydrateObj(c,{delegateTarget:j}),s.oneOff&&EventHandler.off(t,c.type,e,r),r.apply(j,[c])}}function findHandler(t,e,r=null){return Object.values(t).find(s=>s.callable===e&&s.delegationSelector===r)}function normalizeParameters(t,e,r){const s=typeof e=="string",c=s?r:e||r;let p=getTypeEvent(t);return nativeEvents.has(p)||(p=t),[s,c,p]}function addHandler(t,e,r,s,c){if(typeof e!="string"||!t)return;let[p,j,h]=normalizeParameters(e,r,s);e in customEvents&&(j=(w=>function(C){if(!C.relatedTarget||C.relatedTarget!==C.delegateTarget&&!C.delegateTarget.contains(C.relatedTarget))return w.call(this,C)})(j));const u=getElementEvents(t),g=u[h]||(u[h]={}),N=findHandler(g,j,p?r:null);if(N){N.oneOff=N.oneOff&&c;return}const P=makeEventUid(j,e.replace(namespaceRegex,"")),_=p?bootstrapDelegationHandler(t,r,j):bootstrapHandler(t,j);_.delegationSelector=p?r:null,_.callable=j,_.oneOff=c,_.uidEvent=P,g[P]=_,t.addEventListener(h,_,p)}function removeHandler(t,e,r,s,c){const p=findHandler(e[r],s,c);p&&(t.removeEventListener(r,p,!!c),delete e[r][p.uidEvent])}function removeNamespacedHandlers(t,e,r,s){const c=e[r]||{};for(const[p,j]of Object.entries(c))p.includes(s)&&removeHandler(t,e,r,j.callable,j.delegationSelector)}function getTypeEvent(t){return t=t.replace(stripNameRegex,""),customEvents[t]||t}const EventHandler={on(t,e,r,s){addHandler(t,e,r,s,!1)},one(t,e,r,s){addHandler(t,e,r,s,!0)},off(t,e,r,s){if(typeof e!="string"||!t)return;const[c,p,j]=normalizeParameters(e,r,s),h=j!==e,u=getElementEvents(t),g=u[j]||{},N=e.startsWith(".");if(typeof p<"u"){if(!Object.keys(g).length)return;removeHandler(t,u,j,p,c?r:null);return}if(N)for(const P of Object.keys(u))removeNamespacedHandlers(t,u,P,e.slice(1));for(const[P,_]of Object.entries(g)){const f=P.replace(stripUidRegex,"");(!h||e.includes(f))&&removeHandler(t,u,j,_.callable,_.delegationSelector)}},trigger(t,e,r){if(typeof e!="string"||!t)return null;const s=getjQuery(),c=getTypeEvent(e),p=e!==c;let j=null,h=!0,u=!0,g=!1;p&&s&&(j=s.Event(e,r),s(t).trigger(j),h=!j.isPropagationStopped(),u=!j.isImmediatePropagationStopped(),g=j.isDefaultPrevented());const N=hydrateObj(new Event(e,{bubbles:h,cancelable:!0}),r);return g&&N.preventDefault(),u&&t.dispatchEvent(N),N.defaultPrevented&&j&&j.preventDefault(),N}};function hydrateObj(t,e={}){for(const[r,s]of Object.entries(e))try{t[r]=s}catch{Object.defineProperty(t,r,{configurable:!0,get(){return s}})}return t}function normalizeData(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function normalizeDataKey(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Manipulator={setDataAttribute(t,e,r){t.setAttribute(`data-bs-${normalizeDataKey(e)}`,r)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${normalizeDataKey(e)}`)},getDataAttributes(t){if(!t)return{};const e={},r=Object.keys(t.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(const s of r){let c=s.replace(/^bs/,"");c=c.charAt(0).toLowerCase()+c.slice(1,c.length),e[c]=normalizeData(t.dataset[s])}return e},getDataAttribute(t,e){return normalizeData(t.getAttribute(`data-bs-${normalizeDataKey(e)}`))}};class Config{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,r){const s=isElement(r)?Manipulator.getDataAttribute(r,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},...isElement(r)?Manipulator.getDataAttributes(r):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,r=this.constructor.DefaultType){for(const[s,c]of Object.entries(r)){const p=e[s],j=isElement(p)?"element":toType(p);if(!new RegExp(c).test(j))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${j}" but expected type "${c}".`)}}}const VERSION="5.3.2";class BaseComponent extends Config{constructor(e,r){super(),e=getElement(e),e&&(this._element=e,this._config=this._getConfig(r),Data.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Data.remove(this._element,this.constructor.DATA_KEY),EventHandler.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,r,s=!0){executeAfterTransition(e,r,s)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Data.get(getElement(e),this.DATA_KEY)}static getOrCreateInstance(e,r={}){return this.getInstance(e)||new this(e,typeof r=="object"?r:null)}static get VERSION(){return VERSION}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const getSelector=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let r=t.getAttribute("href");if(!r||!r.includes("#")&&!r.startsWith("."))return null;r.includes("#")&&!r.startsWith("#")&&(r=`#${r.split("#")[1]}`),e=r&&r!=="#"?parseSelector(r.trim()):null}return e},SelectorEngine={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(r=>r.matches(e))},parents(t,e){const r=[];let s=t.parentNode.closest(e);for(;s;)r.push(s),s=s.parentNode.closest(e);return r},prev(t,e){let r=t.previousElementSibling;for(;r;){if(r.matches(e))return[r];r=r.previousElementSibling}return[]},next(t,e){let r=t.nextElementSibling;for(;r;){if(r.matches(e))return[r];r=r.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(r=>`${r}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(r=>!isDisabled(r)&&isVisible(r))},getSelectorFromElement(t){const e=getSelector(t);return e&&SelectorEngine.findOne(e)?e:null},getElementFromSelector(t){const e=getSelector(t);return e?SelectorEngine.findOne(e):null},getMultipleElementsFromSelector(t){const e=getSelector(t);return e?SelectorEngine.find(e):[]}},enableDismissTrigger=(t,e="hide")=>{const r=`click.dismiss${t.EVENT_KEY}`,s=t.NAME;EventHandler.on(document,r,`[data-bs-dismiss="${s}"]`,function(c){if(["A","AREA"].includes(this.tagName)&&c.preventDefault(),isDisabled(this))return;const p=SelectorEngine.getElementFromSelector(this)||this.closest(`.${s}`);t.getOrCreateInstance(p)[e]()})},NAME$f="alert",DATA_KEY$a="bs.alert",EVENT_KEY$b=`.${DATA_KEY$a}`,EVENT_CLOSE=`close${EVENT_KEY$b}`,EVENT_CLOSED=`closed${EVENT_KEY$b}`,CLASS_NAME_FADE$5="fade",CLASS_NAME_SHOW$8="show";class Alert extends BaseComponent{static get NAME(){return NAME$f}close(){if(EventHandler.trigger(this._element,EVENT_CLOSE).defaultPrevented)return;this._element.classList.remove(CLASS_NAME_SHOW$8);const r=this._element.classList.contains(CLASS_NAME_FADE$5);this._queueCallback(()=>this._destroyElement(),this._element,r)}_destroyElement(){this._element.remove(),EventHandler.trigger(this._element,EVENT_CLOSED),this.dispose()}static jQueryInterface(e){return this.each(function(){const r=Alert.getOrCreateInstance(this);if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e](this)}})}}enableDismissTrigger(Alert,"close");defineJQueryPlugin(Alert);const NAME$e="button",DATA_KEY$9="bs.button",EVENT_KEY$a=`.${DATA_KEY$9}`,DATA_API_KEY$6=".data-api",CLASS_NAME_ACTIVE$3="active",SELECTOR_DATA_TOGGLE$5='[data-bs-toggle="button"]',EVENT_CLICK_DATA_API$6=`click${EVENT_KEY$a}${DATA_API_KEY$6}`;class Button extends BaseComponent{static get NAME(){return NAME$e}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(CLASS_NAME_ACTIVE$3))}static jQueryInterface(e){return this.each(function(){const r=Button.getOrCreateInstance(this);e==="toggle"&&r[e]()})}}EventHandler.on(document,EVENT_CLICK_DATA_API$6,SELECTOR_DATA_TOGGLE$5,t=>{t.preventDefault();const e=t.target.closest(SELECTOR_DATA_TOGGLE$5);Button.getOrCreateInstance(e).toggle()});defineJQueryPlugin(Button);const NAME$d="swipe",EVENT_KEY$9=".bs.swipe",EVENT_TOUCHSTART=`touchstart${EVENT_KEY$9}`,EVENT_TOUCHMOVE=`touchmove${EVENT_KEY$9}`,EVENT_TOUCHEND=`touchend${EVENT_KEY$9}`,EVENT_POINTERDOWN=`pointerdown${EVENT_KEY$9}`,EVENT_POINTERUP=`pointerup${EVENT_KEY$9}`,POINTER_TYPE_TOUCH="touch",POINTER_TYPE_PEN="pen",CLASS_NAME_POINTER_EVENT="pointer-event",SWIPE_THRESHOLD=40,Default$c={endCallback:null,leftCallback:null,rightCallback:null},DefaultType$c={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Swipe extends Config{constructor(e,r){super(),this._element=e,!(!e||!Swipe.isSupported())&&(this._config=this._getConfig(r),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Default$c}static get DefaultType(){return DefaultType$c}static get NAME(){return NAME$d}dispose(){EventHandler.off(this._element,EVENT_KEY$9)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),execute(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=SWIPE_THRESHOLD)return;const r=e/this._deltaX;this._deltaX=0,r&&execute(r>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(EventHandler.on(this._element,EVENT_POINTERDOWN,e=>this._start(e)),EventHandler.on(this._element,EVENT_POINTERUP,e=>this._end(e)),this._element.classList.add(CLASS_NAME_POINTER_EVENT)):(EventHandler.on(this._element,EVENT_TOUCHSTART,e=>this._start(e)),EventHandler.on(this._element,EVENT_TOUCHMOVE,e=>this._move(e)),EventHandler.on(this._element,EVENT_TOUCHEND,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===POINTER_TYPE_PEN||e.pointerType===POINTER_TYPE_TOUCH)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const NAME$c="carousel",DATA_KEY$8="bs.carousel",EVENT_KEY$8=`.${DATA_KEY$8}`,DATA_API_KEY$5=".data-api",ARROW_LEFT_KEY$1="ArrowLeft",ARROW_RIGHT_KEY$1="ArrowRight",TOUCHEVENT_COMPAT_WAIT=500,ORDER_NEXT="next",ORDER_PREV="prev",DIRECTION_LEFT="left",DIRECTION_RIGHT="right",EVENT_SLIDE=`slide${EVENT_KEY$8}`,EVENT_SLID=`slid${EVENT_KEY$8}`,EVENT_KEYDOWN$1=`keydown${EVENT_KEY$8}`,EVENT_MOUSEENTER$1=`mouseenter${EVENT_KEY$8}`,EVENT_MOUSELEAVE$1=`mouseleave${EVENT_KEY$8}`,EVENT_DRAG_START=`dragstart${EVENT_KEY$8}`,EVENT_LOAD_DATA_API$3=`load${EVENT_KEY$8}${DATA_API_KEY$5}`,EVENT_CLICK_DATA_API$5=`click${EVENT_KEY$8}${DATA_API_KEY$5}`,CLASS_NAME_CAROUSEL="carousel",CLASS_NAME_ACTIVE$2="active",CLASS_NAME_SLIDE="slide",CLASS_NAME_END="carousel-item-end",CLASS_NAME_START="carousel-item-start",CLASS_NAME_NEXT="carousel-item-next",CLASS_NAME_PREV="carousel-item-prev",SELECTOR_ACTIVE=".active",SELECTOR_ITEM=".carousel-item",SELECTOR_ACTIVE_ITEM=SELECTOR_ACTIVE+SELECTOR_ITEM,SELECTOR_ITEM_IMG=".carousel-item img",SELECTOR_INDICATORS=".carousel-indicators",SELECTOR_DATA_SLIDE="[data-bs-slide], [data-bs-slide-to]",SELECTOR_DATA_RIDE='[data-bs-ride="carousel"]',KEY_TO_DIRECTION={[ARROW_LEFT_KEY$1]:DIRECTION_RIGHT,[ARROW_RIGHT_KEY$1]:DIRECTION_LEFT},Default$b={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},DefaultType$b={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Carousel extends BaseComponent{constructor(e,r){super(e,r),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=SelectorEngine.findOne(SELECTOR_INDICATORS,this._element),this._addEventListeners(),this._config.ride===CLASS_NAME_CAROUSEL&&this.cycle()}static get Default(){return Default$b}static get DefaultType(){return DefaultType$b}static get NAME(){return NAME$c}next(){this._slide(ORDER_NEXT)}nextWhenVisible(){!document.hidden&&isVisible(this._element)&&this.next()}prev(){this._slide(ORDER_PREV)}pause(){this._isSliding&&triggerTransitionEnd(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){EventHandler.one(this._element,EVENT_SLID,()=>this.cycle());return}this.cycle()}}to(e){const r=this._getItems();if(e>r.length-1||e<0)return;if(this._isSliding){EventHandler.one(this._element,EVENT_SLID,()=>this.to(e));return}const s=this._getItemIndex(this._getActive());if(s===e)return;const c=e>s?ORDER_NEXT:ORDER_PREV;this._slide(c,r[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&EventHandler.on(this._element,EVENT_KEYDOWN$1,e=>this._keydown(e)),this._config.pause==="hover"&&(EventHandler.on(this._element,EVENT_MOUSEENTER$1,()=>this.pause()),EventHandler.on(this._element,EVENT_MOUSELEAVE$1,()=>this._maybeEnableCycle())),this._config.touch&&Swipe.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of SelectorEngine.find(SELECTOR_ITEM_IMG,this._element))EventHandler.on(s,EVENT_DRAG_START,c=>c.preventDefault());const r={leftCallback:()=>this._slide(this._directionToOrder(DIRECTION_LEFT)),rightCallback:()=>this._slide(this._directionToOrder(DIRECTION_RIGHT)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),TOUCHEVENT_COMPAT_WAIT+this._config.interval))}};this._swipeHelper=new Swipe(this._element,r)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const r=KEY_TO_DIRECTION[e.key];r&&(e.preventDefault(),this._slide(this._directionToOrder(r)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const r=SelectorEngine.findOne(SELECTOR_ACTIVE,this._indicatorsElement);r.classList.remove(CLASS_NAME_ACTIVE$2),r.removeAttribute("aria-current");const s=SelectorEngine.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);s&&(s.classList.add(CLASS_NAME_ACTIVE$2),s.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const r=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=r||this._config.defaultInterval}_slide(e,r=null){if(this._isSliding)return;const s=this._getActive(),c=e===ORDER_NEXT,p=r||getNextActiveElement(this._getItems(),s,c,this._config.wrap);if(p===s)return;const j=this._getItemIndex(p),h=f=>EventHandler.trigger(this._element,f,{relatedTarget:p,direction:this._orderToDirection(e),from:this._getItemIndex(s),to:j});if(h(EVENT_SLIDE).defaultPrevented||!s||!p)return;const g=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(j),this._activeElement=p;const N=c?CLASS_NAME_START:CLASS_NAME_END,P=c?CLASS_NAME_NEXT:CLASS_NAME_PREV;p.classList.add(P),reflow(p),s.classList.add(N),p.classList.add(N);const _=()=>{p.classList.remove(N,P),p.classList.add(CLASS_NAME_ACTIVE$2),s.classList.remove(CLASS_NAME_ACTIVE$2,P,N),this._isSliding=!1,h(EVENT_SLID)};this._queueCallback(_,s,this._isAnimated()),g&&this.cycle()}_isAnimated(){return this._element.classList.contains(CLASS_NAME_SLIDE)}_getActive(){return SelectorEngine.findOne(SELECTOR_ACTIVE_ITEM,this._element)}_getItems(){return SelectorEngine.find(SELECTOR_ITEM,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return isRTL()?e===DIRECTION_LEFT?ORDER_PREV:ORDER_NEXT:e===DIRECTION_LEFT?ORDER_NEXT:ORDER_PREV}_orderToDirection(e){return isRTL()?e===ORDER_PREV?DIRECTION_LEFT:DIRECTION_RIGHT:e===ORDER_PREV?DIRECTION_RIGHT:DIRECTION_LEFT}static jQueryInterface(e){return this.each(function(){const r=Carousel.getOrCreateInstance(this,e);if(typeof e=="number"){r.to(e);return}if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$5,SELECTOR_DATA_SLIDE,function(t){const e=SelectorEngine.getElementFromSelector(this);if(!e||!e.classList.contains(CLASS_NAME_CAROUSEL))return;t.preventDefault();const r=Carousel.getOrCreateInstance(e),s=this.getAttribute("data-bs-slide-to");if(s){r.to(s),r._maybeEnableCycle();return}if(Manipulator.getDataAttribute(this,"slide")==="next"){r.next(),r._maybeEnableCycle();return}r.prev(),r._maybeEnableCycle()});EventHandler.on(window,EVENT_LOAD_DATA_API$3,()=>{const t=SelectorEngine.find(SELECTOR_DATA_RIDE);for(const e of t)Carousel.getOrCreateInstance(e)});defineJQueryPlugin(Carousel);const NAME$b="collapse",DATA_KEY$7="bs.collapse",EVENT_KEY$7=`.${DATA_KEY$7}`,DATA_API_KEY$4=".data-api",EVENT_SHOW$6=`show${EVENT_KEY$7}`,EVENT_SHOWN$6=`shown${EVENT_KEY$7}`,EVENT_HIDE$6=`hide${EVENT_KEY$7}`,EVENT_HIDDEN$6=`hidden${EVENT_KEY$7}`,EVENT_CLICK_DATA_API$4=`click${EVENT_KEY$7}${DATA_API_KEY$4}`,CLASS_NAME_SHOW$7="show",CLASS_NAME_COLLAPSE="collapse",CLASS_NAME_COLLAPSING="collapsing",CLASS_NAME_COLLAPSED="collapsed",CLASS_NAME_DEEPER_CHILDREN=`:scope .${CLASS_NAME_COLLAPSE} .${CLASS_NAME_COLLAPSE}`,CLASS_NAME_HORIZONTAL="collapse-horizontal",WIDTH="width",HEIGHT="height",SELECTOR_ACTIVES=".collapse.show, .collapse.collapsing",SELECTOR_DATA_TOGGLE$4='[data-bs-toggle="collapse"]',Default$a={parent:null,toggle:!0},DefaultType$a={parent:"(null|element)",toggle:"boolean"};class Collapse extends BaseComponent{constructor(e,r){super(e,r),this._isTransitioning=!1,this._triggerArray=[];const s=SelectorEngine.find(SELECTOR_DATA_TOGGLE$4);for(const c of s){const p=SelectorEngine.getSelectorFromElement(c),j=SelectorEngine.find(p).filter(h=>h===this._element);p!==null&&j.length&&this._triggerArray.push(c)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Default$a}static get DefaultType(){return DefaultType$a}static get NAME(){return NAME$b}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(SELECTOR_ACTIVES).filter(h=>h!==this._element).map(h=>Collapse.getOrCreateInstance(h,{toggle:!1}))),e.length&&e[0]._isTransitioning||EventHandler.trigger(this._element,EVENT_SHOW$6).defaultPrevented)return;for(const h of e)h.hide();const s=this._getDimension();this._element.classList.remove(CLASS_NAME_COLLAPSE),this._element.classList.add(CLASS_NAME_COLLAPSING),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const c=()=>{this._isTransitioning=!1,this._element.classList.remove(CLASS_NAME_COLLAPSING),this._element.classList.add(CLASS_NAME_COLLAPSE,CLASS_NAME_SHOW$7),this._element.style[s]="",EventHandler.trigger(this._element,EVENT_SHOWN$6)},j=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(c,this._element,!0),this._element.style[s]=`${this._element[j]}px`}hide(){if(this._isTransitioning||!this._isShown()||EventHandler.trigger(this._element,EVENT_HIDE$6).defaultPrevented)return;const r=this._getDimension();this._element.style[r]=`${this._element.getBoundingClientRect()[r]}px`,reflow(this._element),this._element.classList.add(CLASS_NAME_COLLAPSING),this._element.classList.remove(CLASS_NAME_COLLAPSE,CLASS_NAME_SHOW$7);for(const c of this._triggerArray){const p=SelectorEngine.getElementFromSelector(c);p&&!this._isShown(p)&&this._addAriaAndCollapsedClass([c],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(CLASS_NAME_COLLAPSING),this._element.classList.add(CLASS_NAME_COLLAPSE),EventHandler.trigger(this._element,EVENT_HIDDEN$6)};this._element.style[r]="",this._queueCallback(s,this._element,!0)}_isShown(e=this._element){return e.classList.contains(CLASS_NAME_SHOW$7)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=getElement(e.parent),e}_getDimension(){return this._element.classList.contains(CLASS_NAME_HORIZONTAL)?WIDTH:HEIGHT}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(SELECTOR_DATA_TOGGLE$4);for(const r of e){const s=SelectorEngine.getElementFromSelector(r);s&&this._addAriaAndCollapsedClass([r],this._isShown(s))}}_getFirstLevelChildren(e){const r=SelectorEngine.find(CLASS_NAME_DEEPER_CHILDREN,this._config.parent);return SelectorEngine.find(e,this._config.parent).filter(s=>!r.includes(s))}_addAriaAndCollapsedClass(e,r){if(e.length)for(const s of e)s.classList.toggle(CLASS_NAME_COLLAPSED,!r),s.setAttribute("aria-expanded",r)}static jQueryInterface(e){const r={};return typeof e=="string"&&/show|hide/.test(e)&&(r.toggle=!1),this.each(function(){const s=Collapse.getOrCreateInstance(this,r);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$4,SELECTOR_DATA_TOGGLE$4,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();for(const e of SelectorEngine.getMultipleElementsFromSelector(this))Collapse.getOrCreateInstance(e,{toggle:!1}).toggle()});defineJQueryPlugin(Collapse);const NAME$a="dropdown",DATA_KEY$6="bs.dropdown",EVENT_KEY$6=`.${DATA_KEY$6}`,DATA_API_KEY$3=".data-api",ESCAPE_KEY$2="Escape",TAB_KEY$1="Tab",ARROW_UP_KEY$1="ArrowUp",ARROW_DOWN_KEY$1="ArrowDown",RIGHT_MOUSE_BUTTON=2,EVENT_HIDE$5=`hide${EVENT_KEY$6}`,EVENT_HIDDEN$5=`hidden${EVENT_KEY$6}`,EVENT_SHOW$5=`show${EVENT_KEY$6}`,EVENT_SHOWN$5=`shown${EVENT_KEY$6}`,EVENT_CLICK_DATA_API$3=`click${EVENT_KEY$6}${DATA_API_KEY$3}`,EVENT_KEYDOWN_DATA_API=`keydown${EVENT_KEY$6}${DATA_API_KEY$3}`,EVENT_KEYUP_DATA_API=`keyup${EVENT_KEY$6}${DATA_API_KEY$3}`,CLASS_NAME_SHOW$6="show",CLASS_NAME_DROPUP="dropup",CLASS_NAME_DROPEND="dropend",CLASS_NAME_DROPSTART="dropstart",CLASS_NAME_DROPUP_CENTER="dropup-center",CLASS_NAME_DROPDOWN_CENTER="dropdown-center",SELECTOR_DATA_TOGGLE$3='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',SELECTOR_DATA_TOGGLE_SHOWN=`${SELECTOR_DATA_TOGGLE$3}.${CLASS_NAME_SHOW$6}`,SELECTOR_MENU=".dropdown-menu",SELECTOR_NAVBAR=".navbar",SELECTOR_NAVBAR_NAV=".navbar-nav",SELECTOR_VISIBLE_ITEMS=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",PLACEMENT_TOP=isRTL()?"top-end":"top-start",PLACEMENT_TOPEND=isRTL()?"top-start":"top-end",PLACEMENT_BOTTOM=isRTL()?"bottom-end":"bottom-start",PLACEMENT_BOTTOMEND=isRTL()?"bottom-start":"bottom-end",PLACEMENT_RIGHT=isRTL()?"left-start":"right-start",PLACEMENT_LEFT=isRTL()?"right-start":"left-start",PLACEMENT_TOPCENTER="top",PLACEMENT_BOTTOMCENTER="bottom",Default$9={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},DefaultType$9={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Dropdown extends BaseComponent{constructor(e,r){super(e,r),this._popper=null,this._parent=this._element.parentNode,this._menu=SelectorEngine.next(this._element,SELECTOR_MENU)[0]||SelectorEngine.prev(this._element,SELECTOR_MENU)[0]||SelectorEngine.findOne(SELECTOR_MENU,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Default$9}static get DefaultType(){return DefaultType$9}static get NAME(){return NAME$a}toggle(){return this._isShown()?this.hide():this.show()}show(){if(isDisabled(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!EventHandler.trigger(this._element,EVENT_SHOW$5,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(SELECTOR_NAVBAR_NAV))for(const s of[].concat(...document.body.children))EventHandler.on(s,"mouseover",noop);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(CLASS_NAME_SHOW$6),this._element.classList.add(CLASS_NAME_SHOW$6),EventHandler.trigger(this._element,EVENT_SHOWN$5,e)}}hide(){if(isDisabled(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!EventHandler.trigger(this._element,EVENT_HIDE$5,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))EventHandler.off(s,"mouseover",noop);this._popper&&this._popper.destroy(),this._menu.classList.remove(CLASS_NAME_SHOW$6),this._element.classList.remove(CLASS_NAME_SHOW$6),this._element.setAttribute("aria-expanded","false"),Manipulator.removeDataAttribute(this._menu,"popper"),EventHandler.trigger(this._element,EVENT_HIDDEN$5,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!isElement(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${NAME$a.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof Popper>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:isElement(this._config.reference)?e=getElement(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const r=this._getPopperConfig();this._popper=createPopper(e,this._menu,r)}_isShown(){return this._menu.classList.contains(CLASS_NAME_SHOW$6)}_getPlacement(){const e=this._parent;if(e.classList.contains(CLASS_NAME_DROPEND))return PLACEMENT_RIGHT;if(e.classList.contains(CLASS_NAME_DROPSTART))return PLACEMENT_LEFT;if(e.classList.contains(CLASS_NAME_DROPUP_CENTER))return PLACEMENT_TOPCENTER;if(e.classList.contains(CLASS_NAME_DROPDOWN_CENTER))return PLACEMENT_BOTTOMCENTER;const r=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(CLASS_NAME_DROPUP)?r?PLACEMENT_TOPEND:PLACEMENT_TOP:r?PLACEMENT_BOTTOMEND:PLACEMENT_BOTTOM}_detectNavbar(){return this._element.closest(SELECTOR_NAVBAR)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(r=>Number.parseInt(r,10)):typeof e=="function"?r=>e(r,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Manipulator.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...execute(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:r}){const s=SelectorEngine.find(SELECTOR_VISIBLE_ITEMS,this._menu).filter(c=>isVisible(c));s.length&&getNextActiveElement(s,r,e===ARROW_DOWN_KEY$1,!s.includes(r)).focus()}static jQueryInterface(e){return this.each(function(){const r=Dropdown.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}static clearMenus(e){if(e.button===RIGHT_MOUSE_BUTTON||e.type==="keyup"&&e.key!==TAB_KEY$1)return;const r=SelectorEngine.find(SELECTOR_DATA_TOGGLE_SHOWN);for(const s of r){const c=Dropdown.getInstance(s);if(!c||c._config.autoClose===!1)continue;const p=e.composedPath(),j=p.includes(c._menu);if(p.includes(c._element)||c._config.autoClose==="inside"&&!j||c._config.autoClose==="outside"&&j||c._menu.contains(e.target)&&(e.type==="keyup"&&e.key===TAB_KEY$1||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const h={relatedTarget:c._element};e.type==="click"&&(h.clickEvent=e),c._completeHide(h)}}static dataApiKeydownHandler(e){const r=/input|textarea/i.test(e.target.tagName),s=e.key===ESCAPE_KEY$2,c=[ARROW_UP_KEY$1,ARROW_DOWN_KEY$1].includes(e.key);if(!c&&!s||r&&!s)return;e.preventDefault();const p=this.matches(SELECTOR_DATA_TOGGLE$3)?this:SelectorEngine.prev(this,SELECTOR_DATA_TOGGLE$3)[0]||SelectorEngine.next(this,SELECTOR_DATA_TOGGLE$3)[0]||SelectorEngine.findOne(SELECTOR_DATA_TOGGLE$3,e.delegateTarget.parentNode),j=Dropdown.getOrCreateInstance(p);if(c){e.stopPropagation(),j.show(),j._selectMenuItem(e);return}j._isShown()&&(e.stopPropagation(),j.hide(),p.focus())}}EventHandler.on(document,EVENT_KEYDOWN_DATA_API,SELECTOR_DATA_TOGGLE$3,Dropdown.dataApiKeydownHandler);EventHandler.on(document,EVENT_KEYDOWN_DATA_API,SELECTOR_MENU,Dropdown.dataApiKeydownHandler);EventHandler.on(document,EVENT_CLICK_DATA_API$3,Dropdown.clearMenus);EventHandler.on(document,EVENT_KEYUP_DATA_API,Dropdown.clearMenus);EventHandler.on(document,EVENT_CLICK_DATA_API$3,SELECTOR_DATA_TOGGLE$3,function(t){t.preventDefault(),Dropdown.getOrCreateInstance(this).toggle()});defineJQueryPlugin(Dropdown);const NAME$9="backdrop",CLASS_NAME_FADE$4="fade",CLASS_NAME_SHOW$5="show",EVENT_MOUSEDOWN=`mousedown.bs.${NAME$9}`,Default$8={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},DefaultType$8={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Backdrop extends Config{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Default$8}static get DefaultType(){return DefaultType$8}static get NAME(){return NAME$9}show(e){if(!this._config.isVisible){execute(e);return}this._append();const r=this._getElement();this._config.isAnimated&&reflow(r),r.classList.add(CLASS_NAME_SHOW$5),this._emulateAnimation(()=>{execute(e)})}hide(e){if(!this._config.isVisible){execute(e);return}this._getElement().classList.remove(CLASS_NAME_SHOW$5),this._emulateAnimation(()=>{this.dispose(),execute(e)})}dispose(){this._isAppended&&(EventHandler.off(this._element,EVENT_MOUSEDOWN),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(CLASS_NAME_FADE$4),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=getElement(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),EventHandler.on(e,EVENT_MOUSEDOWN,()=>{execute(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){executeAfterTransition(e,this._getElement(),this._config.isAnimated)}}const NAME$8="focustrap",DATA_KEY$5="bs.focustrap",EVENT_KEY$5=`.${DATA_KEY$5}`,EVENT_FOCUSIN$2=`focusin${EVENT_KEY$5}`,EVENT_KEYDOWN_TAB=`keydown.tab${EVENT_KEY$5}`,TAB_KEY="Tab",TAB_NAV_FORWARD="forward",TAB_NAV_BACKWARD="backward",Default$7={autofocus:!0,trapElement:null},DefaultType$7={autofocus:"boolean",trapElement:"element"};class FocusTrap extends Config{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Default$7}static get DefaultType(){return DefaultType$7}static get NAME(){return NAME$8}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),EventHandler.off(document,EVENT_KEY$5),EventHandler.on(document,EVENT_FOCUSIN$2,e=>this._handleFocusin(e)),EventHandler.on(document,EVENT_KEYDOWN_TAB,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,EventHandler.off(document,EVENT_KEY$5))}_handleFocusin(e){const{trapElement:r}=this._config;if(e.target===document||e.target===r||r.contains(e.target))return;const s=SelectorEngine.focusableChildren(r);s.length===0?r.focus():this._lastTabNavDirection===TAB_NAV_BACKWARD?s[s.length-1].focus():s[0].focus()}_handleKeydown(e){e.key===TAB_KEY&&(this._lastTabNavDirection=e.shiftKey?TAB_NAV_BACKWARD:TAB_NAV_FORWARD)}}const SELECTOR_FIXED_CONTENT=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",SELECTOR_STICKY_CONTENT=".sticky-top",PROPERTY_PADDING="padding-right",PROPERTY_MARGIN="margin-right";class ScrollBarHelper{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,PROPERTY_PADDING,r=>r+e),this._setElementAttributes(SELECTOR_FIXED_CONTENT,PROPERTY_PADDING,r=>r+e),this._setElementAttributes(SELECTOR_STICKY_CONTENT,PROPERTY_MARGIN,r=>r-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,PROPERTY_PADDING),this._resetElementAttributes(SELECTOR_FIXED_CONTENT,PROPERTY_PADDING),this._resetElementAttributes(SELECTOR_STICKY_CONTENT,PROPERTY_MARGIN)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,r,s){const c=this.getWidth(),p=j=>{if(j!==this._element&&window.innerWidth>j.clientWidth+c)return;this._saveInitialAttribute(j,r);const h=window.getComputedStyle(j).getPropertyValue(r);j.style.setProperty(r,`${s(Number.parseFloat(h))}px`)};this._applyManipulationCallback(e,p)}_saveInitialAttribute(e,r){const s=e.style.getPropertyValue(r);s&&Manipulator.setDataAttribute(e,r,s)}_resetElementAttributes(e,r){const s=c=>{const p=Manipulator.getDataAttribute(c,r);if(p===null){c.style.removeProperty(r);return}Manipulator.removeDataAttribute(c,r),c.style.setProperty(r,p)};this._applyManipulationCallback(e,s)}_applyManipulationCallback(e,r){if(isElement(e)){r(e);return}for(const s of SelectorEngine.find(e,this._element))r(s)}}const NAME$7="modal",DATA_KEY$4="bs.modal",EVENT_KEY$4=`.${DATA_KEY$4}`,DATA_API_KEY$2=".data-api",ESCAPE_KEY$1="Escape",EVENT_HIDE$4=`hide${EVENT_KEY$4}`,EVENT_HIDE_PREVENTED$1=`hidePrevented${EVENT_KEY$4}`,EVENT_HIDDEN$4=`hidden${EVENT_KEY$4}`,EVENT_SHOW$4=`show${EVENT_KEY$4}`,EVENT_SHOWN$4=`shown${EVENT_KEY$4}`,EVENT_RESIZE$1=`resize${EVENT_KEY$4}`,EVENT_CLICK_DISMISS=`click.dismiss${EVENT_KEY$4}`,EVENT_MOUSEDOWN_DISMISS=`mousedown.dismiss${EVENT_KEY$4}`,EVENT_KEYDOWN_DISMISS$1=`keydown.dismiss${EVENT_KEY$4}`,EVENT_CLICK_DATA_API$2=`click${EVENT_KEY$4}${DATA_API_KEY$2}`,CLASS_NAME_OPEN="modal-open",CLASS_NAME_FADE$3="fade",CLASS_NAME_SHOW$4="show",CLASS_NAME_STATIC="modal-static",OPEN_SELECTOR$1=".modal.show",SELECTOR_DIALOG=".modal-dialog",SELECTOR_MODAL_BODY=".modal-body",SELECTOR_DATA_TOGGLE$2='[data-bs-toggle="modal"]',Default$6={backdrop:!0,focus:!0,keyboard:!0},DefaultType$6={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Modal extends BaseComponent{constructor(e,r){super(e,r),this._dialog=SelectorEngine.findOne(SELECTOR_DIALOG,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ScrollBarHelper,this._addEventListeners()}static get Default(){return Default$6}static get DefaultType(){return DefaultType$6}static get NAME(){return NAME$7}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||EventHandler.trigger(this._element,EVENT_SHOW$4,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(CLASS_NAME_OPEN),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||EventHandler.trigger(this._element,EVENT_HIDE$4).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(CLASS_NAME_SHOW$4),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){EventHandler.off(window,EVENT_KEY$4),EventHandler.off(this._dialog,EVENT_KEY$4),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Backdrop({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new FocusTrap({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const r=SelectorEngine.findOne(SELECTOR_MODAL_BODY,this._dialog);r&&(r.scrollTop=0),reflow(this._element),this._element.classList.add(CLASS_NAME_SHOW$4);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,EventHandler.trigger(this._element,EVENT_SHOWN$4,{relatedTarget:e})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){EventHandler.on(this._element,EVENT_KEYDOWN_DISMISS$1,e=>{if(e.key===ESCAPE_KEY$1){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),EventHandler.on(window,EVENT_RESIZE$1,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),EventHandler.on(this._element,EVENT_MOUSEDOWN_DISMISS,e=>{EventHandler.one(this._element,EVENT_CLICK_DISMISS,r=>{if(!(this._element!==e.target||this._element!==r.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(CLASS_NAME_OPEN),this._resetAdjustments(),this._scrollBar.reset(),EventHandler.trigger(this._element,EVENT_HIDDEN$4)})}_isAnimated(){return this._element.classList.contains(CLASS_NAME_FADE$3)}_triggerBackdropTransition(){if(EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED$1).defaultPrevented)return;const r=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(CLASS_NAME_STATIC)||(r||(this._element.style.overflowY="hidden"),this._element.classList.add(CLASS_NAME_STATIC),this._queueCallback(()=>{this._element.classList.remove(CLASS_NAME_STATIC),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,r=this._scrollBar.getWidth(),s=r>0;if(s&&!e){const c=isRTL()?"paddingLeft":"paddingRight";this._element.style[c]=`${r}px`}if(!s&&e){const c=isRTL()?"paddingRight":"paddingLeft";this._element.style[c]=`${r}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,r){return this.each(function(){const s=Modal.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e](r)}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$2,SELECTOR_DATA_TOGGLE$2,function(t){const e=SelectorEngine.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),EventHandler.one(e,EVENT_SHOW$4,c=>{c.defaultPrevented||EventHandler.one(e,EVENT_HIDDEN$4,()=>{isVisible(this)&&this.focus()})});const r=SelectorEngine.findOne(OPEN_SELECTOR$1);r&&Modal.getInstance(r).hide(),Modal.getOrCreateInstance(e).toggle(this)});enableDismissTrigger(Modal);defineJQueryPlugin(Modal);const NAME$6="offcanvas",DATA_KEY$3="bs.offcanvas",EVENT_KEY$3=`.${DATA_KEY$3}`,DATA_API_KEY$1=".data-api",EVENT_LOAD_DATA_API$2=`load${EVENT_KEY$3}${DATA_API_KEY$1}`,ESCAPE_KEY="Escape",CLASS_NAME_SHOW$3="show",CLASS_NAME_SHOWING$1="showing",CLASS_NAME_HIDING="hiding",CLASS_NAME_BACKDROP="offcanvas-backdrop",OPEN_SELECTOR=".offcanvas.show",EVENT_SHOW$3=`show${EVENT_KEY$3}`,EVENT_SHOWN$3=`shown${EVENT_KEY$3}`,EVENT_HIDE$3=`hide${EVENT_KEY$3}`,EVENT_HIDE_PREVENTED=`hidePrevented${EVENT_KEY$3}`,EVENT_HIDDEN$3=`hidden${EVENT_KEY$3}`,EVENT_RESIZE=`resize${EVENT_KEY$3}`,EVENT_CLICK_DATA_API$1=`click${EVENT_KEY$3}${DATA_API_KEY$1}`,EVENT_KEYDOWN_DISMISS=`keydown.dismiss${EVENT_KEY$3}`,SELECTOR_DATA_TOGGLE$1='[data-bs-toggle="offcanvas"]',Default$5={backdrop:!0,keyboard:!0,scroll:!1},DefaultType$5={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Offcanvas extends BaseComponent{constructor(e,r){super(e,r),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Default$5}static get DefaultType(){return DefaultType$5}static get NAME(){return NAME$6}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||EventHandler.trigger(this._element,EVENT_SHOW$3,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ScrollBarHelper().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(CLASS_NAME_SHOWING$1);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(CLASS_NAME_SHOW$3),this._element.classList.remove(CLASS_NAME_SHOWING$1),EventHandler.trigger(this._element,EVENT_SHOWN$3,{relatedTarget:e})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||EventHandler.trigger(this._element,EVENT_HIDE$3).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(CLASS_NAME_HIDING),this._backdrop.hide();const r=()=>{this._element.classList.remove(CLASS_NAME_SHOW$3,CLASS_NAME_HIDING),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ScrollBarHelper().reset(),EventHandler.trigger(this._element,EVENT_HIDDEN$3)};this._queueCallback(r,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED);return}this.hide()},r=!!this._config.backdrop;return new Backdrop({className:CLASS_NAME_BACKDROP,isVisible:r,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:r?e:null})}_initializeFocusTrap(){return new FocusTrap({trapElement:this._element})}_addEventListeners(){EventHandler.on(this._element,EVENT_KEYDOWN_DISMISS,e=>{if(e.key===ESCAPE_KEY){if(this._config.keyboard){this.hide();return}EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED)}})}static jQueryInterface(e){return this.each(function(){const r=Offcanvas.getOrCreateInstance(this,e);if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e](this)}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$1,SELECTOR_DATA_TOGGLE$1,function(t){const e=SelectorEngine.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),isDisabled(this))return;EventHandler.one(e,EVENT_HIDDEN$3,()=>{isVisible(this)&&this.focus()});const r=SelectorEngine.findOne(OPEN_SELECTOR);r&&r!==e&&Offcanvas.getInstance(r).hide(),Offcanvas.getOrCreateInstance(e).toggle(this)});EventHandler.on(window,EVENT_LOAD_DATA_API$2,()=>{for(const t of SelectorEngine.find(OPEN_SELECTOR))Offcanvas.getOrCreateInstance(t).show()});EventHandler.on(window,EVENT_RESIZE,()=>{for(const t of SelectorEngine.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&Offcanvas.getOrCreateInstance(t).hide()});enableDismissTrigger(Offcanvas);defineJQueryPlugin(Offcanvas);const ARIA_ATTRIBUTE_PATTERN=/^aria-[\w-]*$/i,DefaultAllowlist={"*":["class","dir","id","lang","role",ARIA_ATTRIBUTE_PATTERN],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},uriAttributes=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),SAFE_URL_PATTERN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,allowedAttribute=(t,e)=>{const r=t.nodeName.toLowerCase();return e.includes(r)?uriAttributes.has(r)?!!SAFE_URL_PATTERN.test(t.nodeValue):!0:e.filter(s=>s instanceof RegExp).some(s=>s.test(r))};function sanitizeHtml(t,e,r){if(!t.length)return t;if(r&&typeof r=="function")return r(t);const c=new window.DOMParser().parseFromString(t,"text/html"),p=[].concat(...c.body.querySelectorAll("*"));for(const j of p){const h=j.nodeName.toLowerCase();if(!Object.keys(e).includes(h)){j.remove();continue}const u=[].concat(...j.attributes),g=[].concat(e["*"]||[],e[h]||[]);for(const N of u)allowedAttribute(N,g)||j.removeAttribute(N.nodeName)}return c.body.innerHTML}const NAME$5="TemplateFactory",Default$4={allowList:DefaultAllowlist,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},DefaultType$4={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},DefaultContentType={entry:"(string|element|function|null)",selector:"(string|element)"};class TemplateFactory extends Config{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Default$4}static get DefaultType(){return DefaultType$4}static get NAME(){return NAME$5}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[c,p]of Object.entries(this._config.content))this._setContent(e,p,c);const r=e.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&r.classList.add(...s.split(" ")),r}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[r,s]of Object.entries(e))super._typeCheckConfig({selector:r,entry:s},DefaultContentType)}_setContent(e,r,s){const c=SelectorEngine.findOne(s,e);if(c){if(r=this._resolvePossibleFunction(r),!r){c.remove();return}if(isElement(r)){this._putElementInTemplate(getElement(r),c);return}if(this._config.html){c.innerHTML=this._maybeSanitize(r);return}c.textContent=r}}_maybeSanitize(e){return this._config.sanitize?sanitizeHtml(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return execute(e,[this])}_putElementInTemplate(e,r){if(this._config.html){r.innerHTML="",r.append(e);return}r.textContent=e.textContent}}const NAME$4="tooltip",DISALLOWED_ATTRIBUTES=new Set(["sanitize","allowList","sanitizeFn"]),CLASS_NAME_FADE$2="fade",CLASS_NAME_MODAL="modal",CLASS_NAME_SHOW$2="show",SELECTOR_TOOLTIP_INNER=".tooltip-inner",SELECTOR_MODAL=`.${CLASS_NAME_MODAL}`,EVENT_MODAL_HIDE="hide.bs.modal",TRIGGER_HOVER="hover",TRIGGER_FOCUS="focus",TRIGGER_CLICK="click",TRIGGER_MANUAL="manual",EVENT_HIDE$2="hide",EVENT_HIDDEN$2="hidden",EVENT_SHOW$2="show",EVENT_SHOWN$2="shown",EVENT_INSERTED="inserted",EVENT_CLICK$1="click",EVENT_FOCUSIN$1="focusin",EVENT_FOCUSOUT$1="focusout",EVENT_MOUSEENTER="mouseenter",EVENT_MOUSELEAVE="mouseleave",AttachmentMap={AUTO:"auto",TOP:"top",RIGHT:isRTL()?"left":"right",BOTTOM:"bottom",LEFT:isRTL()?"right":"left"},Default$3={allowList:DefaultAllowlist,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},DefaultType$3={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Tooltip extends BaseComponent{constructor(e,r){if(typeof Popper>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,r),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Default$3}static get DefaultType(){return DefaultType$3}static get NAME(){return NAME$4}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),EventHandler.off(this._element.closest(SELECTOR_MODAL),EVENT_MODAL_HIDE,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=EventHandler.trigger(this._element,this.constructor.eventName(EVENT_SHOW$2)),s=(findShadowRoot(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!s)return;this._disposePopper();const c=this._getTipElement();this._element.setAttribute("aria-describedby",c.getAttribute("id"));const{container:p}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(p.append(c),EventHandler.trigger(this._element,this.constructor.eventName(EVENT_INSERTED))),this._popper=this._createPopper(c),c.classList.add(CLASS_NAME_SHOW$2),"ontouchstart"in document.documentElement)for(const h of[].concat(...document.body.children))EventHandler.on(h,"mouseover",noop);const j=()=>{EventHandler.trigger(this._element,this.constructor.eventName(EVENT_SHOWN$2)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(j,this.tip,this._isAnimated())}hide(){if(!this._isShown()||EventHandler.trigger(this._element,this.constructor.eventName(EVENT_HIDE$2)).defaultPrevented)return;if(this._getTipElement().classList.remove(CLASS_NAME_SHOW$2),"ontouchstart"in document.documentElement)for(const c of[].concat(...document.body.children))EventHandler.off(c,"mouseover",noop);this._activeTrigger[TRIGGER_CLICK]=!1,this._activeTrigger[TRIGGER_FOCUS]=!1,this._activeTrigger[TRIGGER_HOVER]=!1,this._isHovered=null;const s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),EventHandler.trigger(this._element,this.constructor.eventName(EVENT_HIDDEN$2)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const r=this._getTemplateFactory(e).toHtml();if(!r)return null;r.classList.remove(CLASS_NAME_FADE$2,CLASS_NAME_SHOW$2),r.classList.add(`bs-${this.constructor.NAME}-auto`);const s=getUID(this.constructor.NAME).toString();return r.setAttribute("id",s),this._isAnimated()&&r.classList.add(CLASS_NAME_FADE$2),r}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new TemplateFactory({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[SELECTOR_TOOLTIP_INNER]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(CLASS_NAME_FADE$2)}_isShown(){return this.tip&&this.tip.classList.contains(CLASS_NAME_SHOW$2)}_createPopper(e){const r=execute(this._config.placement,[this,e,this._element]),s=AttachmentMap[r.toUpperCase()];return createPopper(this._element,e,this._getPopperConfig(s))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(r=>Number.parseInt(r,10)):typeof e=="function"?r=>e(r,this._element):e}_resolvePossibleFunction(e){return execute(e,[this._element])}_getPopperConfig(e){const r={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...r,...execute(this._config.popperConfig,[r])}}_setListeners(){const e=this._config.trigger.split(" ");for(const r of e)if(r==="click")EventHandler.on(this._element,this.constructor.eventName(EVENT_CLICK$1),this._config.selector,s=>{this._initializeOnDelegatedTarget(s).toggle()});else if(r!==TRIGGER_MANUAL){const s=r===TRIGGER_HOVER?this.constructor.eventName(EVENT_MOUSEENTER):this.constructor.eventName(EVENT_FOCUSIN$1),c=r===TRIGGER_HOVER?this.constructor.eventName(EVENT_MOUSELEAVE):this.constructor.eventName(EVENT_FOCUSOUT$1);EventHandler.on(this._element,s,this._config.selector,p=>{const j=this._initializeOnDelegatedTarget(p);j._activeTrigger[p.type==="focusin"?TRIGGER_FOCUS:TRIGGER_HOVER]=!0,j._enter()}),EventHandler.on(this._element,c,this._config.selector,p=>{const j=this._initializeOnDelegatedTarget(p);j._activeTrigger[p.type==="focusout"?TRIGGER_FOCUS:TRIGGER_HOVER]=j._element.contains(p.relatedTarget),j._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},EventHandler.on(this._element.closest(SELECTOR_MODAL),EVENT_MODAL_HIDE,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,r){clearTimeout(this._timeout),this._timeout=setTimeout(e,r)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const r=Manipulator.getDataAttributes(this._element);for(const s of Object.keys(r))DISALLOWED_ATTRIBUTES.has(s)&&delete r[s];return e={...r,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:getElement(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[r,s]of Object.entries(this._config))this.constructor.Default[r]!==s&&(e[r]=s);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const r=Tooltip.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}}defineJQueryPlugin(Tooltip);const NAME$3="popover",SELECTOR_TITLE=".popover-header",SELECTOR_CONTENT=".popover-body",Default$2={...Tooltip.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},DefaultType$2={...Tooltip.DefaultType,content:"(null|string|element|function)"};class Popover extends Tooltip{static get Default(){return Default$2}static get DefaultType(){return DefaultType$2}static get NAME(){return NAME$3}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[SELECTOR_TITLE]:this._getTitle(),[SELECTOR_CONTENT]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const r=Popover.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}}defineJQueryPlugin(Popover);const NAME$2="scrollspy",DATA_KEY$2="bs.scrollspy",EVENT_KEY$2=`.${DATA_KEY$2}`,DATA_API_KEY=".data-api",EVENT_ACTIVATE=`activate${EVENT_KEY$2}`,EVENT_CLICK=`click${EVENT_KEY$2}`,EVENT_LOAD_DATA_API$1=`load${EVENT_KEY$2}${DATA_API_KEY}`,CLASS_NAME_DROPDOWN_ITEM="dropdown-item",CLASS_NAME_ACTIVE$1="active",SELECTOR_DATA_SPY='[data-bs-spy="scroll"]',SELECTOR_TARGET_LINKS="[href]",SELECTOR_NAV_LIST_GROUP=".nav, .list-group",SELECTOR_NAV_LINKS=".nav-link",SELECTOR_NAV_ITEMS=".nav-item",SELECTOR_LIST_ITEMS=".list-group-item",SELECTOR_LINK_ITEMS=`${SELECTOR_NAV_LINKS}, ${SELECTOR_NAV_ITEMS} > ${SELECTOR_NAV_LINKS}, ${SELECTOR_LIST_ITEMS}`,SELECTOR_DROPDOWN=".dropdown",SELECTOR_DROPDOWN_TOGGLE$1=".dropdown-toggle",Default$1={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},DefaultType$1={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ScrollSpy extends BaseComponent{constructor(e,r){super(e,r),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Default$1}static get DefaultType(){return DefaultType$1}static get NAME(){return NAME$2}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=getElement(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(r=>Number.parseFloat(r))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(EventHandler.off(this._config.target,EVENT_CLICK),EventHandler.on(this._config.target,EVENT_CLICK,SELECTOR_TARGET_LINKS,e=>{const r=this._observableSections.get(e.target.hash);if(r){e.preventDefault();const s=this._rootElement||window,c=r.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:c,behavior:"smooth"});return}s.scrollTop=c}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(r=>this._observerCallback(r),e)}_observerCallback(e){const r=j=>this._targetLinks.get(`#${j.target.id}`),s=j=>{this._previousScrollData.visibleEntryTop=j.target.offsetTop,this._process(r(j))},c=(this._rootElement||document.documentElement).scrollTop,p=c>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=c;for(const j of e){if(!j.isIntersecting){this._activeTarget=null,this._clearActiveClass(r(j));continue}const h=j.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(p&&h){if(s(j),!c)return;continue}!p&&!h&&s(j)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=SelectorEngine.find(SELECTOR_TARGET_LINKS,this._config.target);for(const r of e){if(!r.hash||isDisabled(r))continue;const s=SelectorEngine.findOne(decodeURI(r.hash),this._element);isVisible(s)&&(this._targetLinks.set(decodeURI(r.hash),r),this._observableSections.set(r.hash,s))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(CLASS_NAME_ACTIVE$1),this._activateParents(e),EventHandler.trigger(this._element,EVENT_ACTIVATE,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(CLASS_NAME_DROPDOWN_ITEM)){SelectorEngine.findOne(SELECTOR_DROPDOWN_TOGGLE$1,e.closest(SELECTOR_DROPDOWN)).classList.add(CLASS_NAME_ACTIVE$1);return}for(const r of SelectorEngine.parents(e,SELECTOR_NAV_LIST_GROUP))for(const s of SelectorEngine.prev(r,SELECTOR_LINK_ITEMS))s.classList.add(CLASS_NAME_ACTIVE$1)}_clearActiveClass(e){e.classList.remove(CLASS_NAME_ACTIVE$1);const r=SelectorEngine.find(`${SELECTOR_TARGET_LINKS}.${CLASS_NAME_ACTIVE$1}`,e);for(const s of r)s.classList.remove(CLASS_NAME_ACTIVE$1)}static jQueryInterface(e){return this.each(function(){const r=ScrollSpy.getOrCreateInstance(this,e);if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e]()}})}}EventHandler.on(window,EVENT_LOAD_DATA_API$1,()=>{for(const t of SelectorEngine.find(SELECTOR_DATA_SPY))ScrollSpy.getOrCreateInstance(t)});defineJQueryPlugin(ScrollSpy);const NAME$1="tab",DATA_KEY$1="bs.tab",EVENT_KEY$1=`.${DATA_KEY$1}`,EVENT_HIDE$1=`hide${EVENT_KEY$1}`,EVENT_HIDDEN$1=`hidden${EVENT_KEY$1}`,EVENT_SHOW$1=`show${EVENT_KEY$1}`,EVENT_SHOWN$1=`shown${EVENT_KEY$1}`,EVENT_CLICK_DATA_API=`click${EVENT_KEY$1}`,EVENT_KEYDOWN=`keydown${EVENT_KEY$1}`,EVENT_LOAD_DATA_API=`load${EVENT_KEY$1}`,ARROW_LEFT_KEY="ArrowLeft",ARROW_RIGHT_KEY="ArrowRight",ARROW_UP_KEY="ArrowUp",ARROW_DOWN_KEY="ArrowDown",HOME_KEY="Home",END_KEY="End",CLASS_NAME_ACTIVE="active",CLASS_NAME_FADE$1="fade",CLASS_NAME_SHOW$1="show",CLASS_DROPDOWN="dropdown",SELECTOR_DROPDOWN_TOGGLE=".dropdown-toggle",SELECTOR_DROPDOWN_MENU=".dropdown-menu",NOT_SELECTOR_DROPDOWN_TOGGLE=`:not(${SELECTOR_DROPDOWN_TOGGLE})`,SELECTOR_TAB_PANEL='.list-group, .nav, [role="tablist"]',SELECTOR_OUTER=".nav-item, .list-group-item",SELECTOR_INNER=`.nav-link${NOT_SELECTOR_DROPDOWN_TOGGLE}, .list-group-item${NOT_SELECTOR_DROPDOWN_TOGGLE}, [role="tab"]${NOT_SELECTOR_DROPDOWN_TOGGLE}`,SELECTOR_DATA_TOGGLE='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',SELECTOR_INNER_ELEM=`${SELECTOR_INNER}, ${SELECTOR_DATA_TOGGLE}`,SELECTOR_DATA_TOGGLE_ACTIVE=`.${CLASS_NAME_ACTIVE}[data-bs-toggle="tab"], .${CLASS_NAME_ACTIVE}[data-bs-toggle="pill"], .${CLASS_NAME_ACTIVE}[data-bs-toggle="list"]`;class Tab extends BaseComponent{constructor(e){super(e),this._parent=this._element.closest(SELECTOR_TAB_PANEL),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),EventHandler.on(this._element,EVENT_KEYDOWN,r=>this._keydown(r)))}static get NAME(){return NAME$1}show(){const e=this._element;if(this._elemIsActive(e))return;const r=this._getActiveElem(),s=r?EventHandler.trigger(r,EVENT_HIDE$1,{relatedTarget:e}):null;EventHandler.trigger(e,EVENT_SHOW$1,{relatedTarget:r}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(r,e),this._activate(e,r))}_activate(e,r){if(!e)return;e.classList.add(CLASS_NAME_ACTIVE),this._activate(SelectorEngine.getElementFromSelector(e));const s=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(CLASS_NAME_SHOW$1);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),EventHandler.trigger(e,EVENT_SHOWN$1,{relatedTarget:r})};this._queueCallback(s,e,e.classList.contains(CLASS_NAME_FADE$1))}_deactivate(e,r){if(!e)return;e.classList.remove(CLASS_NAME_ACTIVE),e.blur(),this._deactivate(SelectorEngine.getElementFromSelector(e));const s=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(CLASS_NAME_SHOW$1);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),EventHandler.trigger(e,EVENT_HIDDEN$1,{relatedTarget:r})};this._queueCallback(s,e,e.classList.contains(CLASS_NAME_FADE$1))}_keydown(e){if(![ARROW_LEFT_KEY,ARROW_RIGHT_KEY,ARROW_UP_KEY,ARROW_DOWN_KEY,HOME_KEY,END_KEY].includes(e.key))return;e.stopPropagation(),e.preventDefault();const r=this._getChildren().filter(c=>!isDisabled(c));let s;if([HOME_KEY,END_KEY].includes(e.key))s=r[e.key===HOME_KEY?0:r.length-1];else{const c=[ARROW_RIGHT_KEY,ARROW_DOWN_KEY].includes(e.key);s=getNextActiveElement(r,e.target,c,!0)}s&&(s.focus({preventScroll:!0}),Tab.getOrCreateInstance(s).show())}_getChildren(){return SelectorEngine.find(SELECTOR_INNER_ELEM,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,r){this._setAttributeIfNotExists(e,"role","tablist");for(const s of r)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const r=this._elemIsActive(e),s=this._getOuterElement(e);e.setAttribute("aria-selected",r),s!==e&&this._setAttributeIfNotExists(s,"role","presentation"),r||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const r=SelectorEngine.getElementFromSelector(e);r&&(this._setAttributeIfNotExists(r,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(r,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,r){const s=this._getOuterElement(e);if(!s.classList.contains(CLASS_DROPDOWN))return;const c=(p,j)=>{const h=SelectorEngine.findOne(p,s);h&&h.classList.toggle(j,r)};c(SELECTOR_DROPDOWN_TOGGLE,CLASS_NAME_ACTIVE),c(SELECTOR_DROPDOWN_MENU,CLASS_NAME_SHOW$1),s.setAttribute("aria-expanded",r)}_setAttributeIfNotExists(e,r,s){e.hasAttribute(r)||e.setAttribute(r,s)}_elemIsActive(e){return e.classList.contains(CLASS_NAME_ACTIVE)}_getInnerElement(e){return e.matches(SELECTOR_INNER_ELEM)?e:SelectorEngine.findOne(SELECTOR_INNER_ELEM,e)}_getOuterElement(e){return e.closest(SELECTOR_OUTER)||e}static jQueryInterface(e){return this.each(function(){const r=Tab.getOrCreateInstance(this);if(typeof e=="string"){if(r[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);r[e]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API,SELECTOR_DATA_TOGGLE,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!isDisabled(this)&&Tab.getOrCreateInstance(this).show()});EventHandler.on(window,EVENT_LOAD_DATA_API,()=>{for(const t of SelectorEngine.find(SELECTOR_DATA_TOGGLE_ACTIVE))Tab.getOrCreateInstance(t)});defineJQueryPlugin(Tab);const NAME="toast",DATA_KEY="bs.toast",EVENT_KEY=`.${DATA_KEY}`,EVENT_MOUSEOVER=`mouseover${EVENT_KEY}`,EVENT_MOUSEOUT=`mouseout${EVENT_KEY}`,EVENT_FOCUSIN=`focusin${EVENT_KEY}`,EVENT_FOCUSOUT=`focusout${EVENT_KEY}`,EVENT_HIDE=`hide${EVENT_KEY}`,EVENT_HIDDEN=`hidden${EVENT_KEY}`,EVENT_SHOW=`show${EVENT_KEY}`,EVENT_SHOWN=`shown${EVENT_KEY}`,CLASS_NAME_FADE="fade",CLASS_NAME_HIDE="hide",CLASS_NAME_SHOW="show",CLASS_NAME_SHOWING="showing",DefaultType={animation:"boolean",autohide:"boolean",delay:"number"},Default={animation:!0,autohide:!0,delay:5e3};class Toast extends BaseComponent{constructor(e,r){super(e,r),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Default}static get DefaultType(){return DefaultType}static get NAME(){return NAME}show(){if(EventHandler.trigger(this._element,EVENT_SHOW).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(CLASS_NAME_FADE);const r=()=>{this._element.classList.remove(CLASS_NAME_SHOWING),EventHandler.trigger(this._element,EVENT_SHOWN),this._maybeScheduleHide()};this._element.classList.remove(CLASS_NAME_HIDE),reflow(this._element),this._element.classList.add(CLASS_NAME_SHOW,CLASS_NAME_SHOWING),this._queueCallback(r,this._element,this._config.animation)}hide(){if(!this.isShown()||EventHandler.trigger(this._element,EVENT_HIDE).defaultPrevented)return;const r=()=>{this._element.classList.add(CLASS_NAME_HIDE),this._element.classList.remove(CLASS_NAME_SHOWING,CLASS_NAME_SHOW),EventHandler.trigger(this._element,EVENT_HIDDEN)};this._element.classList.add(CLASS_NAME_SHOWING),this._queueCallback(r,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(CLASS_NAME_SHOW),super.dispose()}isShown(){return this._element.classList.contains(CLASS_NAME_SHOW)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,r){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=r;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=r;break}}if(r){this._clearTimeout();return}const s=e.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){EventHandler.on(this._element,EVENT_MOUSEOVER,e=>this._onInteraction(e,!0)),EventHandler.on(this._element,EVENT_MOUSEOUT,e=>this._onInteraction(e,!1)),EventHandler.on(this._element,EVENT_FOCUSIN,e=>this._onInteraction(e,!0)),EventHandler.on(this._element,EVENT_FOCUSOUT,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const r=Toast.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e](this)}})}}enableDismissTrigger(Toast);defineJQueryPlugin(Toast);const leaflet="";function globals(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var PJD_3PARAM=1,PJD_7PARAM=2,PJD_GRIDSHIFT=3,PJD_WGS84=4,PJD_NODATUM=5,SRS_WGS84_SEMIMAJOR=6378137,SRS_WGS84_SEMIMINOR=6356752314e-3,SRS_WGS84_ESQUARED=.0066943799901413165,SEC_TO_RAD=484813681109536e-20,HALF_PI=Math.PI/2,SIXTH=.16666666666666666,RA4=.04722222222222222,RA6=.022156084656084655,EPSLN=1e-10,D2R$1=.017453292519943295,R2D=57.29577951308232,FORTPI=Math.PI/4,TWO_PI=Math.PI*2,SPI=3.14159265359,exports$2={};exports$2.greenwich=0;exports$2.lisbon=-9.131906111111;exports$2.paris=2.337229166667;exports$2.bogota=-74.080916666667;exports$2.madrid=-3.687938888889;exports$2.rome=12.452333333333;exports$2.bern=7.439583333333;exports$2.jakarta=106.807719444444;exports$2.ferro=-17.666666666667;exports$2.brussels=4.367975;exports$2.stockholm=18.058277777778;exports$2.athens=23.7163375;exports$2.oslo=10.722916666667;const units={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var ignoredChar=/[\s_\-\/\(\)]/g;function match(t,e){if(t[e])return t[e];for(var r=Object.keys(t),s=e.toLowerCase().replace(ignoredChar,""),c=-1,p,j;++c<r.length;)if(p=r[c],j=p.toLowerCase().replace(ignoredChar,""),j===s)return t[p]}function projStr(t){var e={},r=t.split("+").map(function(h){return h.trim()}).filter(function(h){return h}).reduce(function(h,u){var g=u.split("=");return g.push(!0),h[g[0].toLowerCase()]=g[1],h},{}),s,c,p,j={proj:"projName",datum:"datumCode",rf:function(h){e.rf=parseFloat(h)},lat_0:function(h){e.lat0=h*D2R$1},lat_1:function(h){e.lat1=h*D2R$1},lat_2:function(h){e.lat2=h*D2R$1},lat_ts:function(h){e.lat_ts=h*D2R$1},lon_0:function(h){e.long0=h*D2R$1},lon_1:function(h){e.long1=h*D2R$1},lon_2:function(h){e.long2=h*D2R$1},alpha:function(h){e.alpha=parseFloat(h)*D2R$1},gamma:function(h){e.rectified_grid_angle=parseFloat(h)},lonc:function(h){e.longc=h*D2R$1},x_0:function(h){e.x0=parseFloat(h)},y_0:function(h){e.y0=parseFloat(h)},k_0:function(h){e.k0=parseFloat(h)},k:function(h){e.k0=parseFloat(h)},a:function(h){e.a=parseFloat(h)},b:function(h){e.b=parseFloat(h)},r_a:function(){e.R_A=!0},zone:function(h){e.zone=parseInt(h,10)},south:function(){e.utmSouth=!0},towgs84:function(h){e.datum_params=h.split(",").map(function(u){return parseFloat(u)})},to_meter:function(h){e.to_meter=parseFloat(h)},units:function(h){e.units=h;var u=match(units,h);u&&(e.to_meter=u.to_meter)},from_greenwich:function(h){e.from_greenwich=h*D2R$1},pm:function(h){var u=match(exports$2,h);e.from_greenwich=(u||parseFloat(h))*D2R$1},nadgrids:function(h){h==="@null"?e.datumCode="none":e.nadgrids=h},axis:function(h){var u="ewnsud";h.length===3&&u.indexOf(h.substr(0,1))!==-1&&u.indexOf(h.substr(1,1))!==-1&&u.indexOf(h.substr(2,1))!==-1&&(e.axis=h)},approx:function(){e.approx=!0}};for(s in r)c=r[s],s in j?(p=j[s],typeof p=="function"?p(c):e[p]=c):e[s]=c;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var NEUTRAL=1,KEYWORD=2,NUMBER=3,QUOTED=4,AFTERQUOTE=5,ENDED=-1,whitespace=/\s/,latin=/[A-Za-z]/,keyword=/[A-Za-z84_]/,endThings=/[,\]]/,digets=/[\d\.E\-\+]/;function Parser(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=NEUTRAL}Parser.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==QUOTED)for(;whitespace.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case NEUTRAL:return this.neutral(t);case KEYWORD:return this.keyword(t);case QUOTED:return this.quoted(t);case AFTERQUOTE:return this.afterquote(t);case NUMBER:return this.number(t);case ENDED:return}};Parser.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=QUOTED;return}if(endThings.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};Parser.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=NEUTRAL;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=NEUTRAL,this.currentObject=this.stack.pop(),this.currentObject||(this.state=ENDED);return}};Parser.prototype.number=function(t){if(digets.test(t)){this.word+=t;return}if(endThings.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};Parser.prototype.quoted=function(t){if(t==='"'){this.state=AFTERQUOTE;return}this.word+=t};Parser.prototype.keyword=function(t){if(keyword.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=NEUTRAL;return}if(endThings.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};Parser.prototype.neutral=function(t){if(latin.test(t)){this.word=t,this.state=KEYWORD;return}if(t==='"'){this.word="",this.state=QUOTED;return}if(digets.test(t)){this.word=t,this.state=NUMBER;return}if(endThings.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};Parser.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===ENDED)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function parseString(t){var e=new Parser(t);return e.output()}function mapit(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var s=e?{}:t,c=r.reduce(function(p,j){return sExpr(j,p),p},s);e&&(t[e]=c)}function sExpr(t,e){if(!Array.isArray(t)){e[t]=!0;return}var r=t.shift();if(r==="PARAMETER"&&(r=t.shift()),t.length===1){if(Array.isArray(t[0])){e[r]={},sExpr(t[0],e[r]);return}e[r]=t[0];return}if(!t.length){e[r]=!0;return}if(r==="TOWGS84"){e[r]=t;return}if(r==="AXIS"){r in e||(e[r]=[]),e[r].push(t);return}Array.isArray(r)||(e[r]={});var s;switch(r){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[r]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&sExpr(t[2],e[r]);return;case"SPHEROID":case"ELLIPSOID":e[r]={name:t[0],a:t[1],rf:t[2]},t.length===4&&sExpr(t[3],e[r]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":t[0]=["name",t[0]],mapit(e,r,t);return;default:for(s=-1;++s<t.length;)if(!Array.isArray(t[s]))return sExpr(t,e[r]);return mapit(e,r,t)}}var D2R=.017453292519943295;function rename(t,e){var r=e[0],s=e[1];!(r in t)&&s in t&&(t[r]=t[s],e.length===3&&(t[r]=e[2](t[r])))}function d2r(t){return t*D2R}function cleanWKT(t){if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",r=0,s=t.AXIS.length;r<s;++r){var c=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];c[0].indexOf("north")!==-1||(c[0]==="y"||c[0]==="lat")&&c[1]==="north"?e+="n":c[0].indexOf("south")!==-1||(c[0]==="y"||c[0]==="lat")&&c[1]==="south"?e+="s":c[0].indexOf("east")!==-1||(c[0]==="x"||c[0]==="lon")&&c[1]==="east"?e+="e":(c[0].indexOf("west")!==-1||(c[0]==="x"||c[0]==="lon")&&c[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var p=t.GEOGCS;t.type==="GEOGCS"&&(p=t),p&&(p.DATUM?t.datumCode=p.DATUM.name.toLowerCase():t.datumCode=p.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),(t.datumCode==="new_zealand_geodetic_datum_1949"||t.datumCode==="new_zealand_1949")&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode.slice(-6)==="_ferro"&&(t.datumCode=t.datumCode.slice(0,-6)),t.datumCode.slice(-8)==="_jakarta"&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),p.DATUM&&p.DATUM.SPHEROID&&(t.ellps=p.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=p.DATUM.SPHEROID.a,t.rf=parseFloat(p.DATUM.SPHEROID.rf,10)),p.DATUM&&p.DATUM.TOWGS84&&(t.datum_params=p.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function j(g){var N=t.to_meter||1;return g*N}var h=function(g){return rename(t,g)},u=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",d2r],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",d2r],["x0","false_easting",j],["y0","false_northing",j],["long0","central_meridian",d2r],["lat0","latitude_of_origin",d2r],["lat0","standard_parallel_1",d2r],["lat1","standard_parallel_1",d2r],["lat2","standard_parallel_2",d2r],["azimuth","Azimuth"],["alpha","azimuth",d2r],["srsCode","name"]];u.forEach(h),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")?(t.lat0=d2r(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=d2r(t.lat0>0?90:-90))}function wkt(t){var e=parseString(t),r=e.shift(),s=e.shift();e.unshift(["name",s]),e.unshift(["type",r]);var c={};return sExpr(e,c),cleanWKT(c),c}function defs(t){var e=this;if(arguments.length===2){var r=arguments[1];typeof r=="string"?r.charAt(0)==="+"?defs[t]=projStr(arguments[1]):defs[t]=wkt(arguments[1]):defs[t]=r}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(s){Array.isArray(s)?defs.apply(e,s):defs(s)});if(typeof t=="string"){if(t in defs)return defs[t]}else"EPSG"in t?defs["EPSG:"+t.EPSG]=t:"ESRI"in t?defs["ESRI:"+t.ESRI]=t:"IAU2000"in t?defs["IAU2000:"+t.IAU2000]=t:console.log(t);return}}globals(defs);function testObj(t){return typeof t=="string"}function testDef(t){return t in defs}var codeWords=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function testWKT(t){return codeWords.some(function(e){return t.indexOf(e)>-1})}var codes=["3857","900913","3785","102113"];function checkMercator(t){var e=match(t,"authority");if(e){var r=match(e,"epsg");return r&&codes.indexOf(r)>-1}}function checkProjStr(t){var e=match(t,"extension");if(e)return match(e,"proj4")}function testProj(t){return t[0]==="+"}function parse(t){if(testObj(t)){if(testDef(t))return defs[t];if(testWKT(t)){var e=wkt(t);if(checkMercator(e))return defs["EPSG:3857"];var r=checkProjStr(e);return r?projStr(r):e}if(testProj(t))return projStr(t)}else return t}function extend(t,e){t=t||{};var r,s;if(!e)return t;for(s in e)r=e[s],r!==void 0&&(t[s]=r);return t}function msfnz(t,e,r){var s=t*e;return r/Math.sqrt(1-s*s)}function sign(t){return t<0?-1:1}function adjust_lon(t){return Math.abs(t)<=SPI?t:t-sign(t)*TWO_PI}function tsfnz(t,e,r){var s=t*r,c=.5*t;return s=Math.pow((1-s)/(1+s),c),Math.tan(.5*(HALF_PI-e))/s}function phi2z(t,e){for(var r=.5*t,s,c,p=HALF_PI-2*Math.atan(e),j=0;j<=15;j++)if(s=t*Math.sin(p),c=HALF_PI-2*Math.atan(e*Math.pow((1-s)/(1+s),r))-p,p+=c,Math.abs(c)<=1e-10)return p;return-9999}function init$v(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function forward$u(t){var e=t.x,r=t.y;if(r*R2D>90&&r*R2D<-90&&e*R2D>180&&e*R2D<-180)return null;var s,c;if(Math.abs(Math.abs(r)-HALF_PI)<=EPSLN)return null;if(this.sphere)s=this.x0+this.a*this.k0*adjust_lon(e-this.long0),c=this.y0+this.a*this.k0*Math.log(Math.tan(FORTPI+.5*r));else{var p=Math.sin(r),j=tsfnz(this.e,r,p);s=this.x0+this.a*this.k0*adjust_lon(e-this.long0),c=this.y0-this.a*this.k0*Math.log(j)}return t.x=s,t.y=c,t}function inverse$u(t){var e=t.x-this.x0,r=t.y-this.y0,s,c;if(this.sphere)c=HALF_PI-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var p=Math.exp(-r/(this.a*this.k0));if(c=phi2z(this.e,p),c===-9999)return null}return s=adjust_lon(this.long0+e/(this.a*this.k0)),t.x=s,t.y=c,t}var names$w=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const merc={init:init$v,forward:forward$u,inverse:inverse$u,names:names$w};function init$u(){}function identity(t){return t}var names$v=["longlat","identity"];const longlat={init:init$u,forward:identity,inverse:identity,names:names$v};var projs=[merc,longlat],names$u={},projStore=[];function add(t,e){var r=projStore.length;return t.names?(projStore[r]=t,t.names.forEach(function(s){names$u[s.toLowerCase()]=r}),this):(console.log(e),!0)}function get(t){if(!t)return!1;var e=t.toLowerCase();if(typeof names$u[e]<"u"&&projStore[names$u[e]])return projStore[names$u[e]]}function start(){projs.forEach(add)}const projections={start,add,get};var exports$1={};exports$1.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};exports$1.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};exports$1.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};exports$1.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};exports$1.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};exports$1.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};exports$1.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};exports$1.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};exports$1.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};exports$1.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};exports$1.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};exports$1.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};exports$1.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};exports$1.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};exports$1.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};exports$1.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};exports$1.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};exports$1.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};exports$1.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};exports$1.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};exports$1.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};exports$1.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};exports$1.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};exports$1.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};exports$1.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};exports$1.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};exports$1.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};exports$1.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};exports$1.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};exports$1.hough={a:6378270,rf:297,ellipseName:"Hough"};exports$1.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};exports$1.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};exports$1.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};exports$1.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};exports$1.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};exports$1.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};exports$1.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};exports$1.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};exports$1.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};exports$1.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};exports$1.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};exports$1.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var WGS84=exports$1.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};exports$1.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function eccentricity(t,e,r,s){var c=t*t,p=e*e,j=(c-p)/c,h=0;s?(t*=1-j*(SIXTH+j*(RA4+j*RA6)),c=t*t,j=0):h=Math.sqrt(j);var u=(c-p)/p;return{es:j,e:h,ep2:u}}function sphere(t,e,r,s,c){if(!t){var p=match(exports$1,s);p||(p=WGS84),t=p.a,e=p.b,r=p.rf}return r&&!e&&(e=(1-1/r)*t),(r===0||Math.abs(t-e)<EPSLN)&&(c=!0,e=t),{a:t,b:e,rf:r,sphere:c}}var exports={};exports.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};exports.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};exports.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};exports.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};exports.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};exports.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};exports.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};exports.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};exports.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};exports.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};exports.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};exports.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};exports.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};exports.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};exports.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};exports.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};exports.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function datum(t,e,r,s,c,p,j){var h={};return t===void 0||t==="none"?h.datum_type=PJD_NODATUM:h.datum_type=PJD_WGS84,e&&(h.datum_params=e.map(parseFloat),(h.datum_params[0]!==0||h.datum_params[1]!==0||h.datum_params[2]!==0)&&(h.datum_type=PJD_3PARAM),h.datum_params.length>3&&(h.datum_params[3]!==0||h.datum_params[4]!==0||h.datum_params[5]!==0||h.datum_params[6]!==0)&&(h.datum_type=PJD_7PARAM,h.datum_params[3]*=SEC_TO_RAD,h.datum_params[4]*=SEC_TO_RAD,h.datum_params[5]*=SEC_TO_RAD,h.datum_params[6]=h.datum_params[6]/1e6+1)),j&&(h.datum_type=PJD_GRIDSHIFT,h.grids=j),h.a=r,h.b=s,h.es=c,h.ep2=p,h}var loadedNadgrids={};function nadgrid(t,e){var r=new DataView(e),s=detectLittleEndian(r),c=readHeader(r,s),p=readSubgrids(r,c,s),j={header:c,subgrids:p};return loadedNadgrids[t]=j,j}function getNadgrids(t){if(t===void 0)return null;var e=t.split(",");return e.map(parseNadgridString)}function parseNadgridString(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:loadedNadgrids[t]||null,isNull:!1}}function secondsToRadians(t){return t/3600*Math.PI/180}function detectLittleEndian(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function readHeader(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:decodeString(t,56,56+8).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function decodeString(t,e,r){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,r)))}function readSubgrids(t,e,r){for(var s=176,c=[],p=0;p<e.nSubgrids;p++){var j=readGridHeader(t,s,r),h=readGridNodes(t,s,j,r),u=Math.round(1+(j.upperLongitude-j.lowerLongitude)/j.longitudeInterval),g=Math.round(1+(j.upperLatitude-j.lowerLatitude)/j.latitudeInterval);c.push({ll:[secondsToRadians(j.lowerLongitude),secondsToRadians(j.lowerLatitude)],del:[secondsToRadians(j.longitudeInterval),secondsToRadians(j.latitudeInterval)],lim:[u,g],count:j.gridNodeCount,cvs:mapNodes(h)}),s+=176+j.gridNodeCount*16}return c}function mapNodes(t){return t.map(function(e){return[secondsToRadians(e.longitudeShift),secondsToRadians(e.latitudeShift)]})}function readGridHeader(t,e,r){return{name:decodeString(t,e+8,e+16).trim(),parent:decodeString(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,r),upperLatitude:t.getFloat64(e+88,r),lowerLongitude:t.getFloat64(e+104,r),upperLongitude:t.getFloat64(e+120,r),latitudeInterval:t.getFloat64(e+136,r),longitudeInterval:t.getFloat64(e+152,r),gridNodeCount:t.getInt32(e+168,r)}}function readGridNodes(t,e,r,s){for(var c=e+176,p=16,j=[],h=0;h<r.gridNodeCount;h++){var u={latitudeShift:t.getFloat32(c+h*p,s),longitudeShift:t.getFloat32(c+h*p+4,s),latitudeAccuracy:t.getFloat32(c+h*p+8,s),longitudeAccuracy:t.getFloat32(c+h*p+12,s)};j.push(u)}return j}function Projection(t,e){if(!(this instanceof Projection))return new Projection(t);e=e||function(g){if(g)throw g};var r=parse(t);if(typeof r!="object"){e(t);return}var s=Projection.projections.get(r.projName);if(!s){e(t);return}if(r.datumCode&&r.datumCode!=="none"){var c=match(exports,r.datumCode);c&&(r.datum_params=r.datum_params||(c.towgs84?c.towgs84.split(","):null),r.ellps=c.ellipse,r.datumName=c.datumName?c.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var p=sphere(r.a,r.b,r.rf,r.ellps,r.sphere),j=eccentricity(p.a,p.b,p.rf,r.R_A),h=getNadgrids(r.nadgrids),u=r.datum||datum(r.datumCode,r.datum_params,p.a,p.b,j.es,j.ep2,h);extend(this,r),extend(this,s),this.a=p.a,this.b=p.b,this.rf=p.rf,this.sphere=p.sphere,this.es=j.es,this.e=j.e,this.ep2=j.ep2,this.datum=u,this.init(),e(null,this)}Projection.projections=projections;Projection.projections.start();function compareDatums(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===PJD_3PARAM?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===PJD_7PARAM?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function geodeticToGeocentric(t,e,r){var s=t.x,c=t.y,p=t.z?t.z:0,j,h,u,g;if(c<-HALF_PI&&c>-1.001*HALF_PI)c=-HALF_PI;else if(c>HALF_PI&&c<1.001*HALF_PI)c=HALF_PI;else{if(c<-HALF_PI)return{x:-1/0,y:-1/0,z:t.z};if(c>HALF_PI)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),h=Math.sin(c),g=Math.cos(c),u=h*h,j=r/Math.sqrt(1-e*u),{x:(j+p)*g*Math.cos(s),y:(j+p)*g*Math.sin(s),z:(j*(1-e)+p)*h}}function geocentricToGeodetic(t,e,r,s){var c=1e-12,p=c*c,j=30,h,u,g,N,P,_,f,w,C,E,S,k,B,q=t.x,U=t.y,F=t.z?t.z:0,Y,rt,tt;if(h=Math.sqrt(q*q+U*U),u=Math.sqrt(q*q+U*U+F*F),h/r<c){if(Y=0,u/r<c)return rt=HALF_PI,tt=-s,{x:t.x,y:t.y,z:t.z}}else Y=Math.atan2(U,q);g=F/u,N=h/u,P=1/Math.sqrt(1-e*(2-e)*N*N),w=N*(1-e)*P,C=g*P,B=0;do B++,f=r/Math.sqrt(1-e*C*C),tt=h*w+F*C-f*(1-e*C*C),_=e*f/(f+tt),P=1/Math.sqrt(1-_*(2-_)*N*N),E=N*(1-_)*P,S=g*P,k=S*w-E*C,w=E,C=S;while(k*k>p&&B<j);return rt=Math.atan(S/Math.abs(E)),{x:Y,y:rt,z:tt}}function geocentricToWgs84(t,e,r){if(e===PJD_3PARAM)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(e===PJD_7PARAM){var s=r[0],c=r[1],p=r[2],j=r[3],h=r[4],u=r[5],g=r[6];return{x:g*(t.x-u*t.y+h*t.z)+s,y:g*(u*t.x+t.y-j*t.z)+c,z:g*(-h*t.x+j*t.y+t.z)+p}}}function geocentricFromWgs84(t,e,r){if(e===PJD_3PARAM)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(e===PJD_7PARAM){var s=r[0],c=r[1],p=r[2],j=r[3],h=r[4],u=r[5],g=r[6],N=(t.x-s)/g,P=(t.y-c)/g,_=(t.z-p)/g;return{x:N+u*P-h*_,y:-u*N+P+j*_,z:h*N-j*P+_}}}function checkParams(t){return t===PJD_3PARAM||t===PJD_7PARAM}function datum_transform(t,e,r){if(compareDatums(t,e)||t.datum_type===PJD_NODATUM||e.datum_type===PJD_NODATUM)return r;var s=t.a,c=t.es;if(t.datum_type===PJD_GRIDSHIFT){var p=applyGridShift(t,!1,r);if(p!==0)return;s=SRS_WGS84_SEMIMAJOR,c=SRS_WGS84_ESQUARED}var j=e.a,h=e.b,u=e.es;if(e.datum_type===PJD_GRIDSHIFT&&(j=SRS_WGS84_SEMIMAJOR,h=SRS_WGS84_SEMIMINOR,u=SRS_WGS84_ESQUARED),c===u&&s===j&&!checkParams(t.datum_type)&&!checkParams(e.datum_type))return r;if(r=geodeticToGeocentric(r,c,s),checkParams(t.datum_type)&&(r=geocentricToWgs84(r,t.datum_type,t.datum_params)),checkParams(e.datum_type)&&(r=geocentricFromWgs84(r,e.datum_type,e.datum_params)),r=geocentricToGeodetic(r,u,j,h),e.datum_type===PJD_GRIDSHIFT){var g=applyGridShift(e,!0,r);if(g!==0)return}return r}function applyGridShift(t,e,r){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var s={x:-r.x,y:r.y},c={x:Number.NaN,y:Number.NaN},p=[];t:for(var j=0;j<t.grids.length;j++){var h=t.grids[j];if(p.push(h.name),h.isNull){c=s;break}if(h.mandatory,h.grid===null){if(h.mandatory)return console.log("Unable to find mandatory grid '"+h.name+"'"),-1;continue}for(var u=h.grid.subgrids,g=0,N=u.length;g<N;g++){var P=u[g],_=(Math.abs(P.del[1])+Math.abs(P.del[0]))/1e4,f=P.ll[0]-_,w=P.ll[1]-_,C=P.ll[0]+(P.lim[0]-1)*P.del[0]+_,E=P.ll[1]+(P.lim[1]-1)*P.del[1]+_;if(!(w>s.y||f>s.x||E<s.y||C<s.x)&&(c=applySubgridShift(s,e,P),!isNaN(c.x)))break t}}return isNaN(c.x)?(console.log("Failed to find a grid shift table for location '"+-s.x*R2D+" "+s.y*R2D+" tried: '"+p+"'"),-1):(r.x=-c.x,r.y=c.y,0)}function applySubgridShift(t,e,r){var s={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return s;var c={x:t.x,y:t.y};c.x-=r.ll[0],c.y-=r.ll[1],c.x=adjust_lon(c.x-Math.PI)+Math.PI;var p=nadInterpolate(c,r);if(e){if(isNaN(p.x))return s;p.x=c.x-p.x,p.y=c.y-p.y;var j=9,h=1e-12,u,g;do{if(g=nadInterpolate(p,r),isNaN(g.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}u={x:c.x-(g.x+p.x),y:c.y-(g.y+p.y)},p.x+=u.x,p.y+=u.y}while(j--&&Math.abs(u.x)>h&&Math.abs(u.y)>h);if(j<0)return console.log("Inverse grid shift iterator failed to converge."),s;s.x=adjust_lon(p.x+r.ll[0]),s.y=p.y+r.ll[1]}else isNaN(p.x)||(s.x=t.x+p.x,s.y=t.y+p.y);return s}function nadInterpolate(t,e){var r={x:t.x/e.del[0],y:t.y/e.del[1]},s={x:Math.floor(r.x),y:Math.floor(r.y)},c={x:r.x-1*s.x,y:r.y-1*s.y},p={x:Number.NaN,y:Number.NaN},j;if(s.x<0||s.x>=e.lim[0]||s.y<0||s.y>=e.lim[1])return p;j=s.y*e.lim[0]+s.x;var h={x:e.cvs[j][0],y:e.cvs[j][1]};j++;var u={x:e.cvs[j][0],y:e.cvs[j][1]};j+=e.lim[0];var g={x:e.cvs[j][0],y:e.cvs[j][1]};j--;var N={x:e.cvs[j][0],y:e.cvs[j][1]},P=c.x*c.y,_=c.x*(1-c.y),f=(1-c.x)*(1-c.y),w=(1-c.x)*c.y;return p.x=f*h.x+_*u.x+w*N.x+P*g.x,p.y=f*h.y+_*u.y+w*N.y+P*g.y,p}function adjust_axis(t,e,r){var s=r.x,c=r.y,p=r.z||0,j,h,u,g={};for(u=0;u<3;u++)if(!(e&&u===2&&r.z===void 0))switch(u===0?(j=s,"ew".indexOf(t.axis[u])!==-1?h="x":h="y"):u===1?(j=c,"ns".indexOf(t.axis[u])!==-1?h="y":h="x"):(j=p,h="z"),t.axis[u]){case"e":g[h]=j;break;case"w":g[h]=-j;break;case"n":g[h]=j;break;case"s":g[h]=-j;break;case"u":r[h]!==void 0&&(g.z=j);break;case"d":r[h]!==void 0&&(g.z=-j);break;default:return null}return g}function common(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function checkSanity(t){checkCoord(t.x),checkCoord(t.y)}function checkCoord(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function checkNotWGS(t,e){return(t.datum.datum_type===PJD_3PARAM||t.datum.datum_type===PJD_7PARAM||t.datum.datum_type===PJD_GRIDSHIFT)&&e.datumCode!=="WGS84"||(e.datum.datum_type===PJD_3PARAM||e.datum.datum_type===PJD_7PARAM||e.datum.datum_type===PJD_GRIDSHIFT)&&t.datumCode!=="WGS84"}function transform(t,e,r,s){var c;Array.isArray(r)?r=common(r):r={x:r.x,y:r.y,z:r.z,m:r.m};var p=r.z!==void 0;if(checkSanity(r),t.datum&&e.datum&&checkNotWGS(t,e)&&(c=new Projection("WGS84"),r=transform(t,c,r,s),t=c),s&&t.axis!=="enu"&&(r=adjust_axis(t,!1,r)),t.projName==="longlat")r={x:r.x*D2R$1,y:r.y*D2R$1,z:r.z||0};else if(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter,z:r.z||0}),r=t.inverse(r),!r)return;if(t.from_greenwich&&(r.x+=t.from_greenwich),r=datum_transform(t.datum,e.datum,r),!!r)return e.from_greenwich&&(r={x:r.x-e.from_greenwich,y:r.y,z:r.z||0}),e.projName==="longlat"?r={x:r.x*R2D,y:r.y*R2D,z:r.z||0}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter,z:r.z||0})),s&&e.axis!=="enu"?adjust_axis(e,!0,r):(r&&!p&&delete r.z,r)}var wgs84=Projection("WGS84");function transformer(t,e,r,s){var c,p,j;return Array.isArray(r)?(c=transform(t,e,r,s)||{x:NaN,y:NaN},r.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof c.z=="number"?[c.x,c.y,c.z].concat(r.splice(3)):[c.x,c.y,r[2]].concat(r.splice(3)):[c.x,c.y].concat(r.splice(2)):[c.x,c.y]):(p=transform(t,e,r,s),j=Object.keys(r),j.length===2||j.forEach(function(h){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(h==="x"||h==="y"||h==="z")return}else if(h==="x"||h==="y")return;p[h]=r[h]}),p)}function checkProj(t){return t instanceof Projection?t:t.oProj?t.oProj:Projection(t)}function proj4(t,e,r){t=checkProj(t);var s=!1,c;return typeof e>"u"?(e=t,t=wgs84,s=!0):(typeof e.x<"u"||Array.isArray(e))&&(r=e,e=t,t=wgs84,s=!0),e=checkProj(e),r?transformer(t,e,r):(c={forward:function(p,j){return transformer(t,e,p,j)},inverse:function(p,j){return transformer(e,t,p,j)}},s&&(c.oProj=e),c)}var NUM_100K_SETS=6,SET_ORIGIN_COLUMN_LETTERS="AJSAJS",SET_ORIGIN_ROW_LETTERS="AFAFAF",A=65,I=73,O=79,V=86,Z=90;const mgrs={forward:forward$t,inverse:inverse$t,toPoint};function forward$t(t,e){return e=e||5,encode(LLtoUTM({lat:t[1],lon:t[0]}),e)}function inverse$t(t){var e=UTMtoLL(decode(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function toPoint(t){var e=UTMtoLL(decode(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function degToRad(t){return t*(Math.PI/180)}function radToDeg(t){return 180*(t/Math.PI)}function LLtoUTM(t){var e=t.lat,r=t.lon,s=6378137,c=.00669438,p=.9996,j,h,u,g,N,P,_,f=degToRad(e),w=degToRad(r),C,E;E=Math.floor((r+180)/6)+1,r===180&&(E=60),e>=56&&e<64&&r>=3&&r<12&&(E=32),e>=72&&e<84&&(r>=0&&r<9?E=31:r>=9&&r<21?E=33:r>=21&&r<33?E=35:r>=33&&r<42&&(E=37)),j=(E-1)*6-180+3,C=degToRad(j),h=c/(1-c),u=s/Math.sqrt(1-c*Math.sin(f)*Math.sin(f)),g=Math.tan(f)*Math.tan(f),N=h*Math.cos(f)*Math.cos(f),P=Math.cos(f)*(w-C),_=s*((1-c/4-3*c*c/64-5*c*c*c/256)*f-(3*c/8+3*c*c/32+45*c*c*c/1024)*Math.sin(2*f)+(15*c*c/256+45*c*c*c/1024)*Math.sin(4*f)-35*c*c*c/3072*Math.sin(6*f));var S=p*u*(P+(1-g+N)*P*P*P/6+(5-18*g+g*g+72*N-58*h)*P*P*P*P*P/120)+5e5,k=p*(_+u*Math.tan(f)*(P*P/2+(5-g+9*N+4*N*N)*P*P*P*P/24+(61-58*g+g*g+600*N-330*h)*P*P*P*P*P*P/720));return e<0&&(k+=1e7),{northing:Math.round(k),easting:Math.round(S),zoneNumber:E,zoneLetter:getLetterDesignator(e)}}function UTMtoLL(t){var e=t.northing,r=t.easting,s=t.zoneLetter,c=t.zoneNumber;if(c<0||c>60)return null;var p=.9996,j=6378137,h=.00669438,u,g=(1-Math.sqrt(1-h))/(1+Math.sqrt(1-h)),N,P,_,f,w,C,E,S,k,B=r-5e5,q=e;s<"N"&&(q-=1e7),E=(c-1)*6-180+3,u=h/(1-h),C=q/p,S=C/(j*(1-h/4-3*h*h/64-5*h*h*h/256)),k=S+(3*g/2-27*g*g*g/32)*Math.sin(2*S)+(21*g*g/16-55*g*g*g*g/32)*Math.sin(4*S)+151*g*g*g/96*Math.sin(6*S),N=j/Math.sqrt(1-h*Math.sin(k)*Math.sin(k)),P=Math.tan(k)*Math.tan(k),_=u*Math.cos(k)*Math.cos(k),f=j*(1-h)/Math.pow(1-h*Math.sin(k)*Math.sin(k),1.5),w=B/(N*p);var U=k-N*Math.tan(k)/f*(w*w/2-(5+3*P+10*_-4*_*_-9*u)*w*w*w*w/24+(61+90*P+298*_+45*P*P-252*u-3*_*_)*w*w*w*w*w*w/720);U=radToDeg(U);var F=(w-(1+2*P+_)*w*w*w/6+(5-2*_+28*P-3*_*_+8*u+24*P*P)*w*w*w*w*w/120)/Math.cos(k);F=E+radToDeg(F);var Y;if(t.accuracy){var rt=UTMtoLL({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});Y={top:rt.lat,right:rt.lon,bottom:U,left:F}}else Y={lat:U,lon:F};return Y}function getLetterDesignator(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function encode(t,e){var r="00000"+t.easting,s="00000"+t.northing;return t.zoneNumber+t.zoneLetter+get100kID(t.easting,t.northing,t.zoneNumber)+r.substr(r.length-5,e)+s.substr(s.length-5,e)}function get100kID(t,e,r){var s=get100kSetForZone(r),c=Math.floor(t/1e5),p=Math.floor(e/1e5)%20;return getLetter100kID(c,p,s)}function get100kSetForZone(t){var e=t%NUM_100K_SETS;return e===0&&(e=NUM_100K_SETS),e}function getLetter100kID(t,e,r){var s=r-1,c=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(s),p=SET_ORIGIN_ROW_LETTERS.charCodeAt(s),j=c+t-1,h=p+e,u=!1;j>Z&&(j=j-Z+A-1,u=!0),(j===I||c<I&&j>I||(j>I||c<I)&&u)&&j++,(j===O||c<O&&j>O||(j>O||c<O)&&u)&&(j++,j===I&&j++),j>Z&&(j=j-Z+A-1),h>V?(h=h-V+A-1,u=!0):u=!1,(h===I||p<I&&h>I||(h>I||p<I)&&u)&&h++,(h===O||p<O&&h>O||(h>O||p<O)&&u)&&(h++,h===I&&h++),h>V&&(h=h-V+A-1);var g=String.fromCharCode(j)+String.fromCharCode(h);return g}function decode(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,r=null,s="",c,p=0;!/[A-Z]/.test(c=t.charAt(p));){if(p>=2)throw"MGRSPoint bad conversion from: "+t;s+=c,p++}var j=parseInt(s,10);if(p===0||p+3>e)throw"MGRSPoint bad conversion from: "+t;var h=t.charAt(p++);if(h<="A"||h==="B"||h==="Y"||h>="Z"||h==="I"||h==="O")throw"MGRSPoint zone letter "+h+" not handled: "+t;r=t.substring(p,p+=2);for(var u=get100kSetForZone(j),g=getEastingFromChar(r.charAt(0),u),N=getNorthingFromChar(r.charAt(1),u);N<getMinNorthing(h);)N+=2e6;var P=e-p;if(P%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var _=P/2,f=0,w=0,C,E,S,k,B;return _>0&&(C=1e5/Math.pow(10,_),E=t.substring(p,p+_),f=parseFloat(E)*C,S=t.substring(p+_),w=parseFloat(S)*C),k=f+g,B=w+N,{easting:k,northing:B,zoneLetter:h,zoneNumber:j,accuracy:C}}function getEastingFromChar(t,e){for(var r=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(e-1),s=1e5,c=!1;r!==t.charCodeAt(0);){if(r++,r===I&&r++,r===O&&r++,r>Z){if(c)throw"Bad character: "+t;r=A,c=!0}s+=1e5}return s}function getNorthingFromChar(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var r=SET_ORIGIN_ROW_LETTERS.charCodeAt(e-1),s=0,c=!1;r!==t.charCodeAt(0);){if(r++,r===I&&r++,r===O&&r++,r>V){if(c)throw"Bad character: "+t;r=A,c=!0}s+=1e5}return s}function getMinNorthing(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Point(t,e,r){if(!(this instanceof Point))return new Point(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var s=t.split(",");this.x=parseFloat(s[0],10),this.y=parseFloat(s[1],10),this.z=parseFloat(s[2],10)||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Point.fromMGRS=function(t){return new Point(toPoint(t))};Point.prototype.toMGRS=function(t){return forward$t([this.x,this.y],t)};var C00=1,C02=.25,C04=.046875,C06=.01953125,C08=.01068115234375,C22=.75,C44=.46875,C46=.013020833333333334,C48=.007120768229166667,C66=.3645833333333333,C68=.005696614583333333,C88=.3076171875;function pj_enfn(t){var e=[];e[0]=C00-t*(C02+t*(C04+t*(C06+t*C08))),e[1]=t*(C22-t*(C04+t*(C06+t*C08)));var r=t*t;return e[2]=r*(C44-t*(C46+t*C48)),r*=t,e[3]=r*(C66-t*C68),e[4]=r*t*C88,e}function pj_mlfn(t,e,r,s){return r*=e,e*=e,s[0]*t-r*(s[1]+e*(s[2]+e*(s[3]+e*s[4])))}var MAX_ITER$3=20;function pj_inv_mlfn(t,e,r){for(var s=1/(1-e),c=t,p=MAX_ITER$3;p;--p){var j=Math.sin(c),h=1-e*j*j;if(h=(pj_mlfn(c,j,Math.cos(c),r)-t)*(h*Math.sqrt(h))*s,c-=h,Math.abs(h)<EPSLN)return c}return c}function init$t(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=pj_enfn(this.es),this.ml0=pj_mlfn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function forward$s(t){var e=t.x,r=t.y,s=adjust_lon(e-this.long0),c,p,j,h=Math.sin(r),u=Math.cos(r);if(this.es){var N=u*s,P=Math.pow(N,2),_=this.ep2*Math.pow(u,2),f=Math.pow(_,2),w=Math.abs(u)>EPSLN?Math.tan(r):0,C=Math.pow(w,2),E=Math.pow(C,2);c=1-this.es*Math.pow(h,2),N=N/Math.sqrt(c);var S=pj_mlfn(r,h,u,this.en);p=this.a*(this.k0*N*(1+P/6*(1-C+_+P/20*(5-18*C+E+14*_-58*C*_+P/42*(61+179*E-E*C-479*C)))))+this.x0,j=this.a*(this.k0*(S-this.ml0+h*s*N/2*(1+P/12*(5-C+9*_+4*f+P/30*(61+E-58*C+270*_-330*C*_+P/56*(1385+543*E-E*C-3111*C))))))+this.y0}else{var g=u*Math.sin(s);if(Math.abs(Math.abs(g)-1)<EPSLN)return 93;if(p=.5*this.a*this.k0*Math.log((1+g)/(1-g))+this.x0,j=u*Math.cos(s)/Math.sqrt(1-Math.pow(g,2)),g=Math.abs(j),g>=1){if(g-1>EPSLN)return 93;j=0}else j=Math.acos(j);r<0&&(j=-j),j=this.a*this.k0*(j-this.lat0)+this.y0}return t.x=p,t.y=j,t}function inverse$s(t){var e,r,s,c,p=(t.x-this.x0)*(1/this.a),j=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+j/this.k0,r=pj_inv_mlfn(e,this.es,this.en),Math.abs(r)<HALF_PI){var P=Math.sin(r),_=Math.cos(r),f=Math.abs(_)>EPSLN?Math.tan(r):0,w=this.ep2*Math.pow(_,2),C=Math.pow(w,2),E=Math.pow(f,2),S=Math.pow(E,2);e=1-this.es*Math.pow(P,2);var k=p*Math.sqrt(e)/this.k0,B=Math.pow(k,2);e=e*f,s=r-e*B/(1-this.es)*.5*(1-B/12*(5+3*E-9*w*E+w-4*C-B/30*(61+90*E-252*w*E+45*S+46*w-B/56*(1385+3633*E+4095*S+1574*S*E)))),c=adjust_lon(this.long0+k*(1-B/6*(1+2*E+w-B/20*(5+28*E+24*S+8*w*E+6*w-B/42*(61+662*E+1320*S+720*S*E))))/_)}else s=HALF_PI*sign(j),c=0;else{var h=Math.exp(p/this.k0),u=.5*(h-1/h),g=this.lat0+j/this.k0,N=Math.cos(g);e=Math.sqrt((1-Math.pow(N,2))/(1+Math.pow(u,2))),s=Math.asin(e),j<0&&(s=-s),u===0&&N===0?c=0:c=adjust_lon(Math.atan2(u,N)+this.long0)}return t.x=c,t.y=s,t}var names$t=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const tmerc={init:init$t,forward:forward$s,inverse:inverse$s,names:names$t};function sinh(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function hypot(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),s=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(s,2))}function log1py(t){var e=1+t,r=e-1;return r===0?t:t*Math.log(e)/r}function asinhy(t){var e=Math.abs(t);return e=log1py(e*(1+e/(hypot(1,e)+1))),t<0?-e:e}function gatg(t,e){for(var r=2*Math.cos(2*e),s=t.length-1,c=t[s],p=0,j;--s>=0;)j=-p+r*c+t[s],p=c,c=j;return e+j*Math.sin(2*e)}function clens(t,e){for(var r=2*Math.cos(e),s=t.length-1,c=t[s],p=0,j;--s>=0;)j=-p+r*c+t[s],p=c,c=j;return Math.sin(e)*j}function cosh(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function clens_cmplx(t,e,r){for(var s=Math.sin(e),c=Math.cos(e),p=sinh(r),j=cosh(r),h=2*c*j,u=-2*s*p,g=t.length-1,N=t[g],P=0,_=0,f=0,w,C;--g>=0;)w=_,C=P,_=N,P=f,N=-w+h*_-u*P+t[g],f=-C+u*_+h*P;return h=s*j,u=c*p,[h*N-u*f,h*f+u*N]}function init$s(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tmerc.init.apply(this),this.forward=tmerc.forward,this.inverse=tmerc.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),r=r*e,this.cgb[1]=r*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),r=r*e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),r=r*e,this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(-12/5+e*(-24832/14175))),r=r*e,this.cgb[4]=r*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),r=r*e,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),r=r*e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),r=r*e,this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),r=r*e,this.utg[4]=r*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),r=r*e,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=r*(212378941/319334400);var s=gatg(this.cbg,this.lat0);this.Zb=-this.Qn*(s+clens(this.gtu,2*s))}function forward$r(t){var e=adjust_lon(t.x-this.long0),r=t.y;r=gatg(this.cbg,r);var s=Math.sin(r),c=Math.cos(r),p=Math.sin(e),j=Math.cos(e);r=Math.atan2(s,j*c),e=Math.atan2(p*c,hypot(s,c*j)),e=asinhy(Math.tan(e));var h=clens_cmplx(this.gtu,2*r,2*e);r=r+h[0],e=e+h[1];var u,g;return Math.abs(e)<=2.623395162778?(u=this.a*(this.Qn*e)+this.x0,g=this.a*(this.Qn*r+this.Zb)+this.y0):(u=1/0,g=1/0),t.x=u,t.y=g,t}function inverse$r(t){var e=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);r=(r-this.Zb)/this.Qn,e=e/this.Qn;var s,c;if(Math.abs(e)<=2.623395162778){var p=clens_cmplx(this.utg,2*r,2*e);r=r+p[0],e=e+p[1],e=Math.atan(sinh(e));var j=Math.sin(r),h=Math.cos(r),u=Math.sin(e),g=Math.cos(e);r=Math.atan2(j*g,hypot(u,g*h)),e=Math.atan2(u,g*h),s=adjust_lon(e+this.long0),c=gatg(this.cgb,r)}else s=1/0,c=1/0;return t.x=s,t.y=c,t}var names$s=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"];const etmerc={init:init$s,forward:forward$r,inverse:inverse$r,names:names$s};function adjust_zone(t,e){if(t===void 0){if(t=Math.floor((adjust_lon(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var dependsOn="etmerc";function init$r(){var t=adjust_zone(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*D2R$1,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,etmerc.init.apply(this),this.forward=etmerc.forward,this.inverse=etmerc.inverse}var names$r=["Universal Transverse Mercator System","utm"];const utm={init:init$r,names:names$r,dependsOn};function srat(t,e){return Math.pow((1-t)/(1+t),e)}var MAX_ITER$2=20;function init$q(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+FORTPI)/(Math.pow(Math.tan(.5*this.lat0+FORTPI),this.C)*srat(this.e*t,this.ratexp))}function forward$q(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+FORTPI),this.C)*srat(this.e*Math.sin(r),this.ratexp))-HALF_PI,t.x=this.C*e,t}function inverse$q(t){for(var e=1e-14,r=t.x/this.C,s=t.y,c=Math.pow(Math.tan(.5*s+FORTPI)/this.K,1/this.C),p=MAX_ITER$2;p>0&&(s=2*Math.atan(c*srat(this.e*Math.sin(t.y),-.5*this.e))-HALF_PI,!(Math.abs(s-t.y)<e));--p)t.y=s;return p?(t.x=r,t.y=s,t):null}var names$q=["gauss"];const gauss={init:init$q,forward:forward$q,inverse:inverse$q,names:names$q};function init$p(){gauss.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function forward$p(t){var e,r,s,c;return t.x=adjust_lon(t.x-this.long0),gauss.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),s=Math.cos(t.x),c=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*s),t.x=c*r*Math.sin(t.x),t.y=c*(this.cosc0*e-this.sinc0*r*s),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function inverse$p(t){var e,r,s,c,p;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,p=Math.sqrt(t.x*t.x+t.y*t.y)){var j=2*Math.atan2(p,this.R2);e=Math.sin(j),r=Math.cos(j),c=Math.asin(r*this.sinc0+t.y*e*this.cosc0/p),s=Math.atan2(t.x*e,p*this.cosc0*r-t.y*this.sinc0*e)}else c=this.phic0,s=0;return t.x=s,t.y=c,gauss.inverse.apply(this,[t]),t.x=adjust_lon(t.x+this.long0),t}var names$p=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const sterea={init:init$p,forward:forward$p,inverse:inverse$p,names:names$p};function ssfn_(t,e,r){return e*=r,Math.tan(.5*(HALF_PI+t))*Math.pow((1-e)/(1+e),.5*r)}function init$o(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&(this.k0=.5*(1+sign(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&Math.abs(Math.cos(this.lat_ts))>EPSLN&&(this.k0=.5*this.cons*msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/tsfnz(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=msfnz(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function forward$o(t){var e=t.x,r=t.y,s=Math.sin(r),c=Math.cos(r),p,j,h,u,g,N,P=adjust_lon(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=EPSLN&&Math.abs(r+this.lat0)<=EPSLN?(t.x=NaN,t.y=NaN,t):this.sphere?(p=2*this.k0/(1+this.sinlat0*s+this.coslat0*c*Math.cos(P)),t.x=this.a*p*c*Math.sin(P)+this.x0,t.y=this.a*p*(this.coslat0*s-this.sinlat0*c*Math.cos(P))+this.y0,t):(j=2*Math.atan(this.ssfn_(r,s,this.e))-HALF_PI,u=Math.cos(j),h=Math.sin(j),Math.abs(this.coslat0)<=EPSLN?(g=tsfnz(this.e,r*this.con,this.con*s),N=2*this.a*this.k0*g/this.cons,t.x=this.x0+N*Math.sin(e-this.long0),t.y=this.y0-this.con*N*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<EPSLN?(p=2*this.a*this.k0/(1+u*Math.cos(P)),t.y=p*h):(p=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*h+this.cosX0*u*Math.cos(P))),t.y=p*(this.cosX0*h-this.sinX0*u*Math.cos(P))+this.y0),t.x=p*u*Math.sin(P)+this.x0,t))}function inverse$o(t){t.x-=this.x0,t.y-=this.y0;var e,r,s,c,p,j=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var h=2*Math.atan(j/(2*this.a*this.k0));return e=this.long0,r=this.lat0,j<=EPSLN?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(h)*this.sinlat0+t.y*Math.sin(h)*this.coslat0/j),Math.abs(this.coslat0)<EPSLN?this.lat0>0?e=adjust_lon(this.long0+Math.atan2(t.x,-1*t.y)):e=adjust_lon(this.long0+Math.atan2(t.x,t.y)):e=adjust_lon(this.long0+Math.atan2(t.x*Math.sin(h),j*this.coslat0*Math.cos(h)-t.y*this.sinlat0*Math.sin(h))),t.x=e,t.y=r,t)}else if(Math.abs(this.coslat0)<=EPSLN){if(j<=EPSLN)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,s=j*this.cons/(2*this.a*this.k0),r=this.con*phi2z(this.e,s),e=this.con*adjust_lon(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else c=2*Math.atan(j*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,j<=EPSLN?p=this.X0:(p=Math.asin(Math.cos(c)*this.sinX0+t.y*Math.sin(c)*this.cosX0/j),e=adjust_lon(this.long0+Math.atan2(t.x*Math.sin(c),j*this.cosX0*Math.cos(c)-t.y*this.sinX0*Math.sin(c)))),r=-1*phi2z(this.e,Math.tan(.5*(HALF_PI+p)));return t.x=e,t.y=r,t}var names$o=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const stere={init:init$o,forward:forward$o,inverse:inverse$o,names:names$o,ssfn_};function init$n(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,s=this.rf,c=1/s,p=2*c-Math.pow(c,2),j=this.e=Math.sqrt(p);this.R=this.k0*r*Math.sqrt(1-p)/(1-p*Math.pow(e,2)),this.alpha=Math.sqrt(1+p/(1-p)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var h=Math.log(Math.tan(Math.PI/4+this.b0/2)),u=Math.log(Math.tan(Math.PI/4+t/2)),g=Math.log((1+j*e)/(1-j*e));this.K=h-this.alpha*u+this.alpha*j/2*g}function forward$n(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),s=-this.alpha*(e+r)+this.K,c=2*(Math.atan(Math.exp(s))-Math.PI/4),p=this.alpha*(t.x-this.lambda0),j=Math.atan(Math.sin(p)/(Math.sin(this.b0)*Math.tan(c)+Math.cos(this.b0)*Math.cos(p))),h=Math.asin(Math.cos(this.b0)*Math.sin(c)-Math.sin(this.b0)*Math.cos(c)*Math.cos(p));return t.y=this.R/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))+this.y0,t.x=this.R*j+this.x0,t}function inverse$n(t){for(var e=t.x-this.x0,r=t.y-this.y0,s=e/this.R,c=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),p=Math.asin(Math.cos(this.b0)*Math.sin(c)+Math.sin(this.b0)*Math.cos(c)*Math.cos(s)),j=Math.atan(Math.sin(s)/(Math.cos(this.b0)*Math.cos(s)-Math.sin(this.b0)*Math.tan(c))),h=this.lambda0+j/this.alpha,u=0,g=p,N=-1e3,P=0;Math.abs(g-N)>1e-7;){if(++P>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+p/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(g))/2)),N=g,g=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=h,t.y=g,t}var names$n=["somerc"];const somerc={init:init$n,forward:forward$n,inverse:inverse$n,names:names$n};var TOL=1e-7;function isTypeA(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],r=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(r)!==-1}function init$m(){var t,e,r,s,c,p,j,h,u,g,N=0,P,_=0,f=0,w=0,C=0,E=0,S=0;this.no_off=isTypeA(this),this.no_rot="no_rot"in this;var k=!1;"alpha"in this&&(k=!0);var B=!1;if("rectified_grid_angle"in this&&(B=!0),k&&(S=this.alpha),B&&(N=this.rectified_grid_angle*D2R$1),k||B)_=this.longc;else if(f=this.long1,C=this.lat1,w=this.long2,E=this.lat2,Math.abs(C-E)<=TOL||(t=Math.abs(C))<=TOL||Math.abs(t-HALF_PI)<=TOL||Math.abs(Math.abs(this.lat0)-HALF_PI)<=TOL||Math.abs(Math.abs(E)-HALF_PI)<=TOL)throw new Error;var q=1-this.es;e=Math.sqrt(q),Math.abs(this.lat0)>EPSLN?(h=Math.sin(this.lat0),r=Math.cos(this.lat0),t=1-this.es*h*h,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/q),this.A=this.B*this.k0*e/t,s=this.B*e/(r*Math.sqrt(t)),c=s*s-1,c<=0?c=0:(c=Math.sqrt(c),this.lat0<0&&(c=-c)),this.E=c+=s,this.E*=Math.pow(tsfnz(this.e,this.lat0,h),this.B)):(this.B=1/e,this.A=this.k0,this.E=s=c=1),k||B?(k?(P=Math.asin(Math.sin(S)/s),B||(N=S)):(P=N,S=Math.asin(s*Math.sin(P))),this.lam0=_-Math.asin(.5*(c-1/c)*Math.tan(P))/this.B):(p=Math.pow(tsfnz(this.e,C,Math.sin(C)),this.B),j=Math.pow(tsfnz(this.e,E,Math.sin(E)),this.B),c=this.E/p,u=(j-p)/(j+p),g=this.E*this.E,g=(g-j*p)/(g+j*p),t=f-w,t<-Math.pi?w-=TWO_PI:t>Math.pi&&(w+=TWO_PI),this.lam0=adjust_lon(.5*(f+w)-Math.atan(g*Math.tan(.5*this.B*(f-w))/u)/this.B),P=Math.atan(2*Math.sin(this.B*adjust_lon(f-this.lam0))/(c-1/c)),N=S=Math.asin(s*Math.sin(P))),this.singam=Math.sin(P),this.cosgam=Math.cos(P),this.sinrot=Math.sin(N),this.cosrot=Math.cos(N),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(s*s-1)/Math.cos(S))),this.lat0<0&&(this.u_0=-this.u_0)),c=.5*P,this.v_pole_n=this.ArB*Math.log(Math.tan(FORTPI-c)),this.v_pole_s=this.ArB*Math.log(Math.tan(FORTPI+c))}function forward$m(t){var e={},r,s,c,p,j,h,u,g;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-HALF_PI)>EPSLN){if(j=this.E/Math.pow(tsfnz(this.e,t.y,Math.sin(t.y)),this.B),h=1/j,r=.5*(j-h),s=.5*(j+h),p=Math.sin(this.B*t.x),c=(r*this.singam-p*this.cosgam)/s,Math.abs(Math.abs(c)-1)<EPSLN)throw new Error;g=.5*this.ArB*Math.log((1-c)/(1+c)),h=Math.cos(this.B*t.x),Math.abs(h)<TOL?u=this.A*t.x:u=this.ArB*Math.atan2(r*this.cosgam+p*this.singam,h)}else g=t.y>0?this.v_pole_n:this.v_pole_s,u=this.ArB*t.y;return this.no_rot?(e.x=u,e.y=g):(u-=this.u_0,e.x=g*this.cosrot+u*this.sinrot,e.y=u*this.cosrot-g*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function inverse$m(t){var e,r,s,c,p,j,h,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(r=t.y,e=t.x):(r=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),s=Math.exp(-this.BrA*r),c=.5*(s-1/s),p=.5*(s+1/s),j=Math.sin(this.BrA*e),h=(j*this.cosgam+c*this.singam)/p,Math.abs(Math.abs(h)-1)<EPSLN)u.x=0,u.y=h<0?-HALF_PI:HALF_PI;else{if(u.y=this.E/Math.sqrt((1+h)/(1-h)),u.y=phi2z(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(c*this.cosgam-j*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u}var names$m=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const omerc={init:init$m,forward:forward$m,inverse:inverse$m,names:names$m};function init$l(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<EPSLN)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),s=msfnz(this.e,e,r),c=tsfnz(this.e,this.lat1,e),p=Math.sin(this.lat2),j=Math.cos(this.lat2),h=msfnz(this.e,p,j),u=tsfnz(this.e,this.lat2,p),g=tsfnz(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>EPSLN?this.ns=Math.log(s/h)/Math.log(c/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=s/(this.ns*Math.pow(c,this.ns)),this.rh=this.a*this.f0*Math.pow(g,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function forward$l(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=EPSLN&&(r=sign(r)*(HALF_PI-2*EPSLN));var s=Math.abs(Math.abs(r)-HALF_PI),c,p;if(s>EPSLN)c=tsfnz(this.e,r,Math.sin(r)),p=this.a*this.f0*Math.pow(c,this.ns);else{if(s=r*this.ns,s<=0)return null;p=0}var j=this.ns*adjust_lon(e-this.long0);return t.x=this.k0*(p*Math.sin(j))+this.x0,t.y=this.k0*(this.rh-p*Math.cos(j))+this.y0,t}function inverse$l(t){var e,r,s,c,p,j=(t.x-this.x0)/this.k0,h=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(j*j+h*h),r=1):(e=-Math.sqrt(j*j+h*h),r=-1);var u=0;if(e!==0&&(u=Math.atan2(r*j,r*h)),e!==0||this.ns>0){if(r=1/this.ns,s=Math.pow(e/(this.a*this.f0),r),c=phi2z(this.e,s),c===-9999)return null}else c=-HALF_PI;return p=adjust_lon(u/this.ns+this.long0),t.x=p,t.y=c,t}var names$l=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const lcc={init:init$l,forward:forward$l,inverse:inverse$l,names:names$l};function init$k(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function forward$k(t){var e,r,s,c,p,j,h,u=t.x,g=t.y,N=adjust_lon(u-this.long0);return e=Math.pow((1+this.e*Math.sin(g))/(1-this.e*Math.sin(g)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(g/2+this.s45),this.alfa)/e)-this.s45),s=-N*this.alfa,c=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(s)),p=Math.asin(Math.cos(r)*Math.sin(s)/Math.cos(c)),j=this.n*p,h=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(c/2+this.s45),this.n),t.y=h*Math.cos(j)/1,t.x=h*Math.sin(j)/1,this.czech||(t.y*=-1,t.x*=-1),t}function inverse$k(t){var e,r,s,c,p,j,h,u,g=t.x;t.x=t.y,t.y=g,this.czech||(t.y*=-1,t.x*=-1),j=Math.sqrt(t.x*t.x+t.y*t.y),p=Math.atan2(t.y,t.x),c=p/Math.sin(this.s0),s=2*(Math.atan(Math.pow(this.ro0/j,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(s)-Math.sin(this.ad)*Math.cos(s)*Math.cos(c)),r=Math.asin(Math.cos(s)*Math.sin(c)/Math.cos(e)),t.x=this.long0-r/this.alfa,h=e,u=0;var N=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.e/2))-this.s45),Math.abs(h-t.y)<1e-10&&(u=1),h=t.y,N+=1;while(u===0&&N<15);return N>=15?null:t}var names$k=["Krovak","krovak"];const krovak={init:init$k,forward:forward$k,inverse:inverse$k,names:names$k};function mlfn(t,e,r,s,c){return t*c-e*Math.sin(2*c)+r*Math.sin(4*c)-s*Math.sin(6*c)}function e0fn(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function e1fn(t){return .375*t*(1+.25*t*(1+.46875*t))}function e2fn(t){return .05859375*t*t*(1+.75*t)}function e3fn(t){return t*t*t*(35/3072)}function gN(t,e,r){var s=e*r;return t/Math.sqrt(1-s*s)}function adjust_lat(t){return Math.abs(t)<HALF_PI?t:t-sign(t)*Math.PI}function imlfn(t,e,r,s,c){var p,j;p=t/e;for(var h=0;h<15;h++)if(j=(t-(e*p-r*Math.sin(2*p)+s*Math.sin(4*p)-c*Math.sin(6*p)))/(e-2*r*Math.cos(2*p)+4*s*Math.cos(4*p)-6*c*Math.cos(6*p)),p+=j,Math.abs(j)<=1e-10)return p;return NaN}function init$j(){this.sphere||(this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0))}function forward$j(t){var e,r,s=t.x,c=t.y;if(s=adjust_lon(s-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(c)*Math.sin(s)),r=this.a*(Math.atan2(Math.tan(c),Math.cos(s))-this.lat0);else{var p=Math.sin(c),j=Math.cos(c),h=gN(this.a,this.e,p),u=Math.tan(c)*Math.tan(c),g=s*Math.cos(c),N=g*g,P=this.es*j*j/(1-this.es),_=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,c);e=h*g*(1-N*u*(1/6-(8-u+8*P)*N/120)),r=_-this.ml0+h*p/j*N*(.5+(5-u+6*P)*N/24)}return t.x=e+this.x0,t.y=r+this.y0,t}function inverse$j(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,r=t.y/this.a,s,c;if(this.sphere){var p=r+this.lat0;s=Math.asin(Math.sin(p)*Math.cos(e)),c=Math.atan2(Math.tan(e),Math.cos(p))}else{var j=this.ml0/this.a+r,h=imlfn(j,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(h)-HALF_PI)<=EPSLN)return t.x=this.long0,t.y=HALF_PI,r<0&&(t.y*=-1),t;var u=gN(this.a,this.e,Math.sin(h)),g=u*u*u/this.a/this.a*(1-this.es),N=Math.pow(Math.tan(h),2),P=e*this.a/u,_=P*P;s=h-u*Math.tan(h)/g*P*P*(.5-(1+3*N)*P*P/24),c=P*(1-_*(N/3+(1+3*N)*N*_/15))/Math.cos(h)}return t.x=adjust_lon(c+this.long0),t.y=adjust_lat(s),t}var names$j=["Cassini","Cassini_Soldner","cass"];const cass={init:init$j,forward:forward$j,inverse:inverse$j,names:names$j};function qsfnz(t,e){var r;return t>1e-7?(r=t*e,(1-t*t)*(e/(1-r*r)-.5/t*Math.log((1-r)/(1+r)))):2*e}var S_POLE=1,N_POLE=2,EQUIT=3,OBLIQ=4;function init$i(){var t=Math.abs(this.lat0);if(Math.abs(t-HALF_PI)<EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=qsfnz(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function forward$i(t){var e,r,s,c,p,j,h,u,g,N,P=t.x,_=t.y;if(P=adjust_lon(P-this.long0),this.sphere){if(p=Math.sin(_),N=Math.cos(_),s=Math.cos(P),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(r=this.mode===this.EQUIT?1+N*s:1+this.sinph0*p+this.cosph0*N*s,r<=EPSLN)return null;r=Math.sqrt(2/r),e=r*N*Math.sin(P),r*=this.mode===this.EQUIT?p:this.cosph0*p-this.sinph0*N*s}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(s=-s),Math.abs(_+this.lat0)<EPSLN)return null;r=FORTPI-_*.5,r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)),e=r*Math.sin(P),r*=s}}else{switch(h=0,u=0,g=0,s=Math.cos(P),c=Math.sin(P),p=Math.sin(_),j=qsfnz(this.e,p),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(h=j/this.qp,u=Math.sqrt(1-h*h)),this.mode){case this.OBLIQ:g=1+this.sinb1*h+this.cosb1*u*s;break;case this.EQUIT:g=1+u*s;break;case this.N_POLE:g=HALF_PI+_,j=this.qp-j;break;case this.S_POLE:g=_-HALF_PI,j=this.qp+j;break}if(Math.abs(g)<EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:g=Math.sqrt(2/g),this.mode===this.OBLIQ?r=this.ymf*g*(this.cosb1*h-this.sinb1*u*s):r=(g=Math.sqrt(2/(1+u*s)))*h*this.ymf,e=this.xmf*g*u*c;break;case this.N_POLE:case this.S_POLE:j>=0?(e=(g=Math.sqrt(j))*c,r=s*(this.mode===this.S_POLE?g:-g)):e=r=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t}function inverse$i(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,r=t.y/this.a,s,c,p,j,h,u,g;if(this.sphere){var N=0,P,_=0;if(P=Math.sqrt(e*e+r*r),c=P*.5,c>1)return null;switch(c=2*Math.asin(c),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(_=Math.sin(c),N=Math.cos(c)),this.mode){case this.EQUIT:c=Math.abs(P)<=EPSLN?0:Math.asin(r*_/P),e*=_,r=N*P;break;case this.OBLIQ:c=Math.abs(P)<=EPSLN?this.lat0:Math.asin(N*this.sinph0+r*_*this.cosph0/P),e*=_*this.cosph0,r=(N-Math.sin(c)*this.sinph0)*P;break;case this.N_POLE:r=-r,c=HALF_PI-c;break;case this.S_POLE:c-=HALF_PI;break}s=r===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,r)}else{if(g=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,r*=this.dd,u=Math.sqrt(e*e+r*r),u<EPSLN)return t.x=this.long0,t.y=this.lat0,t;j=2*Math.asin(.5*u/this.rq),p=Math.cos(j),e*=j=Math.sin(j),this.mode===this.OBLIQ?(g=p*this.sinb1+r*j*this.cosb1/u,h=this.qp*g,r=u*this.cosb1*p-r*this.sinb1*j):(g=r*j/u,h=this.qp*g,r=u*p)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),h=e*e+r*r,!h)return t.x=this.long0,t.y=this.lat0,t;g=1-h/this.qp,this.mode===this.S_POLE&&(g=-g)}s=Math.atan2(e,r),c=authlat(Math.asin(g),this.apa)}return t.x=adjust_lon(this.long0+s),t.y=c,t}var P00=.3333333333333333,P01=.17222222222222222,P02=.10257936507936508,P10=.06388888888888888,P11=.0664021164021164,P20=.016415012942191543;function authset(t){var e,r=[];return r[0]=t*P00,e=t*t,r[0]+=e*P01,r[1]=e*P10,e*=t,r[0]+=e*P02,r[1]+=e*P11,r[2]=e*P20,r}function authlat(t,e){var r=t+t;return t+e[0]*Math.sin(r)+e[1]*Math.sin(r+r)+e[2]*Math.sin(r+r+r)}var names$i=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const laea={init:init$i,forward:forward$i,inverse:inverse$i,names:names$i,S_POLE,N_POLE,EQUIT,OBLIQ};function asinz(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function init$h(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=qsfnz(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function forward$h(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var s=qsfnz(this.e3,this.sin_phi),c=this.a*Math.sqrt(this.c-this.ns0*s)/this.ns0,p=this.ns0*adjust_lon(e-this.long0),j=c*Math.sin(p)+this.x0,h=this.rh-c*Math.cos(p)+this.y0;return t.x=j,t.y=h,t}function inverse$h(t){var e,r,s,c,p,j;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),s=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),s=-1),c=0,e!==0&&(c=Math.atan2(s*t.x,s*t.y)),s=e*this.ns0/this.a,this.sphere?j=Math.asin((this.c-s*s)/(2*this.ns0)):(r=(this.c-s*s)/this.ns0,j=this.phi1z(this.e3,r)),p=adjust_lon(c/this.ns0+this.long0),t.x=p,t.y=j,t}function phi1z(t,e){var r,s,c,p,j,h=asinz(.5*e);if(t<EPSLN)return h;for(var u=t*t,g=1;g<=25;g++)if(r=Math.sin(h),s=Math.cos(h),c=t*r,p=1-c*c,j=.5*p*p/s*(e/(1-u)-r/p+.5/t*Math.log((1-c)/(1+c))),h=h+j,Math.abs(j)<=1e-7)return h;return null}var names$h=["Albers_Conic_Equal_Area","Albers","aea"];const aea={init:init$h,forward:forward$h,inverse:inverse$h,names:names$h,phi1z};function init$g(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function forward$g(t){var e,r,s,c,p,j,h,u,g=t.x,N=t.y;return s=adjust_lon(g-this.long0),e=Math.sin(N),r=Math.cos(N),c=Math.cos(s),j=this.sin_p14*e+this.cos_p14*r*c,p=1,j>0||Math.abs(j)<=EPSLN?(h=this.x0+this.a*p*r*Math.sin(s)/j,u=this.y0+this.a*p*(this.cos_p14*e-this.sin_p14*r*c)/j):(h=this.x0+this.infinity_dist*r*Math.sin(s),u=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*c)),t.x=h,t.y=u,t}function inverse$g(t){var e,r,s,c,p,j;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(c=Math.atan2(e,this.rc),r=Math.sin(c),s=Math.cos(c),j=asinz(s*this.sin_p14+t.y*r*this.cos_p14/e),p=Math.atan2(t.x*r,e*this.cos_p14*s-t.y*this.sin_p14*r),p=adjust_lon(this.long0+p)):(j=this.phic0,p=0),t.x=p,t.y=j,t}var names$g=["gnom"];const gnom={init:init$g,forward:forward$g,inverse:inverse$g,names:names$g};function iqsfnz(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*HALF_PI:HALF_PI;for(var s=Math.asin(.5*e),c,p,j,h,u=0;u<30;u++)if(p=Math.sin(s),j=Math.cos(s),h=t*p,c=Math.pow(1-h*h,2)/(2*j)*(e/(1-t*t)-p/(1-h*h)+.5/t*Math.log((1-h)/(1+h))),s+=c,Math.abs(c)<=1e-10)return s;return NaN}function init$f(){this.sphere||(this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function forward$f(t){var e=t.x,r=t.y,s,c,p=adjust_lon(e-this.long0);if(this.sphere)s=this.x0+this.a*p*Math.cos(this.lat_ts),c=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var j=qsfnz(this.e,Math.sin(r));s=this.x0+this.a*this.k0*p,c=this.y0+this.a*j*.5/this.k0}return t.x=s,t.y=c,t}function inverse$f(t){t.x-=this.x0,t.y-=this.y0;var e,r;return this.sphere?(e=adjust_lon(this.long0+t.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=iqsfnz(this.e,2*t.y*this.k0/this.a),e=adjust_lon(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=r,t}var names$f=["cea"];const cea={init:init$f,forward:forward$f,inverse:inverse$f,names:names$f};function init$e(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function forward$e(t){var e=t.x,r=t.y,s=adjust_lon(e-this.long0),c=adjust_lat(r-this.lat0);return t.x=this.x0+this.a*s*this.rc,t.y=this.y0+this.a*c,t}function inverse$e(t){var e=t.x,r=t.y;return t.x=adjust_lon(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=adjust_lat(this.lat0+(r-this.y0)/this.a),t}var names$e=["Equirectangular","Equidistant_Cylindrical","eqc"];const eqc={init:init$e,forward:forward$e,inverse:inverse$e,names:names$e};var MAX_ITER$1=20;function init$d(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function forward$d(t){var e=t.x,r=t.y,s,c,p,j=adjust_lon(e-this.long0);if(p=j*Math.sin(r),this.sphere)Math.abs(r)<=EPSLN?(s=this.a*j,c=-1*this.a*this.lat0):(s=this.a*Math.sin(p)/Math.tan(r),c=this.a*(adjust_lat(r-this.lat0)+(1-Math.cos(p))/Math.tan(r)));else if(Math.abs(r)<=EPSLN)s=this.a*j,c=-1*this.ml0;else{var h=gN(this.a,this.e,Math.sin(r))/Math.tan(r);s=h*Math.sin(p),c=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+h*(1-Math.cos(p))}return t.x=s+this.x0,t.y=c+this.y0,t}function inverse$d(t){var e,r,s,c,p,j,h,u,g;if(s=t.x-this.x0,c=t.y-this.y0,this.sphere)if(Math.abs(c+this.a*this.lat0)<=EPSLN)e=adjust_lon(s/this.a+this.long0),r=0;else{j=this.lat0+c/this.a,h=s*s/this.a/this.a+j*j,u=j;var N;for(p=MAX_ITER$1;p;--p)if(N=Math.tan(u),g=-1*(j*(u*N+1)-u-.5*(u*u+h)*N)/((u-j)/N-1),u+=g,Math.abs(g)<=EPSLN){r=u;break}e=adjust_lon(this.long0+Math.asin(s*Math.tan(u)/this.a)/Math.sin(r))}else if(Math.abs(c+this.ml0)<=EPSLN)r=0,e=adjust_lon(this.long0+s/this.a);else{j=(this.ml0+c)/this.a,h=s*s/this.a/this.a+j*j,u=j;var P,_,f,w,C;for(p=MAX_ITER$1;p;--p)if(C=this.e*Math.sin(u),P=Math.sqrt(1-C*C)*Math.tan(u),_=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,u),f=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),w=_/this.a,g=(j*(P*w+1)-w-.5*P*(w*w+h))/(this.es*Math.sin(2*u)*(w*w+h-2*j*w)/(4*P)+(j-w)*(P*f-2/Math.sin(2*u))-f),u-=g,Math.abs(g)<=EPSLN){r=u;break}P=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=adjust_lon(this.long0+Math.asin(s*P/this.a)/Math.sin(r))}return t.x=e,t.y=r,t}var names$d=["Polyconic","poly"];const poly={init:init$d,forward:forward$d,inverse:inverse$d,names:names$d};function init$c(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function forward$c(t){var e,r=t.x,s=t.y,c=s-this.lat0,p=r-this.long0,j=c/SEC_TO_RAD*1e-5,h=p,u=1,g=0;for(e=1;e<=10;e++)u=u*j,g=g+this.A[e]*u;var N=g,P=h,_=1,f=0,w,C,E=0,S=0;for(e=1;e<=6;e++)w=_*N-f*P,C=f*N+_*P,_=w,f=C,E=E+this.B_re[e]*_-this.B_im[e]*f,S=S+this.B_im[e]*_+this.B_re[e]*f;return t.x=S*this.a+this.x0,t.y=E*this.a+this.y0,t}function inverse$c(t){var e,r=t.x,s=t.y,c=r-this.x0,p=s-this.y0,j=p/this.a,h=c/this.a,u=1,g=0,N,P,_=0,f=0;for(e=1;e<=6;e++)N=u*j-g*h,P=g*j+u*h,u=N,g=P,_=_+this.C_re[e]*u-this.C_im[e]*g,f=f+this.C_im[e]*u+this.C_re[e]*g;for(var w=0;w<this.iterations;w++){var C=_,E=f,S,k,B=j,q=h;for(e=2;e<=6;e++)S=C*_-E*f,k=E*_+C*f,C=S,E=k,B=B+(e-1)*(this.B_re[e]*C-this.B_im[e]*E),q=q+(e-1)*(this.B_im[e]*C+this.B_re[e]*E);C=1,E=0;var U=this.B_re[1],F=this.B_im[1];for(e=2;e<=6;e++)S=C*_-E*f,k=E*_+C*f,C=S,E=k,U=U+e*(this.B_re[e]*C-this.B_im[e]*E),F=F+e*(this.B_im[e]*C+this.B_re[e]*E);var Y=U*U+F*F;_=(B*U+q*F)/Y,f=(q*U-B*F)/Y}var rt=_,tt=f,yt=1,Et=0;for(e=1;e<=9;e++)yt=yt*rt,Et=Et+this.D[e]*yt;var pt=this.lat0+Et*SEC_TO_RAD*1e5,Pt=this.long0+tt;return t.x=Pt,t.y=pt,t}var names$c=["New_Zealand_Map_Grid","nzmg"];const nzmg={init:init$c,forward:forward$c,inverse:inverse$c,names:names$c};function init$b(){}function forward$b(t){var e=t.x,r=t.y,s=adjust_lon(e-this.long0),c=this.x0+this.a*s,p=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=c,t.y=p,t}function inverse$b(t){t.x-=this.x0,t.y-=this.y0;var e=adjust_lon(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t}var names$b=["Miller_Cylindrical","mill"];const mill={init:init$b,forward:forward$b,inverse:inverse$b,names:names$b};var MAX_ITER=20;function init$a(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=pj_enfn(this.es)}function forward$a(t){var e,r,s=t.x,c=t.y;if(s=adjust_lon(s-this.long0),this.sphere){if(!this.m)c=this.n!==1?Math.asin(this.n*Math.sin(c)):c;else for(var p=this.n*Math.sin(c),j=MAX_ITER;j;--j){var h=(this.m*c+Math.sin(c)-p)/(this.m+Math.cos(c));if(c-=h,Math.abs(h)<EPSLN)break}e=this.a*this.C_x*s*(this.m+Math.cos(c)),r=this.a*this.C_y*c}else{var u=Math.sin(c),g=Math.cos(c);r=this.a*pj_mlfn(c,u,g,this.en),e=this.a*s*g/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=r,t}function inverse$a(t){var e,r,s,c;return t.x-=this.x0,s=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,s=s/(this.C_x*(this.m+Math.cos(e))),this.m?e=asinz((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=asinz(Math.sin(e)/this.n)),s=adjust_lon(s+this.long0),e=adjust_lat(e)):(e=pj_inv_mlfn(t.y/this.a,this.es,this.en),c=Math.abs(e),c<HALF_PI?(c=Math.sin(e),r=this.long0+t.x*Math.sqrt(1-this.es*c*c)/(this.a*Math.cos(e)),s=adjust_lon(r)):c-EPSLN<HALF_PI&&(s=this.long0)),t.x=s,t.y=e,t}var names$a=["Sinusoidal","sinu"];const sinu={init:init$a,forward:forward$a,inverse:inverse$a,names:names$a};function init$9(){}function forward$9(t){for(var e=t.x,r=t.y,s=adjust_lon(e-this.long0),c=r,p=Math.PI*Math.sin(r);;){var j=-(c+Math.sin(c)-p)/(1+Math.cos(c));if(c+=j,Math.abs(j)<EPSLN)break}c/=2,Math.PI/2-Math.abs(r)<EPSLN&&(s=0);var h=.900316316158*this.a*s*Math.cos(c)+this.x0,u=1.4142135623731*this.a*Math.sin(c)+this.y0;return t.x=h,t.y=u,t}function inverse$9(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var s=adjust_lon(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));s<-Math.PI&&(s=-Math.PI),s>Math.PI&&(s=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var c=Math.asin(r);return t.x=s,t.y=c,t}var names$9=["Mollweide","moll"];const moll={init:init$9,forward:forward$9,inverse:inverse$9,names:names$9};function init$8(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=msfnz(this.e,this.sinphi,this.cosphi),this.ml1=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=msfnz(this.e,this.sinphi,this.cosphi),this.ml2=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function forward$8(t){var e=t.x,r=t.y,s;if(this.sphere)s=this.a*(this.g-r);else{var c=mlfn(this.e0,this.e1,this.e2,this.e3,r);s=this.a*(this.g-c)}var p=this.ns*adjust_lon(e-this.long0),j=this.x0+s*Math.sin(p),h=this.y0+this.rh-s*Math.cos(p);return t.x=j,t.y=h,t}function inverse$8(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,r,s,c;this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var p=0;if(r!==0&&(p=Math.atan2(e*t.x,e*t.y)),this.sphere)return c=adjust_lon(this.long0+p/this.ns),s=adjust_lat(this.g-r/this.a),t.x=c,t.y=s,t;var j=this.g-r/this.a;return s=imlfn(j,this.e0,this.e1,this.e2,this.e3),c=adjust_lon(this.long0+p/this.ns),t.x=c,t.y=s,t}var names$8=["Equidistant_Conic","eqdc"];const eqdc={init:init$8,forward:forward$8,inverse:inverse$8,names:names$8};function init$7(){this.R=this.a}function forward$7(t){var e=t.x,r=t.y,s=adjust_lon(e-this.long0),c,p;Math.abs(r)<=EPSLN&&(c=this.x0+this.R*s,p=this.y0);var j=asinz(2*Math.abs(r/Math.PI));(Math.abs(s)<=EPSLN||Math.abs(Math.abs(r)-HALF_PI)<=EPSLN)&&(c=this.x0,r>=0?p=this.y0+Math.PI*this.R*Math.tan(.5*j):p=this.y0+Math.PI*this.R*-Math.tan(.5*j));var h=.5*Math.abs(Math.PI/s-s/Math.PI),u=h*h,g=Math.sin(j),N=Math.cos(j),P=N/(g+N-1),_=P*P,f=P*(2/g-1),w=f*f,C=Math.PI*this.R*(h*(P-w)+Math.sqrt(u*(P-w)*(P-w)-(w+u)*(_-w)))/(w+u);s<0&&(C=-C),c=this.x0+C;var E=u+P;return C=Math.PI*this.R*(f*E-h*Math.sqrt((w+u)*(u+1)-E*E))/(w+u),r>=0?p=this.y0+C:p=this.y0-C,t.x=c,t.y=p,t}function inverse$7(t){var e,r,s,c,p,j,h,u,g,N,P,_,f;return t.x-=this.x0,t.y-=this.y0,P=Math.PI*this.R,s=t.x/P,c=t.y/P,p=s*s+c*c,j=-Math.abs(c)*(1+p),h=j-2*c*c+s*s,u=-2*j+1+2*c*c+p*p,f=c*c/u+(2*h*h*h/u/u/u-9*j*h/u/u)/27,g=(j-h*h/3/u)/u,N=2*Math.sqrt(-g/3),P=3*f/g/N,Math.abs(P)>1&&(P>=0?P=1:P=-1),_=Math.acos(P)/3,t.y>=0?r=(-N*Math.cos(_+Math.PI/3)-h/3/u)*Math.PI:r=-(-N*Math.cos(_+Math.PI/3)-h/3/u)*Math.PI,Math.abs(s)<EPSLN?e=this.long0:e=adjust_lon(this.long0+Math.PI*(p-1+Math.sqrt(1+2*(s*s-c*c)+p*p))/2/s),t.x=e,t.y=r,t}var names$7=["Van_der_Grinten_I","VanDerGrinten","vandg"];const vandg={init:init$7,forward:forward$7,inverse:inverse$7,names:names$7};function init$6(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function forward$6(t){var e=t.x,r=t.y,s=Math.sin(t.y),c=Math.cos(t.y),p=adjust_lon(e-this.long0),j,h,u,g,N,P,_,f,w,C,E,S,k,B,q,U,F,Y,rt,tt,yt,Et,pt;return this.sphere?Math.abs(this.sin_p12-1)<=EPSLN?(t.x=this.x0+this.a*(HALF_PI-r)*Math.sin(p),t.y=this.y0-this.a*(HALF_PI-r)*Math.cos(p),t):Math.abs(this.sin_p12+1)<=EPSLN?(t.x=this.x0+this.a*(HALF_PI+r)*Math.sin(p),t.y=this.y0+this.a*(HALF_PI+r)*Math.cos(p),t):(Y=this.sin_p12*s+this.cos_p12*c*Math.cos(p),U=Math.acos(Y),F=U?U/Math.sin(U):1,t.x=this.x0+this.a*F*c*Math.sin(p),t.y=this.y0+this.a*F*(this.cos_p12*s-this.sin_p12*c*Math.cos(p)),t):(j=e0fn(this.es),h=e1fn(this.es),u=e2fn(this.es),g=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(N=this.a*mlfn(j,h,u,g,HALF_PI),P=this.a*mlfn(j,h,u,g,r),t.x=this.x0+(N-P)*Math.sin(p),t.y=this.y0-(N-P)*Math.cos(p),t):Math.abs(this.sin_p12+1)<=EPSLN?(N=this.a*mlfn(j,h,u,g,HALF_PI),P=this.a*mlfn(j,h,u,g,r),t.x=this.x0+(N+P)*Math.sin(p),t.y=this.y0+(N+P)*Math.cos(p),t):(_=s/c,f=gN(this.a,this.e,this.sin_p12),w=gN(this.a,this.e,s),C=Math.atan((1-this.es)*_+this.es*f*this.sin_p12/(w*c)),E=Math.atan2(Math.sin(p),this.cos_p12*Math.tan(C)-this.sin_p12*Math.cos(p)),E===0?rt=Math.asin(this.cos_p12*Math.sin(C)-this.sin_p12*Math.cos(C)):Math.abs(Math.abs(E)-Math.PI)<=EPSLN?rt=-Math.asin(this.cos_p12*Math.sin(C)-this.sin_p12*Math.cos(C)):rt=Math.asin(Math.sin(p)*Math.cos(C)/Math.sin(E)),S=this.e*this.sin_p12/Math.sqrt(1-this.es),k=this.e*this.cos_p12*Math.cos(E)/Math.sqrt(1-this.es),B=S*k,q=k*k,tt=rt*rt,yt=tt*rt,Et=yt*rt,pt=Et*rt,U=f*rt*(1-tt*q*(1-q)/6+yt/8*B*(1-2*q)+Et/120*(q*(4-7*q)-3*S*S*(1-7*q))-pt/48*B),t.x=this.x0+U*Math.sin(E),t.y=this.y0+U*Math.cos(E),t))}function inverse$6(t){t.x-=this.x0,t.y-=this.y0;var e,r,s,c,p,j,h,u,g,N,P,_,f,w,C,E,S,k,B,q,U,F,Y,rt;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*HALF_PI*this.a?void 0:(r=e/this.a,s=Math.sin(r),c=Math.cos(r),p=this.long0,Math.abs(e)<=EPSLN?j=this.lat0:(j=asinz(c*this.sin_p12+t.y*s*this.cos_p12/e),h=Math.abs(this.lat0)-HALF_PI,Math.abs(h)<=EPSLN?this.lat0>=0?p=adjust_lon(this.long0+Math.atan2(t.x,-t.y)):p=adjust_lon(this.long0-Math.atan2(-t.x,t.y)):p=adjust_lon(this.long0+Math.atan2(t.x*s,e*this.cos_p12*c-t.y*this.sin_p12*s))),t.x=p,t.y=j,t)):(u=e0fn(this.es),g=e1fn(this.es),N=e2fn(this.es),P=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(_=this.a*mlfn(u,g,N,P,HALF_PI),e=Math.sqrt(t.x*t.x+t.y*t.y),f=_-e,j=imlfn(f/this.a,u,g,N,P),p=adjust_lon(this.long0+Math.atan2(t.x,-1*t.y)),t.x=p,t.y=j,t):Math.abs(this.sin_p12+1)<=EPSLN?(_=this.a*mlfn(u,g,N,P,HALF_PI),e=Math.sqrt(t.x*t.x+t.y*t.y),f=e-_,j=imlfn(f/this.a,u,g,N,P),p=adjust_lon(this.long0+Math.atan2(t.x,t.y)),t.x=p,t.y=j,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),E=Math.atan2(t.x,t.y),w=gN(this.a,this.e,this.sin_p12),S=Math.cos(E),k=this.e*this.cos_p12*S,B=-k*k/(1-this.es),q=3*this.es*(1-B)*this.sin_p12*this.cos_p12*S/(1-this.es),U=e/w,F=U-B*(1+B)*Math.pow(U,3)/6-q*(1+3*B)*Math.pow(U,4)/24,Y=1-B*F*F/2-U*F*F*F/6,C=Math.asin(this.sin_p12*Math.cos(F)+this.cos_p12*Math.sin(F)*S),p=adjust_lon(this.long0+Math.asin(Math.sin(E)*Math.sin(F)/Math.cos(C))),rt=Math.sin(C),j=Math.atan2((rt-this.es*Y*this.sin_p12)*Math.tan(C),rt*(1-this.es)),t.x=p,t.y=j,t))}var names$6=["Azimuthal_Equidistant","aeqd"];const aeqd={init:init$6,forward:forward$6,inverse:inverse$6,names:names$6};function init$5(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function forward$5(t){var e,r,s,c,p,j,h,u,g=t.x,N=t.y;return s=adjust_lon(g-this.long0),e=Math.sin(N),r=Math.cos(N),c=Math.cos(s),j=this.sin_p14*e+this.cos_p14*r*c,p=1,(j>0||Math.abs(j)<=EPSLN)&&(h=this.a*p*r*Math.sin(s),u=this.y0+this.a*p*(this.cos_p14*e-this.sin_p14*r*c)),t.x=h,t.y=u,t}function inverse$5(t){var e,r,s,c,p,j,h;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),r=asinz(e/this.a),s=Math.sin(r),c=Math.cos(r),j=this.long0,Math.abs(e)<=EPSLN?(h=this.lat0,t.x=j,t.y=h,t):(h=asinz(c*this.sin_p14+t.y*s*this.cos_p14/e),p=Math.abs(this.lat0)-HALF_PI,Math.abs(p)<=EPSLN?(this.lat0>=0?j=adjust_lon(this.long0+Math.atan2(t.x,-t.y)):j=adjust_lon(this.long0-Math.atan2(-t.x,t.y)),t.x=j,t.y=h,t):(j=adjust_lon(this.long0+Math.atan2(t.x*s,e*this.cos_p14*c-t.y*this.sin_p14*s)),t.x=j,t.y=h,t))}var names$5=["ortho"];const ortho={init:init$5,forward:forward$5,inverse:inverse$5,names:names$5};var FACE_ENUM={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},AREA_ENUM={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function init$4(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=HALF_PI-FORTPI/2?this.face=FACE_ENUM.TOP:this.lat0<=-(HALF_PI-FORTPI/2)?this.face=FACE_ENUM.BOTTOM:Math.abs(this.long0)<=FORTPI?this.face=FACE_ENUM.FRONT:Math.abs(this.long0)<=HALF_PI+FORTPI?this.face=this.long0>0?FACE_ENUM.RIGHT:FACE_ENUM.LEFT:this.face=FACE_ENUM.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function forward$4(t){var e={x:0,y:0},r,s,c,p,j,h,u={value:0};if(t.x-=this.long0,this.es!==0?r=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):r=t.y,s=t.x,this.face===FACE_ENUM.TOP)p=HALF_PI-r,s>=FORTPI&&s<=HALF_PI+FORTPI?(u.value=AREA_ENUM.AREA_0,c=s-HALF_PI):s>HALF_PI+FORTPI||s<=-(HALF_PI+FORTPI)?(u.value=AREA_ENUM.AREA_1,c=s>0?s-SPI:s+SPI):s>-(HALF_PI+FORTPI)&&s<=-FORTPI?(u.value=AREA_ENUM.AREA_2,c=s+HALF_PI):(u.value=AREA_ENUM.AREA_3,c=s);else if(this.face===FACE_ENUM.BOTTOM)p=HALF_PI+r,s>=FORTPI&&s<=HALF_PI+FORTPI?(u.value=AREA_ENUM.AREA_0,c=-s+HALF_PI):s<FORTPI&&s>=-FORTPI?(u.value=AREA_ENUM.AREA_1,c=-s):s<-FORTPI&&s>=-(HALF_PI+FORTPI)?(u.value=AREA_ENUM.AREA_2,c=-s-HALF_PI):(u.value=AREA_ENUM.AREA_3,c=s>0?-s+SPI:-s-SPI);else{var g,N,P,_,f,w,C;this.face===FACE_ENUM.RIGHT?s=qsc_shift_lon_origin(s,+HALF_PI):this.face===FACE_ENUM.BACK?s=qsc_shift_lon_origin(s,+SPI):this.face===FACE_ENUM.LEFT&&(s=qsc_shift_lon_origin(s,-HALF_PI)),_=Math.sin(r),f=Math.cos(r),w=Math.sin(s),C=Math.cos(s),g=f*C,N=f*w,P=_,this.face===FACE_ENUM.FRONT?(p=Math.acos(g),c=qsc_fwd_equat_face_theta(p,P,N,u)):this.face===FACE_ENUM.RIGHT?(p=Math.acos(N),c=qsc_fwd_equat_face_theta(p,P,-g,u)):this.face===FACE_ENUM.BACK?(p=Math.acos(-g),c=qsc_fwd_equat_face_theta(p,P,-N,u)):this.face===FACE_ENUM.LEFT?(p=Math.acos(-N),c=qsc_fwd_equat_face_theta(p,P,g,u)):(p=c=0,u.value=AREA_ENUM.AREA_0)}return h=Math.atan(12/SPI*(c+Math.acos(Math.sin(c)*Math.cos(FORTPI))-HALF_PI)),j=Math.sqrt((1-Math.cos(p))/(Math.cos(h)*Math.cos(h))/(1-Math.cos(Math.atan(1/Math.cos(c))))),u.value===AREA_ENUM.AREA_1?h+=HALF_PI:u.value===AREA_ENUM.AREA_2?h+=SPI:u.value===AREA_ENUM.AREA_3&&(h+=1.5*SPI),e.x=j*Math.cos(h),e.y=j*Math.sin(h),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function inverse$4(t){var e={lam:0,phi:0},r,s,c,p,j,h,u,g,N,P={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,s=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),r=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?P.value=AREA_ENUM.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(P.value=AREA_ENUM.AREA_1,r-=HALF_PI):t.x<0&&-t.x>=Math.abs(t.y)?(P.value=AREA_ENUM.AREA_2,r=r<0?r+SPI:r-SPI):(P.value=AREA_ENUM.AREA_3,r+=HALF_PI),N=SPI/12*Math.tan(r),j=Math.sin(N)/(Math.cos(N)-1/Math.sqrt(2)),h=Math.atan(j),c=Math.cos(r),p=Math.tan(s),u=1-c*c*p*p*(1-Math.cos(Math.atan(1/Math.cos(h)))),u<-1?u=-1:u>1&&(u=1),this.face===FACE_ENUM.TOP)g=Math.acos(u),e.phi=HALF_PI-g,P.value===AREA_ENUM.AREA_0?e.lam=h+HALF_PI:P.value===AREA_ENUM.AREA_1?e.lam=h<0?h+SPI:h-SPI:P.value===AREA_ENUM.AREA_2?e.lam=h-HALF_PI:e.lam=h;else if(this.face===FACE_ENUM.BOTTOM)g=Math.acos(u),e.phi=g-HALF_PI,P.value===AREA_ENUM.AREA_0?e.lam=-h+HALF_PI:P.value===AREA_ENUM.AREA_1?e.lam=-h:P.value===AREA_ENUM.AREA_2?e.lam=-h-HALF_PI:e.lam=h<0?-h-SPI:-h+SPI;else{var _,f,w;_=u,N=_*_,N>=1?w=0:w=Math.sqrt(1-N)*Math.sin(h),N+=w*w,N>=1?f=0:f=Math.sqrt(1-N),P.value===AREA_ENUM.AREA_1?(N=f,f=-w,w=N):P.value===AREA_ENUM.AREA_2?(f=-f,w=-w):P.value===AREA_ENUM.AREA_3&&(N=f,f=w,w=-N),this.face===FACE_ENUM.RIGHT?(N=_,_=-f,f=N):this.face===FACE_ENUM.BACK?(_=-_,f=-f):this.face===FACE_ENUM.LEFT&&(N=_,_=f,f=-N),e.phi=Math.acos(-w)-HALF_PI,e.lam=Math.atan2(f,_),this.face===FACE_ENUM.RIGHT?e.lam=qsc_shift_lon_origin(e.lam,-HALF_PI):this.face===FACE_ENUM.BACK?e.lam=qsc_shift_lon_origin(e.lam,-SPI):this.face===FACE_ENUM.LEFT&&(e.lam=qsc_shift_lon_origin(e.lam,+HALF_PI))}if(this.es!==0){var C,E,S;C=e.phi<0?1:0,E=Math.tan(e.phi),S=this.b/Math.sqrt(E*E+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-S*S)/(this.one_minus_f*S)),C&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function qsc_fwd_equat_face_theta(t,e,r,s){var c;return t<EPSLN?(s.value=AREA_ENUM.AREA_0,c=0):(c=Math.atan2(e,r),Math.abs(c)<=FORTPI?s.value=AREA_ENUM.AREA_0:c>FORTPI&&c<=HALF_PI+FORTPI?(s.value=AREA_ENUM.AREA_1,c-=HALF_PI):c>HALF_PI+FORTPI||c<=-(HALF_PI+FORTPI)?(s.value=AREA_ENUM.AREA_2,c=c>=0?c-SPI:c+SPI):(s.value=AREA_ENUM.AREA_3,c+=HALF_PI)),c}function qsc_shift_lon_origin(t,e){var r=t+e;return r<-SPI?r+=TWO_PI:r>+SPI&&(r-=TWO_PI),r}var names$4=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const qsc={init:init$4,forward:forward$4,inverse:inverse$4,names:names$4};var COEFS_X=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],COEFS_Y=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],FXC=.8487,FYC=1.3523,C1=R2D/5,RC1=1/C1,NODES=18,poly3_val=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},poly3_der=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function newton_rapshon(t,e,r,s){for(var c=e;s;--s){var p=t(c);if(c-=p,Math.abs(p)<r)break}return c}function init$3(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function forward$3(t){var e=adjust_lon(t.x-this.long0),r=Math.abs(t.y),s=Math.floor(r*C1);s<0?s=0:s>=NODES&&(s=NODES-1),r=R2D*(r-RC1*s);var c={x:poly3_val(COEFS_X[s],r)*e,y:poly3_val(COEFS_Y[s],r)};return t.y<0&&(c.y=-c.y),c.x=c.x*this.a*FXC+this.x0,c.y=c.y*this.a*FYC+this.y0,c}function inverse$3(t){var e={x:(t.x-this.x0)/(this.a*FXC),y:Math.abs(t.y-this.y0)/(this.a*FYC)};if(e.y>=1)e.x/=COEFS_X[NODES][0],e.y=t.y<0?-HALF_PI:HALF_PI;else{var r=Math.floor(e.y*NODES);for(r<0?r=0:r>=NODES&&(r=NODES-1);;)if(COEFS_Y[r][0]>e.y)--r;else if(COEFS_Y[r+1][0]<=e.y)++r;else break;var s=COEFS_Y[r],c=5*(e.y-s[0])/(COEFS_Y[r+1][0]-s[0]);c=newton_rapshon(function(p){return(poly3_val(s,p)-e.y)/poly3_der(s,p)},c,EPSLN,100),e.x/=poly3_val(COEFS_X[r],c),e.y=(5*r+c)*D2R$1,t.y<0&&(e.y=-e.y)}return e.x=adjust_lon(e.x+this.long0),e}var names$3=["Robinson","robin"];const robin={init:init$3,forward:forward$3,inverse:inverse$3,names:names$3};function init$2(){this.name="geocent"}function forward$2(t){var e=geodeticToGeocentric(t,this.es,this.a);return e}function inverse$2(t){var e=geocentricToGeodetic(t,this.es,this.a,this.b);return e}var names$2=["Geocentric","geocentric","geocent","Geocent"];const geocent={init:init$2,forward:forward$2,inverse:inverse$2,names:names$2};var mode={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},params={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function init$1(){if(Object.keys(params).forEach((function(r){if(typeof this[r]>"u")this[r]=params[r].def;else{if(params[r].num&&isNaN(this[r]))throw new Error("Invalid parameter value, must be numeric "+r+" = "+this[r]);params[r].num&&(this[r]=parseFloat(this[r]))}params[r].degrees&&(this[r]=this[r]*D2R$1)}).bind(this)),Math.abs(Math.abs(this.lat0)-HALF_PI)<EPSLN?this.mode=this.lat0<0?mode.S_POLE:mode.N_POLE:Math.abs(this.lat0)<EPSLN?this.mode=mode.EQUIT:(this.mode=mode.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function forward$1(t){t.x-=this.long0;var e=Math.sin(t.y),r=Math.cos(t.y),s=Math.cos(t.x),c,p;switch(this.mode){case mode.OBLIQ:p=this.sinph0*e+this.cosph0*r*s;break;case mode.EQUIT:p=r*s;break;case mode.S_POLE:p=-e;break;case mode.N_POLE:p=e;break}switch(p=this.pn1/(this.p-p),c=p*r*Math.sin(t.x),this.mode){case mode.OBLIQ:p*=this.cosph0*e-this.sinph0*r*s;break;case mode.EQUIT:p*=e;break;case mode.N_POLE:p*=-(r*s);break;case mode.S_POLE:p*=r*s;break}var j,h;return j=p*this.cg+c*this.sg,h=1/(j*this.sw*this.h1+this.cw),c=(c*this.cg-p*this.sg)*this.cw*h,p=j*h,t.x=c*this.a,t.y=p*this.a,t}function inverse$1(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},r,s,c;c=1/(this.pn1-t.y*this.sw),r=this.pn1*t.x*c,s=this.pn1*t.y*this.cw*c,t.x=r*this.cg+s*this.sg,t.y=s*this.cg-r*this.sg;var p=hypot(t.x,t.y);if(Math.abs(p)<EPSLN)e.x=0,e.y=t.y;else{var j,h;switch(h=1-p*p*this.pfact,h=(this.p-Math.sqrt(h))/(this.pn1/p+p/this.pn1),j=Math.sqrt(1-h*h),this.mode){case mode.OBLIQ:e.y=Math.asin(j*this.sinph0+t.y*h*this.cosph0/p),t.y=(j-this.sinph0*Math.sin(e.y))*p,t.x*=h*this.cosph0;break;case mode.EQUIT:e.y=Math.asin(t.y*h/p),t.y=j*p,t.x*=h;break;case mode.N_POLE:e.y=Math.asin(j),t.y=-t.y;break;case mode.S_POLE:e.y=-Math.asin(j);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var names$1=["Tilted_Perspective","tpers"];const tpers={init:init$1,forward:forward$1,inverse:inverse$1,names:names$1};function init(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function forward(t){var e=t.x,r=t.y,s,c,p,j;if(e=e-this.long0,this.shape==="ellipse"){r=Math.atan(this.radius_p2*Math.tan(r));var h=this.radius_p/hypot(this.radius_p*Math.cos(r),Math.sin(r));if(c=h*Math.cos(e)*Math.cos(r),p=h*Math.sin(e)*Math.cos(r),j=h*Math.sin(r),(this.radius_g-c)*c-p*p-j*j*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=this.radius_g-c,this.flip_axis?(t.x=this.radius_g_1*Math.atan(p/hypot(j,s)),t.y=this.radius_g_1*Math.atan(j/s)):(t.x=this.radius_g_1*Math.atan(p/s),t.y=this.radius_g_1*Math.atan(j/hypot(p,s)))}else this.shape==="sphere"&&(s=Math.cos(r),c=Math.cos(e)*s,p=Math.sin(e)*s,j=Math.sin(r),s=this.radius_g-c,this.flip_axis?(t.x=this.radius_g_1*Math.atan(p/hypot(j,s)),t.y=this.radius_g_1*Math.atan(j/s)):(t.x=this.radius_g_1*Math.atan(p/s),t.y=this.radius_g_1*Math.atan(j/hypot(p,s))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function inverse(t){var e=-1,r=0,s=0,c,p,j,h;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*hypot(1,s)):(r=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*hypot(1,r));var u=s/this.radius_p;if(c=r*r+u*u+e*e,p=2*this.radius_g*e,j=p*p-4*c*this.C,j<0)return t.x=Number.NaN,t.y=Number.NaN,t;h=(-p-Math.sqrt(j))/(2*c),e=this.radius_g+h*e,r*=h,s*=h,t.x=Math.atan2(r,e),t.y=Math.atan(s*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(r=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+r*r)),c=r*r+s*s+e*e,p=2*this.radius_g*e,j=p*p-4*c*this.C,j<0)return t.x=Number.NaN,t.y=Number.NaN,t;h=(-p-Math.sqrt(j))/(2*c),e=this.radius_g+h*e,r*=h,s*=h,t.x=Math.atan2(r,e),t.y=Math.atan(s*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var names=["Geostationary Satellite View","Geostationary_Satellite","geos"];const geos={init,forward,inverse,names};function includedProjections(t){t.Proj.projections.add(tmerc),t.Proj.projections.add(etmerc),t.Proj.projections.add(utm),t.Proj.projections.add(sterea),t.Proj.projections.add(stere),t.Proj.projections.add(somerc),t.Proj.projections.add(omerc),t.Proj.projections.add(lcc),t.Proj.projections.add(krovak),t.Proj.projections.add(cass),t.Proj.projections.add(laea),t.Proj.projections.add(aea),t.Proj.projections.add(gnom),t.Proj.projections.add(cea),t.Proj.projections.add(eqc),t.Proj.projections.add(poly),t.Proj.projections.add(nzmg),t.Proj.projections.add(mill),t.Proj.projections.add(sinu),t.Proj.projections.add(moll),t.Proj.projections.add(eqdc),t.Proj.projections.add(vandg),t.Proj.projections.add(aeqd),t.Proj.projections.add(ortho),t.Proj.projections.add(qsc),t.Proj.projections.add(robin),t.Proj.projections.add(geocent),t.Proj.projections.add(tpers),t.Proj.projections.add(geos)}proj4.defaultDatum="WGS84";proj4.Proj=Projection;proj4.WGS84=new proj4.Proj("WGS84");proj4.Point=Point;proj4.toPoint=common;proj4.defs=defs;proj4.nadgrid=nadgrid;proj4.transform=transform;proj4.mgrs=mgrs;proj4.version="__VERSION__";includedProjections(proj4);const sourceDataTable=sourceTable,convertedDataTable=convertedTable;let map=L$1.map("map",{renderer:L$1.canvas(),preferCanvas:!0}).setView([35.6580992222,139.7413574722],15);L$1.control.layers(baseMaps).addTo(map);gsiStandard.addTo(map);proj4.defs(proj4Defs);window.addEventListener("resize",()=>{const t=Math.max(document.querySelector(".container-fluid").clientWidth,window.innerWidth||0);t<992?(sourceDataTable.setWidth(0,180),sourceDataTable.setWidth(1,180),sourceDataTable.showIndex(),convertedTable.setWidth(0,180),convertedTable.setWidth(1,180),convertedTable.showIndex()):t<=1400?(sourceDataTable.setWidth(0,110),sourceDataTable.setWidth(1,110),sourceDataTable.hideIndex(),convertedTable.setWidth(0,110),convertedTable.setWidth(1,110),convertedTable.hideIndex()):t<=1800?(sourceDataTable.setWidth(0,110),sourceDataTable.setWidth(1,110),sourceDataTable.showIndex(),convertedTable.setWidth(0,110),convertedTable.setWidth(1,110),convertedTable.showIndex()):(sourceDataTable.setWidth(0,180),sourceDataTable.setWidth(1,180),sourceDataTable.showIndex(),convertedTable.setWidth(0,180),convertedTable.setWidth(1,180),convertedTable.showIndex())});const noPrintRadioBtn=["sourceDataType","sourceGeodeticSystem","convertToDataType","convertToGeodeticSystem"];document.getElementsByName("sourceDataType").forEach(t=>{t.addEventListener("input",e=>{const r=document.getElementById("sourceZoneNo");e.target.value==="BL"?(r.options[0].selected=!0,r.disabled=!0):(r.disabled=!1,r.options[1].selected=!0,r.options[0].disabled=!0)})});document.getElementsByName("convertToDataType").forEach(t=>{t.addEventListener("input",e=>{const r=document.getElementById("convertZoneNo");e.target.value==="BL"?(r.options[0].selected=!0,r.disabled=!0):(r.disabled=!1,r.options[1].selected=!0,r.options[0].disabled=!0),console.debug(e.target.value)})});document.getElementById("openGeodeticSystemDialog").addEventListener("click",()=>{const t=document.getElementById("geodeticSystem");t.showModal(),t.addEventListener("click",e=>{e.target.id==="geodeticSystem"&&t.close()})});document.getElementById("closeGeodeticSystemDialog").addEventListener("click",()=>{document.getElementById("geodeticSystem").close()});document.getElementById("openZoneNoDialog").addEventListener("click",()=>{const t=document.getElementById("zoneNoDialog");t.showModal(),t.addEventListener("click",e=>{e.target.id==="zoneNoDialog"&&t.close()})});document.getElementById("closeZoneNoDialog").addEventListener("click",()=>{document.getElementById("zoneNoDialog").close()});document.getElementById("openConsiderationsDialog").addEventListener("click",()=>{const t=document.getElementById("considerationsDialog");t.showModal(),t.addEventListener("click",e=>{e.target.id==="considerationsDialog"&&t.close()})});document.getElementById("closeConsiderationsDialog").addEventListener("click",()=>{document.getElementById("considerationsDialog").close()});document.getElementById("dataConvertBtn").addEventListener("click",t=>{const e=collectFormData(),r=createConvertParameter(e.sourceGeodeticSystem,e.convertToGeodeticSystem,e.sourceZoneNo,e.convertZoneNo),s=sourceDataCleansing(sourceDataTable.getJson(!1)),c=convertData(r,s);convertedTable.setData(JSON.stringify(c)),t.preventDefault()});document.getElementById("clearSourceDataTableBtn").addEventListener("click",t=>{const e=[[,]];sourceDataTable.setData(e),t.preventDefault()});document.getElementById("clearConvertedDataTableBtn").addEventListener("click",t=>{const e=[[,]];convertedDataTable.setData(e),t.preventDefault()});window.addEventListener("beforeprint",t=>{preparePrint()});window.addEventListener("afterprint",t=>{afterPrint()});document.getElementById("addMarkerBtn").addEventListener("click",t=>{if(sourceDataTable.getData(!1).length>1){const e=document.getElementById("selectMarkerIcon"),r=document.getElementById("selectLineColor"),s=collectFormData(),c=createConvertParameter(s.sourceGeodeticSystem,"JGD2011",s.sourceZoneNo,"0"),p=sourceDataCleansing(sourceDataTable.getJson(!1)),j=convertData(c,p);let h="";switch(e.value){case"redPinMarker":h=pinMarkers.red;break;case"bluePinMarker":h=pinMarkers.blue;break;case"yellowPinMarker":h=pinMarkers.yellow;break;default:h=pinMarkers.green;break}j.forEach(f=>{try{L$1.marker([Number(f[0]),Number(f[1])],{icon:h}).addTo(map).on("click",w=>{w.target.remove()})}catch(w){displayErrorMessage(w)}try{r.value!="no"&&L$1.polyline(j,{color:r.value}).addTo(map).on("click",w=>{w.target.remove()})}catch(w){displayErrorMessage(w)}});let u=[];j.forEach(f=>{let w=[f[0],f[1]];u.push(w)});let g=transpose(u);const N=L$1.latLng([Math.min(...g[0]),Math.min(...g[1])]),P=L$1.latLng([Math.max(...g[0]),Math.max(...g[1])]),_=L$1.latLngBounds(N,P);map.fitBounds(_)}t.preventDefault()});document.getElementById("removeMarkerBtn").addEventListener("click",t=>{map.eachLayer(e=>{e._icon!=null&&map.removeLayer(e),e._bounds!=null&&map.removeLayer(e),e._mRadius!=null&&map.removeLayer(e)}),map.eachLayer(e=>console.log(e)),t.preventDefault()});document.getElementById("printPreviewBtn").addEventListener("input",t=>{t.target.checked?preparePrint():afterPrint()});document.getElementById("zoomRange").addEventListener("input",t=>{document.getElementById("map").style.transform="scale("+t.target.value+")",document.getElementById("zoomRangeValue").value=t.target.value+"x"});function collectFormData(){const t=document.getElementsByName("sourceDataType"),e=document.getElementsByName("convertToDataType"),r=document.getElementsByName("sourceGeodeticSystem"),s=document.getElementsByName("convertToGeodeticSystem");let c={};return t.forEach(p=>{p.checked&&(c.sourceDataType=p.value)}),e.forEach(p=>{p.checked&&(c.convertToDataType=p.value)}),r.forEach(p=>{p.checked&&(c.sourceGeodeticSystem=p.value)}),s.forEach(p=>{p.checked&&(c.convertToGeodeticSystem=p.value)}),c.sourceZoneNo=document.getElementById("sourceZoneNo").value,c.convertZoneNo=document.getElementById("convertZoneNo").value,c}function createConvertParameter(t,e,r,s){let c={};return c.fromProjection=geodeticSystems[t][r],c.toProjection=geodeticSystems[e][s],c}function sourceDataCleansing(t){let e=[];return t.forEach(r=>{isValidNumber(r.x_latitude)&&isValidNumber(r.y_longitude)&&e.push(r)}),e}function convertData(t,e){let r=[];return e.forEach(s=>{try{let c=proj4(t.fromProjection,t.toProjection,[Number(s.y_longitude),Number(s.x_latitude)]);r.push([c[1],c[0]])}catch(c){displayErrorMessage(c)}}),r}function preparePrint(){sourceDataTable.setWidth(0,110),sourceDataTable.setWidth(1,110),sourceDataTable.hideIndex(),document.querySelectorAll(".d-print-none").forEach(e=>{e.classList.add("d-none")}),noPrintRadioBtn.forEach(e=>{document.getElementsByName(e).forEach(r=>{r.checked||r.parentElement.classList.add("d-none")})})}function afterPrint(){sourceDataTable.setWidth(0,180),sourceDataTable.setWidth(1,180),sourceDataTable.showIndex(),document.querySelectorAll(".d-print-none").forEach(e=>{e.classList.remove("d-none")}),noPrintRadioBtn.forEach(e=>{document.getElementsByName(e).forEach(r=>{r.checked||r.parentElement.classList.remove("d-none")})})}map.addEventListener("click",t=>{const e=document.getElementById("inputDiameter");e.showModal(),document.getElementById("radius").select(),document.getElementById("latitude").value=t.latlng.lat,document.getElementById("longitude").value=t.latlng.lng,e.addEventListener("click",r=>{r.target.id==="inputDiameter"&&e.close()})});document.getElementById("addCircleToMap").addEventListener("click",t=>{let e=document.getElementById("latitude").value,r=document.getElementById("longitude").value,s=document.getElementById("selectLineColor"),c="red";s.value!="no"&&(c=s.value);let p=document.getElementById("radius"),j=0;Number(p.value)>=0&&(j=Number(p.value));let h={radius:j,color:c,opacity:1,fill:!0,fillOpacity:.05,bubblingMouseEvents:!1};L$1.circle([Number(e),Number(r)],h).addTo(map).on("click",u=>{u.target.remove()}),p.value="0",document.getElementById("inputDiameter").close(),t.preventDefault()});document.getElementById("cancelAddCircle").addEventListener("click",t=>{document.getElementById("inputDiameter").close(),t.preventDefault()});document.getElementById("inputDiameter").addEventListener("close",t=>{document.getElementById("radius").value="0",t.preventDefault()});window.onerror=function t(e){return document.getElementById("errorMessage").innerText=e,!1};function displayErrorMessage(t){document.getElementById("errorMessage").textContent=t.message,document.getElementById("errorMessageWrap").classList.toggle("visually-hidden"),console.error(t)}
